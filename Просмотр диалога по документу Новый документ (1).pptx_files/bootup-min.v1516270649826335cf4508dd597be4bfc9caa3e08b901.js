define("bootup-min",["Core/detection","Core/IoC","Core/Deferred","Core/ParallelDeferred","Core/EventBus","Core/core-instance","Core/Context","Core/CommandDispatcher","Core/helpers/Array/uniq","Core/helpers/Hcontrol/doAutofocus","Core/helpers/Hcontrol/getChildContainers","Core/Serializer","Core/helpers/markup-helpers","Core/moduleStubs","is!compatibleLayer?Lib/Control/Control.compatible","is!compatibleLayer?Lib/Control/AreaAbstract/AreaAbstract.compatible","is!compatibleLayer?Lib/Control/BaseCompatible/BaseCompatible","is!compatibleLayer?View/Runner/Text/markupGenerator","Core/tmpl/js/helpers/decorators"],function(e,t,o,n,r,a,i,l,s,u,f,c,d,p){"use strict";var m=[],C=function(){return this||(0,eval)("this")}();function g(){if(e.isMobileSafari)setTimeout(window.close,301);else window.close()}function b(e){if(a.instanceOfModule(e,"Deprecated/Controls/RecordArea/RecordArea")&&!window.previousPageURL)e.close=function(){};l.declareCommand(e,"close",e.close?e.close:function(){g()})}function h(e,t){return e.find("[data-component]").toArray().filter(function(e){if(-1===t.indexOf(e))return e.additionalControl=true,true})}function v(e,o){var n=$(document),a=f(n,"[data-component]",function(e){return $(e).parent("#contentArea").length||e.hasAttribute("page-content")}).reduce(function(e,t){var o=$(t).find("[config]");t.__minCfg=-1;for(var n=0;n<o.length;n++){var r=o.eq(n).attr("config");if(/^cfg-[0-9]+$/.test(r)){t.__minCfg=parseInt(r.split("-")[1],10);break}}return e.push(t),e},[]),l=h(n,a=a.sort(function(e,t){if(-1===e.__minCfg&&-1===t.__minCfg)return 0;else if(-1===e.__minCfg)return 1;else if(-1===t.__minCfg)return-1;else return e.__minCfg-t.__minCfg})),c=a.concat(l).reduce(function(t,o){if(!o.wsControl){var n=o.getAttribute("data-component"),r="js!"+n,a;if("SBIS3.ONLINE.OnlineBaseInnerMinCoreView"===n)i.global.setValue("bootupReadyFlagForGenerateId",true);if(!o.additionalControl)a=function(){var t=d.parseMarkup(o)||{},a=new(C.requirejs(r))(t);if(a._template)if(a.isBuildVDom()){var i=t.element[0]?t.element[0]:t.element;if(i.wsControl=a,!a.VDOMReady){if(a.VDOMReady=!!a.reviveSuperOldControls,a._beforeMount)a._beforeMount(t);if(a.saveOptions)a.saveOptions(t);else a._options=t;if(a.mountToDom)a.mountToDom($(i),t);else a.setContainer($(i))}}else if(a.setParent(null),"function"===typeof a.init)a.init();if(e&&a.getReadyDeferred)e.push(a.getReadyDeferred());if(m.indexOf(n)>-1)b(a)},t.creators.push(a);t.modules.push(r)}return t},{creators:[],modules:[]});return p.require(s(c.modules)).addCallback(function(){var e;if("string"===typeof window.componentOptions){var t=(window.componentOptions||"{}").replace(/\!\@\#\$\^COMMENT_START\^\$\#\@\!/g,"\x3c!--");e=new o,d.mergeConfigStorage(JSON.parse(t,e.deserialize))}function n(e){if(u.findAutofocus(e.target).length)a=u(e.target)}var r=$("body"),a=false;if(r.on("onReady",n),c.creators.forEach(function(e){e()}),r.off("onReady",n),!a)u($("[data-component]").eq(0))}).addErrback(function(e){t.resolve("ILogger").error("bootup",e&&e.message||e)}).addBoth(function(){e&&e.done().getResult().addCallback(function(){r.globalChannel().setEventQueueSize("bootupReady",1),r.globalChannel().notify("bootupReady"),i.global.setValue("bootupReadyFlagForGenerateId",true)})})}function y(e,t,r,a){$(document).ready(function(){var l=new n({stopOnFirstError:false}),s=i.global.getValue("editParams")||i.global.getValue("printParams"),u=[];if(0===arguments.length||1==arguments.length&&"string"!==typeof arguments[0])if($(".ws-root-template").each(function(){var e=$(this),t=e.data("template-name");if((0==t.indexOf("js!")||t.indexOf("/")>-1)&&void 0==s){var o=t.replace("js!","");m.push(o),e.attr("data-component",o)}else u.push({templateName:t,ctr:e})}),u.length>0)require(["old-bootup"],function(e){for(var t=0,n=u.length;t<n;t++){var r=new o;l.push(r),e(u[t].templateName,u[t].ctr,null,r)}v(l,a)});else v(l,a);else require(["old-bootup"],function(o){o(e,t,r)})})}return function(e,t,o,n){y.call(this,e,t,o,n||c)}});
//# sourceMappingURL=bootup-min.js.map