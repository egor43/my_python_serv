(function(){
var global = (function(){ return this || (0, eval)('this'); }());
var require = global.requirejs;
var exports = {};
var deps = ['Core/core-extend', 'WS.Data/Entity/OptionsMixin', 'WS.Data/Entity/ICloneable', 'Core/core-merge', 'require', 'WS.Data/Entity/Abstract', 'WS.Data/Entity/SerializableMixin', 'WS.Data/Entity/ObservableMixin', 'WS.Data/Entity/ReadWriteMixin', 'WS.Data/Adapter/Json', 'WS.Data/Di', 'Core/Deferred', 'WS.Data/Utils', 'Core/helpers/generate-helpers', 'Transport/RPCJSON', 'WS.Data/Adapter/Sbis', 'Core/ParallelDeferred', 'Core/IoC', 'WS.Data/Entity/Model', 'WS.Data/Collection/RecordSet', 'Lib/Storage/LocalStorage', 'WS.Data/Entity/Record', 'Transport/XHRTransport', 'Core/constants', 'Lib/File/LocalFile'];

Object.defineProperty(exports,'WS.Data/Query/Join',{configurable:true,get:function(){delete exports['WS.Data/Query/Join'];return exports['WS.Data/Query/Join']=function(t,e){'use strict';return t.extend([e],{_moduleName:'WS.Data/Query/Join',_$resource:'',_$as:'',_$on:{},_$select:{},_$inner:true,constructor:function t(n){t.superclass.constructor.call(this,n),e.constructor.call(this,n);},getResource:function(){return this._$resource;},getAs:function(){return this._$as;},getOn:function(){return this._$on;},getSelect:function(){return this._$select;},isInner:function(){return this._$inner;}});}(require(deps[0]),require(deps[1]));}});
Object.defineProperty(exports,'WS.Data/Source/ISource',{configurable:true,get:function(){delete exports['WS.Data/Source/ISource'];return exports['WS.Data/Source/ISource']=function(){'use strict';var e={getEndpoint:function(){throw new Error('Method must be implemented');},getBinding:function(){throw new Error('Method must be implemented');},setBinding:function(e){throw new Error('Method must be implemented');},getAdapter:function(){throw new Error('Method must be implemented');},getModel:function(){throw new Error('Method must be implemented');},setModel:function(e){throw new Error('Method must be implemented');},getListModule:function(){throw new Error('Method must be implemented');},setListModule:function(e){throw new Error('Method must be implemented');},getIdProperty:function(){throw new Error('Method must be implemented');},setIdProperty:function(e){throw new Error('Method must be implemented');},getOrderProperty:function(){throw new Error('Method must be implemented');},setOrderProperty:function(e){throw new Error('Method must be implemented');},getOptions:function(){throw new Error('Method must be implemented');},setOptions:function(e){throw new Error('Method must be implemented');},create:function(e){throw new Error('Method must be implemented');},read:function(e,t){throw new Error('Method must be implemented');},update:function(e,t){throw new Error('Method must be implemented');},destroy:function(e,t){throw new Error('Method must be implemented');},merge:function(e,t){throw new Error('Method must be implemented');},copy:function(e,t){throw new Error('Method must be implemented');},query:function(e){throw new Error('Method must be implemented');},call:function(e,t){throw new Error('Method must be implemented');},move:function(e,t,r){throw new Error('Method must be implemented');}};return e.MOVE_POSITION={on:'on',before:'before',after:'after'},e;}();}});
Object.defineProperty(exports,'WS.Data/Source/Provider/INotify',{configurable:true,get:function(){delete exports['WS.Data/Source/Provider/INotify'];return exports['WS.Data/Source/Provider/INotify']=function(){'use strict';return{getEventsChannel:function(e){throw new Error('Method must be implemented');}};}();}});
Object.defineProperty(exports,'WS.Data/Source/Provider/IChannel',{configurable:true,get:function(){delete exports['WS.Data/Source/Provider/IChannel'];return exports['WS.Data/Source/Provider/IChannel']=function(){'use strict';return{};}();}});
Object.defineProperty(exports,'WS.Data/Source/Provider/IAbstract',{configurable:true,get:function(){delete exports['WS.Data/Source/Provider/IAbstract'];return exports['WS.Data/Source/Provider/IAbstract']=function(){'use strict';return{call:function(e,t){throw new Error('Method must be implemented');}};}();}});
Object.defineProperty(exports,'WS.Data/Query/IQueryable',{configurable:true,get:function(){delete exports['WS.Data/Query/IQueryable'];return exports['WS.Data/Query/IQueryable']=function(){'use strict';return{getQuery:function(){throw new Error('Method must be implemented');},setQuery:function(e){throw new Error('Method must be implemented');},fetch:function(){throw new Error('Method must be implemented');}};}();}});
Object.defineProperty(exports,'WS.Data/Source/Provider/IRpc',{configurable:true,get:function(){delete exports['WS.Data/Source/Provider/IRpc'];return exports['WS.Data/Source/Provider/IRpc']=function(){'use strict';return{_wsDataSourceProviderIRpc:true,call:function(e,r){throw new Error('Method must be implemented');}};}();}});
Object.defineProperty(exports,'WS.Data/Query/Order',{configurable:true,get:function(){delete exports['WS.Data/Query/Order'];return exports['WS.Data/Query/Order']=function(e,r){'use strict';var t=e.extend([r],{_moduleName:'WS.Data/Query/Order',_$selector:'',_$order:false,constructor:function e(t){e.superclass.constructor.call(this,t),r.constructor.call(this,t);var s=this._$order;if('string'===typeof s)s=s.toUpperCase();switch(s){case e.SORT_DESC:case e.SORT_DESC_STR:this._$order=e.SORT_DESC;break;default:this._$order=e.SORT_ASC;}},getSelector:function(){return this._$selector;},getOrder:function(){return this._$order;}});return t.SORT_ASC=false,t.SORT_DESC=true,t.SORT_ASC_STR='ASC',t.SORT_DESC_STR='DESC',t;}(require(deps[0]),require(deps[1]));}});
Object.defineProperty(exports,'WS.Data/Source/DataSet',{configurable:true,get:function(){delete exports['WS.Data/Source/DataSet'];return exports['WS.Data/Source/DataSet']=function(t,e,r,i){'use strict';var a=t.extend([e,r],{_moduleName:'WS.Data/Source/DataSet',_$adapter:'adapter.json',_$rawData:null,_$model:'entity.model',_$listModule:'collection.recordset',_$idProperty:'',_$itemsProperty:'',_$totalProperty:'',_$writable:true,get writable(){return this._$writable;},set writable(t){this._$writable=!!t;},constructor:function t(r){t.superclass.constructor.call(this,r),e.constructor.call(this,r);},getSource:function(){throw new Error('Method'+this._moduleName+'::getSource() is deprecated.');},getAdapter:function(){if('string'===typeof this._$adapter)this._$adapter=i.create(this._$adapter);return this._$adapter;},getModel:function(){return this._$model;},setModel:function(t){this._$model=t;},getListModule:function(){return this._$listModule;},setListModule:function(t){this._$listModule=t;},getIdProperty:function(){return this._$idProperty;},setIdProperty:function(t){this._$idProperty=t;},getItemsProperty:function(){return this._$itemsProperty;},setItemsProperty:function(t){this._$itemsProperty=t;},getTotalProperty:function(){return this._$totalProperty;},setTotalProperty:function(t){this._$totalProperty=t;},getAll:function(t){if(this._checkAdapter(),void 0===t)t=this._$itemsProperty;var e=this._getListInstance(this._getDataProperty(t));if(this._$totalProperty&&e.getMetaData instanceof Function){var r=e.getMetaData();r.more=this.getTotal(),e.setMetaData(r);}return e;},getTotal:function(t){if(void 0===t)t=this._$totalProperty;return this._getDataProperty(t);},getRow:function(t){if(this._checkAdapter(),void 0===t)t=this._$itemsProperty;var e=this._getDataProperty(t);if('recordset'===this.getAdapter().getProperty(e,'_type')){var r=this.getAdapter().forTable(e);if(r.getCount()>0)return this._getModelInstance(r.at(0));}else return this._getModelInstance(e);return;},getScalar:function(t){if(void 0===t)t=this._$itemsProperty;return this._getDataProperty(t);},hasProperty:function(t){return t?void 0!==this._getDataProperty(t):false;},getProperty:function(t){return this._getDataProperty(t);},getRawData:function(){return this._$rawData;},setRawData:function(t){this._$rawData=t;},_getDataProperty:function(t){return this._checkAdapter(),t?this.getAdapter().getProperty(this._$rawData,t):this._$rawData;},_getModelInstance:function(t){if(!this._$model)throw new Error('Model is not defined');return i.create(this._$model,{writable:this._$writable,rawData:t,adapter:this._$adapter,idProperty:this._$idProperty});},_getListInstance:function(t){return i.create(this._$listModule,{writable:this._$writable,rawData:t,adapter:this._$adapter,model:this._$model,idProperty:this._$idProperty});},_checkAdapter:function(){if(!this.getAdapter())throw new Error('Adapter is not defined');}});return i.register('source.dataset',a),a;}(require(deps[5]),require(deps[1]),require(deps[6]),require(deps[10]),require(deps[18]),require(deps[19]));}});
Object.defineProperty(exports,'WS.Data/Query/Query',{configurable:true,get:function(){delete exports['WS.Data/Query/Query'];return exports['WS.Data/Query/Query']=function(t,e,r,i,n,s){'use strict';var o=s.extend([t,e],{_moduleName:'WS.Data/Query/Query',_select:null,_from:'',_as:'',_join:null,_where:null,_groupBy:null,_orderBy:null,_offset:0,_limit:void 0,_meta:null,constructor:function t(r){this._select={},this._join=[],this._where={},this._groupBy=[],this._orderBy=[],this._meta={},t.superclass.constructor.call(this,r),e.constructor.call(this,r);},clone:function(){var t=new o(),e=function(t){if(t._wsDataEntityICloneable)return t.clone();else if(t&&'object'===typeof t)return n({},t,{clone:true});return t;};return t._select=e(this._select),t._from=this._from,t._as=this._as,t._join=this._join.slice(),t._where=e(this._where),t._groupBy=this._groupBy.slice(),t._orderBy=this._orderBy.slice(),t._offset=this._offset,t._limit=this._limit,t._meta=e(this._meta),t;},clear:function(){return this._select={},this._from='',this._as='',this._join=[],this._where={},this._groupBy=[],this._orderBy=[],this._offset=0,this._limit=void 0,this._meta={},this;},getSelect:function(){return this._select;},select:function(t){return this._select=this._parseSelectExpression(t),this;},getFrom:function(){return this._from;},getAs:function(){return this._as;},from:function(t,e){return this._from=t,this._as=e,this;},getJoin:function(){return this._join;},join:function(t,e,i,n){if('string'===typeof t)t=t.split(' ');if(!(t instanceof Array))throw new Error('Invalid argument "resource"');return this._join.push(new r({resource:t.shift(),as:t.shift()||'',on:e,select:this._parseSelectExpression(i),inner:void 0===n?true:n})),this;},getWhere:function(){return this._where;},where:function(t){var e=typeof(t=t||{});if('object'!==e&&'function'!==e)throw new Error('Invalid argument');return this._where=t,this;},getOrderBy:function(){return this._orderBy;},orderBy:function(t,e){if(void 0===e)e=true;if(this._orderBy=[],'object'===typeof t){var r=function(t){if(!t)return;for(var e in t)if(t.hasOwnProperty(e))this._orderBy.push(new i({selector:e,order:t[e]}));};if(t instanceof Array)for(var n=0;n<t.length;n++)r.call(this,t[n]);else r.call(this,t);}else if(t)this._orderBy.push(new i({selector:t,order:e}));return this;},getGroupBy:function(){return this._groupBy;},groupBy:function(t){if('string'===typeof t)t=[t];if(!(t instanceof Array))throw new Error('Invalid argument');return this._groupBy=t,this;},getOffset:function(){return this._offset;},offset:function(t){return this._offset=parseInt(t)||0,this;},getLimit:function(){return this._limit;},limit:function(t){return this._limit=t,this;},getMeta:function(){return this._meta;},meta:function(t){if(t=t||{},'object'!==typeof t)throw new Error('Invalid argument');return this._meta=t,this;},_parseSelectExpression:function(t){if('string'===typeof t)t=t.split(/[ ,]/);if(t instanceof Array){var e=t;t={};for(var r=0;r<e.length;r++)t[e[r]]=e[r];}if('object'!==typeof t)throw new Error('Invalid argument');return t;}});return o;}(require(deps[2]),require(deps[1]),exports['WS.Data/Query/Join'],exports['WS.Data/Query/Order'],require(deps[3]),require(deps[0]));}});
Object.defineProperty(exports,'WS.Data/Source/Base',{configurable:true,get:function(){delete exports['WS.Data/Source/Base'];return exports['WS.Data/Source/Base']=function(t,e,r,n,i,o,a,s,d,u,c){'use strict';return s=null,r.extend([e,n,i,o],{_moduleName:'WS.Data/Source/Base',_$endpoint:null,_$binding:{create:'create',read:'read',update:'update',destroy:'delete',query:'query',copy:'copy',merge:'merge',move:'move'},_$adapter:'adapter.json',_$model:'entity.model',_$listModule:'collection.recordset',_$idProperty:'',_$orderProperty:'',_$options:{debug:false},_additionalDependencies:['WS.Data/Source/DataSet','WS.Data/Entity/Model','WS.Data/Collection/RecordSet'],_dataSetModule:'source.dataset',_dataSetItemsProperty:'',_dataSetTotalProperty:'',_writable:a.writable,constructor:function t(e){if(e=e||{},this._$endpoint=this._$endpoint||{},'string'===typeof e.endpoint)e.endpoint={contract:e.endpoint};if(e.endpoint instanceof Object)this._$endpoint=c(e.endpoint,this._$endpoint,{preferSource:true,clone:true});if(e.binding instanceof Object)this._$binding=c(e.binding,this._$binding||{},{preferSource:true,clone:true});if(e.options instanceof Object)this._$options=c(e.options,this._$options||{},{preferSource:true,clone:true});if(e.dataSetTotalProperty)this._dataSetTotalProperty=e.dataSetTotalProperty;t.superclass.constructor.call(this,e),n.constructor.call(this,e),o.constructor.call(this,e);},getEndpoint:function(){return c({},this._$endpoint,{clone:true});},getBinding:function(){return c({},this._$binding,{clone:true});},setBinding:function(t){this._$binding=t;},getAdapter:function(){if('string'===typeof this._$adapter)this._$adapter=d.create(this._$adapter);return this._$adapter;},setAdapter:function(){throw new Error(this._moduleName+'::setAdapter() - method has been removed in 3.17.300 as deprecated. You should inject adapter into constructor use "adapter" option.');},getModel:function(){return this._$model;},setModel:function(t){this._$model=t;},getListModule:function(){return this._$listModule;},setListModule:function(t){this._$listModule=t;},getIdProperty:function(){return this._$idProperty;},setIdProperty:function(t){this._$idProperty=t;},getOrderProperty:function(){return this._$orderProperty;},setOrderProperty:function(t){this._$orderProperty=t;},getOptions:function(){return c({},this._$options,{clone:true});},setOptions:function(t){t=c({},t,{clone:true}),this._$options=c(t,this._$options,{clone:true,preferSource:true});},_prepareCreateResult:function(t){return this._getModelInstance(t);},_prepareReadResult:function(t){return this._getModelInstance(t);},_prepareUpdateResult:function(t,e){var r=this.getIdProperty(),n=function(t,e){if(e&&r&&!t.get(r))t.set(r,e);t.acceptChanges();};if(this._isListInstance(t))t.each(function(t,r){n(t,e?e[r]:void 0);});else n(t,e);return e;},_prepareQueryResult:function(t){return this._prepareCallResult(t);},_prepareCallResult:function(t){return this._getDataSetInstance({rawData:t,itemsProperty:this._dataSetItemsProperty,totalProperty:this._dataSetTotalProperty});},_getIdPropertyByData:function(t){return this.getAdapter().getKeyField(t)||'';},_loadAdditionalDependencies:function(e){var r=this._additionalDependencies,n=r.reduce(function(e,r){return e&&t.defined(r);},true),i=new u();if(e=e||function(t){t.callback();},n)e(i);else t(r,function(){e(i);},function(t){i.errback(t);});return i;},_getModelInstance:function(t){return d.create(this._$model,{writable:this._writable,rawData:t,adapter:this.getAdapter(),idProperty:this.getIdProperty()});},_isModelInstance:function(t){return t&&t._wsDataEntityIObject&&t._wsDataEntityFormattableMixin;},_getListInstance:function(t){return d.create(this._$listModule,{writable:this._writable,rawData:t,adapter:this._$adapter,idProperty:this.getIdProperty()});},_isListInstance:function(t){return t&&t._wsDataCollectionIList&&t._wsDataEntityFormattableMixin;},_getDataSetInstance:function(t){return new d.create(this._dataSetModule,c({writable:this._writable,adapter:this.getAdapter(),model:this.getModel(),listModule:this.getListModule(),idProperty:this.getIdProperty()||this._getIdPropertyByData(t.rawData||null)},t,{rec:false}));},_each:function(t,e,r){var n=this.getAdapter().forTable(t),i,o;for(i=0,o=n.getCount();i<o;i++)e.call(r||this,n.at(i),i);}});}(require,exports['WS.Data/Source/ISource'],require(deps[5]),require(deps[1]),require(deps[6]),require(deps[7]),require(deps[8]),require(deps[9]),require(deps[10]),require(deps[11]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Source/Provider/SbisBusinessLogic',{configurable:true,get:function(){delete exports['WS.Data/Source/Provider/SbisBusinessLogic'];return exports['WS.Data/Source/Provider/SbisBusinessLogic']=function(t,e,r,n,i){'use strict';var o=i.extend([t,e],{_moduleName:'WS.Data/Source/Provider/SbisBusinessLogic',_$endpoint:null,_$transport:r,_nameSpaceSeparator:'.',constructor:function t(r){this._$endpoint={},e.constructor.call(this,r);},getEndpoint:function(){return this._$endpoint;},call:function(t,e){t+='';var r=this.getEndpoint(),n=this._$transport;if(!(t.indexOf('.')>-1)&&r.contract)t=r.contract+this._nameSpaceSeparator+t;return new n({serviceUrl:r.address}).callMethod(t,e);}});return n.register('source.provider.sbis-business-logic',o),o;}(exports['WS.Data/Source/Provider/IRpc'],require(deps[1]),require(deps[14]),require(deps[10]),require(deps[0]));}});
Object.defineProperty(exports,'WS.Data/Source/SbisDataSet',{configurable:true,get:function(){delete exports['WS.Data/Source/SbisDataSet'];return exports['WS.Data/Source/SbisDataSet']=function(a,t){'use strict';var e=a.extend({_moduleName:'WS.Data/Source/SbisDataSet',_$adapter:'adapter.sbis',_$totalProperty:'n'});return t.register('source.sbis-dataset',e),e;}(exports['WS.Data/Source/DataSet'],require(deps[10]),require(deps[15]));}});
Object.defineProperty(exports,'WS.Data/Source/Remote',{configurable:true,get:function(){delete exports['WS.Data/Source/Remote'];return exports['WS.Data/Source/Remote']=function(e,t,r,n,i,a){'use strict';var o={PAGE:'Page',OFFSET:'Offset'},s=function e(t){return null===t||void 0===t;},u=function e(t){return''===t||s(t);},d;return d=t.extend({_moduleName:'WS.Data/Source/Remote',_$provider:null,_$options:a({updateOnlyChanged:false,navigationType:o.PAGE},t.prototype._$options,{preferSource:true}),constructor:function e(t){e.superclass.constructor.call(this,t),this._publish('onBeforeProviderCall');},create:function(e){return this._makeCall(this._$binding.create,this._prepareCreateArguments(e)).addCallback(function(e){return this._loadAdditionalDependencies().addCallback(function(){return this._prepareCreateResult(e);}.bind(this));}.bind(this));},read:function(e,t){return this._makeCall(this._$binding.read,this._prepareReadArguments(e,t)).addCallback(function(e){return this._loadAdditionalDependencies().addCallback(function(){return this._prepareReadResult(e);}.bind(this));}.bind(this));},update:function(e,t){return this._makeCall(this._$binding.update,this._prepareUpdateArguments(e,t)).addCallback(function(t){return this._prepareUpdateResult(e,t);}.bind(this));},destroy:function(e,t){return this._makeCall(this._$binding.destroy,this._prepareDestroyArguments(e,t));},merge:function(e,t){return this._makeCall(this._$binding.merge,this._prepareMergeArguments(e,t));},copy:function(e,t){return this._makeCall(this._$binding.copy,this._prepareCopyArguments(e,t)).addCallback(function(e){return this._prepareReadResult(e);}.bind(this));},move:function(e,t,r){return this._makeCall(this._$binding.move,this._prepareMoveArguments(e,t,r));},query:function(e){return this._makeCall(this._$binding.query,this._prepareQueryArguments(e)).addCallback(function(e){return this._loadAdditionalDependencies().addCallback(function(){return this._prepareQueryResult(e);}.bind(this));}.bind(this));},call:function(e,t){return this._makeCall(e,t).addCallback(function(e){return this._loadAdditionalDependencies().addCallback(function(){return this._prepareCallResult(e);}.bind(this));}.bind(this));},getProvider:function(){return this._$provider=this._getProvider(this._$provider,{endpoint:this._$endpoint,options:this._$options,service:this._$endpoint.address,resource:this._$endpoint.contract});},_makeCall:function(e,t,r){r=r||this.getProvider();var i=this._notify('onBeforeProviderCall',e,t),a;if(void 0!==i)t=i;if(a=r.call(e,this._prepareArgumentsForCall(t)),this._$options.debug)a.addErrback(function(t){if(t instanceof DeferredCanceledError)n.logger.info(this._moduleName,'calling of remote service "'+e+'" has been cancelled.');else n.logger.error(this._moduleName,'remote service "'+e+'" throws an error "'+t.message+'".');return t;}.bind(this));return a;},_prepareArgumentsForCall:function(e){return this.getAdapter().serialize(e);},_prepareCreateArguments:function(e){return[e];},_prepareReadArguments:function(e,t){return[e,t];},_prepareUpdateArguments:function(t,r){if(this._$options.updateOnlyChanged){var n=this._getValidIdProperty(t);if(!u(n))if(this._isModelInstance(t)&&!s(t.get(n))){var i=e('WS.Data/Entity/Record'),a=t.getChanged();a.unshift(n),t=i.filterFields(t,a);}else if(this._isListInstance(t))t=function(t){var r=new(e('WS.Data/Collection/RecordSet'))({adapter:t._$adapter,idProperty:t._$idProperty});return t.each(function(e){if(s(e.get(n))||e.isChanged())r.add(e);}),r;}(t);}return[t,r];},_prepareDestroyArguments:function(e,t){return[e,t];},_prepareMergeArguments:function(e,t){return[e,t];},_prepareCopyArguments:function(e,t){return[e,t];},_prepareQueryArguments:function(e){return[e];},_prepareMoveArguments:function(e,t,r){return[e,t,r];},_getProvider:function(e,t){if(!e)throw new Error('Remote access provider is not defined');if('string'===typeof e)e=r.create(e,t);return e;},_getValidIdProperty:function(e){var t=this.getIdProperty();if(!u(t))return t;if('function'===typeof e.getIdProperty)return e.getIdProperty();return t;}}),d.prototype.NAVIGATION_TYPE=d.NAVIGATION_TYPE=o,d;}(require,exports['WS.Data/Source/Base'],require(deps[10]),require(deps[12]),require(deps[11]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Source/Local',{configurable:true,get:function(){delete exports['WS.Data/Source/Local'];return exports['WS.Data/Source/Local']=function(e,a){'use strict';var r=e.extend({_moduleName:'WS.Data/Source/Local',_prepareCreateResult:function(e){return r.superclass._prepareCreateResult.call(this,a.clone(e));},_prepareReadResult:function(e){return r.superclass._prepareReadResult.call(this,a.clone(e));},_prepareCallResult:function(e){return r.superclass._prepareCallResult.call(this,a.clone(e));}});return r;}(exports['WS.Data/Source/Base'],require(deps[12]));}});
Object.defineProperty(exports,'WS.Data/Source/Provider/SbisFileLoader',{configurable:true,get:function(){delete exports['WS.Data/Source/Provider/SbisFileLoader'];return exports['WS.Data/Source/Provider/SbisFileLoader']=function(e,r,t,a,s,n){'use strict';var o=s.extend(e,{_moduleName:'WS.Data/Source/Provider/SbisFileLoader',_$requestField:'Request',_$transport:t,_$argsWrapper:null,call:function(t,a){if('function'!==typeof this._$argsWrapper||!(a instanceof this._$argsWrapper))return e.prototype.call.apply(this,arguments);var s=this.getEndpoint();if(-1===t.indexOf('.')&&s.contract)t=s.contract+this._nameSpaceSeparator+t;var o,i=new this._$transport({contentType:false,processData:false,dataType:'json',method:'POST',url:s.address||n.defaultServiceUrl}),d=this._prepareRPCArgs(t,a);return o=i.execute(d.requestBody,d.reqHeaders),o.addCallbacks(function(e){var a=e||r.getEmptyRpcResponse();return'error'in a?r.handleRPCError(a.error,t,s.address):a.result;},function(e){return r.handleHTTPError(e,t);}),o;},_prepareRPCArgs:function(e,t){var a=r.jsonRpcPreparePacket(e,t.getBody());return new r()._setHeaders(a,'post'),t.setBody(a.reqBody),{requestBody:this._createFormData(t),reqHeaders:a.reqHeaders};},_createFormData:function(e){var r=new FormData();return r.append(this._$requestField,e.getBody()),e.getFiles().forEach(function(e){r.append(e.name,e.file,e.file.name);}),r;}});return a.register('source.provider.sbis-file',o),o;}(exports['WS.Data/Source/Provider/SbisBusinessLogic'],require(deps[14]),require(deps[22]),require(deps[10]),require(deps[0]),require(deps[23]));}});
Object.defineProperty(exports,'WS.Data/Source/Rpc',{configurable:true,get:function(){delete exports['WS.Data/Source/Rpc'];return exports['WS.Data/Source/Rpc']=function(e){'use strict';var r=e.extend({_moduleName:'WS.Data/Source/Rpc',getProvider:function(){var e=r.superclass.getProvider.call(this);if(!e||!e._wsDataSourceProviderIRpc)throw new Error('Provider should implement WS.Data/Source/Provider/IRpc');return e;}});return r;}(exports['WS.Data/Source/Remote']);}});
Object.defineProperty(exports,'WS.Data/Source/LocalSession',{configurable:true,get:function(){delete exports['WS.Data/Source/LocalSession'];return exports['WS.Data/Source/LocalSession']=function(t,e,r,n,i,a,o,s,u,f,c,h,d,l){'use strict';var p='d',g='i',y='k',v=new(function(){function t(){}return t.eq=function(t,e){if(!(e instanceof Array))return t==e;return-1!==e.indexOf(t);},t.ne=function(t,e){return t!=e;},t.lt=function(t,e){return t<e;},t.le=function(t,e){return t<=e;},t.gt=function(t,e){return t>e;},t.ge=function(t,e){return t>=e;},t.prototype.query=/(\w+)([!><=]*)/,t.prototype.tokinize=function(e){var r=e.match(this.query);r.shift();var n;if(r.length>1)n=r.pop();var i;switch(n){case'<':i=t.lt;break;case'<=':i=t.le;break;case'>':i=t.gt;break;case'>=':i=t.ge;break;case'!=':case'<>':i=t.ne;break;default:i=t.eq;}return{field:r[0],op:i};},t;}())(),w=function(){function t(t){this.query=t;}return t.prototype.select=function(t){var e=this.query.getSelect();if(0===Object.keys(e).length)return t;return t.map(function(t){for(var r={},n,i=0;i<e.length;i++)r[n=e[i]]=t[n];return r;});},t.prototype.where=function(t){var e=this.query.getWhere(),r=[],n=new u();if('function'===typeof e)return t.filter(function(t,r){return e(n.forRecord(t),r);});for(var i in e){if(!e.hasOwnProperty(i))continue;if(void 0===e[i])continue;var a=v.tokinize(i);if(void 0===a)return[];r.push({field:a.field,op:a.op,value:e[i]});}return t.filter(function(t){for(var e=0;e<r.length;e++){var n=r[e];if(t[n.field]instanceof Array){for(var i=false,a=0,o=t[n.field];a<o.length;a++)i=n.op(o,n.value);return i;}if(!n.op(t[n.field],n.value))return false;}return true;});},t.prototype.order=function(e){var r=this.query.getOrderBy();if(r.length>0)return t.orderBy(e,r);return e;},t.prototype.offset=function(t){if(!this.query.getOffset())return t;return t.slice(this.query.getOffset());},t.prototype.limit=function(t){if(void 0===this.query.getLimit())return t;return t.slice(0,this.query.getLimit());},t.orderBy=function(t,e){var r=t;function n(t,e){if(null===t&&null!==e)return-1;if(null!==t&&null===e)return 1;if(t===e)return 0;return t>e?1:-1;}return r.sort(function(t,r){for(var i=0,a=0;a<e.length;a++){var o=e[a],s=o.getOrder()?-1:1,u=o.getSelector();if(i=s*n(t[u],r[u]),0!==i)break;}return i;}),r;},t;}(),m=function(){function t(t){if(this.ls=t,null===this.getCount())this.setCount(0);if(null===this.getKeys())this.setKeys([]);}return t.prototype.get=function(t){return this.ls.getItem(p+t);},t.prototype.set=function(t,e){var r=this.getCount()+1,n=this.getKeys();if(-1===n.indexOf(t))n.push(t),this.setKeys(n),this.setCount(r);return this.ls.setItem(p+t,e);},t.prototype.move=function(t,r,n){var i=this.getKeys(),a;if(t.forEach(function(t){var e=i.indexOf(t);i.splice(e,1);},this),null!==r)if(a=i.indexOf(r),-1===a)return e.fail('Record "to" with key '+r+' is not found.');var o=n&&(n.before||'before'===n.position)?0:1;t.forEach(function(t,e){i.splice(a+o+e,0,t);},this),this.setKeys(i);},t.prototype.remove=function(t){var e;if(!(t instanceof Array))return e=this.getCount(),this.removeFromKeys(t),this.setCount(e-1),this.ls.removeItem(p+t);for(var r=0;r<t.length;r++){var n=t[r];e=this.getCount(),this.setCount(e-1),this.ls.removeItem(p+n);}return this.removeFromKeys(t),true;},t.prototype.removeFromKeys=function(t){var e;if(t instanceof Array)e=t;else e=[t];for(var r=this.getKeys(),n=0;n<e.length;n++){var i=e[n],a=r.indexOf(i);if(-1===a)continue;r.splice(a,1);}this.setKeys(r);},t.prototype.getCount=function(){return this.ls.getItem(y);},t.prototype.setCount=function(t){this.ls.setItem(y,t);},t.prototype.getKeys=function(){return this.ls.getItem(g);},t.prototype.setKeys=function(t){this.ls.setItem(g,t);},t.prototype.existKeys=function(t){var e=this.getKeys();if(0===e.length)return false;if(t instanceof Array){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])<=-1)return false;return true;}return e.indexOf(t)>-1;},t.prototype.reserveId=function(){function t(){function t(){return Math.floor(1903264*(1+Math.random())).toString(32).substring(1);}return t()+t()+'-'+t()+'-'+t()+'-'+t()+'-'+t()+t();}var e;do{e=t();}while(this.existKeys(e));return e;},t;}(),M=function(){function t(t,e){this.adapter=t,this.idProperty=e;}return t.prototype.get=function(t){switch(t=l.clone(t),this.adapter){case'adapter.recordset':return new o({rawData:new a({rawData:t}),adapter:f.create(this.adapter),idProperty:this.idProperty});case'adapter.sbis':return this.sbis(t);default:return new o({rawData:t,adapter:f.create(this.adapter),idProperty:this.idProperty});}},t.prototype.sbis=function(t){var e=new a({rawData:t}),r=e.getFormat(),n=e.getEnumerator(),i=new o({format:r,adapter:f.create(this.adapter),idProperty:this.idProperty});while(n.moveNext()){var s=n.getCurrent();i.set(s,e.get(s));}return i;},t;}(),P=function(){function t(t,e,r){this.adapter=t,this.idProperty=e,this.modelManager=r;}return t.prototype.get=function(t){switch(t=l.clone(t),this.adapter){case'adapter.recordset':return this.recordSet(t);case'adapter.sbis':return this.sbis(t);default:return t;}},t.prototype.recordSet=function(t){var e=[];if(0===t.length)return new s({rawData:e,idProperty:this.idProperty});for(var r=0;r<t.length;r++){var n=t[r],i=this.modelManager.get(n);e.push(i);}return new s({rawData:e,idProperty:this.idProperty});},t.prototype.sbis=function(t){if(0===t.length)return t;for(var e=new s({adapter:this.adapter}),r=new a({rawData:t[0]}).getFormat(),n=0;n<t.length;n++){var i=t[n],o=new a({format:r,adapter:this.adapter}),u=o.getEnumerator();while(u.moveNext()){var f=u.getCurrent();o.set(f,i[f]);}e.add(o);}return e.getRawData();},t;}(),S=function(t,e){var r,n,i,a;for(a=0;a<e.length;a++)i=void 0===(n=(r=e[a])[t.getIdProperty()])?t.rawManager.reserveId():n,t.rawManager.set(i,r);},_=function(t,e){if(!t)return{};var r=t,n=t&&t instanceof a;if(!n&&x(e))return t;if(!n)r=new a({adapter:e,rawData:t});var i={},o=r.getEnumerator();while(o.moveNext()){var s=o.getCurrent();i[s]=r.get(s);}return i;},x=function(t){if('string'===typeof t)return t.indexOf('adapter.json')>-1;return t instanceof u;},D;return D=c.extend([n,h],{_moduleName:'WS.Data/Source/LocalSession',_writable:d.writable,_dataSetModule:'source.dataset',_$adapter:'adapter.json',_$listModule:'collection.recordset',_$model:'entity.model',_$idProperty:'',_dataSetItemsProperty:'items',_dataSetTotalProperty:'total',_options:{prefix:'',model:o,data:[]},constructor:function t(e){if(!('prefix'in e))throw new Error('"prefix" not found in options.');if(!('idProperty'in e))throw new Error('"idProperty" not found in options.');h.constructor.call(this,e),this.rawManager=new m(new r(e.prefix)),this.modelManager=new M(this._$adapter,this._$idProperty),this.converter=new P(this._$adapter,this._$idProperty,this.modelManager),this._initData(e.data);},create:function(t){var r=_(t,this._$adapter);if(void 0===r[this.getIdProperty()])this.rawManager.reserveId();return e.success(this.modelManager.get(r));},read:function(t){var r=this.rawManager.get(t);if(r)return e.success(this.modelManager.get(r));return e.fail('Record with key "'+t+'" does not exist');},update:function(t){var r=function(t){var r,n=t.getIdProperty?t.getIdProperty():this.getIdProperty();try{r=t.get(n);}catch(t){return e.fail('Record idProperty doesn\'t exist');}if(void 0===r)r=this.rawManager.reserveId();t.set(n,r);var i=_(t,this._$adapter);return this.rawManager.set(r,i),t.acceptChanges(),r;}.bind(this),n=[];if(t instanceof s)t.each(function(t){n.push(r(t));});else n.push(r(t));return e.success(n);},destroy:function(t){if(!this.rawManager.existKeys(t))return e.fail('Not all keys exist');return this.rawManager.remove(t),e.success(true);},merge:function(r,n){var i=this.rawManager.get(r),a=this.rawManager.get(n);if(null===i||null===a)return e.fail('Record with key '+r+' or '+n+' isn\'t exists');var o=t(i,a);return this.rawManager.set(r,o),this.rawManager.remove(n),e.success(true);},copy:function(r){var n=this.rawManager.reserveId(),i=this.rawManager.get(r);if(null===i)return e.fail('Record with key '+i+' isn\'t exists');var a=t({},i);return this.rawManager.set(n,a),e.success(this.modelManager.get(a));},query:function(t){if(void 0===t)t=new i();for(var r=[],n=this.rawManager.getKeys(),a=0;a<n.length;a++)r.push(this.rawManager.get(n[a]));var o=new w(t);return r=o.order(r),r=o.where(r),r=o.offset(r),r=o.limit(r),r=o.select(r),e.success(this._getDataSet({items:this.converter.get(r),total:r.length}));},move:function(t,r,n){var i=this.rawManager.getKeys(),a=[];if(!(t instanceof Array))t=[t];if(t.forEach(function(r){if(-1===i.indexOf(r))return e.fail('Record "from" with key '+t+' is not found.');a.push(r);},this),'on'===n.position)return e.success(this._hierarchyMove(a,r,n,i));return e.success(this.rawManager.move(a,r,n));},getIdProperty:function(){return this._$idProperty;},getAdapter:function(){return f.create(this._$adapter);},getListModule:function(){return this._$listModule;},setListModule:function(t){this._$listModule=t;},getModel:function(){return this._$model;},setModel:function(t){this._$model=t;},_initData:function(t){if(!t)return;if(x(this._$adapter))return void S(this,t);for(var e=this.getAdapter().forTable(t),r=function(t){this.update(t);}.bind(this),n=0;n<e.getCount();n++){var i=e.at(n);this.create(i).addCallback(r);}},_getDataSet:function(e){return new f.create(this._dataSetModule,t({writable:this._writable,adapter:this.getAdapter(),model:this.getModel(),listModule:this.getListModule(),idProperty:this.getIdProperty()},{rawData:e,itemsProperty:this._dataSetItemsProperty,totalProperty:this._dataSetTotalProperty},{rec:false}));},_hierarchyMove:function(t,r,n,i){var a=this,o,s;if(!n.parentProperty)return e.fail('Parent property is not defined');if(r){if(o=i.indexOf(r),-1===o)return e.fail('Record "to" with key '+r+' is not found.');var u=this.rawManager.get(i[o]);s=u[n.parentProperty];}else s=null;t.forEach(function(t){var e=a.rawManager.get(t);e[n.parentProperty]=s,a.rawManager.set(t,e);});},_reorderMove:function(t,r,n,i){var a;if(t.forEach(function(t){var e=i.indexOf(t);i.splice(e,1);},this),null!==r)if(a=i.indexOf(r),-1===a)return e.fail('Record "to" with key '+r+' is not found.');var o=n&&(n.before||'before'===n.position)?0:1;t.forEach(function(t,e){i.splice(a+o+e,0,t);},this),this.rawManager.setKeys(i);}}),D;}(require(deps[3]),require(deps[11]),require(deps[20]),exports['WS.Data/Source/ISource'],exports['WS.Data/Query/Query'],require(deps[21]),require(deps[18]),require(deps[19]),require(deps[9]),require(deps[10]),require(deps[5]),require(deps[1]),require(deps[8]),require(deps[12]));}});
Object.defineProperty(exports,'WS.Data/Source/Memory',{configurable:true,get:function(){delete exports['WS.Data/Source/Memory'];return exports['WS.Data/Source/Memory']=function(e,t,r,i,n){'use strict';var a=e.extend({_moduleName:'WS.Data/Source/Memory',_$data:null,_dataSetItemsProperty:'items',_dataSetTotalProperty:'total',_tableAdapter:null,_emptyData:null,_index:null,constructor:function e(t){if(e.superclass.constructor.call(this,t),this._$endpoint.contract&&!o.contracts.hasOwnProperty(this._$endpoint.contract))o.contracts[this._$endpoint.contract]=this._$data;this._reIndex();},create:function(e){return e=r.clone(e),this._loadAdditionalDependencies().addCallback(function(){return this._prepareCreateResult(e);}.bind(this));},read:function(e){var t=this._getRecordByKey(e);if(t)return this._loadAdditionalDependencies().addCallback(function(){return this._prepareReadResult(t);}.bind(this));else return i.fail('Record with key "'+e+'" does not exist');},update:function(e){var t=function(e){var t=this.getIdProperty(),r=t?e.get(t):void 0;if(void 0===r)r=n.randomId('k'),e.set(t,r);var i=this._getTableAdapter(),a=this._getIndexByKey(r);if(-1===a){if(i.add(e.getRawData()),this._index)this._index[r]=i.getCount()-1;}else i.replace(e.getRawData(),a);return r;}.bind(this),r=[];if(this._isListInstance(e))e.each(function(e){r.push(t(e));});else r=t(e);return this._loadAdditionalDependencies().addCallback(function(){return this._prepareUpdateResult(e,r);}.bind(this));},destroy:function(e){if(!(e instanceof Array))e=[e];for(var t=0,r=e.length;t<r;t++)if(!this._destroy(e[t]))return i.fail('Record with key "'+e[t]+'" isn\'t found');return i.success(true);},copy:function(e){var t=this._getIndexByKey(e);if(-1===t)return i.fail('Record with key "'+e+'" isn\'t found');else{var r=this._getTableAdapter().copy(t);return this._reIndex(),this._loadAdditionalDependencies().addCallback(function(){return this._prepareReadResult(r);}.bind(this));}},merge:function(e,t){var r=this._getIndexByKey(e),n=this._getIndexByKey(t);if(-1===r||-1===n)return i.fail('Record with key "'+e+'" or "'+t+'" isn\'t exists');else return this._getTableAdapter().merge(r,n,this.getIdProperty()),this._reIndex(),i.success(true);},query:function(e){var t=this._applyFrom(e?e.getFrom():void 0),r=this.getAdapter(),i;if(e){if(t=this._applyJoin(t,e.getJoin()),t=this._applyWhere(t,e.getWhere()),t=this._applyOrderBy(t,e.getOrderBy()),i=r.forTable(t).getCount(),t=this._applyPaging(t,e.getOffset(),e.getLimit()),void 0===t)t=this._getEmptyData(e);}else i=r.forTable(t).getCount();return this._loadAdditionalDependencies().addCallback(function(){return this._prepareQueryResult({items:t,total:i});}.bind(this));},move:function(e,t,r){r=r||{};var n=[],a=-1,o=null;if(!(e instanceof Array))e=[e];var s=this._getTableAdapter(),d=this.getAdapter();if(e.forEach(function(e){var t=this._getIndexByKey(e);n.push(d.forRecord(s.at(t)));},this),null!==t)if(a=this._getIndexByKey(t),o=d.forRecord(s.at(a)),-1===a)return i.fail('Can\'t find target position');if('on'===r.position)return this._hierarchyMove(n,o,r);return this._reorderMove(n,o,r);},call:function(){throw new Error('Not supported');},_reorderMove:function(e,t,r){var n,a=this._getTableAdapter(),o=t.get(this._$idProperty);if(r.parentProperty)n=t.get(r.parentProperty);if(!r.position&&r.hasOwnProperty('before'))r.position=r.before?this.MOVE_POSITION.before:this.MOVE_POSITION.after;return e.forEach(function(e){if(r.parentProperty)e.set(r.parentProperty,n);var t=this._getIndexByKey(e.get(this._$idProperty)),i=this._getIndexByKey(o);if(r.position===this.MOVE_POSITION.before)i--;a.move(t,i),this._reIndex();}.bind(this)),new i().callback();},_hierarchyMove:function(e,t,r){if(!r.parentProperty)return i.fail('Parent property is not defined');var n=t?t.get(this._$idProperty):null;return e.forEach(function(e){e.set(r.parentProperty,n);}.bind(this)),new i().callback();},_getTableAdapter:function(){return this._tableAdapter||(this._tableAdapter=this.getAdapter().forTable(this._$data));},_applyFrom:function(e){return e=e||'',e?o.contracts[e]:this._$data;},_applyJoin:function(e,t){if(t.length)throw new Error('Joins are not supported');return e;},_applyWhere:function(e,t){if(t=t||{},'object'===typeof t&&!Object.keys(t).length)return e;var r=this.getAdapter(),i=r.forTable(),n='function'===typeof t,a={'Разворот':true,'ВидДерева':true,usePages:true};return this._each(e,function(e,o){var s=true;if(e=r.forRecord(e),n)s=t(e,o);else for(var d in t){if(!t.hasOwnProperty(d))continue;if(a.hasOwnProperty(d))continue;if(s=this._compareValues(e.get(d),t[d],'='),!s)break;}if(s)i.add(e.getData());},this),i.getData();},_applyOrderBy:function(e,t){if(t=t||[],!t.length)return e;var r=[],i;for(i=0;i<t.length;i++)r.push({field:t[i].getSelector(),order:t[i].getOrder()});var n=this.getAdapter(),a=[],o=[],s;this._each(e,function(e,t){o=[];for(var i=0;i<r.length;i++)s=n.forRecord(e).get(r[i].field),o.push(void 0===s?null:s);a.push({index:t,values:o});},this);var d=function(e,t){if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;if(e==t)return 0;return e>t?1:-1;};a.sort(function(e,t){var i=0,n;for(n=0;n<r.length;n++)if(i=(r[n].order?-1:1)*d(e.values[n],t.values[n]),0!==i)break;return i;});var u=n.forTable(e),h=n.forTable(),l;for(i=0,l=a.length;i<l;i++)h.add(u.at(a[i].index));return h.getData();},_applyPaging:function(e,t,r){if(t=t||0,0===t&&void 0===r)return e;var i=this.getAdapter().forTable(e);if(void 0===r)r=i.getCount();else r=r||0;var n=this.getAdapter().forTable(),a=0,o=t,s=Math.min(i.getCount(),o+r),d;for(d=o;d<s;d++,a++)n.add(i.at(d));return n.getData();},_getEmptyData:function(e){var t=e?e.getFrom():void 0,i,n;if(this._emptyData=this._emptyData||{},!this._emptyData.hasOwnProperty(t))i=r.clone(this._applyFrom(t)),(n=this.getAdapter().forTable(i)).clear(),this._emptyData[t]=n.getData();return this._emptyData[t];},_compareValues:function(e,t,r){var i;if(t instanceof Array){for(i=0;i<t.length;i++)if(this._compareValues(e,t[i],r))return true;return false;}if(e instanceof Array){for(i=0;i<e.length;i++)if(!this._compareValues(e[i],t,r))return false;return true;}return e==t;},_reIndex:function(){this._index={};var e;this._each(this._$data,function(t,r){e=this.getAdapter().forRecord(t).get(this._$idProperty),this._index[e]=r;},this);},_getRecordByKey:function(e){return this._getTableAdapter().at(this._getIndexByKey(e));},_getIndexByKey:function(e){var t=this._index[e];return void 0===t?-1:t;},_destroy:function(e){var t=this._getIndexByKey(e);if(-1!==t)return this._getTableAdapter().remove(t),this._reIndex(),true;else return false;}}),o={contracts:{}};return t.register('source.memory',a),a;}(exports['WS.Data/Source/Local'],require(deps[10]),require(deps[12]),require(deps[11]),require(deps[13]));}});
Object.defineProperty(exports,'WS.Data/Source/SbisService',{configurable:true,get:function(){delete exports['WS.Data/Source/SbisService'];return exports['WS.Data/Source/SbisService']=function(e,t,r,i,n,o,a,s,d){'use strict';var u=a({POSITION:'Position'},t.prototype.NAVIGATION_TYPE),c=function(e,t,r){var i=r.before?this._$binding.moveBefore:this._$binding.moveAfter,o={'ПорядковыйНомер':this._$orderProperty,'Иерархия':r.hierField||null,'Объект':this._$endpoint.moveContract,'ИдО':this._prepareComplexId(e)};return n.logger.info(this._moduleName,'Move elements through moveAfter and moveBefore methods have been deprecated, please use just move instead.'),o[r.before?'ИдОДо':'ИдОПосле']=this._prepareComplexId(t),this._makeCall(this._$endpoint.moveContract+'.'+i,o);},l;return l=t.extend({_moduleName:'WS.Data/Source/SbisService',_$binding:{create:'Создать',read:'Прочитать',update:'Записать',updateBatch:'',destroy:'Удалить',query:'Список',copy:'Копировать',merge:'Объединить',move:'Move',format:''},_$adapter:'adapter.sbis',_$provider:'source.provider.sbis-business-logic',_$orderProperty:'ПорНомер',_$options:a({hasMoreProperty:'hasMore'},t.prototype._$options,{preferSource:true}),constructor:function e(t){if(t=t||{},t.binding instanceof Object)this._$binding=a(t.binding,this._$binding||{},{preferSource:true,clone:true});if(t.metaConfig instanceof Object&&'hasMore'in t.metaConfig)t.options=t.options||{},t.options.hasMoreProperty=t.metaConfig.hasMore,delete t.metaConfig;if(e.superclass.constructor.call(this,t),!this._$endpoint.moveContract)this._$endpoint.moveContract='IndexNumber';},create:function(e){return e=n.clone(e),this._loadAdditionalDependencies(function(t){t.dependOn(l.superclass.create.call(this,e));}.bind(this));},update:function(e,t){if(this._$binding.updateBatch&&this._isListInstance(e))return this._loadAdditionalDependencies(function(r){r.dependOn(this._makeCall(this._$binding.updateBatch,this._prepareUpdateBatchArguments(e,t)).addCallback(function(t){return this._prepareUpdateResult(e,t);}.bind(this)));}.bind(this));return l.superclass.update.call(this,e,t);},destroy:function(e,t){var r=function(e,t,r){return this._makeCall(this._$endpoint.contract===t?this._$binding.destroy:t+'.'+this._$binding.destroy,this._prepareDestroyArguments(e,r),this.getProvider());};if(!(e instanceof Array))return r.call(this,[String(e).split(',')[0]],this._getProviderNameById(e),t);for(var i={},n,o=0,a=e.length;o<a;o++)i[n=this._getProviderNameById(e[o])]=i[n]||[],i[n].push(String.prototype.split.call(e[o],',')[0]);var d=new s();for(n in i)if(i.hasOwnProperty(n))d.push(r.call(this,i[n],n,t));return d.done().getResult();},move:function(e,t,r){if(r=r||{},this._$binding.moveBefore)return c.call(this,e,t,r);var i={},n=0;e.forEach(function(e){var t=(e=String.prototype.split.call(e,',',2)).length>1?e[1]:this._$endpoint.contract;if(!i.hasOwnProperty(t))i[t]=[e[0]],n++;else i[t].push(e[0]);}.bind(this));var o=new s();if(null!==t)t=this._prepareComplexId(t)[0];for(var a in i)if(i.hasOwnProperty(a)){r.objectName=a;var d=this._makeCall(this._$binding.move.indexOf('.')>-1?this._$binding.move:this._$endpoint.moveContract+'.'+this._$binding.move,this._prepareMoveArguments(i[a],t,r));if(1===n)return d;o.push(d);}return o.done().getResult();},query:function(e){return e=n.clone(e),this._loadAdditionalDependencies(function(t){t.dependOn(l.superclass.query.call(this,e));}.bind(this));},_prepareCreateArguments:function(e){if(!this._isModelInstance(e))if(e=a({},e||{},{clone:true}),!('ВызовИзБраузера'in e))e['ВызовИзБраузера']=true;return{'Фильтр':this._buildRecord(e),'ИмяМетода':this._$binding.format||null};},_prepareReadArguments:function(e,t){var r={'ИдО':e,'ИмяМетода':this._$binding.format||null};if(t&&Object.keys(t).length)r['ДопПоля']=t;return r;},_prepareUpdateArguments:function(e,t){var r=l.superclass._prepareUpdateArguments.call(this,e,t),i={};if(i[this._isListInstance(r[0])?'Записи':'Запись']=r[0],r[1]&&Object.keys(r[1]).length)i['ДопПоля']=r[1];return i;},_prepareDestroyArguments:function(e,t){var r={'ИдО':e};if(t&&Object.keys(t).length)r['ДопПоля']=t;return r;},_prepareMergeArguments:function(e,t){return{'ИдО':e,'ИдОУд':t};},_prepareCopyArguments:function(e,t){var r={'ИдО':e,'ИмяМетода':this._$binding.format};if(t&&!Object.isEmpty(t))r['ДопПоля']=t;return r;},_prepareQueryArguments:function(e){var t=this._getPagingParams(e),r=e?e.getWhere():null,i=this._getSortingParams(e),n=this._getAdditionalParams(e);return{'Фильтр':this._buildRecord(r),'Сортировка':this._buildRecordSet(i),'Навигация':this._buildRecord(t),'ДопПоля':n};},_prepareMoveArguments:function(e,t,r){return{IndexNumber:this._$orderProperty,HierarchyName:r.parentProperty||null,ObjectName:r.objectName,ObjectId:e,DestinationId:t,Order:r.position,ReadMethod:r.objectName+'.'+this._$binding.read,UpdateMethod:r.objectName+'.'+this._$binding.update};},_buildRecord:function(t){return e('WS.Data/Entity/Record').fromObject(t,this._$adapter);},_buildRecordSet:function(e){if(null===e)return e;if(e&&this._isListInstance(e))return e;var t=this._getListInstance(null),r=e.length||0,i;for(i=0;i<r;i++)t.add(this._buildRecord(e[i]));return t;},_prepareUpdateBatchArguments:function(t){var r=e('WS.Data/Collection/RecordSet').patch(t);return{changed:r.get('changed'),added:r.get('added'),removed:r.get('removed')};},_getSortingParams:function(e){if(!e)return null;var t=e.getOrderBy();if(0===t.length)return null;for(var r=[],i,n=0;n<t.length;n++)i=t[n],r.push({n:i.getSelector(),o:i.getOrder(),l:!i.getOrder()});return r;},_getPagingParams:function(e){if(!e)return null;var t=e.getOffset(),r=e.getLimit(),i=e.getMeta(),n=this._$options.hasMoreProperty,o=i.hasOwnProperty(n),a=o?i[n]:t>=0;if(o)delete i[n],e.meta(i);if(0===t&&(void 0===r||null===r))return null;switch(this._$options.navigationType){case this.NAVIGATION_TYPE.PAGE:return{'Страница':r>0?Math.floor(t/r):0,'РазмерСтраницы':r,'ЕстьЕще':a};case this.NAVIGATION_TYPE.POSITION:var s=e.getWhere(),d=/(.+)([<>]=|~)$/,u=null,c='',l;return Object.keys(s).forEach(function(e){if(l=e.match(d),l){if(!u)u={};if(u[l[1]]=s[e],!c)switch(l[2]){case'~':c='both';break;case'<=':c='before';}delete s[e];}}),c=c||'after',{HaveMore:a,Limit:r,Order:c,Position:this._buildRecord(u)};default:return{Offset:t||0,Limit:r,'ЕстьЕще':a};}},_getAdditionalParams:function(e){var t=[];if(e){if(t=e.getMeta(),t&&this._isModelInstance(t)){var r={};t.each(function(e,t){r[e]=t;}),t=r;}if(t instanceof Object){var i=[];for(var n in t)if(t.hasOwnProperty(n))i.push(t[n]);t=i;}if(!(t instanceof Array))throw new TypeError(this._moduleName+'::_getAdditionalParams(): unsupported metadata type: only Array, WS.Data/Entity/Record or Object allowed');}return t;},_getProviderNameById:function(e){if(-1!==String(e).indexOf(','))return String(e).split(',')[1];return this._$endpoint.contract;},_prepareComplexId:function(e){var t=String.prototype.split.call(e,',',2);if(t.length<2)t.push(this._$endpoint.contract);return t;},prepareQueryParams:function(t,r,i,o,a){n.logger.stack(this._moduleName+'::prepareQueryParams(): method is deprecated and will be removed in 3.7.6. Use query() instead.',0,'error');var s=new(e('WS.Data/Query/Query'))(),d;return s.where(t).offset(void 0===a?i:a).limit(o).orderBy(r).meta(void 0===a?{}:{hasMore:a}),d={'Фильтр':this._buildRecord(s?s.getWhere():null),'Сортировка':this._buildRecordSet(this._getSortingParams(s)),'Навигация':this._buildRecord(this._getPagingParams(s)),'ДопПоля':this._getAdditionalParams(s)},this.getAdapter().serialize(d);}}),l.prototype.NAVIGATION_TYPE=l.NAVIGATION_TYPE=u,o.register('source.sbis-service',l),d.bindSingle('source.sbis-service',l),r=null,i=null,l;}(require,exports['WS.Data/Source/Rpc'],exports['WS.Data/Source/Provider/SbisBusinessLogic'],require(deps[15]),require(deps[12]),require(deps[10]),require(deps[3]),require(deps[16]),require(deps[17]));}});
Object.defineProperty(exports,'WS.Data/Source/SbisFile',{configurable:true,get:function(){delete exports['WS.Data/Source/SbisFile'];return exports['WS.Data/Source/SbisFile']=function(r,e){'use strict';function t(r,e){var t=r;this.getFiles=function(){return e||[];},this.getBody=function(){return t;},this.setBody=function(r){t=r;};}function i(r){return{'Данные':{href:r}};}var s=r.extend({_$requestField:'Запрос',_$provider:'source.provider.sbis-file',_$argsWrapper:t,_prepareCreateArguments:function(r){var e=this._wrapArgs(r);if(!e.getFiles().length)return s.superclass._prepareCreateArguments.call(this,r);return e;},_prepareArgumentsForCall:function(r){if(r instanceof this._$argsWrapper)return r.setBody(s.superclass._prepareArgumentsForCall.call(this,r.getBody())),r;return s.superclass._prepareArgumentsForCall.call(this,r);},_wrapArgs:function(r){if(void 0===r)r={};var t=0,s=[],n=r;for(var a in r)if(r.hasOwnProperty(a)&&r[a]instanceof e){var o='_file-'+t;t++,s.push({name:o,file:r[a].getData()}),r[a]=i(o);}return new this._$argsWrapper(n,s);},getProvider:function(){return this._$provider=this._getProvider(this._$provider,{endpoint:this._$endpoint,options:this._$options,requestField:this._$requestField,argsWrapper:this._$argsWrapper});}});return s;}(exports['WS.Data/Source/SbisService'],require(deps[24]),exports['WS.Data/Source/Provider/SbisFileLoader']);}});
Object.defineProperty(exports,'WS.Data/Source/SbisFileSource',{configurable:true,get:function(){delete exports['WS.Data/Source/SbisFileSource'];return exports['WS.Data/Source/SbisFileSource']=function(e){'use strict';return e;}(exports['WS.Data/Source/SbisFile']);}});
define('WS.Data/Query/Join', ['Core/core-extend','WS.Data/Entity/OptionsMixin'], function() {return exports['WS.Data/Query/Join'];});
define('WS.Data/Source/ISource', [], function() {return exports['WS.Data/Source/ISource'];});
define('WS.Data/Source/Provider/INotify', [], function() {return exports['WS.Data/Source/Provider/INotify'];});
define('WS.Data/Source/Provider/IChannel', [], function() {return exports['WS.Data/Source/Provider/IChannel'];});
define('WS.Data/Source/Provider/IAbstract', [], function() {return exports['WS.Data/Source/Provider/IAbstract'];});
define('WS.Data/Query/IQueryable', [], function() {return exports['WS.Data/Query/IQueryable'];});
define('WS.Data/Source/Provider/IRpc', [], function() {return exports['WS.Data/Source/Provider/IRpc'];});
define('WS.Data/Query/Order', ['Core/core-extend','WS.Data/Entity/OptionsMixin'], function() {return exports['WS.Data/Query/Order'];});
define('WS.Data/Source/DataSet', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Di','WS.Data/Entity/Model','WS.Data/Collection/RecordSet'], function() {return exports['WS.Data/Source/DataSet'];});
define('WS.Data/Query/Query', ['WS.Data/Entity/ICloneable','WS.Data/Entity/OptionsMixin','Core/core-extend','WS.Data/Query/Join','WS.Data/Query/Order','Core/core-merge'], function() {return exports['WS.Data/Query/Query'];});
define('WS.Data/Source/Base', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge'], function() {return exports['WS.Data/Source/Base'];});
define('WS.Data/Source/Provider/SbisBusinessLogic', ['WS.Data/Source/Provider/IRpc','WS.Data/Entity/OptionsMixin','Transport/RPCJSON','WS.Data/Di','Core/core-extend'], function() {return exports['WS.Data/Source/Provider/SbisBusinessLogic'];});
define('WS.Data/Source/SbisDataSet', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Di','WS.Data/Entity/Model','WS.Data/Collection/RecordSet','WS.Data/Source/DataSet','WS.Data/Adapter/Sbis'], function() {return exports['WS.Data/Source/SbisDataSet'];});
define('WS.Data/Source/Remote', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils'], function() {return exports['WS.Data/Source/Remote'];});
define('WS.Data/Source/Local', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils'], function() {return exports['WS.Data/Source/Local'];});
define('WS.Data/Source/Provider/SbisFileLoader', ['WS.Data/Source/Provider/IRpc','WS.Data/Entity/OptionsMixin','Transport/RPCJSON','WS.Data/Di','Core/core-extend','WS.Data/Source/Provider/SbisBusinessLogic','Transport/XHRTransport','Core/constants'], function() {return exports['WS.Data/Source/Provider/SbisFileLoader'];});
define('WS.Data/Source/Rpc', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils','WS.Data/Source/Remote'], function() {return exports['WS.Data/Source/Rpc'];});
define('WS.Data/Source/LocalSession', ['Core/core-merge','Core/Deferred','Lib/Storage/LocalStorage','WS.Data/Source/ISource','WS.Data/Entity/ICloneable','WS.Data/Entity/OptionsMixin','Core/core-extend','WS.Data/Query/Join','WS.Data/Query/Order','WS.Data/Query/Query','WS.Data/Entity/Record','WS.Data/Entity/Model','WS.Data/Collection/RecordSet','WS.Data/Adapter/Json','WS.Data/Di','WS.Data/Entity/Abstract','WS.Data/Entity/ReadWriteMixin','WS.Data/Utils'], function() {return exports['WS.Data/Source/LocalSession'];});
define('WS.Data/Source/Memory', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils','WS.Data/Source/Local','Core/helpers/generate-helpers'], function() {return exports['WS.Data/Source/Memory'];});
define('WS.Data/Source/SbisService', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils','WS.Data/Source/Remote','WS.Data/Source/Rpc','WS.Data/Source/Provider/IRpc','Transport/RPCJSON','Core/core-extend','WS.Data/Source/Provider/SbisBusinessLogic','WS.Data/Adapter/Sbis','Core/ParallelDeferred','Core/IoC'], function() {return exports['WS.Data/Source/SbisService'];});
define('WS.Data/Source/SbisFile', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils','WS.Data/Source/Remote','WS.Data/Source/Rpc','WS.Data/Source/Provider/IRpc','Transport/RPCJSON','Core/core-extend','WS.Data/Source/Provider/SbisBusinessLogic','WS.Data/Adapter/Sbis','Core/ParallelDeferred','Core/IoC','WS.Data/Source/SbisService','Lib/File/LocalFile','Transport/XHRTransport','Core/constants','WS.Data/Source/Provider/SbisFileLoader'], function() {return exports['WS.Data/Source/SbisFile'];});
define('WS.Data/Source/SbisFileSource', ['require','WS.Data/Source/ISource','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/ObservableMixin','WS.Data/Entity/ReadWriteMixin','WS.Data/Adapter/Json','WS.Data/Di','Core/Deferred','Core/core-merge','WS.Data/Source/Base','WS.Data/Utils','WS.Data/Source/Remote','WS.Data/Source/Rpc','WS.Data/Source/Provider/IRpc','Transport/RPCJSON','Core/core-extend','WS.Data/Source/Provider/SbisBusinessLogic','WS.Data/Adapter/Sbis','Core/ParallelDeferred','Core/IoC','WS.Data/Source/SbisService','Lib/File/LocalFile','Transport/XHRTransport','Core/constants','WS.Data/Source/Provider/SbisFileLoader','WS.Data/Source/SbisFile'], function() {return exports['WS.Data/Source/SbisFileSource'];});
})()