define("Deprecated/Serializer",["require","Core/Serializer","Core/core-simpleExtend","Deprecated/Record","Deprecated/RecordSet"],function(e,r,t){var n=t.extend(r,{_detectContainers:true,constructor:function e(r,t){e.superclass.constructor.call(this,r,t),this.deserialize=e.deserializeWith(this)},setDetectContainers:function(e){this._detectContainers=e},isDetectContainers:function(){return this._detectContainers}});n.setToJsonForFunction=r.setToJsonForFunction,n.getFuncFromDeclaration=r.getFuncFromDeclaration;var a={};n.deserializeWith=function(e){var t=r.deserializeWith(e);return function(r,n){var s=t.call(this,r,n);if(s===n)return i.call(a,r,n,e._detectContainers);else return s}};function i(e,r,t){if("string"===typeof r){if(l(r,"wsFuncDecl::"))return n.getFuncFromDeclaration(r.replace("wsFuncDecl::",""));else if(l(r,"wsGlobalFnDecl::")){var a=r.replace("wsGlobalFnDecl::",""),i=this[a];return delete this[a],i}else if(l(r,"moduleFunc#")){var u=r.replace(/^moduleFunc#/,"").split("/"),d=u.length>1?u.pop():"",p=u.join("/");try{r=global.requirejs("js!"+p)[d]}catch(e){throw new Error('Parsing moduleFunc "'+r+'" failed. Original message: '+e.message)}}else if(l(r,"datasource!"))return o(r)}else if(t&&c(r)&&r._mustRevive)return s(e,r);return r}function s(r,t){if("recordset"===t._type){var n=e("Deprecated/RecordSet");if(n)return new n({readerParams:{adapterType:"TransportAdapterStatic",adapterParams:{data:{d:t.d,s:t.s}}}})}else if("record"===t._type){var a=e("Deprecated/Record");if(a)return new a({row:t.d,colDef:t.s,pkValue:t._key})}else return t}function c(e){return e&&e.s&&e.d&&("record"===e._type||"recordset"===e._type)}function o(e){var r=e.split(":"),t;try{if(t=global.requirejs(r[0]),r[1])t={readerParams:{adapterType:"TransportAdapterStatic",adapterParams:{data:t.contents&&t.contents[r[1]]}}}}catch(r){throw new Error('Parsing datasource declaration "'+e+'" failed. Message:'+r.message)}return t}function l(e,r){return r=""+r,e.substr(0,r.length)===r}return n});
//# sourceMappingURL=Serializer.js.map