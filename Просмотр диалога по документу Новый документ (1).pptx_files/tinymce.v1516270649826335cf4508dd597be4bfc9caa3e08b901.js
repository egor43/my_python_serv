(function(e,t){"use strict";var n={};function i(e,t){for(var i,r=[],o=0;o<e.length;++o){if(i=n[e[o]]||a(e[o]),!i)throw"module definition dependecy not found: "+e[o];r.push(i)}t.apply(null,r)}function r(e,r,o){if("string"!==typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";i(r,function(){n[e]=o.apply(null,arguments)})}function o(e){return!!n[e]}function a(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}function s(i){var r,o,a,s,l;for(r=0;r<i.length;r++){o=e,s=(a=i[r]).split(/[.\/]/);for(var u=0;u<s.length-1;++u){if(o[s[u]]===t)o[s[u]]={};o=o[s[u]]}o[s[s.length-1]]=n[a]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(a in n)l[a]=n[a];for(r=0;r<i.length;r++)delete l[i[r]];e.privateModules=l}}r("tinymce/geom/Rect",[],function(){var e=Math.min,t=Math.max,n=Math.round;function i(e,t,i){var r,o,a,s,u,c;if(r=t.x,o=t.y,a=e.w,s=e.h,u=t.w,c=t.h,i=(i||"").split(""),"b"===i[0])o+=c;if("r"===i[1])r+=u;if("c"===i[0])o+=n(c/2);if("c"===i[1])r+=n(u/2);if("b"===i[3])o-=s;if("r"===i[4])r-=a;if("c"===i[3])o-=n(s/2);if("c"===i[4])r-=n(a/2);return l(r,o,a,s)}function r(e,t,n,r){var o,a;for(a=0;a<r.length;a++)if(o=i(e,t,r[a]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[a];return null}function o(e,t,n){return l(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function a(n,i){var r,o,a,s;if(r=t(n.x,i.x),o=t(n.y,i.y),a=e(n.x+n.w,i.x+i.w),s=e(n.y+n.h,i.y+i.h),a-r<0||s-o<0)return null;return l(r,o,a-r,s-o)}function s(e,n,i){var r,o,a,s,u,c,f,d,m,p;if(u=e.x,c=e.y,f=e.x+e.w,d=e.y+e.h,m=n.x+n.w,p=n.y+n.h,r=t(0,n.x-u),o=t(0,n.y-c),a=t(0,f-m),s=t(0,d-p),u+=r,c+=o,i)f+=r,d+=o,u-=a,c-=s;return f-=a,d-=s,l(u,c,f-u,d-c)}function l(e,t,n,i){return{x:e,y:t,w:n,h:i}}function u(e){return l(e.left,e.top,e.width,e.height)}return{inflate:o,relativePosition:i,findBestRelativePosition:r,intersect:a,clamp:s,create:l,fromClientRect:u}}),r("tinymce/util/Promise",[],function(){if(window.Promise&&window.Promise.all)return window.Promise;var e=i.immediateFn||"function"===typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function t(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,t(o,this),t(a,this))}function r(t){var n=this;if(null===this._state)return void this._deferreds.push(t);e(function(){var e=n._state?t.onFulfilled:t.onRejected;if(null===e)return void(n._state?t.resolve:t.reject)(n._value);var i;try{i=e(n._value)}catch(e){return void t.reject(e)}t.resolve(i)})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if("function"===typeof n)return void u(t(n,e),t(o,this),t(a,this))}this._state=true,this._value=e,s.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=false,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n,i){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=i}function u(e,t,n){var i=false;try{e(function(e){if(i)return;i=true,t(e)},function(e){if(i)return;i=true,n(e)})}catch(e){if(i)return;i=true,n(e)}}return i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=this;return new i(function(i,o){r.call(n,new l(e,t,i,o))})},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new i(function(t,n){if(0===e.length)return t([]);var i=e.length;function r(o,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(e){r(o,e)},n)}if(e[o]=a,0===--i)t(e)}catch(e){n(e)}}for(var o=0;o<e.length;o++)r(o,e[o])})},i.resolve=function(e){if(e&&"object"===typeof e&&e.constructor===i)return e;return new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},i}),r("tinymce/util/Delay",["tinymce/util/Promise"],function(e){var t;function n(e,t){var n,i=window.requestAnimationFrame,r=["ms","moz","webkit"];function o(e){window.setTimeout(e,0)}for(n=0;n<r.length&&!i;n++)i=window[r[n]+"RequestAnimationFrame"];if(!i)i=o;i(e,t)}function i(e,t){if("number"!=typeof t)t=0;return setTimeout(e,t)}function r(e,t){if("number"!=typeof t)t=1;return setInterval(e,t)}function o(e){return clearTimeout(e)}function a(e){return clearInterval(e)}function s(e,t){var n,r;return r=function(){var r=arguments;clearTimeout(n),n=i(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(n)},r}return{requestAnimationFrame:function(i,r){if(t)return void t.then(i);t=new e(function(e){if(!r)r=document.body;n(e,r)}).then(i)},setTimeout:i,setInterval:r,setEditorTimeout:function(e,t,n){return i(function(){if(!e.removed)t()},n)},setEditorInterval:function(e,t,n){var i;return i=r(function(){if(!e.removed)t();else clearInterval(i)},n),i},debounce:s,throttle:s,clearInterval:a,clearTimeout:o}}),r("tinymce/Env",[],function(){var e=navigator,t=e.userAgent,n,i,r,o,a,s,l,u,c,f,d,m,p;function h(e){return"matchMedia"in window?matchMedia(e).matches:false}if(n=window.opera&&window.opera.buildNumber,c=/Android/.test(t),i=/WebKit/.test(t),r=!i&&!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),r=r&&/MSIE (\w+)\./.exec(t)[1],o=+(t.match(/Trident\/([0-9]+)\.[0-9]+/)||[])[1]+4||false,a=-1!=t.indexOf("Edge/")&&!r&&!o?12:false,r=a||o||r,s=!i&&!o&&/Gecko/.test(t),l=-1!=t.indexOf("Mac"),u=/(iPad|iPhone)/.test(t),f="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,d=h("only screen and (max-device-width: 480px)")&&(c||u),m=h("only screen and (min-width: 800px)")&&(c||u),p=-1!=t.indexOf("Windows Phone"),a)i=false;return{opera:n,webkit:i,ie:r,gecko:s,mac:l,iOS:u,android:c,contentEditable:!u||f||t.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=r,range:window.getSelection&&"Range"in window,documentMode:r&&!a?document.documentMode||7:10,fileApi:f,ceFalse:false===r||r>8,canHaveCSP:false===r||r>11,desktop:!d&&!m,windowsPhone:p}}),r("tinymce/dom/EventUtils",["tinymce/util/Delay","tinymce/Env"],function(e,t){var n="mce-data-",i=/^(?:mouse|contextmenu)|click/,r={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};function o(e,t,n,i){if(e.addEventListener)e.addEventListener(t,n,i||false);else if(e.attachEvent)e.attachEvent("on"+t,n)}function a(e,t,n,i){if(e.removeEventListener)e.removeEventListener(t,n,i||false);else if(e.detachEvent)e.detachEvent("on"+t,n)}function s(e,t){var n,i=t;if(n=e.path,n&&n.length>0)i=n[0];if(e.deepPath)if(n=e.deepPath(),n&&n.length>0)i=n[0];return i}function l(e,n){var o,a=n||{},l;function u(){return false}function c(){return true}for(o in e)if(!r[o])a[o]=e[o];if(!a.target)a.target=a.srcElement||document;if(t.experimentalShadowDom)a.target=s(e,a.target);if(e&&i.test(e.type)&&e.pageX===l&&e.clientX!==l){var f=a.target.ownerDocument||document,d=f.documentElement,m=f.body;a.pageX=e.clientX+(d&&d.scrollLeft||m&&m.scrollLeft||0)-(d&&d.clientLeft||m&&m.clientLeft||0),a.pageY=e.clientY+(d&&d.scrollTop||m&&m.scrollTop||0)-(d&&d.clientTop||m&&m.clientTop||0)}if(a.preventDefault=function(){if(a.isDefaultPrevented=c,e)if(e.preventDefault)e.preventDefault();else e.returnValue=false},a.stopPropagation=function(){if(a.isPropagationStopped=c,e)if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true},a.stopImmediatePropagation=function(){a.isImmediatePropagationStopped=c,a.stopPropagation()},!a.isDefaultPrevented)a.isDefaultPrevented=u,a.isPropagationStopped=u,a.isImmediatePropagationStopped=u;if("undefined"==typeof a.metaKey)a.metaKey=false;return a}function u(t,n,i){var r=t.document,s={type:"ready"};if(i.domLoaded)return void n(s);function l(){if(!i.domLoaded)i.domLoaded=true,n(s)}function u(){if("complete"===r.readyState||"interactive"===r.readyState&&r.body)a(r,"readystatechange",u),l()}function c(){try{r.documentElement.doScroll("left")}catch(t){return void e.setTimeout(c)}l()}if(r.addEventListener)if("complete"===r.readyState)l();else o(t,"DOMContentLoaded",l);else if(o(r,"readystatechange",u),r.documentElement.doScroll&&t.self===t.top)c();o(t,"load",l)}function c(){var e=this,t={},i,r,s,c,f;r=n+(+new Date).toString(32),c="onmouseenter"in document.documentElement,s="onfocusin"in document.documentElement,f={mouseenter:"mouseover",mouseleave:"mouseout"},i=1,e.domLoaded=false,e.events=t;function d(e,n){var i,r,o,a,s=t[n];if(i=s&&s[e.type],i)for(r=0,o=i.length;r<o;r++){if(a=i[r],a&&false===a.func.call(a.scope,e))e.preventDefault();if(e.isImmediatePropagationStopped())return}}e.bind=function(n,a,m,p){var h,g,v,y,b,w,C,x=window;function k(e){d(l(e||x.event),h)}if(!n||3===n.nodeType||8===n.nodeType)return;if(!n[r])h=i++,n[r]=h,t[h]={};else h=n[r];p=p||n,v=(a=a.split(" ")).length;while(v--){if(y=a[v],w=k,b=C=false,"DOMContentLoaded"===y)y="ready";if(e.domLoaded&&"ready"===y&&"complete"==n.readyState){m.call(p,l({type:y}));continue}if(!c)if(b=f[y],b)w=function(e){var t,n;if(t=e.currentTarget,n=e.relatedTarget,n&&t.contains)n=t.contains(n);else while(n&&n!==t)n=n.parentNode;if(!n)(e=l(e||x.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,d(e,h)};if(!s&&("focusin"===y||"focusout"===y))C=true,b="focusin"===y?"focus":"blur",w=function(e){(e=l(e||x.event)).type="focus"===e.type?"focusin":"focusout",d(e,h)};if(g=t[h][y],!g)if(t[h][y]=g=[{func:m,scope:p}],g.fakeName=b,g.capture=C,g.nativeHandler=w,"ready"===y)u(n,w,e);else o(n,b||y,w,C);else if("ready"===y&&e.domLoaded)m({type:y});else g.push({func:m,scope:p})}return n=g=0,m},e.unbind=function(n,i,o){var s,l,u,c,f,d;if(!n||3===n.nodeType||8===n.nodeType)return e;if(s=n[r],s){if(d=t[s],i){u=(i=i.split(" ")).length;while(u--)if(f=i[u],l=d[f],l){if(o){c=l.length;while(c--)if(l[c].func===o){var m=l.nativeHandler,p=l.fakeName,h=l.capture;(l=l.slice(0,c).concat(l.slice(c+1))).nativeHandler=m,l.fakeName=p,l.capture=h,d[f]=l}}if(!o||0===l.length)delete d[f],a(n,l.fakeName||f,l.nativeHandler,l.capture)}}else{for(f in d)l=d[f],a(n,l.fakeName||f,l.nativeHandler,l.capture);d={}}for(f in d)return e;delete t[s];try{delete n[r]}catch(e){n[r]=null}}return e},e.fire=function(t,n,i){var o;if(!t||3===t.nodeType||8===t.nodeType)return e;(i=l(null,i)).type=n,i.target=t;do{if(o=t[r],o)d(i,o);t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!i.isPropagationStopped());return e},e.clean=function(t){var n,i,o=e.unbind;if(!t||3===t.nodeType||8===t.nodeType)return e;if(t[r])o(t);if(!t.getElementsByTagName)t=t.document;if(t&&t.getElementsByTagName){o(t),n=(i=t.getElementsByTagName("*")).length;while(n--)if(t=i[n],t[r])o(t)}return e},e.destroy=function(){t={}},e.cancel=function(e){if(e)e.preventDefault(),e.stopImmediatePropagation();return false}}return c.Event=new c,c.Event.bind(window,"ready",function(){}),c}),r("tinymce/dom/Sizzle",[],function(){var e,n,i,r,o,a,s,l,u,c,f,d,m,p,h,g,v,y,b,w="sizzle"+-new Date,C=window.document,x=0,k=0,N=re(),E=re(),S=re(),T=function(e,t){if(e===t)f=true;return 0},_=typeof t,R=1<<31,B={}.hasOwnProperty,A=[],D=A.pop,P=A.push,M=A.push,L=A.slice,O=A.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",z="\\["+H+"*("+F+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+H+"*\\]",U=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|"+".*"+")\\)|)",W=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),V=new RegExp("^"+H+"*,"+H+"*"),$=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),j=new RegExp("="+H+"*([^\\]'\"]*?)"+H+"*\\]","g"),q=new RegExp(U),K=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+H+"?|("+H+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{M.apply(A=L.call(C.childNodes),C.childNodes),A[C.childNodes.length].nodeType}catch(e){M={apply:A.length?function(e,t){P.apply(e,L.call(t))}:function(e,t){var n=e.length,i=0;while(e[n++]=t[i++]);e.length=n-1}}}function ie(e,t,i,r){var o,s,u,c,f,p,v,y,x,k;if((t?t.ownerDocument||t:C)!==m)d(t);if(t=t||m,i=i||[],!e||"string"!==typeof e)return i;if(1!==(c=t.nodeType)&&9!==c)return[];if(h&&!r){if(o=Q.exec(e))if(u=o[1]){if(9===c)if(s=t.getElementById(u),s&&s.parentNode){if(s.id===u)return i.push(s),i}else return i;else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&b(t,s)&&s.id===u)return i.push(s),i}else if(o[2])return M.apply(i,t.getElementsByTagName(e)),i;else if((u=o[3])&&n.getElementsByClassName)return M.apply(i,t.getElementsByClassName(u)),i;if(n.qsa&&(!g||!g.test(e))){if(y=v=w,x=t,k=9===c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){if(p=a(e),v=t.getAttribute("id"))y=v.replace(ee,"\\$&");else t.setAttribute("id",y);y="[id='"+y+"'] ",f=p.length;while(f--)p[f]=y+pe(p[f]);x=Z.test(e)&&de(t.parentNode)||t,k=p.join(",")}if(k)try{return M.apply(i,x.querySelectorAll(k)),i}catch(e){}finally{if(!v)t.removeAttribute("id")}}}return l(e.replace(W,"$1"),t,i,r)}function re(){var e=[];function t(n,r){if(e.push(n+" ")>i.cacheLength)delete t[e.shift()];return t[n+" "]=r}return t}function oe(e){return e[w]=true,e}function ae(e){var t=m.createElement("div");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode)t.parentNode.removeChild(t);t=null}}function se(e,t){var n=e.split("|"),r=e.length;while(r--)i.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||R)-(~e.sourceIndex||R);if(i)return i;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ue(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ce(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return oe(function(t){return t=+t,oe(function(n,i){var r,o=e([],n.length,t),a=o.length;while(a--)if(n[r=o[a]])n[r]=!(i[r]=n[r])})})}function de(e){return e&&typeof e.getElementsByTagName!==_&&e}n=ie.support={},o=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:false},d=ie.setDocument=function(e){var t,r=e?e.ownerDocument||e:C,a=r.defaultView;function s(e){try{return e.top}catch(e){}return null}if(r===m||9!==r.nodeType||!r.documentElement)return m;if(m=r,p=r.documentElement,h=!o(r),a&&a!==s(a))if(a.addEventListener)a.addEventListener("unload",function(){d()},false);else if(a.attachEvent)a.attachEvent("onunload",function(){d()});if(n.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ae(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(r.getElementsByClassName),n.getById=ae(function(e){return p.appendChild(e).id=w,!r.getElementsByName||!r.getElementsByName(w).length}),n.getById)i.find["ID"]=function(e,t){if(typeof t.getElementById!==_&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}};else delete i.find["ID"],i.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){var n=typeof e.getAttributeNode!==_&&e.getAttributeNode("id");return n&&n.value===t}};if(i.find["TAG"]=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==_)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[r++])if(1===n.nodeType)i.push(n);return i}return o},i.find["CLASS"]=n.getElementsByClassName&&function(e,t){if(h)return t.getElementsByClassName(e)},v=[],g=[],n.qsa=J.test(r.querySelectorAll))ae(function(e){if(e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length)g.push("[*^$]="+H+"*(?:''|\"\")");if(!e.querySelectorAll("[selected]").length)g.push("\\["+H+"*(?:value|"+I+")");if(!e.querySelectorAll(":checked").length)g.push(":checked")}),ae(function(e){var t=r.createElement("input");if(t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length)g.push("name"+H+"*[*^$|!~]?=");if(!e.querySelectorAll(":enabled").length)g.push(":enabled",":disabled");e.querySelectorAll("*,:x"),g.push(",.*:")});if(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))ae(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",U)});return g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&1===i.nodeType&&(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return true;return false},T=t?function(e,t){if(e===t)return f=true,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;if(i)return i;if(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!n.sortDetached&&t.compareDocumentPosition(e)===i){if(e===r||e.ownerDocument===C&&b(C,e))return-1;if(t===r||t.ownerDocument===C&&b(C,t))return 1;return c?O.call(c,e)-O.call(c,t):0}return 4&i?-1:1}:function(e,t){if(e===t)return f=true,0;var n,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:c?O.call(c,e)-O.call(c,t):0;else if(o===a)return le(e,t);n=e;while(n=n.parentNode)s.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(s[i]===l[i])i++;return i?le(s[i],l[i]):s[i]===C?-1:l[i]===C?1:0},r},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==m)d(e);if(t=t.replace(j,"='$1']"),n.matchesSelector&&h&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return ie(t,m,null,[e]).length>0},ie.contains=function(e,t){if((e.ownerDocument||e)!==m)d(e);return b(e,t)},ie.attr=function(e,r){if((e.ownerDocument||e)!==m)d(e);var o=i.attrHandle[r.toLowerCase()],a=o&&B.call(i.attrHandle,r.toLowerCase())?o(e,r,!h):t;return a!==t?a:n.attributes||!h?e.getAttribute(r):(a=e.getAttributeNode(r))&&a.specified?a.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,i=[],r=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(T),f){while(t=e[o++])if(t===e[o])r=i.push(o);while(r--)e.splice(i[r],1)}return c=null,e},r=ie.getText=function(e){var t,n="",i=0,o=e.nodeType;if(!o)while(t=e[i++])n+=r(t);else if(1===o||9===o||11===o)if("string"===typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)n+=r(e);else if(3===o||4===o)return e.nodeValue;return n},(i=ie.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){if(e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2])e[3]=" "+e[3]+" ";return e.slice(0,4)},CHILD:function(e){if(e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)){if(!e[3])ie.error(e[0]);e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])}else if(e[3])ie.error(e[0]);return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(Y["CHILD"].test(e[0]))return null;if(e[3])e[2]=e[4]||e[5]||"";else if(n&&q.test(n)&&(t=a(n,true))&&(t=n.indexOf(")",n.length-t)-n.length))e[0]=e[0].slice(0,t),e[2]=n.slice(0,t);return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test("string"===typeof e.className&&e.className||typeof e.getAttribute!==_&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=ie.attr(i,e);if(null==r)return"!="===t;if(!t)return true;return r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t?r===n||r.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,m,p,h=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){while(h){f=t;while(f=f[h])if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return false;p=h="only"===e&&!p&&"nextSibling"}return true}if(p=[a?g.firstChild:g.lastChild],a&&y){m=(u=(c=g[w]||(g[w]={}))[e]||[])[0]===x&&u[1],d=u[0]===x&&u[2],f=m&&g.childNodes[m];while(f=++m&&f&&f[h]||(d=m=0)||p.pop())if(1===f.nodeType&&++d&&f===t){c[e]=[x,m,d];break}}else if(y&&(u=(t[w]||(t[w]={}))[e])&&u[0]===x)d=u[1];else while(f=++m&&f&&f[h]||(d=m=0)||p.pop())if((s?f.nodeName.toLowerCase()===v:1===f.nodeType)&&++d){if(y)(f[w]||(f[w]={}))[e]=[x,d];if(f===t)break}return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);if(r[w])return r(t);if(r.length>1)return n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,n){var i,o=r(e,t),a=o.length;while(a--)e[i=O.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)};return r}},pseudos:{not:oe(function(e){var t=[],n=[],i=s(e.replace(W,"$1"));return i[w]?oe(function(e,t,n,r){var o,a=i(e,null,r,[]),s=e.length;while(s--)if(o=a[s])e[s]=!(t[s]=o)}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:oe(function(e){return function(t){return ie(e,t).length>0}}),contains:oe(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:oe(function(e){if(!K.test(e||""))ie.error("unsupported lang: "+e);return e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return false}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===p},focus:function(e){return e===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return false===e.disabled},disabled:function(e){return true===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){if(e.parentNode)e.parentNode.selectedIndex;return true===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return false;return true},parent:function(e){return!i.pseudos["empty"](e)},header:function(e){return G.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:fe(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos["nth"]=i.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true})i.pseudos[e]=ue(e);for(e in{submit:true,reset:true})i.pseudos[e]=ce(e);function me(){}me.prototype=i.filters=i.pseudos,i.setFilters=new me,a=ie.tokenize=function(e,t){var n,r,o,a,s,l,u,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,l=[],u=i.preFilter;while(s){if(!n||(r=V.exec(s))){if(r)s=s.slice(r[0].length)||s;l.push(o=[])}if(n=false,r=$.exec(s))n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length);for(a in i.filter)if((r=Y[a].exec(s))&&(!u[a]||(r=u[a](r))))n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length);if(!n)break}return t?s.length:s?ie.error(e):E(e,l).slice(0)};function pe(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function he(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=k++;return t.first?function(t,n,o){while(t=t[i])if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,u=[x,o];if(a){while(t=t[i])if(1===t.nodeType||r)if(e(t,n,a))return true}else while(t=t[i])if(1===t.nodeType||r)if(l=t[w]||(t[w]={}),(s=l[i])&&s[0]===x&&s[1]===o)return u[2]=s[2];else if(l[i]=u,u[2]=e(t,n,a))return true}}function ge(e){return e.length>1?function(t,n,i){var r=e.length;while(r--)if(!e[r](t,n,i))return false;return true}:e[0]}function ve(e,t,n){for(var i=0,r=t.length;i<r;i++)ie(e,t[i],n);return n}function ye(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)if(o=e[s])if(!n||n(o,i,r))if(a.push(o),u)t.push(s);return a}function be(e,t,n,i,r,o){if(i&&!i[w])i=be(i);if(r&&!r[w])r=be(r,o);return oe(function(o,a,s,l){var u,c,f,d=[],m=[],p=a.length,h=o||ve(t||"*",s.nodeType?[s]:s,[]),g=e&&(o||!t)?ye(h,d,e,s,l):h,v=n?r||(o?e:p||i)?[]:a:g;if(n)n(g,v,s,l);if(i){u=ye(v,m),i(u,[],s,l),c=u.length;while(c--)if(f=u[c])v[m[c]]=!(g[m[c]]=f)}if(o){if(r||e){if(r){u=[],c=v.length;while(c--)if(f=v[c])u.push(g[c]=f);r(null,v=[],u,l)}c=v.length;while(c--)if((f=v[c])&&(u=r?O.call(o,f):d[c])>-1)o[u]=!(a[u]=f)}}else if(v=ye(v===a?v.splice(p,v.length):v),r)r(null,a,v,l);else M.apply(a,v)})}function we(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,c=he(function(e){return e===t},s,true),f=he(function(e){return O.call(t,e)>-1},s,true),d=[function(e,n,i){return!a&&(i||n!==u)||((t=n).nodeType?c(e,n,i):f(e,n,i))}];l<o;l++)if(n=i.relative[e[l].type])d=[he(ge(d),n)];else{if(n=i.filter[e[l].type].apply(null,e[l].matches),n[w]){for(r=++l;r<o;r++)if(i.relative[e[r].type])break;return be(l>1&&ge(d),l>1&&pe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(W,"$1"),n,l<r&&we(e.slice(l,r)),r<o&&we(e=e.slice(r)),r<o&&pe(e))}d.push(n)}return ge(d)}function Ce(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,l,c){var f,d,p,h=0,g="0",v=o&&[],y=[],b=u,w=o||r&&i.find["TAG"]("*",c),C=x+=null==b?1:Math.random()||.1,k=w.length;if(c)u=a!==m&&a;for(;g!==k&&null!=(f=w[g]);g++){if(r&&f){d=0;while(p=e[d++])if(p(f,a,s)){l.push(f);break}if(c)x=C}if(n){if(f=!p&&f)h--;if(o)v.push(f)}}if(h+=g,n&&g!==h){d=0;while(p=t[d++])p(v,y,a,s);if(o){if(h>0)while(g--)if(!(v[g]||y[g]))y[g]=D.call(l);y=ye(y)}if(M.apply(l,y),c&&!o&&y.length>0&&h+t.length>1)ie.uniqueSort(l)}if(c)x=C,u=b;return v};return n?oe(o):o}if(s=ie.compile=function(e,t){var n,i=[],r=[],o=S[e+" "];if(!o){if(!t)t=a(e);n=t.length;while(n--)if(o=we(t[n]),o[w])i.push(o);else r.push(o);(o=S(e,Ce(r,i))).selector=e}return o},l=ie.select=function(e,t,r,o){var l,u,c,f,d,m="function"===typeof e&&e,p=!o&&a(e=m.selector||e);if(r=r||[],1===p.length){if(u=p[0]=p[0].slice(0),u.length>2&&"ID"===(c=u[0]).type&&n.getById&&9===t.nodeType&&h&&i.relative[u[1].type]){if(t=(i.find["ID"](c.matches[0].replace(te,ne),t)||[])[0],!t)return r;else if(m)t=t.parentNode;e=e.slice(u.shift().value.length)}l=Y["needsContext"].test(e)?0:u.length;while(l--){if(c=u[l],i.relative[f=c.type])break;if(d=i.find[f])if(o=d(c.matches[0].replace(te,ne),Z.test(u[0].type)&&de(t.parentNode)||t)){if(u.splice(l,1),e=o.length&&pe(u),!e)return M.apply(r,o),r;break}}}return(m||s(e,p))(o,t,!h,r,Z.test(e)&&de(t.parentNode)||t),r},n.sortStable=w.split("").sort(T).join("")===w,n.detectDuplicates=!!f,d(),n.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(m.createElement("div"))}),!ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)});if(!n.attributes||!ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue});if(!ae(function(e){return null==e.getAttribute("disabled")}))se(I,function(e,t,n){var i;if(!n)return true===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null});return ie}),r("tinymce/util/Arr",[],function(){var e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(t){var n=t,i,r;if(!e(t))for(n=[],i=0,r=t.length;i<r;i++)n[i]=t[i];return n}function i(e,n,i){var r,o;if(!e)return 0;if(i=i||e,e.length!==t){for(r=0,o=e.length;r<o;r++)if(false===n.call(i,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r))if(false===n.call(i,e[r],r,e))return 0;return 1}function r(e,t){var n=[];return i(e,function(i,r){n.push(t(i,r,e))}),n}function o(e,t){var n=[];return i(e,function(i,r){if(!t||t(i,r,e))n.push(i)}),n}function a(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function s(e,t,n,i){var r=0;if(arguments.length<3)n=e[0];for(;r<e.length;r++)n=t.call(i,n,e[r],r);return n}function l(e,t,n){var i,r;for(i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1}function u(e,n,i){var r=l(e,n,i);if(-1!==r)return e[r];return t}function c(e){return e[e.length-1]}return{isArray:e,toArray:n,each:i,map:r,filter:o,indexOf:a,reduce:s,findIndex:l,find:u,last:c}}),r("tinymce/util/Tools",["tinymce/Env","tinymce/util/Arr"],function(e,n){var i=/^\s*|\s*$/g;function r(e){return null===e||e===t?"":(""+e).replace(i,"")}function o(e,i){if(!i)return e!==t;if("array"==i&&n.isArray(e))return true;return typeof e==i}function a(e,t,n){var i;if(e=e||[],t=t||",","string"==typeof e)e=e.split(t);n=n||{},i=e.length;while(i--)n[e[i]]={};return n}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t,n){var i=this,r,o,a,s,l,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],o=i.createNS(e[3].replace(/\.\w+$/,""),n),o[a])return;if("static"==e[2]){if(o[a]=t,this.onCreate)this.onCreate(e[2],e[3],o[a]);return}if(!t[a])t[a]=function(){},u=1;if(o[a]=t[a],i.extend(o[a].prototype,t),e[5]){if(r=i.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],l=o[a],u)o[a]=function(){return r[s].apply(this,arguments)};else o[a]=function(){return this.parent=r[s],l.apply(this,arguments)};o[a].prototype[a]=o[a],i.each(r,function(e,t){o[a].prototype[t]=r[t]}),i.each(t,function(e,t){if(r[t])o[a].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)};else if(t!=a)o[a].prototype[t]=e})}i.each(t["static"],function(e,t){o[a][t]=e})}function u(e,n){var i,r,o,a=arguments,s;for(i=1,r=a.length;i<r;i++){n=a[i];for(o in n)if(n.hasOwnProperty(o))if(s=n[o],s!==t)e[o]=s}return e}function c(e,t,i,r){if(r=r||this,e){if(i)e=e[i];n.each(e,function(e,n){if(false===t.call(r,e,n,i))return false;c(e,t,i,r)})}}function f(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++){if(i=e[n],!t[i])t[i]={};t=t[i]}return t}function d(e,t){var n,i;for(t=t||window,n=0,i=(e=e.split(".")).length;n<i;n++)if(t=t[e[n]],!t)break;return t}function m(e,t){if(!e||o(e,"array"))return e;return n.map(e.split(t||","),r)}function p(t){var n=e.cacheSuffix;if(n)t+=(-1===t.indexOf("?")?"?":"&")+n;return t}return{trim:r,isArray:n.isArray,is:o,toArray:n.toArray,makeMap:a,each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:s,extend:u,create:l,walk:c,createNS:f,resolve:d,explode:m,_addCacheSuffix:p}}),r("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],function(e,n,i,r){var o=document,a=Array.prototype.push,s=Array.prototype.slice,l=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=e.Event,c,f=i.makeMap("children,contents,next,prev");function d(e){return"undefined"!==typeof e}function m(e){return"string"===typeof e}function p(e){return e&&e==e.window}function h(e,t){var n,i,r;r=(t=t||o).createElement("div"),n=t.createDocumentFragment(),r.innerHTML=e;while(i=r.firstChild)n.appendChild(i);return n}function g(e,t,n,i){var r;if(m(t))t=h(t,A(e[0]));else if(t.length&&!t.nodeType){if(t=E.makeArray(t),i)for(r=t.length-1;r>=0;r--)g(e,t[r],n,i);else for(r=0;r<t.length;r++)g(e,t[r],n,i);return e}if(t.nodeType){r=e.length;while(r--)n.call(e[r],t)}return e}function v(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function y(e,t,n){var i,r;return t=E(t)[0],e.each(function(){var e=this;if(!n||i!=e.parentNode)i=e.parentNode,r=t.cloneNode(false),e.parentNode.insertBefore(r,e),r.appendChild(e);else r.appendChild(e)}),e}var b=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),w=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),C={for:"htmlFor",class:"className",readonly:"readOnly"},x={float:"cssFloat"},k={},N={};function E(e,t){return new E.fn.init(e,t)}function S(e,t){var n;if(t.indexOf)return t.indexOf(e);n=t.length;while(n--)if(t[n]===e)return n;return-1}var T=/^\s*|\s*$/g;function _(e){return null===e||e===c?"":(""+e).replace(T,"")}function R(e,t){var n,i,r,o,a;if(e)if(n=e.length,n===o){for(i in e)if(e.hasOwnProperty(i))if(a=e[i],false===t.call(a,i,a))break}else for(r=0;r<n;r++)if(a=e[r],false===t.call(a,r,a))break;return e}function B(e,t){var n=[];return R(e,function(e,i){if(t(i,e))n.push(i)}),n}function A(e){if(!e)return o;if(9==e.nodeType)return e;return e.ownerDocument}E.fn=E.prototype={constructor:E,selector:"",context:null,length:0,init:function(e,t){var n=this,i,r;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return E(e).attr(t);n.context=t=document}if(m(e)){if(n.selector=e,"<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3)i=[null,e,null];else i=l.exec(e);if(i)if(i[1]){r=h(e,A(t)).firstChild;while(r)a.call(n,r),r=r.nextSibling}else{if(r=A(t).getElementById(i[2]),!r)return n;if(r.id!==i[2])return n.find(e);n.length=1,n[0]=r}else return E(t).find(e)}else this.add(e,false);return n},toArray:function(){return i.toArray(this)},add:function(e,t){var n=this,i,r;if(m(e))return n.add(E(e));if(false!==t)for(i=E.unique(n.toArray().concat(E.makeArray(e))),n.length=i.length,r=0;r<i.length;r++)n[r]=i[r];else a.apply(n,E.makeArray(e));return n},attr:function(e,t){var n=this,i;if("object"===typeof e)R(e,function(e,t){n.attr(e,t)});else if(d(t))this.each(function(){var n;if(1===this.nodeType){if(n=k[e],n&&n.set)return void n.set(this,t);if(null===t)this.removeAttribute(e,2);else this.setAttribute(e,t,2)}});else{if(n[0]&&1===n[0].nodeType){if(i=k[e],i&&i.get)return i.get(n[0],e);if(w[e])return n.prop(e)?e:c;if(t=n[0].getAttribute(e,2),null===t)t=c}return t}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=C[e]||e,"object"===typeof e)R(e,function(e,t){n.prop(e,t)});else if(d(t))this.each(function(){if(1==this.nodeType)this[e]=t});else{if(n[0]&&n[0].nodeType&&e in n[0])return n[0][e];return t}return n},css:function(e,t){var n=this,i,r;function o(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function a(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}if("object"===typeof e)R(e,function(e,t){n.css(e,t)});else if(d(t)){if(e=o(e),"number"===typeof t&&!b[e])t+="px";n.each(function(){var n=this.style;if(r=N[e],r&&r.set)return void r.set(this,t);try{this.style[x[e]||e]=t}catch(e){}if(null===t||""===t)if(n.removeProperty)n.removeProperty(a(e));else n.removeAttribute(e)})}else{if(i=n[0],r=N[e],r&&r.get)return r.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(a(e))}catch(e){return c}else if(i.currentStyle)return i.currentStyle[o(e)]}return n},remove:function(){var e=this,t,n=this.length;while(n--)if(t=e[n],u.clean(t),t.parentNode)t.parentNode.removeChild(t);return this},empty:function(){var e=this,t,n=this.length;while(n--){t=e[n];while(t.firstChild)t.removeChild(t.firstChild)}return this},html:function(e){var t=this,n;if(d(e)){n=t.length;try{while(n--)t[n].innerHTML=e}catch(i){E(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(d(e)){n=t.length;while(n--)if("innerText"in t[n])t[n].innerText=e;else t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return g(this,arguments,function(e){if(1===this.nodeType||this.host&&1===this.host.nodeType)this.appendChild(e)})},prepend:function(){return g(this,arguments,function(e){if(1===this.nodeType||this.host&&1===this.host.nodeType)this.insertBefore(e,this.firstChild)},true)},before:function(){var e=this;if(e[0]&&e[0].parentNode)return g(e,arguments,function(e){this.parentNode.insertBefore(e,this)});return e},after:function(){var e=this;if(e[0]&&e[0].parentNode)return g(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},true);return e},appendTo:function(e){return E(e).append(this),this},prependTo:function(e){return E(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return y(this,e)},wrapAll:function(e){return y(this,e,true)},wrapInner:function(e){return this.each(function(){E(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(true))}),E(e)},addClass:function(e){return this.toggleClass(e,true)},removeClass:function(e){return this.toggleClass(e,false)},toggleClass:function(e,t){var n=this;if("string"!=typeof e)return n;if(-1!==e.indexOf(" "))R(e.split(" "),function(){n.toggleClass(this,t)});else n.each(function(n,i){var r,o;if(o=v(i,e),o!==t)if(r=i.className,o)i.className=_((" "+r+" ").replace(" "+e+" "," "));else i.className+=r?" "+e:e});return n},hasClass:function(e){return v(this[0],e)},each:function(e){return R(this,e)},on:function(e,t){return this.each(function(){u.bind(this,e,t)})},off:function(e,t){return this.each(function(){u.unbind(this,e,t)})},trigger:function(e){return this.each(function(){if("object"==typeof e)u.fire(this,e.type,e);else u.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new E(s.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)E.find(e,this[t],i);return E(i)},filter:function(e){if("function"==typeof e)return E(B(this.toArray(),function(t,n){return e(n,t)}));return E(E.filter(e,this.toArray()))},closest:function(e){var t=[];if(e instanceof E)e=e[0];return this.each(function(n,i){while(i){if("string"==typeof e&&E(i).is(e)){t.push(i);break}else if(i==e){t.push(i);break}i=i.parentNode}}),E(t)},offset:function(e){var t,n,i,r=0,o=0,a;if(!e){if(t=this[0],t)if(n=t.ownerDocument,i=n.documentElement,t.getBoundingClientRect)r=(a=t.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,o=a.top+(i.scrollTop||n.body.scrollTop)-i.clientTop;return{left:r,top:o}}return this.css(e)},push:a,sort:[].sort,splice:[].splice},i.extend(E,{extend:i.extend,makeArray:function(e){if(p(e)||e.nodeType)return[e];return i.toArray(e)},inArray:S,isArray:i.isArray,each:R,trim:_,grep:B,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var i=t.length;if(n)e=":not("+e+")";while(i--)if(1!=t[i].nodeType)t.splice(i,1);if(1===t.length)t=E.find.matchesSelector(t[0],e)?[t[0]]:[];else t=E.find.matches(e,t);return t}});function D(e,n,i){var r=[],o=e[n];if("string"!=typeof i&&i instanceof E)i=i[0];while(o&&9!==o.nodeType){if(i!==t){if(o===i)break;if("string"==typeof i&&E(o).is(i))break}if(1===o.nodeType)r.push(o);o=o[n]}return r}function P(e,n,i,r){var o=[];if(r instanceof E)r=r[0];for(;e;e=e[n]){if(i&&e.nodeType!==i)continue;if(r!==t){if(e===r)break;if("string"==typeof r&&E(e).is(r))break}o.push(e)}return o}function M(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}R({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},next:function(e){return M(e,"nextSibling",1)},prev:function(e){return M(e,"previousSibling",1)},children:function(e){return P(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){E.fn[e]=function(n){var i=[];if(this.each(function(){var e=t.call(i,this,n,i);if(e)if(E.isArray(e))i.push.apply(i,e);else i.push(e)}),this.length>1){if(!f[e])i=E.unique(i);if(0===e.indexOf("parents"))i=i.reverse()}if(i=E(i),n)return i.filter(n);return i}}),R({parentsUntil:function(e,t){return D(e,"parentNode",t)},nextUntil:function(e,t){return P(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return P(e,"previousSibling",1,t).slice(1)}},function(e,t){E.fn[e]=function(n,i){var r=[];if(this.each(function(){var e=t.call(r,this,n,r);if(e)if(E.isArray(e))r.push.apply(r,e);else r.push(e)}),this.length>1)if(r=E.unique(r),0===e.indexOf("parents")||"prevUntil"===e)r=r.reverse();if(r=E(r),i)return r.filter(i);return r}}),E.fn.is=function(e){return!!e&&this.filter(e).length>0},E.fn.init.prototype=E.fn,E.overrideDefaults=function(e){var t;function n(i,r){if(t=t||e(),0===arguments.length)i=t.element;if(!r)r=t.context;return new n.fn.init(i,r)}return E.extend(n,this),n};function L(e,t,n){R(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})}if(r.ie&&r.ie<8)L(k,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647===t)return c;return t},size:function(e){var t=e.size;if(20===t)return c;return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0===t.length)return c;return t}}),L(k,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}});if(r.ie&&r.ie<9)x["float"]="styleFloat",L(N,"set",{opacity:function(e,t){var n=e.style;if(null===t||""===t)n.removeAttribute("filter");else n.zoom=1,n.filter="alpha(opacity="+100*t+")"}});return E.attrHooks=k,E.cssHooks=N,E}),r("tinymce/html/Styles",[],function(){return function(e,t){var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,a,s={},l,u,c,f="\ufeff";if(e=e||{},t)u=t.getValidStyles(),c=t.getInvalidStyles();for(l=("\\\" \\' \\; \\: ; : "+f).split(" "),a=0;a<l.length;a++)s[l[a]]=f+a,s[f+a]=l[a];function d(e,t,n,i){function r(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(i)}return{toHex:function(e){return e.replace(n,d)},parse:function(t){var l={},u,c,m,p,h=e.url_converter,g=e.url_converter_scope||this;function v(e,t,n){var i,r,o,s;if(i=l[e+"-top"+t],!i)return;if(r=l[e+"-right"+t],!r)return;if(o=l[e+"-bottom"+t],!o)return;if(s=l[e+"-left"+t],!s)return;var u=[i,r,o,s];a=u.length-1;while(a--)if(u[a]!==u[a+1])break;if(a>-1&&n)return;l[e+t]=-1==a?u[0]:u.join(" "),delete l[e+"-top"+t],delete l[e+"-right"+t],delete l[e+"-bottom"+t],delete l[e+"-left"+t]}function y(e){var t=l[e],n;if(!t)return;n=(t=t.split(" ")).length;while(n--)if(t[n]!==t[0])return false;return l[e]=t[0],true}function b(e,t,n,i){if(!y(t))return;if(!y(n))return;if(!y(i))return;l[e]=l[t]+" "+l[n]+" "+l[i],delete l[t],delete l[n],delete l[i]}function w(e){return p=true,s[e]}function C(e,t){if(p)e=e.replace(/\uFEFF[0-9]/g,function(e){return s[e]});if(!t)e=e.replace(/\\([\'\";:])/g,"$1");return e}function x(e){return String.fromCharCode(parseInt(e.slice(1),16))}function k(e){return e.replace(/\\[0-9a-f]+/gi,x)}function N(t,n,i,r,o,a){if(o=o||a,o)return o=C(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=C(n||i||r),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}if(h)n=h.call(g,n,"style");return"url('"+n.replace(/\'/g,"\\'")+"')"}if(t){t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,w).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,w)});while(u=r.exec(t))if(r.lastIndex=u.index+u[0].length,c=u[1].replace(o,"").toLowerCase(),m=u[2].replace(o,""),c&&m){if(c=k(c),m=k(m),-1!==c.indexOf(f)||-1!==c.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"==c||/expression\s*\(|\/\*|\*\//.test(m)))continue;if("font-weight"===c&&"700"===m)m="bold";else if("color"===c||"background-color"===c)m=m.toLowerCase();m=(m=m.replace(n,d)).replace(i,N),l[c]=p?C(m,true):m}if(v("border","",true),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),b("border","border-width","border-style","border-color"),"medium none"===l.border)delete l.border;if("none"===l["border-image"])delete l["border-image"]}return l},serialize:function(e,t){var n="",i,r;function o(t){var i,r,o,a;if(i=u[t],i)for(r=0,o=i.length;r<o;r++)if(t=i[r],a=e[t],a)n+=(n.length>0?" ":"")+t+": "+a+";"}function a(e,t){var n;if(n=c["*"],n&&n[e])return false;if(n=c[t],n&&n[e])return false;return true}if(t&&u)o("*"),o(t);else for(i in e)if(r=e[i],r&&(!c||a(i,t)))n+=(n.length>0?" ":"")+i+": "+r+";";return n}}}}),r("tinymce/dom/TreeWalker",[],function(){return function(e,t){var n=e;function i(e,n,i,r){var o,a;if(e){if(!r&&e[n])return e[n];if(e!=t){if(o=e[i],o)return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[i],o)return o}}}function r(e,n,i,r){var o,a,s;if(e){if(o=e[i],t&&o===t)return;if(o){if(!r)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if(a=e.parentNode,a&&a!==t)return a}}this.current=function(){return n},this.next=function(e){return n=i(n,"firstChild","nextSibling",e),n},this.prev=function(e){return n=i(n,"lastChild","previousSibling",e),n},this.prev2=function(e){return n=r(n,"lastChild","previousSibling",e),n}}}),r("tinymce/dom/Range",["tinymce/util/Tools"],function(e){function t(n){var i=this,r=n.doc,o=0,a=1,s=2,l=true,u=false,c="startOffset",f="startContainer",d="endContainer",m="endOffset",p=e.extend,h=n.nodeIndex;function g(){return r.createDocumentFragment()}function v(e,t){O(l,e,t)}function y(e,t){O(u,e,t)}function b(e){v(e.parentNode,h(e))}function w(e){v(e.parentNode,h(e)+1)}function C(e){y(e.parentNode,h(e))}function x(e){y(e.parentNode,h(e)+1)}function k(e){if(e)i[d]=i[f],i[m]=i[c];else i[f]=i[d],i[c]=i[m];i.collapsed=l}function N(e){b(e),x(e)}function E(e){v(e,0),y(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function S(e,t){var n=i[f],r=i[c],o=i[d],a=i[m],s=t.startContainer,l=t.startOffset,u=t.endContainer,p=t.endOffset;if(0===e)return L(n,r,s,l);if(1===e)return L(o,a,s,l);if(2===e)return L(o,a,u,p);if(3===e)return L(n,r,u,p)}function T(){I(s)}function _(){return I(o)}function R(){return I(a)}function B(e){var t=this[f],i=this[c],r,o;if((3===t.nodeType||4===t.nodeType)&&t.nodeValue)if(!i)t.parentNode.insertBefore(e,t);else if(i>=t.nodeValue.length)n.insertAfter(e,t);else r=t.splitText(i),t.parentNode.insertBefore(e,r);else{if(t.childNodes.length>0)o=t.childNodes[i];if(o)t.insertBefore(e,o);else if(3==t.nodeType)n.insertAfter(e,t);else t.appendChild(e)}}function A(e){var t=i.extractContents();i.insertNode(e),e.appendChild(t),i.selectNode(e)}function D(){return p(new t(n),{startContainer:i[f],startOffset:i[c],endContainer:i[d],endOffset:i[m],collapsed:i.collapsed,commonAncestorContainer:i.commonAncestorContainer})}function P(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;n=e.firstChild;while(n&&t>0)--t,n=n.nextSibling;if(n)return n;return e}function M(){return i[f]==i[d]&&i[c]==i[m]}function L(e,t,i,r){var o,a,s,l,u,c;if(e==i){if(t==r)return 0;if(t<r)return-1;return 1}o=i;while(o&&o.parentNode!=e)o=o.parentNode;if(o){a=0,s=e.firstChild;while(s!=o&&a<t)a++,s=s.nextSibling;if(t<=a)return-1;return 1}o=e;while(o&&o.parentNode!=i)o=o.parentNode;if(o){a=0,s=i.firstChild;while(s!=o&&a<r)a++,s=s.nextSibling;if(a<r)return-1;return 1}l=n.findCommonAncestor(e,i),u=e;while(u&&u.parentNode!=l)u=u.parentNode;if(!u)u=l;c=i;while(c&&c.parentNode!=l)c=c.parentNode;if(!c)c=l;if(u==c)return 0;s=l.firstChild;while(s){if(s==u)return-1;if(s==c)return 1;s=s.nextSibling}}function O(e,t,r){var o,a;if(e)i[f]=t,i[c]=r;else i[d]=t,i[m]=r;o=i[d];while(o.parentNode)o=o.parentNode;a=i[f];while(a.parentNode)a=a.parentNode;if(a==o){if(L(i[f],i[c],i[d],i[m])>0)i.collapse(e)}else i.collapse(e);i.collapsed=M(),i.commonAncestorContainer=n.findCommonAncestor(i[f],i[d])}function I(e){var t,n=0,r=0,o,a,s,l,u,c;if(i[f]==i[d])return H(e);for(o=(t=i[d]).parentNode;o;t=o,o=o.parentNode){if(o==i[f])return F(t,e);++n}for(o=(t=i[f]).parentNode;o;t=o,o=o.parentNode){if(o==i[d])return z(t,e);++r}a=r-n,s=i[f];while(a>0)s=s.parentNode,a--;l=i[d];while(a<0)l=l.parentNode,a++;for(u=s.parentNode,c=l.parentNode;u!=c;u=u.parentNode,c=c.parentNode)s=u,l=c;return U(s,l,e)}function H(e){var t,n,o,u,d,p,h,v,y;if(e!=s)t=g();if(i[c]==i[m])return t;if(3==i[f].nodeType){if(n=i[f].nodeValue,o=n.substring(i[c],i[m]),e!=a){if(u=i[f],v=i[c],y=i[m]-i[c],0===v&&y>=u.nodeValue.length-1)u.parentNode.removeChild(u);else u.deleteData(v,y);i.collapse(l)}if(e==s)return;if(o.length>0)t.appendChild(r.createTextNode(o));return t}u=P(i[f],i[c]),d=i[m]-i[c];while(u&&d>0){if(p=u.nextSibling,h=j(u,e),t)t.appendChild(h);--d,u=p}if(e!=a)i.collapse(l);return t}function F(e,t){var n,r,o,l,f,d;if(t!=s)n=g();if(r=W(e,t),n)n.appendChild(r);if(o=h(e),l=o-i[c],l<=0){if(t!=a)i.setEndBefore(e),i.collapse(u);return n}r=e.previousSibling;while(l>0){if(f=r.previousSibling,d=j(r,t),n)n.insertBefore(d,n.firstChild);--l,r=f}if(t!=a)i.setEndBefore(e),i.collapse(u);return n}function z(e,t){var n,r,o,u,c,f;if(t!=s)n=g();if(o=V(e,t),n)n.appendChild(o);r=h(e),++r,u=i[m]-r,o=e.nextSibling;while(o&&u>0){if(c=o.nextSibling,f=j(o,t),n)n.appendChild(f);--u,o=c}if(t!=a)i.setStartAfter(e),i.collapse(l);return n}function U(e,t,n){var r,o,u,c,f,d,m;if(n!=s)o=g();if(r=V(e,n),o)o.appendChild(r);u=h(e),f=(c=h(t))-++u,d=e.nextSibling;while(f>0){if(m=d.nextSibling,r=j(d,n),o)o.appendChild(r);d=m,--f}if(r=W(t,n),o)o.appendChild(r);if(n!=a)i.setStartAfter(e),i.collapse(l);return o}function W(e,t){var n=P(i[d],i[m]-1),r,o,a,c,f,p=n!=i[d];if(n==e)return $(n,p,u,t);o=$(r=n.parentNode,u,u,t);while(r){while(n){if(a=n.previousSibling,c=$(n,p,u,t),t!=s)o.insertBefore(c,o.firstChild);p=l,n=a}if(r==e)return o;if(n=r.previousSibling,r=r.parentNode,f=$(r,u,u,t),t!=s)f.appendChild(o);o=f}}function V(e,t){var n=P(i[f],i[c]),r=n!=i[f],o,a,d,m,p;if(n==e)return $(n,r,l,t);a=$(o=n.parentNode,u,l,t);while(o){while(n){if(d=n.nextSibling,m=$(n,r,l,t),t!=s)a.appendChild(m);r=l,n=d}if(o==e)return a;if(n=o.nextSibling,o=o.parentNode,p=$(o,u,l,t),t!=s)p.appendChild(a);a=p}}function $(e,t,r,o){var l,f,d,p,h;if(t)return j(e,o);if(3==e.nodeType){if(l=e.nodeValue,r)p=i[c],f=l.substring(p),d=l.substring(0,p);else p=i[m],f=l.substring(0,p),d=l.substring(p);if(o!=a)e.nodeValue=d;if(o==s)return;return h=n.clone(e,u),h.nodeValue=f,h}if(o==s)return;return n.clone(e,u)}function j(e,t){if(t!=s)return t==a?n.clone(e,l):e;e.parentNode.removeChild(e)}function q(){return n.create("body",null,R()).outerText}return p(i,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:l,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:v,setEnd:y,setStartBefore:b,setStartAfter:w,setEndBefore:C,setEndAfter:x,collapse:k,selectNode:N,selectNodeContents:E,compareBoundaryPoints:S,deleteContents:T,extractContents:_,cloneContents:R,insertNode:B,surroundContents:A,cloneRange:D,toStringIE:q}),i}return t.prototype.toString=function(){return this.toStringIE()},t}),r("tinymce/html/Entities",["tinymce/util/Tools"],function(e){var t=e.makeMap,n,i,r,o=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\"\']/g,l=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,u={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function c(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function f(e,t){var n,r,o,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)if(r=String.fromCharCode(parseInt(e[n],t)),!i[r])o="&"+e[n+1]+";",a[r]=o,a[o]=r;return a}}n=f("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,"+"5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,"+"5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,"+"5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,"+"68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,"+"6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,"+"6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,"+"75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,"+"7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,"+"7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,"+"sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,"+"st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,"+"t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,"+"tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,"+"u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,"+"81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,"+"8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,"+"8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,"+"8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,"+"8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,"+"nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,"+"rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,"+"Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,"+"80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,"+"811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var d={encodeRaw:function(e,t){return e.replace(t?o:a,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(s,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?o:a,function(e){if(e.length>1)return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";";return i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,r){return r=r||n,e.replace(t?o:a,function(e){return i[e]||r[e]||e})},getEncodeFunc:function(e,r){r=f(r)||n;function s(e,t){return e.replace(t?o:a,function(e){return i[e]||r[e]||"&#"+e.charCodeAt(0)+";"||e})}function l(e,t){return d.encodeNamed(e,t,r)}if(e=t(e.replace(/\+/g,",")),e.named&&e.numeric)return s;if(e.named){if(r)return l;return d.encodeNamed}if(e.numeric)return d.encodeNumeric;return d.encodeRaw},decode:function(e){return e.replace(l,function(e,t){if(t){if("x"===t.charAt(0).toLowerCase())t=parseInt(t.substr(1),16);else t=parseInt(t,10);if(t>65535)return t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t));return u[t]||String.fromCharCode(t)}return r[e]||n[e]||c(e)})}};return d}),r("tinymce/dom/StyleSheetLoader",["tinymce/util/Tools","tinymce/util/Delay"],function(e,t){return function(n,i){var r=0,o={},a;a=(i=i||{}).maxLoadTime||5e3;function s(e){n.getElementsByTagName("head")[0].appendChild(e)}function l(i,l,u){var c,f,d,m;function p(){var e=m.passed,t=e.length;while(t--)e[t]();m.status=2,m.passed=[],m.failed=[]}function h(){var e=m.failed,t=e.length;while(t--)e[t]();m.status=3,m.passed=[],m.failed=[]}function g(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function v(e,n){if(!e())if((new Date).getTime()-d<a)t.setTimeout(n);else h()}function y(){v(function(){var e=n.styleSheets,t,i=e.length,r;while(i--)if(t=e[i],r=t.ownerNode?t.ownerNode:t.owningElement,r&&r.id===c.id)return p(),true},y)}function b(){v(function(){try{var e=f.sheet.cssRules;return p(),!!e}catch(e){}},b)}if(i=e._addCacheSuffix(i),!o[i])m={passed:[],failed:[]},o[i]=m;else m=o[i];if(l)m.passed.push(l);if(u)m.failed.push(u);if(1==m.status)return;if(2==m.status)return void p();if(3==m.status)return void h();if(m.status=1,c=n.createElement("link"),c.rel="stylesheet",c.type="text/css",c.id="u"+r++,c.async=false,c.defer=false,d=(new Date).getTime(),"onload"in c&&!g())c.onload=y,c.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return f=n.createElement("style"),f.textContent='@import "'+i+'"',b(),void s(f);y()}s(c),c.href=i}this.load=l}}),r("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(e,n,i,r,o,a,s,l,u,c){var f=u.each,d=u.is,m=u.grep,p=u.trim,h=l.ie,g=/^([a-z0-9],?)+$/i,v=h?/^[ \t\r\n\uFEFF]*$/:/^[ \t\r\n]*$/;function y(e,t){var n={},i=t.keep_values,r;if(r={set:function(n,i,r){if(t.url_converter)i=t.url_converter.call(t.url_converter_scope||e,i,r,n[0]);n.attr("data-mce-"+r,i).attr(r,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){if(null!==t&&"object"===typeof t)return void e.css(t);if(i)e.attr("data-mce-style",t);e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n}}},i)n.href=n.src=r;return n}function b(e,t){var n=t.attr("style");if(n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),!n)n=null;t.attr("data-mce-style",n)}function w(e,t){var n=0,i,r;if(e)for(i=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){if(r=e.nodeType,t&&3==r)if(r==i||!e.nodeValue.length)continue;n++,i=r}return n}function C(e,t){var o=this,a;o.doc=e,o.win=window,o.files={},o.counter=0,o.stdMode=!h||e.documentMode>=8,o.boxModel=!h||"CSS1Compat"==e.compatMode||o.stdMode,o.styleSheetLoader=new c(e),o.boundEvents=[],o.settings=t=t||{},o.schema=t.schema,o.styles=new i({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),o.fixDoc(e),o.events=t.ownEvents?new r(t.proxy):r.Event,o.attrHooks=y(o,t),a=t.schema?t.schema.getBlockElements():{},o.$=n.overrideDefaults(function(){return{context:e,element:o.getRoot()}}),o.isBlock=function(e){if(!e)return false;var t=e.nodeType;if(t)return!!(1===t&&a[e.nodeName]);return!!a[e]}}return C.prototype={$$:function(e){if("string"==typeof e)e=this.get(e);return this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(h&&t.schema){("abbr article aside audio canvas "+"details figcaption figure footer "+"header hgroup mark menu meter nav "+"output progress section summary "+"time video").replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,i,r;if(!h||1!==e.nodeType||t)return e.cloneNode(t);if(r=n.doc,!t)return i=r.createElement(e.nodeName),f(n.getAttribs(e),function(t){n.setAttrib(i,t.nodeName,n.getAttrib(e,t.nodeName))}),i;return i.firstChild},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=!e?this.win:e,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,i;return e=t.get(e),n=t.getPos(e),i=t.getSize(e),{x:n.x,y:n.y,w:i.w,h:i.h}},getSize:function(e){var t=this,n,i;if(e=t.get(e),n=t.getStyle(e,"width"),i=t.getStyle(e,"height"),-1===n.indexOf("px"))n=0;if(-1===i.indexOf("px"))i=0;return{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(i,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,false)},getParents:function(e,n,i,r){var o=this,a,s=[];if(e=o.get(e),r=r===t,i=i||("BODY"!=o.getRoot().nodeName?o.getRoot().parentNode:null),d(n,"string"))if(a=n,"*"===n)n=function(e){return 1==e.nodeType};else n=function(e){return o.is(e,a)};while(e){if(e==i||!e.nodeType||9===e.nodeType)break;if(!n||n(e))if(r)s.push(e);else return e;e=e.parentNode}return r?s:null},get:function(e){var t;if(e&&this.doc&&"string"==typeof e)if(t=e,e=this.doc.getElementById(e),e&&e.id!==t)return this.doc.getElementsByName(t)[1];return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var r;if(n.length===t){if("*"===i)return 1==n.nodeType;if(g.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),r=i.length-1;r>=0;r--)if(i[r]==n)return true;return false}}if(n.nodeType&&1!=n.nodeType)return false;var o=n.nodeType?[n]:n;return e(i,o[0].ownerDocument||o[0],null,o).length>0},add:function(e,t,n,i,r){var o=this;return this.run(e,function(e){var a;if(a=d(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),i)if(i.nodeType)a.appendChild(i);else o.setHTML(a,i);return!r?e.appendChild(a):a})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i="",r;i+="<"+e;for(r in t)if(t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r])i+=" "+r+'="'+this.encode(t[r])+'"';if("undefined"!=typeof n)return i+">"+n+"</"+e+">";return i+" />"},createFragment:function(e){var t,n,i=this.doc,r;if(r=i.createElement("div"),t=i.createDocumentFragment(),e)r.innerHTML=e;while(n=r.firstChild)t.appendChild(n);return t},remove:function(e,t){if(e=this.$$(e),t)e.each(function(){var e;while(e=this.firstChild)if(3==e.nodeType&&0===e.data.length)this.removeChild(e);else this.parentNode.insertBefore(e,this)}).remove();else e.remove();return e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){if(e=this.$$(e).css(t,n),this.settings.update_styles)b(this,e)},getStyle:function(e,n,i){if(e=this.$$(e),i)return e.css(n);if(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n)n=l.ie&&l.ie<12?"styleFloat":"cssFloat";return e[0]&&e[0].style?e[0].style[n]:t},setStyles:function(e,t){if(e=this.$$(e).css(t),this.settings.update_styles)b(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var i=this,r,o,a=i.settings;if(""===n)n=null;if(e=i.$$(e),r=e.attr(t),!e.length)return;if(o=i.attrHooks[t],o&&o.set)o.set(e,n,t);else e.attr(t,n);if(r!=n&&a.onSetAttrib)a.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,i){f(t,function(e,t){n.setAttrib(i,t,e)})})},getAttrib:function(e,t,n){var i=this,r,o;if(e=i.$$(e),e.length)if(r=i.attrHooks[t],r&&r.get)o=r.get(e,t);else o=e.attr(t);if("undefined"==typeof o)o=n||"";return o},getPos:function(e,t){var i=this,r=0,o=0,a,s=i.doc,l=s.body,u;if(e=i.get(e),t=t||l,e){if(t===l&&e.getBoundingClientRect&&"static"===n(l).css("position"))return u=e.getBoundingClientRect(),t=i.boxModel?s.documentElement:l,r=u.left+(s.documentElement.scrollLeft||l.scrollLeft)-t.clientLeft,o=u.top+(s.documentElement.scrollTop||l.scrollTop)-t.clientTop,{x:r,y:o};a=e;while(a&&a!=t&&a.nodeType)r+=a.offsetLeft||0,o+=a.offsetTop||0,a=a.offsetParent;a=e.parentNode;while(a&&a!=t&&a.nodeType)r-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode}return{x:r,y:o}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,i,r;if(t!==C.DOM&&n===document){var o=C.DOM.addedStyles;if(o=o||[],o[e])return;o[e]=true,C.DOM.addedStyles=o}if(r=n.getElementById("mceDefaultStyles"),!r)if(r=n.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",i=n.getElementsByTagName("head")[0],i.firstChild)i.insertBefore(r,i.firstChild);else i.appendChild(r);if(r.styleSheet)r.styleSheet.cssText+=e;else r.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,i;if(t!==C.DOM&&n===document)return void C.DOM.loadCSS(e);if(!e)e="";i=n.getElementsByTagName("head")[0],f(e.split(","),function(e){var r;if(e=u._addCacheSuffix(e),t.files[e])return;if(t.files[e]=true,r=t.create("link",{rel:"stylesheet",href:e}),h&&n.documentMode&&n.recalc)r.onload=function(){if(n.recalc)n.recalc();r.onload=null};i.appendChild(r)})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,false)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,i){this.$$(e).toggleClass(t,i).each(function(){if(""===this.className)n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(!e?"mce_":e)+this.counter++},setHTML:function(e,t){if(e=this.$$(e),h)e.each(function(e,i){if(false===i.canHaveHTML)return;while(i.firstChild)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t,i.removeChild(i.firstChild)}catch(e){n("<div></div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t});else e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType&&"outerHTML"in e?e.outerHTML:n("<div></div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var i=this;i.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}i.remove(n(this).html(t),true)})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;if(n=t.parentNode,i=t.nextSibling,i)n.insertBefore(e,i);else n.appendChild(e);return e})},replace:function(e,t,n){return this.run(t,function(t){if(d(t,"array"))e=e.cloneNode(true);if(n)f(m(t.childNodes),function(t){e.appendChild(t)});return t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,i;if(e.nodeName!=t.toUpperCase())i=n.create(t),f(n.getAttribs(e),function(t){n.setAttrib(i,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(i,e,1);return i||e},findCommonAncestor:function(e,t){var n=e,i;while(n){i=t;while(i&&n!=i)i=i.parentNode;if(n==i)break;n=n.parentNode}if(!n&&e.ownerDocument)return e.ownerDocument.documentElement;return n},toHex:function(e){return this.styles.toHex(u.trim(e))},run:function(e,t,n){var i=this,r;if("string"===typeof e)e=i.get(e);if(!e)return false;if(n=n||this,!e.nodeType&&(e.length||0===e.length))return r=[],f(e,function(e,o){if(e){if("string"==typeof e)e=i.get(e);r.push(t.call(n,e,o))}}),r;return t.call(n,e)},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(h){if(t=[],"OBJECT"==e.nodeName)return e.attributes;if("OPTION"===e.nodeName&&this.getAttrib(e,"selected"))t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(false).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,i,r,a,s,l,u,c=0;if(e=e.firstChild,e){l=new o(e,e.parentNode),t=t||(n.schema?n.schema.getNonEmptyElements():null),s=n.schema?n.schema.getWhiteSpaceElements():{};do{if(a=e.nodeType,1===a){var f=e.getAttribute("data-mce-bogus");if(f){e=l.next("all"===f);continue}if(u=e.nodeName.toLowerCase(),t&&t[u]){if("br"===u){c++,e=l.next();continue}return false}i=(r=n.getAttribs(e)).length;while(i--)if(u=r[i].nodeName,"name"===u||"data-mce-bookmark"===u)return false}if(8==a)return false;if(3===a&&!v.test(e.nodeValue))return false;if(3===a&&e.parentNode&&s[e.parentNode.nodeName]&&v.test(e.nodeValue))return false;e=l.next()}while(e)}return c<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:w,split:function(e,t,n){var i=this,r=i.createRng(),o,a,s;function l(e){var t,n=e.childNodes,r=e.nodeType;function o(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}if(1==r&&"bookmark"==e.getAttribute("data-mce-type"))return;for(t=n.length-1;t>=0;t--)l(n[t]);if(9!=r){if(3==r&&e.nodeValue.length>0){var a=p(e.nodeValue).length;if(!i.isBlock(e.parentNode)||a>0||0===a&&o(e))return}else if(1==r){if(n=e.childNodes,1==n.length&&n[0]&&1==n[0].nodeType&&"bookmark"==n[0].getAttribute("data-mce-type"))e.parentNode.insertBefore(n[0],e);if(n.length||/^(br|hr|input|img)$/i.test(e.nodeName))return}i.remove(e)}return e}if(e&&t){if(r.setStart(e.parentNode,i.nodeIndex(e)),r.setEnd(t.parentNode,i.nodeIndex(t)),o=r.extractContents(),r=i.createRng(),r.setStart(t.parentNode,i.nodeIndex(t)+1),r.setEnd(e.parentNode,i.nodeIndex(e)+1),a=r.extractContents(),s=e.parentNode,s.insertBefore(l(o),e),n)s.insertBefore(n,e);else s.insertBefore(t,e);return s.insertBefore(l(a),e),i.remove(e),n||t}},bind:function(e,t,n,i){var r=this;if(u.isArray(e)){var o=e.length;while(o--)e[o]=r.bind(e[o],t,n,i);return e}if(r.settings.collect&&(e===r.doc||e===r.win))r.boundEvents.push([e,t,n,i]);return r.events.bind(e,t,n,i||r)},unbind:function(e,t,n){var i=this,r;if(u.isArray(e)){r=e.length;while(r--)e[r]=i.unbind(e[r],t,n);return e}if(i.boundEvents&&(e===i.doc||e===i.win)){r=i.boundEvents.length;while(r--){var o=i.boundEvents[r];if(e==o[0]&&(!t||t==o[1])&&(!n||n==o[2]))this.events.unbind(o[0],o[1],o[2])}}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(!e||1!=e.nodeType)return null;if(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t)return t;return"inherit"!==e.contentEditable?e.contentEditable:null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t;e=e.parentNode)if(n=this.getContentEditable(e),null!==n)break;return n},destroy:function(){var t=this;if(t.boundEvents){var n=t.boundEvents.length;while(n--){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}if(e.setDocument)e.setDocument();t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){while(e){if(t===e)return true;e=e.parentNode}return false},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,r=t;if(e){if("string"==typeof r)r=function(e){return i.is(e,t)};for(e=e[n];e;e=e[n])if(r(e))return e}return null}},C.DOM=new C(document),C.nodeIndex=w,C}),r("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t){var n=e.DOM,i=t.each,r=t.grep,o=function(e){return"function"===typeof e};function a(){var e=0,a=1,s=2,l=3,u={},c=[],f={},d=[],m=0,p;function h(e,i,r){var a=n,s,l;function u(){if(a.remove(l),s)s.onreadystatechange=s.onload=s=null;i()}function c(){if(o(r))r();else if("undefined"!==typeof console&&console.log)console.log("Failed to load script: "+e)}if(l=a.uniqueId(),s=document.createElement("script"),s.id=l,s.type="text/javascript",s.src=t._addCacheSuffix(e),"onreadystatechange"in s)s.onreadystatechange=function(){if(/loaded|complete/.test(s.readyState))u()};else s.onload=u;s.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(e){return u[e]==s},this.markDone=function(e){u[e]=s},this.add=this.load=function(t,n,i,r){if(u[t]==p)c.push(t),u[t]=e;if(n){if(!f[t])f[t]=[];f[t].push({success:n,failure:r,scope:i||this})}},this.remove=function(e){delete u[e],delete f[e]},this.loadQueue=function(e,t,n){this.loadScripts(c,e,t,n)},this.loadScripts=function(e,t,n,c){var g,v=[];function y(e,t){i(f[t],function(t){if(o(t[e]))t[e].call(t.scope)}),f[t]=p}d.push({success:t,failure:c,scope:n||this}),(g=function(){var t=r(e);if(e.length=0,i(t,function(e){if(u[e]===s)return void y("success",e);if(u[e]===l)return void y("failure",e);if(u[e]!==a)u[e]=a,m++,h(e,function(){u[e]=s,m--,y("success",e),g()},function(){u[e]=l,m--,v.push(e),y("failure",e),g()})}),!m)i(d,function(e){if(0===v.length){if(o(e.success))e.success.call(e.scope)}else if(o(e.failure))e.failure.call(e.scope,v)}),d.length=0})()}}return a.ScriptLoader=new a,a}),r("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(e,n){var i=n.each;function r(){var e=this;e.items=[],e.urls={},e.lookup={}}return r.prototype={get:function(e){if(this.lookup[e])return this.lookup[e].instance;return t},dependencies:function(e){var t;if(this.lookup[e])t=this.lookup[e].dependencies;return t||[]},requireLangPack:function(t,n){var i=r.language;if(i&&false!==r.languageLoad){if(n)if(n=","+n+",",-1!=n.indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1==n.indexOf(","+i+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+i+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){if("object"===typeof t)return t;return{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,o,a,s,l){var u=this,c=o;function f(){var r=u.dependencies(n);if(i(r,function(e){var n=u.createUrl(o,e);u.load(n.resource,n,t,t)}),a)if(s)a.call(s);else a.call(e)}if(u.urls[n])return;if("object"===typeof o)c=o.prefix+o.resource+o.suffix;if(0!==c.indexOf("/")&&-1==c.indexOf("://"))c=r.baseURL+"/"+c;if(u.urls[n]=c.substring(0,c.lastIndexOf("/")),u.lookup[n])f();else e.ScriptLoader.add(c,f,s,l)}},r.PluginManager=new r,r.ThemeManager=new r,r}),r("tinymce/dom/NodeType",["tinymce/Env"],function(e){function t(e){return function(t){return!!t&&t.nodeType==e}}var n=t(1);function i(e){return e=e.toLowerCase().split(" "),function(t){var n,i;if(t&&t.nodeType)for(i=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(i===e[n])return true;return false}}function r(e,t){return t=t.toLowerCase().split(" "),function(i){var r,o;if(n(i))for(r=0;r<t.length;r++)if(o=getComputedStyle(i,null).getPropertyValue(e),o===t[r])return true;return false}}function o(e,t){return function(i){return n(i)&&i[e]===t}}function a(e,t){return function(i){return n(i)&&i.getAttribute(e)===t}}function s(e){return n(e)&&e.hasAttribute("data-mce-bogus")}function l(t){return function(i){if(n(i)){if(i.contentEditable===t||e.ie&&"inherit"===i.contentEditable&&{IMG:"false"}[i.nodeName]===t)return true;if(i.getAttribute("data-mce-contenteditable")===t)return true}return false}}return{isText:t(3),isElement:n,isComment:t(8),isBr:i("br"),isContentEditableTrue:l("true"),isContentEditableFalse:l("false"),matchNodeNames:i,hasPropValue:o,hasAttributeValue:a,matchStyleValues:r,isBogus:s}}),r("tinymce/text/Zwsp",[],function(){var e="\ufeff";function t(t){return t==e}function n(t){return t.replace(new RegExp(e,"g"),"")}return{isZwsp:t,ZWSP:e,trim:n}}),r("tinymce/caret/CaretContainer",["tinymce/dom/NodeType","tinymce/text/Zwsp"],function(e,t){var n=e.isElement,i=e.isText;function r(e){if(i(e))e=e.parentNode;return n(e)&&e.hasAttribute("data-mce-caret")}function o(e){return i(e)&&t.isZwsp(e.data)}function a(e){return r(e)||o(e)}function s(e){var t=e.parentNode;if(t)t.removeChild(e)}function l(e){try{return e.nodeValue}catch(e){return""}}function u(e,t){if(0===t.length)s(e);else e.nodeValue=t}function c(e,n){var r,o,s,l;if(r=e.ownerDocument,s=r.createTextNode(t.ZWSP),l=e.parentNode,!n){if(o=e.nextSibling,i(o)){if(a(o))return o;if(h(o))return o.splitText(1),o}if(e.nextSibling)l.insertBefore(s,e.nextSibling);else l.appendChild(s)}else{if(o=e.previousSibling,i(o)){if(a(o))return o;if(g(o))return o.splitText(o.data.length-1)}l.insertBefore(s,e)}return s}function f(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e}function d(e,t,n){var i,r,o;if(i=t.ownerDocument,r=i.createElement(e),r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(f()),o=t.parentNode,!n)if(t.nextSibling)o.insertBefore(r,t.nextSibling);else o.appendChild(r);else o.insertBefore(r,t);return r}function m(t){return t.firstChild!==t.lastChild||!e.isBr(t.firstChild)}function p(e){if(n(e)&&a(e))if(m(e))e.removeAttribute("data-mce-caret");else s(e);if(i(e))u(e,t.trim(l(e)))}function h(e){return i(e)&&e.data[0]==t.ZWSP}function g(e){return i(e)&&e.data[e.data.length-1]==t.ZWSP}function v(t){var n=t.getElementsByTagName("br"),i=n[n.length-1];if(e.isBogus(i))i.parentNode.removeChild(i)}function y(e){if(e&&e.hasAttribute("data-mce-caret"))return v(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e;return null}return{isCaretContainer:a,isCaretContainerBlock:r,isCaretContainerInline:o,showCaretContainerBlock:y,insertInline:c,insertBlock:d,hasContent:m,remove:p,startsWithCaretContainer:h,endsWithCaretContainer:g}}),r("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/dom/NodeType","tinymce/dom/Range","tinymce/caret/CaretContainer"],function(e,t,n,i,r){var o=e.each,a=n.isContentEditableTrue,s=n.isContentEditableFalse,l=r.isCaretContainer;function u(e){return a(e)||s(e)}function c(e,t){var n=e.childNodes;if(t--,t>n.length-1)t=n.length-1;else if(t<0)t=0;return n[t]||e}function f(e,t,n){while(e&&e!==t){if(n(e))return e;e=e.parentNode}return null}function d(e,t,n){return null!==f(e,t,n)}function m(e){return"_mce_caret"===e.id}function p(e,t){return l(e)&&false===d(e,t,m)}function h(e){this.walk=function(t,n){var i=t.startContainer,r=t.startOffset,a=t.endContainer,s=t.endOffset,l,u,f,d,m,p,h;if(h=e.select("td[data-mce-selected],th[data-mce-selected]"),h.length>0)return void o(h,function(e){n([e])});function g(e){var t;if(t=e[0],3===t.nodeType&&t===i&&r>=t.nodeValue.length)e.splice(0,1);if(t=e[e.length-1],0===s&&e.length>0&&t===a&&3===t.nodeType)e.splice(e.length-1,1);return e}function v(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function y(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function b(e,t,i){var r=i?"nextSibling":"previousSibling";for(m=(d=e).parentNode;d&&d!=t;d=m)if(m=d.parentNode,p=v(d==e?d:d[r],r),p.length){if(!i)p.reverse();n(g(p))}}if(1==i.nodeType&&i.hasChildNodes())i=i.childNodes[r];if(1==a.nodeType&&a.hasChildNodes())a=c(a,s);if(i==a)return n(g([i]));for(l=e.findCommonAncestor(i,a),d=i;d;d=d.parentNode){if(d===a)return b(i,l,true);if(d===l)break}for(d=a;d;d=d.parentNode){if(d===i)return b(a,l);if(d===l)break}if(u=y(i,l)||i,f=y(a,l)||a,b(i,u,true),p=v(u==i?u:u.nextSibling,"nextSibling",f==a?f.nextSibling:f),p.length)n(g(p));b(a,f)},this.split=function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset;function o(e,t){return e.splitText(t)}if(t==i&&3==t.nodeType){if(n>0&&n<t.nodeValue.length)if(i=o(t,n),t=i.previousSibling,r>n)t=i=o(i,r-=n).previousSibling,r=i.nodeValue.length,n=0;else r=0}else{if(3==t.nodeType&&n>0&&n<t.nodeValue.length)t=o(t,n),n=0;if(3==i.nodeType&&r>0&&r<i.nodeValue.length)r=(i=o(i,r).previousSibling).nodeValue.length}return{startContainer:t,startOffset:n,endContainer:i,endOffset:r}},this.normalize=function(n){var i,r;function o(o){var a,u,c,f=e.getRoot(),d,m,h,g;function v(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function y(n,i){var r=new t(n,e.getParent(n.parentNode,e.isBlock)||f);while(n=r[i?"prev":"next"]())if("BR"===n.nodeName)return true}function b(e){while(e&&e!=f){if(s(e))return true;e=e.parentNode}return false}function w(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function C(n,o){var s,l,c;if(o=o||a,c=e.getParent(o.parentNode,e.isBlock)||f,n&&"BR"==o.nodeName&&g&&e.isEmpty(c))return a=o.parentNode,u=e.nodeIndex(o),void(i=true);s=new t(o,c);while(d=s[n?"prev":"next"]()){if("false"===e.getContentEditableParent(d)||p(d,e.getRoot()))return;if(3===d.nodeType&&d.nodeValue.length>0)return a=d,u=n?d.nodeValue.length:0,void(i=true);if(e.isBlock(d)||m[d.nodeName.toLowerCase()])return;l=d}if(r&&l)a=l,i=true,u=0}if(a=n[(o?"start":"end")+"Container"],u=n[(o?"start":"end")+"Offset"],g=1==a.nodeType&&u===a.childNodes.length,m=e.schema.getNonEmptyElements(),h=o,l(a))return;if(1==a.nodeType&&u>a.childNodes.length-1)h=false;if(9===a.nodeType)a=e.getRoot(),u=0;if(a===f){if(h)if(d=a.childNodes[u>0?u-1:0],d){if(l(d))return;if(m[d.nodeName]||"TABLE"==d.nodeName)return}if(a.hasChildNodes()){if(u=Math.min(!h&&u>0?u-1:u,a.childNodes.length-1),a=a.childNodes[u],u=0,!r&&a===f.lastChild&&"TABLE"===a.nodeName)return;if(b(a)||l(a))return;if(a.hasChildNodes()&&!/TABLE/.test(a.nodeName)){d=a,c=new t(a,f);do{if(s(d)||l(d)){i=false;break}if(3===d.nodeType&&d.nodeValue.length>0){u=h?0:d.nodeValue.length,a=d,i=true;break}if(m[d.nodeName.toLowerCase()]&&!v(d)){if(u=e.nodeIndex(d),a=d.parentNode,"IMG"==d.nodeName&&!h)u++;i=true;break}}while(d=h?c.next():c.prev())}}}if(r){if(3===a.nodeType&&0===u)C(true);if(1===a.nodeType){if(d=a.childNodes[u],!d)d=a.childNodes[u-1];if(d&&"BR"===d.nodeName&&!w(d,"A")&&!y(d)&&!y(d,true))C(true,d)}}if(h&&!r&&3===a.nodeType&&u===a.nodeValue.length)C(false);if(i)n["set"+(o?"Start":"End")](a,u)}if(r=n.collapsed,o(true),!r)o();if(i&&r)n.collapse(true);return i}}h.compareRanges=function(e,t){if(e&&t)if(e.item||e.duplicate){if(e.item&&t.item&&e.item(0)===t.item(0))return true;if(e.isEqual&&t.isEqual&&t.isEqual(e))return true}else return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;return false};function g(t,n,i){var r,o,a;if(r=i.elementFromPoint(t,n),o=i.body.createTextRange(),!r||"HTML"==r.tagName)r=i.body;if(o.moveToElementText(r),a=e.toArray(o.getClientRects()),a=a.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),a.length>0){n=(a[0].bottom+a[0].top)/2;try{return o.moveToPoint(t,n),o.collapse(true),o}catch(e){}}return null}function v(e,t){var n=e&&e.parentElement?e.parentElement():null;return s(f(n,t,u))?null:e}return h.getCaretRangeFromPoint=function(e,t,n){var i,r;if(n.caretPositionFromPoint)r=n.caretPositionFromPoint(e,t),(i=n.createRange()).setStart(r.offsetNode,r.offset),i.collapse(true);else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){i=n.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(true)}catch(r){i=g(e,t,n)}return v(i,n.body)}return i},h.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;if(t.hasChildNodes()&&e.endOffset==n+1)return t.childNodes[n];return null},h.getNode=function(e,t){if(1==e.nodeType&&e.hasChildNodes()){if(t>=e.childNodes.length)t=e.childNodes.length-1;e=e.childNodes[t]}return e},h}),r("tinymce/NodeChange",["tinymce/dom/RangeUtils","tinymce/Env","tinymce/util/Delay"],function(e,t,n){return function(i){var r,o=[];function a(e){var t,n;if(n=i.$(e).parentsUntil(i.getBody()).add(e),n.length===o.length){for(t=n.length;t>=0;t--)if(n[t]!==o[t])break;if(-1===t)return o=n,true}return o=n,false}if(!("onselectionchange"in i.getDoc()))i.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,o;if(n=i.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"==t.type||!e.compareRanges(o,r))i.fire("SelectionChange");r=o});i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var e=i.selection.getStart(true);if(!t.range&&i.selection.isCollapsed())return;if(!a(e)&&i.dom.isChildOf(e,i.getBody()))i.nodeChanged({selectionChange:true})}),i.on("MouseUp",function(e){if(!e.isDefaultPrevented())if("IMG"==i.selection.getNode().nodeName)n.setEditorTimeout(i,function(){i.nodeChanged()});else i.nodeChanged()}),this.nodeChanged=function(e){var t=i.selection,n,r,o;if(i.initialized&&t&&!i.settings.disable_nodechange&&!i.readonly){if(o=i.getBody(),n=t.getStart()||o,n.ownerDocument!=i.getDoc()||!i.dom.isChildOf(n,o))n=o;if("IMG"==n.nodeName&&t.isCollapsed())n=n.parentNode;r=[],i.dom.getParent(n,function(e){if(e===o)return true;r.push(e)}),(e=e||{}).element=n,e.parents=r,i.fire("NodeChange",e)}}}}),r("tinymce/html/Node",["tinymce/Env"],function(e){var t=e.ie?/^[ \t\r\n\uFEFF]*$/:/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function i(e,t,n){var i,r,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(i=e[a],i)return i;for(r=e.parent;r&&r!==t;r=r.parent)if(i=r[a],i)return i}}function r(e,t){if(this.name=e,this.type=t,1===t)this.attributes=[],this.attributes.map={}}return r.prototype={replace:function(e){var t=this;if(e.parent)e.remove();return t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,i,r,o;if("string"!==typeof e){for(r in e)n.attr(r,e[r]);return n}if(i=n.attributes){if(t!==o){if(null===t){if(e in i.map){delete i.map[e],r=i.length;while(r--)if(i[r].name===e)return i=i.splice(r,1),n}return n}if(e in i.map){r=i.length;while(r--)if(i[r].name===e){i[r].value=t;break}}else i.push({name:e,value:t});return i.map[e]=t,n}return i.map[e]}},clone:function(){var e=this,t=new r(e.name,e.type),n,i,o,a,s;if(o=e.attributes){for((s=[]).map={},n=0,i=o.length;n<i;n++)if(a=o[n],"id"!==a.name)s[s.length]={name:a.name,value:a.value},s.map[a.name]=a.value;t.attributes=s}return t.value=e.value,t.shortEnded=e.shortEnded,t},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,true),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;if(t){if(t.firstChild===e){if(t.firstChild=n,n)n.prev=null}else i.next=n;if(t.lastChild===e){if(t.lastChild=i,i)i.next=null}else n.prev=i;e.parent=e.next=e.prev=null}return e},append:function(e){var t=this,n;if(e.parent)e.remove();if(n=t.lastChild,n)n.next=e,e.prev=n,t.lastChild=e;else t.lastChild=t.firstChild=e;return e.parent=t,e},insert:function(e,t,n){var i;if(e.parent)e.remove();if(i=t.parent||this,n){if(t===i.firstChild)i.firstChild=e;else t.prev.next=e;e.prev=t.prev,e.next=t,t.prev=e}else{if(t===i.lastChild)i.lastChild=e;else t.next.prev=e;e.next=t.next,e.prev=t,t.next=e}return e.parent=i,e},getAll:function(e){var t=this,n,r=[];for(n=t.firstChild;n;n=i(n,t))if(n.name===e)r.push(n);return r},empty:function(){var e=this,t,n,r;if(e.firstChild){for(t=[],r=e.firstChild;r;r=i(r,e))t.push(r);n=t.length;while(n--)(r=t[n]).parent=r.firstChild=r.lastChild=r.next=r.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(e,n){var r=this,o=r.firstChild,a,s;if(n=n||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return false;a=o.attributes.length;while(a--)if(s=o.attributes[a].name,"name"===s||0===s.indexOf("data-mce-bookmark"))return false}if(8===o.type)return false;if(3===o.type&&!t.test(o.value))return false;if(3===o.type&&o.parent&&n[o.parent.name]&&t.test(o.value))return false}while(o=i(o,r));return true},walk:function(e){return i(this,null,e)}},r.create=function(e,t){var i,o;if(i=new r(e,n[e]||1),t)for(o in t)i.attr(o,t[o]);return i},r}),r("tinymce/html/Schema",["tinymce/util/Tools"],function(e){var t={},n={},i=e.makeMap,r=e.each,o=e.extend,a=e.explode,s=e.inArray;function l(t,n){return t=e.trim(t),t?t.split(n||" "):[]}function u(e){var i={},o,a,s,u,c,f;function d(e,t,r){var a,s,u;function c(e,t){var n={},i,r;for(i=0,r=e.length;i<r;i++)n[e[i]]=t||{};return n}if(r=r||[],t=t||"","string"===typeof r)r=l(r);a=(e=l(e)).length;while(a--)u={attributes:c(s=l([o,t].join(" "))),attributesOrder:s,children:c(r,n)},i[e[a]]=u}function m(e,t){var n,r,o,a;n=(e=l(e)).length,t=l(t);while(n--)for(r=i[e[n]],o=0,a=t.length;o<a;o++)r.attributes[t[o]]={},r.attributesOrder.push(t[o])}if(t[e])return t[e];if(o="id accesskey class dir lang style tabindex title",a="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment","html4"!=e)o+=" contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate",a+=" article aside details dialog figure header footer hgroup section nav",s+=" audio canvas command datalist mark meter output picture "+"progress time wbr video ruby bdi keygen";if("html5-strict"!=e)o+=" xml:lang",s=[s,f="acronym applet basefont big font strike tt"].join(" "),r(l(f),function(e){d(e,"",s)}),a=[a,c="center dir isindex noframes"].join(" "),u=[a,s].join(" "),r(l(c),function(e){d(e,"",u)});if(u=u||[a,s].join(" "),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",u),d("address dt dd div caption","",u),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),d("blockquote","cite",u),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",u),d("dl","","dt dd"),d("a","href target rel media hreflang type",s),d("q","cite",s),d("ins del","cite datetime",u),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",u),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),d("param","name value"),d("map","name",[u,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",u),d("th","colspan rowspan headers scope abbr",u),d("form","accept-charset action autocomplete enctype method name novalidate target",u),d("fieldset","disabled form name",[u,"legend"].join(" ")),d("label","form for",s),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?u:s),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[u,"li"].join(" ")),d("noscript","",u),"html4"!=e)d("wbr"),d("ruby","",[s,"rt rp"].join(" ")),d("figcaption","",u),d("mark rt rp summary bdi","",s),d("canvas","width height",u),d("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",[u,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls "+"buffered volume",[u,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[s,"option"].join(" ")),d("article section nav aside header footer","",u),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[u,"figcaption"].join(" ")),d("time","datetime",s),d("dialog","open",u),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",s),d("progress","value max",s),d("meter","value min max low high optimum",s),d("details","open",[u,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name");if("html5-strict"!=e)m("script","language xml:space"),m("style","xml:space"),m("object","declare classid code codebase codetype archive standby align border hspace vspace"),m("embed","align name hspace vspace"),m("param","valuetype type"),m("a","charset name rev shape coords"),m("br","clear"),m("applet","codebase archive code object alt name width height align hspace vspace"),m("img","name longdesc align border hspace vspace"),m("iframe","longdesc frameborder marginwidth marginheight scrolling align"),m("font basefont","size color face"),m("input","usemap align"),m("select","onchange"),m("textarea"),m("h1 h2 h3 h4 h5 h6 div p legend caption","align"),m("ul","type compact"),m("li","type"),m("ol dl menu dir","compact"),m("pre","width xml:space"),m("hr","align noshade size width"),m("isindex","prompt"),m("table","summary width frame rules cellspacing cellpadding align bgcolor"),m("col","width align char charoff valign"),m("colgroup","width align char charoff valign"),m("thead","align char charoff valign"),m("tr","align char charoff valign bgcolor"),m("th","axis align char charoff valign nowrap bgcolor width height"),m("form","accept"),m("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),m("tfoot","align char charoff valign"),m("tbody","align char charoff valign"),m("area","nohref"),m("body","background bgcolor text link vlink alink");if("html4"!=e)m("input button select textarea","autofocus"),m("input textarea","placeholder"),m("a","download"),m("link script img","crossorigin"),m("iframe","sandbox seamless allowfullscreen");return r(l("a form meter progress dfn"),function(e){if(i[e])delete i[e].children[e]}),delete i.caption.children.table,delete i.script,t[e]=i,i}function c(e,t){var n;if(e){if(n={},"string"==typeof e)e={"*":e};r(e,function(e,r){n[r]=n[r.toUpperCase()]="map"==t?i(e,/[, ]/):a(e,/[, ]/)})}return n}return function(e){var n=this,f={},d={},m=[],p,h,g,v,y,b,w,C,x,k,N,E,S,T={},_={};function R(n,r,a){var s=e[n];if(!s){if(s=t[n],!s)s=i(r," ",i(r.toUpperCase()," ")),s=o(s,a),t[n]=s}else s=i(s,/[, ]/,i(s.toUpperCase(),/[, ]/));return s}if(e=e||{},g=u(e.schema),false===e.verify_html)e.valid_elements="*[*]";p=c(e.valid_styles),h=c(e.invalid_styles,"map"),C=c(e.valid_classes,"map"),v=R("whitespace_elements","pre script noscript style textarea video audio iframe object code"),y=R("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=R("short_ended_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track"),w=R("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls"),k=R("non_empty_elements","td th iframe video audio object "+"script pre code",b),N=R("move_caret_before_on_enter_elements","table",k),E=R("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside nav figure"),x=R("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup figcaption",E),S=R("text_inline_elements","span strong b em i font strike u var cite "+"dfn code mark q sup sub samp"),r((e.special||"script noscript style textarea").split(" "),function(e){_[e]=new RegExp("</"+e+"[^>]*>","gi")});function B(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function A(e){var t,n,r,o,a,u,c,d,p,h,g,v,y,b,w,C,x,k,N,E=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e){if(e=l(e,","),f["@"])C=f["@"].attributes,x=f["@"].attributesOrder;for(t=0,n=e.length;t<n;t++)if(a=E.exec(e[t]),a){if(b=a[1],p=a[2],w=a[3],d=a[5],v={},y=[],u={attributes:v,attributesOrder:y},"#"===b)u.paddEmpty=true;if("-"===b)u.removeEmpty=true;if("!"===a[4])u.removeEmptyAttrs=true;if(C){for(k in C)v[k]=C[k];y.push.apply(y,x)}if(d)for(r=0,o=(d=l(d,"|")).length;r<o;r++)if(a=S.exec(d[r]),a){if(c={},g=a[1],h=a[2].replace(/::/g,":"),b=a[3],N=a[4],"!"===g)u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(h),c.required=true;if("-"===g){delete v[h],y.splice(s(y,h),1);continue}if(b){if("="===b)u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:h,value:N}),c.defaultValue=N;if(":"===b)u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:h,value:N}),c.forcedValue=N;if("<"===b)c.validValues=i(N,"?")}if(T.test(h))u.attributePatterns=u.attributePatterns||[],c.pattern=B(h),u.attributePatterns.push(c);else{if(!v[h])y.push(h);v[h]=c}}if(!C&&"@"==p)C=v,x=y;if(w)u.outputName=p,f[w]=u;if(T.test(p))u.pattern=B(p),m.push(u);else f[p]=u}}}function D(e){f={},m=[],A(e),r(g,function(e,t){d[t]=e.children})}function P(e){var n=/^(~)?(.+)$/;if(e)t.text_block_elements=t.block_elements=null,r(l(e,","),function(e){var t=n.exec(e),i="~"===t[1],a=i?"span":"div",s=t[2];if(d[s]=d[a],T[s]=a,!i)x[s.toUpperCase()]={},x[s]={};if(!f[s]){var l=f[a];delete(l=o({},l)).removeEmptyAttrs,delete l.removeEmpty,f[s]=l}r(d,function(e,t){if(e[a])d[t]=e=o({},d[t]),e[s]=e[a]})})}function M(n){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(t[e.schema]=null,n)r(l(n,","),function(e){var t=i.exec(e),n,o;if(t){if(o=t[1],o)n=d[t[2]];else n=d[t[2]]={"#comment":{}};n=d[t[2]],r(l(t[3],"|"),function(e){if("-"===o)delete n[e];else n[e]={}})}})}function L(e){var t=f[e],n;if(t)return t;n=m.length;while(n--)if(t=m[n],t.pattern.test(e))return t}if(!e.valid_elements){if(r(g,function(e,t){f[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},d[t]=e.children}),"html5"!=e.schema)r(l("strong/b em/i"),function(e){e=l(e,"/"),f[e[1]].outputName=e[0]});r(l("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){if(f[e])f[e].removeEmpty=true}),r(l("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){f[e].paddEmpty=true}),r(l("span"),function(e){f[e].removeEmptyAttrs=true})}else D(e.valid_elements);if(P(e.custom_elements),M(e.valid_children),A(e.extended_valid_elements),M("+ol[ul|ol],+ul[ul|ol]"),r({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){if(f[t])f[t].parentsRequired=l(e)}),e.invalid_elements)r(a(e.invalid_elements),function(e){if(f[e])delete f[e]});if(!L("span"))A("span[!data-mce-type|*]");n.children=d,n.getValidStyles=function(){return p},n.getInvalidStyles=function(){return h},n.getValidClasses=function(){return C},n.getBoolAttrs=function(){return w},n.getBlockElements=function(){return x},n.getTextBlockElements=function(){return E},n.getTextInlineElements=function(){return S},n.getShortEndedElements=function(){return b},n.getSelfClosingElements=function(){return y},n.getNonEmptyElements=function(){return k},n.getMoveCaretBeforeOnEnterElements=function(){return N},n.getWhiteSpaceElements=function(){return v},n.getSpecialElements=function(){return _},n.isValidChild=function(e,t){var n=d[e];return!!(n&&n[t])},n.isValid=function(e,t){var n,i,r=L(e);if(r)if(t){if(r.attributes[t])return true;if(n=r.attributePatterns,n){i=n.length;while(i--)if(n[i].pattern.test(e))return true}}else return true;return false},n.getElementRule=L,n.getCustomElements=function(){return T},n.addValidElements=A,n.setValidElements=D,n.addCustomElements=P,n.addValidChildren=M,n.elements=f}}),r("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,n){var i=n.each;function r(e,t,n){var i=1,r,o,a,s;s=e.getShortEndedElements(),(a=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;while(o=a.exec(t)){if(r=a.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in s)continue;i++}if(0===i)break}return r}function o(o,a){var s=this;function l(){}if(o=o||{},s.schema=a=a||new e,false!==o.fix_self_closing)o.fix_self_closing=true;i("comment cdata text start end pi doctype".split(" "),function(e){if(e)s[e]=o[e]||l}),s.parse=function(e){var i=this,s,l=0,u,c,f=[],d,m,p,h,g,v,y,b,w,C,x,k,N,E,S,T,_,R,B,A,D,P,M,L,O,I=0,H=t.decode,F,z=n.makeMap("src,href,data,background,formaction,poster"),U=/((java|vb)script|mhtml):/i,W=/^data:/i;function V(e){var t,n;t=f.length;while(t--)if(f[t].name===e)break;if(t>=0){for(n=f.length-1;n>=t;n--)if(e=f[n],e.valid)i.end(e.name);f.length=t}}function $(e,t,n,i,r){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in b?t:H(n||i||r||""),C&&!g&&0!==t.indexOf("data-")){if(a=S[t],!a&&T){s=T.length;while(s--)if(a=T[s],a.pattern.test(t))break;if(-1===s)a=null}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(z[t]&&!o.allow_script_urls){var u=n.replace(l,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(U.test(u))return;if(!o.allow_html_data_urls&&W.test(u)&&!/^data:image\//i.test(u))return}d.map[t]=n,d.push({name:t,value:n})}P=new RegExp("<(?:"+"(?:!--([\\w\\W]*?)--\x3e)|"+"(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|"+"(?:!DOCTYPE([\\w\\W]*?)>)|"+"(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|"+"(?:\\/([^>]+)>)|"+"(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>)"+")","g"),M=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=a.getShortEndedElements(),D=o.self_closing_elements||a.getSelfClosingElements(),b=a.getBoolAttrs(),C=o.validate,v=o.remove_internals,F=o.fix_self_closing,L=a.getSpecialElements();while(s=P.exec(e)){if(l<s.index)i.text(H(e.substr(l,s.index-l)));if(u=s[6]){if(u=u.toLowerCase(),":"===u.charAt(0))u=u.substr(1);V(u)}else if(u=s[7]){if(u=u.toLowerCase(),":"===u.charAt(0))u=u.substr(1);if(w=u in y,F&&D[u]&&f.length>0&&f[f.length-1].name===u)V(u);if(!C||(x=a.getElementRule(u))){if(k=true,C)S=x.attributes,T=x.attributePatterns;if(E=s[8]){if(g=-1!==E.indexOf("data-mce-type"),g&&v)k=false;(d=[]).map={},E.replace(M,$)}else(d=[]).map={};if(C&&!g){if(_=x.attributesRequired,R=x.attributesDefault,B=x.attributesForced,A=x.removeEmptyAttrs,A&&!d.length)k=false;if(B){m=B.length;while(m--){if(N=B[m],h=N.name,O=N.value,"{$uid}"===O)O="mce_"+I++;d.map[h]=O,d.push({name:h,value:O})}}if(R){m=R.length;while(m--)if(N=R[m],h=N.name,!(h in d.map)){if(O=N.value,"{$uid}"===O)O="mce_"+I++;d.map[h]=O,d.push({name:h,value:O})}}if(_){m=_.length;while(m--)if(_[m]in d.map)break;if(-1===m)k=false}if(N=d.map["data-mce-bogus"]){if("all"===N){l=r(a,e,P.lastIndex),P.lastIndex=l;continue}k=false}}if(k)i.start(u,d,w)}else k=false;if(c=L[u]){if(c.lastIndex=l=s.index+s[0].length,s=c.exec(e)){if(k)p=e.substr(l,s.index-l);l=s.index+s[0].length}else p=e.substr(l),l=e.length;if(k){if(p.length>0)i.text(p,true);i.end(u)}P.lastIndex=l;continue}if(!w)if(!E||E.indexOf("/")!=E.length-1)f.push({name:u,valid:k});else if(k)i.end(u)}else if(u=s[1]){if(">"===u.charAt(0))u=" "+u;if(!o.allow_conditional_comments&&"[if"===u.substr(0,3).toLowerCase())u=" "+u;i.comment(u)}else if(u=s[2])i.cdata(u);else if(u=s[3])i.doctype(u);else if(u=s[4])i.pi(u,s[5]);l=s.index+s[0].length}if(l<e.length)i.text(H(e.substr(l)));for(m=f.length-1;m>=0;m--)if(u=f[m],u.valid)i.end(u.name)}}return o.findEndTag=r,o}),r("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(e,t,n,i){var r=i.makeMap,o=i.each,a=i.explode,s=i.extend,l=function(t,n){if(t.padd_empty_with_br)n.empty().append(new e("br","1")).shortEnded=true;else n.empty().append(new e("#text","3")).value=" "},u=function(e,t){return e&&e.firstChild===e.lastChild&&e.firstChild.name===t};return function(c,f){var d=this,m={},p=[],h={},g={};(c=c||{}).validate="validate"in c?c.validate:true,c.root_name=c.root_name||"body",d.schema=f=f||new t;function v(t){var n,i,o,a,s,l,c,m,p,h,g,v,y,b,w,C;for(v=r("tr,td,th,tbody,thead,tfoot,table"),h=f.getNonEmptyElements(),g=f.getWhiteSpaceElements(),y=f.getTextBlockElements(),b=f.getSpecialElements(),n=0;n<t.length;n++){if(i=t[n],!i.parent||i.fixed)continue;if(y[i.name]&&"li"==i.parent.name){w=i.next;while(w){if(y[w.name])w.name="li",w.fixed=true,i.parent.insert(w,i.parent);else break;w=w.next}i.unwrap(i);continue}for(a=[i],o=i.parent;o&&!f.isValidChild(o.name,i.name)&&!v[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=l=d.filterNode(a[0].clone()),p=0;p<a.length-1;p++){if(f.isValidChild(l.name,a[p].name))c=d.filterNode(a[p].clone()),l.append(c);else c=l;for(m=a[p].firstChild;m&&m!=a[p+1];)C=m.next,c.append(m),m=C;l=c}if(!s.isEmpty(h,g))o.insert(s,a[0],true),o.insert(i,s);else o.insert(i,a[0],true);if(o=a[0],o.isEmpty(h,g)||u(o,"br"))o.empty().remove()}else if(i.parent){if("li"===i.name){if(w=i.prev,w&&("ul"===w.name||"ul"===w.name)){w.append(i);continue}if(w=i.next,w&&("ul"===w.name||"ul"===w.name)){w.insert(i,w.firstChild,true);continue}i.wrap(d.filterNode(new e("ul",1)));continue}if(f.isValidChild(i.parent.name,"div")&&f.isValidChild("div",i.name))i.wrap(d.filterNode(new e("div",1)));else if(b[i.name])i.empty().remove();else i.unwrap()}}}if(d.filterNode=function(e){var t,n,i;if(n in m)if(i=h[n],i)i.push(e);else h[n]=[e];t=p.length;while(t--)if(n=p[t].name,n in e.attributes.map)if(i=g[n],i)i.push(e);else g[n]=[e];return e},d.addNodeFilter=function(e,t){o(a(e),function(e){var n=m[e];if(!n)m[e]=n=[];n.push(t)})},d.addAttributeFilter=function(e,t){o(a(e),function(e){var n;for(n=0;n<p.length;n++)if(p[n].name===e)return void p[n].callbacks.push(t);p.push({name:e,callbacks:[t]})})},d.parse=function(t,i){var o,a,u,d,y,b,w,C,x,k,N,E,S,T=[],_,R,B,A,D,P,M,L;i=i||{},h={},g={},E=s(r("script,style,head,html,body,title,meta,param"),f.getBlockElements()),M=f.getNonEmptyElements(),P=f.children,N=c.validate,L="forced_root_block"in i?i.forced_root_block:c.forced_root_block,D=f.getWhiteSpaceElements(),S=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,B=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/;function O(){var e=a.firstChild,t,n;function i(t){if(t){if(e=t.firstChild,e&&3==e.type)e.value=e.value.replace(S,"");if(e=t.lastChild,e&&3==e.type)e.value=e.value.replace(R,"")}}if(!f.isValidChild(a.name,L.toLowerCase()))return;while(e){if(t=e.next,3==e.type||1==e.type&&"p"!==e.name&&!E[e.name]&&!e.attr("data-mce-type"))if(!n)(n=I(L,1)).attr(c.forced_root_block_attrs),a.insert(n,e),n.append(e);else n.append(e);else i(n),n=null;e=t}i(n)}function I(t,n){var i=new e(t,n),r;if(t in m)if(r=h[t],r)r.push(i);else h[t]=[i];return i}function H(e){var t,n,i,r,o=f.getBlockElements();for(t=e.prev;t&&3===t.type;){if(i=t.value.replace(R,""),i.length>0)return void(t.value=i);if(n=t.next,n){if(3==n.type&&n.value.length){t=t.prev;continue}if(!o[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}r=t.prev,t.remove(),t=r}}function F(e){var t,n={};for(t in e)if("li"!==t&&"p"!=t)n[t]=e[t];return n}if(o=new n({validate:N,allow_script_urls:c.allow_script_urls,allow_conditional_comments:c.allow_conditional_comments,self_closing_elements:F(f.getSelfClosingElements()),cdata:function(e){u.append(I("#cdata",4)).value=e},text:function(e,t){var n;if(!_)if(e=e.replace(B," "),u.lastChild&&E[u.lastChild.name])e=e.replace(S,"");if(0!==e.length)(n=I("#text",3)).raw=!!t,u.append(n).value=e},comment:function(e){u.append(I("#comment",8)).value=e},pi:function(e,t){u.append(I(e,7)).value=t,H(u)},doctype:function(e){var t;(t=u.append(I("#doctype",10))).value=e,H(u)},start:function(e,t,n){var i,r,o,a,s;if(o=N?f.getElementRule(e):{},o){if(i=I(o.outputName||e,1),i.attributes=t,i.shortEnded=n,u.append(i),s=P[u.name],s&&P[i.name]&&!s[i.name])T.push(i);r=p.length;while(r--)if(a=p[r].name,a in t.map)if(x=g[a],x)x.push(i);else g[a]=[i];if(E[e])H(i);if(!n)u=i;if(!_&&D[e])_=true}},end:function(e){var t,n,i,r,o;if(n=N?f.getElementRule(e):{},n){if(E[e])if(!_){if(t=u.firstChild,t&&3===t.type)if(i=t.value.replace(S,""),i.length>0)t.value=i,t=t.next;else{r=t.next,t.remove(),t=r;while(t&&3===t.type){if(i=t.value,r=t.next,0===i.length||A.test(i))t.remove(),t=r;t=r}}if(t=u.lastChild,t&&3===t.type)if(i=t.value.replace(R,""),i.length>0)t.value=i,t=t.prev;else{r=t.prev,t.remove(),t=r;while(t&&3===t.type){if(i=t.value,r=t.prev,0===i.length||A.test(i))t.remove(),t=r;t=r}}}if(_&&D[e])_=false;if(n.removeEmpty||n.paddEmpty)if(u.isEmpty(M,D))if(n.paddEmpty)l(c,u);else if(!u.attributes.map.name&&!u.attributes.map.id){if(o=u.parent,E[u.name])u.empty().remove();else u.unwrap();return void(u=o)}u=u.parent}}},f),a=u=new e(i.context||c.root_name,11),o.parse(t),N&&T.length)if(!i.context)v(T);else i.invalid=true;if(L&&("body"==a.name||i.isRootContent))O();if(!i.invalid){for(k in h){x=m[k],w=(d=h[k]).length;while(w--)if(!d[w].parent)d.splice(w,1);for(y=0,b=x.length;y<b;y++)x[y](d,k,i)}for(y=0,b=p.length;y<b;y++)if(x=p[y],x.name in g){w=(d=g[x.name]).length;while(w--)if(!d[w].parent)d.splice(w,1);for(w=0,C=x.callbacks.length;w<C;w++)x.callbacks[w](d,x.name,i)}}return a},c.remove_trailing_brs)d.addNodeFilter("br",function(t){var n,i=t.length,r,o=s({},f.getBlockElements()),a=f.getNonEmptyElements(),u,d,m,p,h=f.getNonEmptyElements(),g,v;for(o.body=1,n=0;n<i;n++)if(r=t[n],u=r.parent,o[r.parent.name]&&r===u.lastChild){m=r.prev;while(m){if(p=m.name,"span"!==p||"bookmark"!==m.attr("data-mce-type")){if("br"!==p)break;if("br"===p){r=null;break}}m=m.prev}if(r)if(r.remove(),u.isEmpty(a,h))if(g=f.getElementRule(u.name),g)if(g.removeEmpty)u.remove();else if(g.paddEmpty)l(c,u)}else{d=r;while(u&&u.firstChild===d&&u.lastChild===d){if(d=u,o[u.name])break;u=u.parent}if(d===u&&true!==c.padd_empty_with_br)(v=new e("#text",3)).value=" ",r.replace(v)}});if(!c.allow_unsafe_link_target)d.addAttributeFilter("href",function(e){var t=e.length,n,r,o="noopener noreferrer";function a(e){return e=s(e),e?[e,o].join(" "):o}function s(e){var t=new RegExp("("+o.replace(" ","|")+")","g");if(e)e=i.trim(e.replace(t,""));return e?e:null}function l(e,t){return t?a(e):s(e)}while(t--)if(n=e[t],r=n.attr("rel"),"a"===n.name)n.attr("rel",l(r,"_blank"==n.attr("target")))});if(!c.allow_html_in_named_anchor)d.addAttributeFilter("id,name",function(e){var t=e.length,n,i,r,o;while(t--)if(o=e[t],"a"===o.name&&o.firstChild&&!o.attr("href")){r=o.parent,n=o.lastChild;do{i=n.prev,r.insert(n,o),n=i}while(n)}});if(c.fix_list_elements)d.addNodeFilter("ul,ol",function(t){var n=t.length,i,r;while(n--)if(i=t[n],r=i.parent,"ul"===r.name||"ol"===r.name)if(i.prev&&"li"===i.prev.name)i.prev.append(i);else{var o=new e("li",1);o.attr("style","list-style-type: none"),i.wrap(o)}});if(c.validate&&f.getValidClasses())d.addAttributeFilter("class",function(e){var t=e.length,n,i,r,o,a,s=f.getValidClasses(),l,u;while(t--){for(i=(n=e[t]).attr("class").split(" "),a="",r=0;r<i.length;r++){if(o=i[r],u=false,l=s["*"],l&&l[o])u=true;if(l=s[n.name],!u&&l&&l[o])u=true;if(u){if(a)a+=" ";a+=o}}if(!a.length)a=null;n.attr("class",a)}})}}),r("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(e,t){var n=t.makeMap;return function(t){var i=[],r,o,a,s,l;return t=t||{},r=t.indent,o=n(t.indent_before||""),a=n(t.indent_after||""),s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),l="html"==t.element_format,{start:function(e,t,n){var u,c,f,d;if(r&&o[e]&&i.length>0)if(d=i[i.length-1],d.length>0&&"\n"!==d)i.push("\n");if(i.push("<",e),t)for(u=0,c=t.length;u<c;u++)f=t[u],i.push(" ",f.name,'="',s(f.value,true),'"');if(!n||l)i[i.length]=">";else i[i.length]=" />";if(n&&r&&a[e]&&i.length>0)if(d=i[i.length-1],d.length>0&&"\n"!==d)i.push("\n")},end:function(e){var t;if(i.push("</",e,">"),r&&a[e]&&i.length>0)if(t=i[i.length-1],t.length>0&&"\n"!==t)i.push("\n")},text:function(e,t){if(e.length>0)i[i.length]=t?e:s(e)},cdata:function(e){i.push("<![CDATA[",e,"]]>")},comment:function(e){i.push("\x3c!--",e,"--\x3e")},pi:function(e,t){if(t)i.push("<?",e," ",s(t),"?>");else i.push("<?",e,"?>");if(r)i.push("\n")},doctype:function(e){i.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){i.length=0},getContent:function(){return i.join("").replace(/\n$/,"")}}}}),r("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(n,i){var r=this,o=new e(n);(n=n||{}).validate="validate"in n?n.validate:true,r.schema=i=i||new t,r.writer=o,r.serialize=function(e){var t,r;r=n.validate,t={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},o.reset();function a(e){var n=t[e.type],s,l,u,c,f,d,m,p,h;if(!n){if(s=e.name,l=e.shortEnded,u=e.attributes,r&&u&&u.length>1)if(d=[],d.map={},h=i.getElementRule(e.name),h){for(m=0,p=h.attributesOrder.length;m<p;m++)if(c=h.attributesOrder[m],c in u.map)f=u.map[c],d.map[c]=f,d.push({name:c,value:f});for(m=0,p=u.length;m<p;m++)if(c=u[m].name,!(c in d.map))f=u.map[c],d.map[c]=f,d.push({name:c,value:f});u=d}if(o.start(e.name,u,l),!l){if(e=e.firstChild)do{a(e)}while(e=e.next);o.end(s)}}else n(e)}if(1==e.type&&!n.inner)a(e);else t[11](e);return o.getContent()}}}),r("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/SaxParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools","tinymce/text/Zwsp"],function(e,t,n,i,r,o,a,s,l,u){var c=l.each,f=l.trim,d=e.DOM;function m(e){var t,n;function i(e){return e&&"br"===e.name}if(t=e.lastChild,i(t))if(n=t.prev,i(n))t.remove(),n.remove()}return function(e,o){var p,h,g,v=["data-mce-selected"];if(o)p=o.dom,h=o.schema;function y(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>","\\s?("+v.join("|")+')="[^"]+"'].join("|"),"gi");return e=u.trim(e.replace(t,"")),e}function b(e){var t=e,i=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r,a,s,l,u,c=o.schema;t=y(t),u=c.getShortEndedElements();while(l=i.exec(t)){if(a=i.lastIndex,s=l[0].length,u[l[1]])r=a;else r=n.findEndTag(c,t,a);t=t.substring(0,a-s)+t.substring(r),i.lastIndex=a-s}return t}function w(){return b(o.getBody().innerHTML)}function C(e){if(-1===l.inArray(v,e))g.addAttributeFilter(e,function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),v.push(e)}return p=p||d,h=h||new a(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:true,g=new t(e,h),g.addAttributeFilter("data-mce-tabindex",function(e,t){var n=e.length,i;while(n--)(i=e[n]).attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)}),g.addAttributeFilter("src,href,style",function(t,n){var i=t.length,r,o,a="data-mce-"+n,s=e.url_converter,l=e.url_converter_scope,u;while(i--)if(r=t[i],o=r.attributes.map[a],o!==u)r.attr(n,o.length>0?o:null),r.attr(a,null);else{if(o=r.attributes.map[n],"style"===n)o=p.serializeStyle(p.parseStyle(o),r.name);else if(s)o=s.call(l,o,n,r.name);r.attr(n,o.length>0?o:null)}}),g.addAttributeFilter("class",function(e){var t=e.length,n,i;while(t--)if(n=e[t],i=n.attr("class"),i)i=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",i.length>0?i:null)}),g.addAttributeFilter("data-mce-type",function(e,t,n){var i=e.length,r;while(i--)if(r=e[i],"bookmark"===r.attributes.map["data-mce-type"]&&!n.cleanup)r.remove()}),g.addNodeFilter("noscript",function(e){var t=e.length,n;while(t--)if(n=e[t].firstChild,n)n.value=i.decode(n.value)}),g.addNodeFilter("script,style",function(e,t){var n=e.length,i,r,o;function a(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}while(n--)if(i=e[n],r=i.firstChild?i.firstChild.value:"","script"===t){if(o=i.attr("type"),o)i.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,""));if(r.length>0)i.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>"}else if(r.length>0)i.firstChild.value="\x3c!--\n"+a(r)+"\n--\x3e"}),g.addNodeFilter("#comment",function(e){var t=e.length,n;while(t--)if(n=e[t],0===n.value.indexOf("[CDATA["))n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"");else if(0===n.value.indexOf("mce:protected "))n.name="#text",n.type=3,n.raw=true,n.value=unescape(n.value).substr(14)}),g.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,i;while(n--)if(i=e[n],7===i.type)i.remove();else if(1===i.type)if("input"===t&&!("type"in i.attributes.map))i.attr("type","text")}),g.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,"+"data-mce-selected,data-mce-expando,"+"data-mce-type,data-mce-resize",function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),{schema:h,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:function(t,n){var i=this,o,a,l,d,v,y;if(s.ie&&p.select("script,style,select,map").length>0)v=t.innerHTML,t=t.cloneNode(false),p.setHTML(t,v);else t=t.cloneNode(true);if(o=document.implementation,o.createHTMLDocument){if(a=o.createHTMLDocument(""),c("BODY"==t.nodeName?t.childNodes:[t],function(e){a.body.appendChild(a.importNode(e,true))}),"BODY"!=t.nodeName)t=a.body.firstChild;else t=a.body;l=p.doc,p.doc=a}if(n=n||{},n.format=n.format||"html",n.selection)n.forced_root_block="";if(!n.no_events)n.node=t,i.onPreProcess(n);if(y=g.parse(f(n.getInner?t.innerHTML:p.getOuterHTML(t)),n),m(y),d=new r(e,h),n.content=d.serialize(y),!n.cleanup)n.content=u.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"");if(!n.no_events)i.onPostProcess(n);if(l)p.doc=l;return n.node=null,n.content},addRules:function(e){h.addValidElements(e)},setRules:function(e){h.setValidElements(e)},onPreProcess:function(e){if(o)o.fire("PreProcess",e)},onPostProcess:function(e){if(o)o.fire("PostProcess",e)},addTempAttr:C,trimHtml:y,getTrimmedContent:w,trimContent:b}}}),r("tinymce/dom/TridentSelection",[],function(){function e(e){var t=this,n=e.dom,i=false;function r(t,n){var i,r=0,o,a,s,l,u,c,f=-1,d;if(i=t.duplicate(),i.collapse(n),d=i.parentElement(),d.ownerDocument!==e.dom.doc)return;while("false"===d.contentEditable)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};o=(s=d.children).length-1;while(r<=o)if(c=Math.floor((r+o)/2),l=s[c],i.moveToElementText(l),f=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)o=c-1;else if(f<0)r=c+1;else return{node:l};if(f<0){if(!l)i.moveToElementText(d),i.collapse(true),l=d,a=true;else i.collapse(false);u=0;while(0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)){if(0===i.move("character",1)||d!=i.parentElement())break;u++}}else{i.collapse(true),u=0;while(0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)){if(0===i.move("character",-1)||d!=i.parentElement())break;u++}}return{node:l,position:f,offset:u,inside:a}}function o(){var i=e.getRng(),o=n.createRng(),a,s,l,u,c;if(a=i.item?i.item(0):i.parentElement(),a.ownerDocument!=n.doc)return o;if(s=e.isCollapsed(),i.item)return o.setStart(a.parentNode,n.nodeIndex(a)),o.setEnd(o.startContainer,o.startOffset+1),o;function f(e){var t=r(i,e),n,a,s=0,l,u,c;if(n=t.node,a=t.offset,t.inside&&!n.hasChildNodes())return void o[e?"setStart":"setEnd"](n,0);if(a===u)return void o[e?"setStartBefore":"setEndAfter"](n);if(t.position<0){if(l=t.inside?n.firstChild:n.nextSibling,!l)return void o[e?"setStartAfter":"setEndAfter"](n);if(!a){if(3==l.nodeType)o[e?"setStart":"setEnd"](l,0);else o[e?"setStartBefore":"setEndBefore"](l);return}while(l){if(3==l.nodeType)if(c=l.nodeValue,s+=c.length,s>=a){n=l,s-=a,s=c.length-s;break}l=l.nextSibling}}else{if(l=n.previousSibling,!l)return o[e?"setStartBefore":"setEndBefore"](n);if(!a){if(3==n.nodeType)o[e?"setStart":"setEnd"](l,n.nodeValue.length);else o[e?"setStartAfter":"setEndAfter"](l);return}while(l){if(3==l.nodeType)if(s+=l.nodeValue.length,s>=a){n=l,s-=a;break}l=l.previousSibling}}o[e?"setStart":"setEnd"](n,s)}try{if(f(true),!s)f()}catch(n){if(-2147024809==n.number){if(c=t.getBookmark(2),l=i.duplicate(),l.collapse(true),a=l.parentElement(),!s)(l=i.duplicate()).collapse(false),(u=l.parentElement()).innerHTML=u.innerHTML;if(a.innerHTML=a.innerHTML,t.moveToBookmark(c),i=e.getRng(),f(true),!s)f()}else throw n}return o}this.getBookmark=function(t){var i=e.getRng(),o={};function a(e){var t,i,r,o,a=[];t=e.parentNode,i=n.getRoot().parentNode;while(t!=i&&9!==t.nodeType){o=(r=t.children).length;while(o--)if(e===r[o]){a.push(o);break}e=t,t=t.parentNode}return a}function s(e){var t;if(t=r(i,e),t)return{position:t.position,offset:t.offset,indexes:a(t.node),inside:t.inside}}if(2===t)if(!i.item){if(o.start=s(true),!e.isCollapsed())o.end=s()}else o.start={ctrl:true,indexes:a(i.item(0))};return o},this.moveToBookmark=function(e){var t,i=n.doc.body;function r(e){var t,i,r,o;for(t=n.getRoot(),i=e.length-1;i>=0;i--)if(o=t.children,r=e[i],r<=o.length-1)t=o[r];return t}function o(n){var o=e[n?"start":"end"],a,s,l,u;if(o){if(a=o.position>0,s=i.createTextRange(),s.moveToElementText(r(o.indexes)),u=o.offset,u!==l)s.collapse(o.inside||a),s.moveStart("character",a?-u:u);else s.collapse(n);if(t.setEndPoint(n?"StartToStart":"EndToStart",s),n)t.collapse(true)}}if(e.start)if(e.start.ctrl)(t=i.createControlRange()).addElement(r(e.start.indexes)),t.select();else t=i.createTextRange(),o(true),o(),t.select()},this.addRange=function(t){var r,o,a,s,l,u,c,f=e.dom.doc,d=f.body,m,p;function h(e){var t,o,c,m,p;if(c=n.create("a"),t=e?a:l,o=e?s:u,m=r.duplicate(),t==f||t==f.documentElement)t=d,o=0;if(3==t.nodeType)t.parentNode.insertBefore(c,t),m.moveToElementText(c),m.moveStart("character",o),n.remove(c),r.setEndPoint(e?"StartToStart":"EndToEnd",m);else{if(p=t.childNodes,p.length){if(o>=p.length)n.insertAfter(c,p[p.length-1]);else t.insertBefore(c,p[o]);m.moveToElementText(c)}else if(t.canHaveHTML)t.innerHTML="<span>&#xFEFF;</span>",c=t.firstChild,m.moveToElementText(c),m.collapse(i);r.setEndPoint(e?"StartToStart":"EndToEnd",m),n.remove(c)}}if(a=t.startContainer,s=t.startOffset,l=t.endContainer,u=t.endOffset,r=d.createTextRange(),a==l&&1==a.nodeType){if(s==u&&!a.hasChildNodes()){if(a.canHaveHTML){if(c=a.previousSibling,c&&!c.hasChildNodes()&&n.isBlock(c))c.innerHTML="&#xFEFF;";else c=null;if(a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(a.lastChild),r.select(),n.doc.selection.clear(),a.innerHTML="",c)c.innerHTML="";return}s=n.nodeIndex(a),a=a.parentNode}if(s==u-1)try{if(p=a.childNodes[s],o=d.createControlRange(),o.addElement(p),o.select(),m=e.getRng(),m.item&&p===m.item(0))return}catch(e){}}h(true),h(),r.select()},this.getRangeAt=o}return e}),r("tinymce/util/VK",["tinymce/Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/util/Delay","tinymce/Env","tinymce/dom/NodeType"],function(e,t,n,i,r){var o=r.isContentEditableFalse,a=r.isContentEditableTrue;function s(e,t){while(t&&t!=e){if(a(t)||o(t))return t;t=t.parentNode}return null}return function(r,a){var l=a.dom,u=t.each,c,f,d,m,p,h,g,v,y,b,w,C,x,k,N,E,S=a.getDoc(),T=document,_=i.ie&&i.ie<11,R=Math.abs,B=Math.round,A=a.getBody(),D,P;m={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var M=".mce-content-body";a.contentStyles.push(M+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"box-sizing: box-sizing;"+"background: #FFF;"+"width: 7px;"+"height: 7px;"+"z-index: 10000"+"}"+M+" .mce-resizehandle:hover {"+"background: #000"+"}"+M+" img[data-mce-selected],"+M+" hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+M+" .mce-clonedresizable {"+"position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"+M+" .mce-resize-helper {"+"background: #555;"+"background: rgba(0,0,0,0.75);"+"border-radius: 3px;"+"border: 1px;"+"color: white;"+"display: none;"+"font-family: sans-serif;"+"font-size: 12px;"+"white-space: nowrap;"+"line-height: 14px;"+"margin: 5px 10px;"+"padding: 5px;"+"position: absolute;"+"z-index: 10001"+"}");function L(e){var t=a.settings.object_resizing;if(false===t||i.iOS)return false;if("string"!=typeof t)t="table,img,div";if("false"===e.getAttribute("data-mce-resize"))return false;if(e==a.getBody())return false;return a.dom.is(e,t)}function O(t){var n,i,r,o,s;if(n=t.screenX-g,i=t.screenY-v,N=n*p[2]+w,E=i*p[3]+C,N=N<5?5:N,E=E<5?5:E,"IMG"==c.nodeName&&false!==a.settings.resize_img_proportional)r=!e.modifierPressed(t);else r=e.modifierPressed(t)||"IMG"==c.nodeName&&p[2]*p[3]!==0;if(r)if(R(n)>R(i))E=B(N*x),N=B(E/x);else N=B(E/x),E=B(N*x);if(l.setStyles(f,{width:N,height:E}),o=p.startPos.x+n,s=p.startPos.y+i,o=o>0?o:0,s=s>0?s:0,l.setStyles(d,{left:o,top:s,display:"block"}),d.innerHTML=N+" &times; "+E,p[2]<0&&f.clientWidth<=N)l.setStyle(f,"left",y+(w-N));if(p[3]<0&&f.clientHeight<=E)l.setStyle(f,"top",b+(C-E));if(n=A.scrollWidth-D,i=A.scrollHeight-P,n+i!==0)l.setStyles(d,{left:o-n,top:s-i});if(!k)a.fire("ObjectResizeStart",{target:c,width:w,height:C}),k=true}function I(){k=false;function e(e,t){if(t)if(c.style[e]||!a.schema.isValid(c.nodeName.toLowerCase(),e))l.setStyle(c,e,t);else l.setAttrib(c,e,t)}if(e("width",N),e("height",E),l.unbind(S,"mousemove",O),l.unbind(S,"mouseup",I),T!=S)l.unbind(T,"mousemove",O),l.unbind(T,"mouseup",I);if(l.remove(f),l.remove(d),!_||"TABLE"==c.nodeName)H(c);a.fire("ObjectResized",{target:c,width:N,height:E}),l.setAttrib(c,"style",l.getAttrib(c,"style")),a.nodeChanged()}function H(e,t,n){var r,o,s,h,k;if(F(),Y(),r=l.getPos(e,A),y=r.x,b=r.y,k=e.getBoundingClientRect(),o=k.width||k.right-k.left,s=k.height||k.bottom-k.top,c!=e)K(),c=e,N=E=0;if(h=a.fire("ObjectSelected",{target:e}),L(e)&&!h.isDefaultPrevented())u(m,function(e,r){var a;function u(t){if(g=t.screenX,v=t.screenY,w=c.clientWidth,C=c.clientHeight,x=C/w,p=e,e.startPos={x:o*e[0]+y,y:s*e[1]+b},D=A.scrollWidth,P=A.scrollHeight,f=c.cloneNode(true),l.addClass(f,"mce-clonedresizable"),l.setAttrib(f,"data-mce-bogus","all"),f.contentEditable=false,f.unSelectabe=true,l.setStyles(f,{left:y,top:b,margin:0}),f.removeAttribute("data-mce-selected"),A.appendChild(f),l.bind(S,"mousemove",O),l.bind(S,"mouseup",I),T!=S)l.bind(T,"mousemove",O),l.bind(T,"mouseup",I);d=l.add(A,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},w+" &times; "+C)}if(t){if(r==t)u(n);return}if(a=l.get("mceResizeHandle"+r),a)l.remove(a);if(a=l.add(A,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:true,style:"cursor:"+r+"-resize; margin:0; padding:0"}),i.ie)a.contentEditable=false;l.bind(a,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),u(e)}),e.elm=a,l.setStyles(a,{left:o*e[0]+y-a.offsetWidth/2,top:s*e[1]+b-a.offsetHeight/2})});else F();c.setAttribute("data-mce-selected","1")}function F(){var e,t;if(Y(),c)c.removeAttribute("data-mce-selected");for(e in m)if(t=l.get("mceResizeHandle"+e),t)l.unbind(t),l.remove(t)}function z(e){var t,n;function i(e,t){if(e)do{if(e===t)return true}while(e=e.parentNode)}if(k||a.removed)return;if(u(l.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),n=l.$(n).closest(_?"table":"table,img,hr")[0],i(n,A))if(X(),t=r.getStart(true),i(t,n)&&i(r.getEnd(true),n))if(!_||n!=t&&"IMG"!==t.nodeName)return void H(n);F()}function U(e,t,n){if(e&&e.attachEvent)e.attachEvent("on"+t,n)}function W(e,t,n){if(e&&e.detachEvent)e.detachEvent("on"+t,n)}function V(e){var t=e.srcElement,n,i,r,o,s,l,u;n=t.getBoundingClientRect(),l=h.clientX-n.left,u=h.clientY-n.top;for(i in m)if(r=m[i],o=t.offsetWidth*r[0],s=t.offsetHeight*r[1],R(o-l)<8&&R(s-u)<8){p=r;break}k=true,a.fire("ObjectResizeStart",{target:c,width:c.clientWidth,height:c.clientHeight}),a.getDoc().selection.empty(),H(t,i,h)}function $(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false}function j(e){return o(s(a.getBody(),e))}function q(e){var t=e.srcElement;if(j(t))return void $(e);if(t!=c){if(a.fire("ObjectSelected",{target:t}),K(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=false);if("IMG"==t.nodeName||"TABLE"==t.nodeName)F(),c=t,U(t,"resizestart",V)}}function K(){W(c,"resizestart",V)}function Y(){for(var e in m){var t=m[e];if(t.elm)l.unbind(t.elm),delete t.elm}}function X(){try{a.getDoc().execCommand("enableObjectResizing",false,false)}catch(e){}}function G(e){var t;if(!_)return;t=S.body.createControlRange();try{return t.addElement(e),t.select(),true}catch(e){}}a.on("init",function(){if(_)a.on("ObjectResized",function(e){if("TABLE"!=e.target.nodeName)F(),G(e.target)}),U(A,"controlselect",q),a.on("mousedown",function(e){h=e});else if(X(),i.ie>=11)a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;if(!k&&/^(TABLE|IMG|HR)$/.test(n)&&!j(t))if(a.selection.select(t,"TABLE"==n),"mousedown"==e.type)a.nodeChanged()}),a.dom.bind(A,"mscontrolselect",function(e){function t(e){n.setEditorTimeout(a,function(){a.selection.select(e)})}if(j(e.target))return e.preventDefault(),void t(e.target);if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName))if(e.preventDefault(),"IMG"==e.target.tagName)t(e.target)});var e=n.throttle(function(e){if(!a.composing&&!a.destroyed)z(e)});a.on("nodechange ResizeEditor ResizeWindow drop",e),a.on("keyup compositionend",function(t){if(c&&"TABLE"==c.nodeName)e(t)}),a.on("hide blur",F)}),a.on("remove",Y);function J(){if(c=f=null,_)K(),W(A,"controlselect",q)}return{isResizable:L,showResizeRect:H,hideResizeRect:F,updateResizeRect:z,controlSelect:G,destroy:J}}}),r("tinymce/util/Fun",[],function(){var e=[].slice;function t(e){return function(){return e}}function n(e){return function(t){return!e(t)}}function i(e,t){return function(n){return e(t(n))}}function r(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return true;return false}}function o(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return false;return true}}function a(t){var n=e.call(arguments);if(n.length-1>=t.length)return t.apply(this,n.slice(1));return function(){var e=n.concat([].slice.call(arguments));return a.apply(this,e)}}function s(){}return{constant:t,negate:n,and:o,or:r,curry:a,compose:i,noop:s}}),r("tinymce/caret/CaretCandidate",["tinymce/dom/NodeType","tinymce/util/Arr","tinymce/caret/CaretContainer"],function(e,t,n){var i=e.isContentEditableTrue,r=e.isContentEditableFalse,o=e.isBr,a=e.isText,s=e.matchNodeNames("script style textarea"),l=e.matchNodeNames("img input textarea hr iframe video audio object"),u=e.matchNodeNames("table"),c=n.isCaretContainer;function f(e){if(c(e))return false;if(a(e)){if(s(e.parentNode))return false;return true}return l(e)||o(e)||u(e)||r(e)}function d(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(r(e))return false;if(i(e))return true}return true}function m(e){if(!r(e))return false;return true!==t.reduce(e.getElementsByTagName("*"),function(e,t){return e||i(t)},false)}function p(e){return l(e)||m(e)}function h(e,t){return f(e)&&d(e,t)}return{isCaretCandidate:f,isInEditable:d,isAtomic:p,isEditableCaretCandidate:h}}),r("tinymce/geom/ClientRect",[],function(){var e=Math.round;function t(t){if(!t)return{left:0,top:0,bottom:0,right:0,width:0,height:0};return{left:e(t.left),top:e(t.top),bottom:e(t.bottom),right:e(t.right),width:e(t.width),height:e(t.height)}}function n(e,n){if(e=t(e),n)e.right=e.left;else e.left=e.left+e.width,e.right=e.left;return e.width=0,e}function i(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function r(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function o(e,t){if(e.bottom<t.top)return true;if(e.top>t.bottom)return false;return r(t.top-e.bottom,e,t)}function a(e,t){if(e.top>t.bottom)return true;if(e.bottom<t.top)return false;return r(t.bottom-e.top,e,t)}function s(e,t){return e.left<t.left}function l(e,t){return e.right>t.right}function u(e,t){if(o(e,t))return-1;if(a(e,t))return 1;if(s(e,t))return-1;if(l(e,t))return 1;return 0}function c(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}return{clone:t,collapse:n,isEqual:i,isAbove:o,isBelow:a,isLeft:s,isRight:l,compare:u,containsXY:c}}),r("tinymce/text/ExtendingChar",[],function(){var e=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ؚ"+"ً-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް"+"߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़"+"ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣ"+"ਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼"+"ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗ"+"ୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖ"+"ౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ"+"്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູ"+"ົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗ"+"ྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴ"+"ႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵"+"ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘ"+"ᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴"+"ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩ"+"ᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹"+"᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⳱"+"⵿ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱"+"ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼ"+"ꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁"+"ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");function t(t){return"string"==typeof t&&t.charCodeAt(0)>=768&&e.test(t)}return{isExtendingChar:t}}),r("tinymce/caret/CaretPosition",["tinymce/util/Fun","tinymce/dom/NodeType","tinymce/dom/DOMUtils","tinymce/dom/RangeUtils","tinymce/caret/CaretCandidate","tinymce/geom/ClientRect","tinymce/text/ExtendingChar"],function(e,t,n,i,r,o,a){var s=t.isElement,l=r.isCaretCandidate,u=t.matchStyleValues("display","block table"),c=t.matchStyleValues("float","left right"),f=e.and(s,l,e.negate(c)),d=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),m=t.isText,p=t.isBr,h=n.nodeIndex,g=i.getNode;function v(e){return"createRange"in e?e.createRange():n.DOM.createRng()}function y(e){return e&&/[\r\n\t ]/.test(e)}function b(e){var t=e.startContainer,n=e.startOffset,i;if(y(e.toString())&&d(t.parentNode))if(i=t.data,y(i[n-1])||y(i[n+1]))return true;return false}function w(e){var t=[],n,i;function r(e){var t=e.ownerDocument,n=v(t),i=t.createTextNode(" "),r=e.parentNode,a;return r.insertBefore(i,e),n.setStart(i,0),n.setEnd(i,1),a=o.clone(n.getBoundingClientRect()),r.removeChild(i),a}function l(e){var t,n;if(n=e.getClientRects(),n.length>0)t=o.clone(n[0]);else t=o.clone(e.getBoundingClientRect());if(p(e)&&0===t.left)return r(e);return t}function c(e,t){return e=o.collapse(e,t),e.width=1,e.right=e.left+1,e}function d(e){if(0===e.height)return;if(t.length>0)if(o.isEqual(e,t[t.length-1]))return;t.push(e)}function h(e,n){var i=v(e.ownerDocument);if(n<e.data.length){if(a.isExtendingChar(e.data[n]))return t;if(a.isExtendingChar(e.data[n-1]))if(i.setStart(e,n),i.setEnd(e,n+1),!b(i))return d(c(l(i),false)),t}if(n>0)if(i.setStart(e,n-1),i.setEnd(e,n),!b(i))d(c(l(i),false));if(n<e.data.length)if(i.setStart(e,n),i.setEnd(e,n+1),!b(i))d(c(l(i),true))}if(m(e.container()))return h(e.container(),e.offset()),t;if(s(e.container()))if(e.isAtEnd()){if(i=g(e.container(),e.offset()),m(i))h(i,i.data.length);if(f(i)&&!p(i))d(c(l(i),false))}else{if(i=g(e.container(),e.offset()),m(i))h(i,0);if(f(i)&&e.isAtEnd())return d(c(l(i),false)),t;if(n=g(e.container(),e.offset()-1),f(n)&&!p(n))if(u(n)||u(i)||!f(i))d(c(l(n),false));if(f(i))d(c(l(i),true))}return t}function C(t,n,i){function r(){if(m(t))return 0===n;return 0===n}function o(){if(m(t))return n>=t.data.length;return n>=t.childNodes.length}function a(){var e;return e=v(t.ownerDocument),e.setStart(t,n),e.setEnd(t,n),e}function s(){if(!i)i=w(new C(t,n));return i}function l(){return s().length>0}function u(e){return e&&t===e.container()&&n===e.offset()}function c(e){return g(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:a,getClientRects:s,isVisible:l,isAtStart:r,isAtEnd:o,isEqual:u,getNode:c}}return C.fromRangeStart=function(e){return new C(e.startContainer,e.startOffset)},C.fromRangeEnd=function(e){return new C(e.endContainer,e.endOffset)},C.after=function(e){return new C(e.parentNode,h(e)+1)},C.before=function(e){return new C(e.parentNode,h(e))},C}),r("tinymce/caret/CaretBookmark",["tinymce/dom/NodeType","tinymce/dom/DOMUtils","tinymce/util/Fun","tinymce/util/Arr","tinymce/caret/CaretPosition"],function(e,t,n,i,r){var o=e.isText,a=e.isBogus,s=t.nodeIndex;function l(e){var t=e.parentNode;if(a(t))return l(t);return t}function u(e){if(!e)return[];return i.reduce(e.childNodes,function(e,t){if(a(t)&&"BR"!=t.nodeName)e=e.concat(u(t));else e.push(t);return e},[])}function c(e,t){while(e=e.previousSibling){if(!o(e))break;t+=e.data.length}return t}function f(e){return function(t){return e===t}}function d(t){var n,r,a;return n=u(l(t)),r=i.findIndex(n,f(t),t),n=n.slice(0,r+1),a=i.reduce(n,function(e,t,i){if(o(t)&&o(n[i-1]))e++;return e},0),n=i.filter(n,e.matchNodeNames(t.nodeName)),r=i.findIndex(n,f(t),t),r-a}function m(e){var t;if(o(e))t="text()";else t=e.nodeName.toLowerCase();return t+"["+d(e)+"]"}function p(e,t,n){var i=[];for(t=t.parentNode;t!=e;t=t.parentNode){if(n&&n(t))break;i.push(t)}return i}function h(t,r){var a,s,l=[],u,f,d;if(a=r.container(),s=r.offset(),o(a))u=c(a,s);else{if(f=a.childNodes,s>=f.length)u="after",s=f.length-1;else u="before";a=f[s]}return l.push(m(a)),d=p(t,a),d=i.filter(d,n.negate(e.isBogus)),l=l.concat(i.map(d,function(e){return m(e)})),l.reverse().join("/")+","+u}function g(t,n,r){var a=u(t);return a=i.filter(a,function(e,t){return!o(e)||!o(a[t-1])}),a=i.filter(a,e.matchNodeNames(n)),a[r]}function v(e,t){var n=e,i=0,a;while(o(n)){if(a=n.data.length,t>=i&&t<=i+a){e=n,t-=i;break}if(!o(n.nextSibling)){e=n,t=a;break}i+=a,n=n.nextSibling}if(t>e.data.length)t=e.data.length;return new r(e,t)}function y(e,t){var n,a,l;if(!t)return null;if(n=t.split(","),t=n[0].split("/"),l=n.length>1?n[1]:"before",a=i.reduce(t,function(e,t){if(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t),!t)return null;if("text()"===t[1])t[1]="#text";return g(e,t[1],parseInt(t[2],10))},e),!a)return null;if(!o(a)){if("after"===l)l=s(a)+1;else l=s(a);return new r(a.parentNode,l)}return v(a,parseInt(l,10))}return{create:h,resolve:y}}),r("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools","tinymce/caret/CaretContainer","tinymce/caret/CaretBookmark","tinymce/caret/CaretPosition","tinymce/dom/NodeType","tinymce/dom/RangeUtils"],function(e,t,n,i,r,o,a){var s=o.isContentEditableFalse;function l(l){var u=l.dom;this.getBookmark=function(e,c){var f,d,m,p,h,g,v="&#xFEFF;",y;function b(e,n){var i=0;return t.each(u.select(e),function(e){if("all"===e.getAttribute("data-mce-bogus"))return;if(e==n)return false;i++}),i}function w(e){function t(t){var n,i,r,o=t?"start":"end";if(n=e[o+"Container"],i=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName)if(r=n.childNodes,n=r[Math.min(t?i:i-1,r.length-1)],n)i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)}return t(true),t(),e}function C(e){var t=u.getRoot(),n={};function i(e,n){var i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"],o=[],a,s,l=0;if(3==i.nodeType){if(c)for(a=i.previousSibling;a&&3==a.nodeType;a=a.previousSibling)r+=a.nodeValue.length;o.push(r)}else{if(s=i.childNodes,r>=s.length&&s.length)l=1,r=Math.max(0,s.length-1);o.push(u.nodeIndex(s[r],c)+l)}for(;i&&i!=t;i=i.parentNode)o.push(u.nodeIndex(i,c));return o}if(n.start=i(e,true),!l.isCollapsed())n.end=i(e);return n}function x(e){function t(e,t){var i;if(o.isElement(e))if(e=a.getNode(e,t),s(e))return e;if(n.isCaretContainer(e)){if(o.isText(e)&&n.isCaretContainerBlock(e))e=e.parentNode;if(i=e.previousSibling,s(i))return i;if(i=e.nextSibling,s(i))return i}}return t(e.startContainer,e.startOffset)||t(e.endContainer,e.endOffset)}if(2==e){if(g=l.getNode(),h=g?g.nodeName:null,f=l.getRng(),s(g)||"IMG"==h)return{name:h,index:b(h,g)};if(l.tridentSel)return l.tridentSel.getBookmark(e);if(g=x(f),g)return h=g.tagName,{name:h,index:b(h,g)};return C(f)}if(3==e)return f=l.getRng(),{start:i.create(u.getRoot(),r.fromRangeStart(f)),end:i.create(u.getRoot(),r.fromRangeEnd(f))};if(e)return{rng:l.getRng()};if(f=l.getRng(),m=u.uniqueId(),p=l.isCollapsed(),y="overflow:hidden;line-height:0px",f.duplicate||f.item)if(!f.item){d=f.duplicate();try{if(f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+m+'_start" style="'+y+'">'+v+"</span>"),!p){if(d.collapse(false),f.moveToElementText(d.parentElement()),0===f.compareEndPoints("StartToEnd",d))d.move("character",-1);d.pasteHTML('<span data-mce-type="bookmark" id="'+m+'_end" style="'+y+'">'+v+"</span>")}}catch(e){return null}}else return g=f.item(0),h=g.nodeName,{name:h,index:b(h,g)};else{if(g=l.getNode(),h=g.nodeName,"IMG"==h)return{name:h,index:b(h,g)};if(d=w(f.cloneRange()),!p)d.collapse(false),d.insertNode(u.create("span",{"data-mce-type":"bookmark",id:m+"_end",style:y},v));(f=w(f)).collapse(true),f.insertNode(u.create("span",{"data-mce-type":"bookmark",id:m+"_start",style:y},v))}return l.moveToBookmark({id:m,keep:1}),{id:m}},this.moveToBookmark=function(n){var r,o,a,s,c,f;function d(e){var t=n[e?"start":"end"],i,a,s,l;if(t){for(s=t[0],a=o,i=t.length-1;i>=1;i--){if(l=a.childNodes,t[i]>l.length-1)if(1==i&&0==t[i])break;else return;a=l[t[i]]}if(3===a.nodeType)s=Math.min(t[0],a.nodeValue.length);if(1===a.nodeType)s=Math.min(t[0],a.childNodes.length);if(e)r.setStart(a,s);else r.setEnd(a,s)}return true}function m(i){var r=u.get(n.id+"_"+i),o,l,d,m,p=n.keep;if(r){if(o=r.parentNode,"start"==i){if(!p)l=u.nodeIndex(r);else o=r.firstChild,l=1;a=s=o,c=f=l}else{if(!p)l=u.nodeIndex(r);else o=r.firstChild,l=1;s=o,f=l}if(!p){m=r.previousSibling,d=r.nextSibling,t.each(t.grep(r.childNodes),function(e){if(3==e.nodeType)e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")});while(r=u.get(n.id+"_"+i))u.remove(r,1);if(m&&d&&m.nodeType==d.nodeType&&3==m.nodeType&&!e.opera)if(l=m.nodeValue.length,m.appendData(d.nodeValue),u.remove(d),"start"==i)a=s=m,c=f=l;else s=m,f=l}}}function p(t){if(u.isBlock(t)&&!t.innerHTML&&!e.ie)t.innerHTML='<br data-mce-bogus="1" />';return t}function h(){var e,t;return e=u.createRng(),t=i.resolve(u.getRoot(),n.start),e.setStart(t.container(),t.offset()),t=i.resolve(u.getRoot(),n.end),e.setEnd(t.container(),t.offset()),e}if(n)if(t.isArray(n.start)){if(r=u.createRng(),o=u.getRoot(),l.tridentSel)return l.tridentSel.moveToBookmark(n);if(d(true)&&d())l.setRng(r)}else if("string"==typeof n.start)l.setRng(h(n));else if(n.id){if(m("start"),m("end"),a)(r=u.createRng()).setStart(p(a),c),r.setEnd(p(s),f),l.setRng(r)}else if(n.name)l.select(u.select(n.name)[n.index]);else if(n.rng)l.setRng(n.rng)}}return l.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},l}),r("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/NodeType","tinymce/Env","tinymce/util/Tools","tinymce/caret/CaretPosition"],function(e,n,i,r,o,a,s,l,u){var c=l.each,f=l.trim,d=s.ie;function m(e,t,r,a){var s=this;if(s.dom=e,s.win=t,s.serializer=r,s.editor=a,s.bookmarkManager=new o(s),s.controlSelection=new i(s,a),!s.win.getSelection)s.tridentSel=new n(s)}return m.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();if(!e)n._moveEndPoint(i,n.editor.getBody(),true),n.setRng(i);else i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(false)},getContent:function(e){var n=this,i=n.getRng(),r=n.dom.create("body"),o=n.getSel(),a,s,l;if(e=e||{},a=s="",e.get=true,e.format=e.format||"html",e.selection=true,n.editor.fire("BeforeGetContent",e),"text"==e.format)return n.isCollapsed()?"":i.text||(o.toString?o.toString():"");if(i.cloneContents){if(l=i.cloneContents(),l)r.appendChild(l)}else if(i.item!==t||i.htmlText!==t)r.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),r.removeChild(r.firstChild);else r.innerHTML=i.toString();if(/^\s/.test(r.innerHTML))a=" ";if(/\s+$/.test(r.innerHTML))s=" ";return e.getInner=true,e.content=n.isCollapsed()?"":a+n.serializer.serialize(r,e)+s,n.editor.fire("GetContent",e),e.content},setContent:function(e,t){var n=this,i=n.getRng(),r,o=n.win.document,a,s;if(t=t||{format:"html"},t.set=true,t.selection=true,t.content=e,!t.no_events)n.editor.fire("BeforeSetContent",t);if(e=t.content,i.insertNode){if(e+='<span id="__caret">_</span>',i.startContainer==o&&i.endContainer==o)o.body.innerHTML=e;else if(i.deleteContents(),0===o.body.childNodes.length)o.body.innerHTML=e;else if(i.createContextualFragment)i.insertNode(i.createContextualFragment(e));else a=o.createDocumentFragment(),s=o.createElement("div"),a.appendChild(s),s.outerHTML=e,i.insertNode(a);r=n.dom.get("__caret"),(i=o.createRange()).setStartBefore(r),i.setEndBefore(r),n.setRng(i),n.dom.remove("__caret");try{n.setRng(i)}catch(e){}}else{if(i.item)o.execCommand("Delete",false,null),i=n.getRng();if(/^\s+/.test(e))i.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp");else i.pasteHTML(e)}if(!t.no_events)n.editor.fire("SetContent",t)},getStart:function(e){var t=this,n=t.getRng(),i,r,o,a;if(n.duplicate||n.item){if(n.item)return n.item(0);if(o=n.duplicate(),o.collapse(1),i=o.parentElement(),i.ownerDocument!==t.dom.doc)i=t.dom.getRoot();r=a=n.parentElement();while(a=a.parentNode)if(a==i){i=r;break}return i}if(i=n.startContainer,1==i.nodeType&&i.hasChildNodes())if(!e||!n.collapsed)i=i.childNodes[Math.min(i.childNodes.length-1,n.startOffset)];if(i&&3==i.nodeType)return i.parentNode;return i},getEnd:function(e){var t=this,n=t.getRng(),i,r;if(n.duplicate||n.item){if(n.item)return n.item(0);if(n=n.duplicate(),n.collapse(0),i=n.parentElement(),i.ownerDocument!==t.dom.doc)i=t.dom.getRoot();if(i&&"BODY"==i.nodeName)return i.lastChild||i;return i}if(i=n.endContainer,r=n.endOffset,1==i.nodeType&&i.hasChildNodes())if(!e||!n.collapsed)i=i.childNodes[r>0?r-1:r];if(i&&3==i.nodeType)return i.parentNode;return i},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,i=n.dom,r=i.createRng(),o;if(n.lastFocusBookmark=null,e){if(!t&&n.controlSelection.controlSelect(e))return;if(o=i.nodeIndex(e),r.setStart(e.parentNode,o),r.setEnd(e.parentNode,o+1),t)n._moveEndPoint(r,e,true),n._moveEndPoint(r,e);n.setRng(r)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();if(!t||t.item)return false;if(t.compareEndPoints)return 0===t.compareEndPoints("StartToEnd",t);return!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),i;if(n.item)i=n.item(0),(n=t.win.document.body.createTextRange()).moveToElementText(i);n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t=this,n,i,r,o,a,s;function l(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}if(!t.win)return null;if(o=t.win.document,"undefined"===typeof o||null===o)return null;if(!e&&t.lastFocusBookmark){var u=t.lastFocusBookmark;if(u.startContainer)(i=o.createRange()).setStart(u.startContainer,u.startOffset),i.setEnd(u.endContainer,u.endOffset);else i=u;return i}if(e&&t.tridentSel)return t.tridentSel.getRangeAt(0);try{if(n=t.getSel())if(n.rangeCount>0)i=n.getRangeAt(0);else i=n.createRange?n.createRange():o.createRange()}catch(e){}if(s=t.editor.fire("GetSelectionRange",{range:i}),s.range!==i)return s.range;if(d&&i&&i.setStart&&o.selection){try{a=o.selection.createRange()}catch(e){}if(a&&a.item)r=a.item(0),(i=o.createRange()).setStartBefore(r),i.setEndAfter(r)}if(!i)i=o.createRange?o.createRange():o.body.createTextRange();if(i.setStart&&9===i.startContainer.nodeType&&i.collapsed)r=t.dom.getRoot(),i.setStart(r,0),i.setEnd(r,0);if(t.selectedRange&&t.explicitRange)if(0===l(i.START_TO_START,i,t.selectedRange)&&0===l(i.END_TO_END,i,t.selectedRange))i=t.explicitRange;else t.selectedRange=null,t.explicitRange=null;return i},setRng:function(e,t){var n=this,i,r,o;if(!e)return;if(e.select){n.explicitRange=null;try{e.select()}catch(e){}return}if(!n.tridentSel){if(i=n.getSel(),o=n.editor.fire("SetSelectionRange",{range:e}),e=o.range,i){n.explicitRange=e;try{i.removeAllRanges(),i.addRange(e)}catch(e){}if(false===t&&i.extend)i.collapse(e.endContainer,e.endOffset),i.extend(e.startContainer,e.startOffset);n.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}if(!e.collapsed&&e.startContainer==e.endContainer&&i.setBaseAndExtent&&!s.ie)if(e.endOffset-e.startOffset<2)if(e.startContainer.hasChildNodes())if(r=e.startContainer.childNodes[e.startOffset],r&&"IMG"==r.tagName)if(i.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),i.anchorNode!==e.startContainer||i.focusNode!==e.endContainer)i.setBaseAndExtent(r,0,r,1);n.editor.fire("AfterSetSelectionRange",{range:e})}else if(e.cloneRange)try{n.tridentSel.addRange(e)}catch(e){}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var e=this,t=e.getRng(),n,i,r,o,a,s=e.dom.getRoot();function l(e,t){var n=e;while(e&&3===e.nodeType&&0===e.length)e=t?e.nextSibling:e.previousSibling;return e||n}if(!t)return s;if(i=t.startContainer,r=t.endContainer,o=t.startOffset,a=t.endOffset,t.setStart){if(n=t.commonAncestorContainer,!t.collapsed){if(i==r)if(a-o<2)if(i.hasChildNodes())n=i.childNodes[o];if(3===i.nodeType&&3===r.nodeType){if(i.length===o)i=l(i.nextSibling,true);else i=i.parentNode;if(0===a)r=l(r.previousSibling,false);else r=r.parentNode;if(i&&i===r)return i}}if(n&&3==n.nodeType)return n.parentNode;return n}if(n=t.item?t.item(0):t.parentElement(),n.ownerDocument!==e.win.document)n=s;return n},getSelectedBlocks:function(t,n){var i=this,r=i.dom,o,a,s=[];if(a=r.getRoot(),t=r.getParent(t||i.getStart(),r.isBlock),n=r.getParent(n||i.getEnd(),r.isBlock),t&&t!=a)s.push(t);if(t&&n&&t!=n){o=t;var l=new e(t,a);while((o=l.next())&&o!=n)if(r.isBlock(o))s.push(o)}if(n&&t!=n&&n!=a)s.push(n);return s},isForward:function(){var e=this.dom,t=this.getSel(),n,i;if(!t||!t.anchorNode||!t.focusNode)return true;return n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(true),i=e.createRng(),i.setStart(t.focusNode,t.focusOffset),i.collapse(true),n.compareBoundaryPoints(n.START_TO_START,i)<=0},normalize:function(){var e=this,t=e.getRng();if(s.range&&new r(e.dom).normalize(t))e.setRng(t,e.isForward());return t},selectorChanged:function(e,t){var n=this,i;if(!n.selectorChangedData)n.selectorChangedData={},i={},n.editor.on("NodeChange",function(e){var t=e.element,r=n.dom,o=r.getParents(t,null,r.getRoot()),a={};c(n.selectorChangedData,function(e,t){c(o,function(n){if(r.is(n,t)){if(!i[t])c(e,function(e){e(true,{node:n,selector:t,parents:o})}),i[t]=e;return a[t]=e,false}})}),c(i,function(e,n){if(!a[n])delete i[n],c(e,function(e){e(false,{node:t,selector:n,parents:o})})})});if(!n.selectorChangedData[e])n.selectorChangedData[e]=[];return n.selectorChangedData[e].push(t),n},getScrollContainer:function(){var e,t=this.dom.getRoot();while(t&&"BODY"!=t.nodeName){var n=getComputedStyle(t);if(n&&"fixed"==n.position)return false;if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){var n,i,r=this,o=r.dom,s=o.getRoot(),l,u,c=0;function f(e){var t=0,n=0,i=e;while(i&&i.nodeType)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}}if(!a.isElement(e))return;if(false===t)c=e.offsetHeight;if("BODY"!=s.nodeName){var d=r.getScrollContainer();if(d){if(n=f(e).y-f(d).y+c,u=d.clientHeight,l=d.scrollTop,n<l||n+25>l+u)d.scrollTop=n<l?n:n-u+25;return}}if(i=o.getViewPort(r.editor.getWin()),n=o.getPos(e).y+c,l=i.y,u=i.h,n<i.y||n+25>l+u)r.editor.getWin().scrollTo(0,n<l?n:n-u+25)},placeCaretAt:function(e,t){this.setRng(r.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(t,n,i){var r=n,o=new e(n,r),a=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==f(n.nodeValue).length){if(i)t.setStart(n,0);else t.setEnd(n,n.nodeValue.length);return}if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){if(i)t.setStartBefore(n);else if("BR"==n.nodeName)t.setEndBefore(n);else t.setEndAfter(n);return}if(s.ie&&s.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n)){if(i)t.setStart(n,0);else t.setEnd(n,0);return}}while(n=i?o.next():o.prev());if("BODY"==r.nodeName)if(i)t.setStart(r,0);else t.setEnd(r,r.childNodes.length)},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?u.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},m}),r("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(e,t){var n=t.each;function i(t){this.compare=function(i,r){if(i.nodeName!=r.nodeName)return false;function o(e){var i={};return n(t.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();if(0!==r.indexOf("_")&&"style"!==r&&0!==r.indexOf("data-"))i[r]=t.getAttrib(e,r)}),i}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],"undefined"==typeof n)return false;if(e[i]!=n)return false;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return false;return true}if(!a(o(i),o(r)))return false;if(!a(t.parseStyle(t.getAttrib(i,"style")),t.parseStyle(t.getAttrib(r,"style"))))return false;return!e.isBookmarkNode(i)&&!e.isBookmarkNode(r)}}return i}),r("tinymce/fmt/Preview",["tinymce/dom/DOMUtils","tinymce/util/Tools","tinymce/html/Schema"],function(e,t,n){var i=t.each,r=e.DOM;function o(e,i){var o,a,s,l=i&&i.schema||new n({});function u(e,t){if(t.classes.length)r.addClass(e,t.classes.join(" "));r.setAttribs(e,t.attrs)}function c(e){var t;return a="string"===typeof e?{name:e,classes:[],attrs:{}}:e,t=r.create(a.name),u(t,a),t}function f(e,n){var i="string"!==typeof e?e.nodeName.toLowerCase():e,r=l.getElementRule(i).parentsRequired;if(r&&r.length)return n&&-1!==t.inArray(r,n)?n:r[0];else return false}function d(e,n,i){var o,a,s,l=n.length&&n[0],u=l&&l.name;if(s=f(e,u),s)if(u==s)a=n[0],n=n.slice(1);else a=s;else if(l)a=n[0],n=n.slice(1);else if(!i)return e;if(a)(o=c(a)).appendChild(e);if(i){if(!o)(o=r.create("div")).appendChild(e);t.each(i,function(t){var n=c(t);o.insertBefore(n,e)})}return d(o,n,a&&a.siblings)}if(e&&e.length)return a=e[0],o=c(a),s=r.create("div"),s.appendChild(d(o,e.slice(1),a.siblings)),s;else return""}function a(e,t){return o(l(e),t)}function s(e){var n,i={classes:[],attrs:{}};if(e=i.selector=t.trim(e),"*"!==e)n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,r,o,a){switch(n){case"#":i.attrs.id=r;break;case".":i.classes.push(r);break;case":":if(-1!==t.inArray("checked disabled enabled read-only required".split(" "),r))i.attrs[r]=r}if("["==o){var s=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);if(s)i.attrs[s[1]]=s[2]}return""});return i.name=n||"div",i}function l(e){if(!e||"string"!==typeof e)return[];return e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),s),i=n.pop();if(n.length)i.siblings=n;return i}).reverse()}function u(e,t){var n,a,s,u,c="",f,d;if(d=e.settings.preview_styles,false===d)return"";if("string"!==typeof d)d="font-family font-size font-weight font-style text-decoration "+"text-transform color background-color border border-radius outline text-shadow";function m(e){return e.replace(/%(\w+)/g,"")}if("string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}if("preview"in t)if(d=t.preview,false===d)return"";if(n=t.block||t.inline||"span",u=l(t.selector),u.length){if(!u[0].name)u[0].name=n;n=t.selector,a=o(u,e)}else a=o([n],e);return s=r.select(n,a)[0]||a.firstChild,i(t.styles,function(e,t){if(e=m(e),e)r.setStyle(s,t,e)}),i(t.attributes,function(e,t){if(e=m(e),e)r.setAttrib(s,t,e)}),i(t.classes,function(e){if(e=m(e),!r.hasClass(s,e))r.addClass(s,e)}),e.fire("PreviewFormats"),r.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a),f=r.getStyle(e.getBody(),"fontSize",true),f=/px$/.test(f)?parseInt(f,10):0,i(d.split(" "),function(t){var n=r.getStyle(s,t,true);if("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n))if(n=r.getStyle(e.getBody(),t,true),"#ffffff"==r.toHex(n).toLowerCase())return;if("color"==t)if("#000000"==r.toHex(n).toLowerCase())return;if("font-size"==t)if(/em|%$/.test(n)){if(0===f)return;n=(n=parseFloat(n,10)/(/%$/.test(n)?100:1))*f+"px"}if("border"==t&&n)c+="padding:0 2px;";c+=t+":"+n+";"}),e.fire("AfterPreviewFormats"),r.remove(a),c}return{getCssText:u,parseSelector:l,selectorToHtml:a}}),r("tinymce/fmt/Hooks",["tinymce/util/Arr","tinymce/dom/NodeType","tinymce/dom/DomQuery"],function(e,t,n){var i={},r=e.filter,o=e.each;function a(e,t){var n=i[e];if(!n)i[e]=n=[];i[e].push(t)}function s(e,t){o(i[e],function(e){e(t)})}return a("pre",function(i){var a=i.selection.getRng(),s,l;function u(t){return s(t.previousSibling)&&-1!=e.indexOf(l,t.previousSibling)}function c(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)}if(s=t.matchNodeNames("pre"),!a.collapsed)l=i.selection.getSelectedBlocks(),o(r(r(l,s),u),function(e){c(e.previousSibling,e)})}),{postProcess:s}}),r("tinymce/Formatter",["tinymce/Env","tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Fun","tinymce/util/Tools","tinymce/fmt/Preview","tinymce/fmt/Hooks"],function(e,t,n,i,r,o,a,s,l){return function(u){var c={},f=u.dom,d=u.selection,m=new n(f),p=u.schema.isValidChild,h=f.isBlock,g=u.settings.forced_root_block,v=f.nodeIndex,y="\ufeff",b=/^(src|href|style)$/,w=false,C=true,x,k,N=f.getContentEditable,E,S,T=i.isBookmarkNode,_=a.each,R=a.grep,B=a.walk;function A(e){if(e.nodeType)e=e.nodeName;return!!u.schema.getTextBlockElements()[e.toLowerCase()]}function D(e){return/^(TH|TD)$/.test(e.nodeName)}function P(e){return e&&/^(IMG)$/.test(e.nodeName)}function M(e,t){return f.getParents(e,t,f.getRoot())}function L(e){return 1===e.nodeType&&"_mce_caret"===e.id}function O(){F({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:false,classes:"align-left",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:false,preview:false,defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:false,preview:false,defaultBlock:"div"},{selector:"figure.image",collapsed:false,classes:"align-center",ceFalseOverride:true,preview:"font-family font-size"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:false,classes:"align-right",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:false,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"},remove_similar:true},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(){return true},onformat:function(e,t,n){_(n,function(t,n){f.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]}),_("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){F(e,{block:e,remove:"all"})}),F(u.settings.formats)}function I(){u.addShortcut("meta+b","bold_desc","Bold"),u.addShortcut("meta+i","italic_desc","Italic"),u.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)u.addShortcut("access+"+e,"",["FormatBlock",false,"h"+e]);u.addShortcut("access+7","",["FormatBlock",false,"p"]),u.addShortcut("access+8","",["FormatBlock",false,"div"]),u.addShortcut("access+9","",["FormatBlock",false,"address"])}function H(e){return e?c[e]:c}function F(e,t){if(e)if("string"!==typeof e)_(e,function(e,t){F(t,e)});else t=t.length?t:[t],_(t,function(e){if(e.deep===k)e.deep=!e.selector;if(e.split===k)e.split=!e.selector||e.inline;if(e.remove===k&&e.selector&&!e.inline)e.remove="none";if(e.selector&&e.inline)e.mixed=true,e.block_expand=true;if("string"===typeof e.classes)e.classes=e.classes.split(/\s+/)}),c[e]=t}function z(e){if(e&&c[e])delete c[e];return c}function U(e,t){var n=H(t);if(n)for(var i=0;i<n.length;i++)if(false===n[i].inherit&&f.is(e,n[i].selector))return true;return false}function W(e){var t;return u.dom.getParent(e,function(e){return t=u.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function V(e){var t;if(1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType)if(t=W(e.parentNode),u.dom.getStyle(e,"color")&&t)u.dom.setStyle(e,"text-decoration",t);else if(u.dom.getStyle(e,"text-decoration")===t)u.dom.setStyle(e,"text-decoration",null)}function $(e,n,i){var r=H(e),o=r[0],a,s,c=!i&&d.isCollapsed();function v(e,t){if(t=t||o,e){if(t.onformat)t.onformat(e,t,n,i);if(_(t.styles,function(t,i){f.setStyle(e,i,se(t,n))}),t.styles){var r=f.getAttrib(e,"style");if(r)e.setAttribute("data-mce-style",r)}_(t.attributes,function(t,i){f.setAttrib(e,i,se(t,n))}),_(t.classes,function(t){if(t=se(t,n),!f.hasClass(e,t))f.addClass(e,t)})}}function y(e,t){var n=false;if(!o.selector)return false;return _(e,function(e){if("collapsed"in e&&e.collapsed!==c)return;if(f.is(t,e.selector)&&!L(t))return v(t,e),n=true,false}),n}function b(){function e(e,n){var r=new t(n);for(i=r.prev2();i;i=r.prev2()){if(3==i.nodeType&&i.data.length>0)return i;if(i.childNodes.length>1||i==e||"BR"==i.tagName)return i}}var n=u.selection.getRng(),r=n.startContainer,o=n.endContainer;if(r!=o&&0===n.endOffset){var a=e(r,o),s=3==a.nodeType?a.data.length:a.childNodes.length;n.setEnd(a,s)}return n}function x(t,i,a){var s=[],l,u,c=true;if(l=o.inline||o.block,u=f.create(l),v(u),m.walk(t,function(t){var i;function d(t){var m,g,b,C;if(C=c,m=t.nodeName.toLowerCase(),g=t.parentNode.nodeName.toLowerCase(),1===t.nodeType&&N(t))C=c,c="true"===N(t),b=true;if(ee(m,"br")){if(i=0,o.block)f.remove(t);return}if(o.wrapper&&K(t,e,n))return void(i=0);if(c&&!b&&o.block&&!o.wrapper&&A(m)&&p(g,l))return t=f.rename(t,l),v(t),s.push(t),void(i=0);if(o.selector){var x=y(r,t);if(!o.inline||x)return void(i=0)}if(c&&!b&&p(l,m)&&p(g,l)&&!(!a&&3===t.nodeType&&1===t.nodeValue.length&&65279===t.nodeValue.charCodeAt(0))&&!L(t)&&(!o.inline||!h(t))){if(!i)i=f.clone(u,w),t.parentNode.insertBefore(i,t),s.push(i);i.appendChild(t)}else{if(i=0,_(R(t.childNodes),d),b)c=C;i=0}}_(t,d)}),true===o.links)_(s,function(e){function t(e){if("A"===e.nodeName)v(e,o);_(R(e.childNodes),t)}t(e)});_(s,function(t){var i;function a(e){var t=0;return _(e.childNodes,function(e){if(!le(e)&&!T(e))t++}),t}function l(e){var t=false;return _(e.childNodes,function(e){if(ne(e))return t=e,false}),t}function u(e,t){do{if(1!==a(e))break;if(e=l(e),!e)break;else if(t(e))return e}while(e);return null}function c(e){var t,n;if(t=l(e),t&&!T(t)&&Z(t,o))v(n=f.clone(t,w)),f.replace(n,e,C),f.remove(t,1);return n||e}if(i=a(t),(s.length>1||!h(t))&&0===i)return void f.remove(t,1);if(o.inline||o.wrapper){if(!o.exact&&1===i)t=c(t);if(_(r,function(e){_(f.select(e.inline,t),function(t){if(T(t))return;de(e,n,t,e.exact?t:null)})}),K(t.parentNode,e,n))if(de(o,n,t))t=0;if(o.merge_with_parents)f.getParent(t.parentNode,function(i){if(K(i,e,n)){if(de(o,n,t))t=0;return C}});if(!h(t)&&!oe(t,"fontSize")){var d=u(t,ie("fontSize"));if(d)$("fontsize",{value:oe(d,"fontSize")},t)}if(t&&false!==o.merge_siblings)t=he(pe(t),t),t=he(t,pe(t,C))}})}if("false"===N(d.getNode())){i=d.getNode();for(var k=0,E=r.length;k<E;k++)if(r[k].ceFalseOverride&&f.is(i,r[k].selector))return void v(i,r[k]);return}if(o){if(i)if(i.nodeType){if(!y(r,i))(s=f.createRng()).setStartBefore(i),s.setEndAfter(i),x(ce(s,r),null,true)}else x(i,null,true);else if(!c||!o.inline||f.select("td[data-mce-selected],th[data-mce-selected]").length){var S=u.selection.getNode();if(!g&&r[0].defaultBlock&&!f.getParent(S,f.isBlock))$(r[0].defaultBlock);if(u.selection.setRng(b()),a=d.getBookmark(),x(ce(d.getRng(C),r),a),o.styles){if(o.styles.color||o.styles.textDecoration)B(S,V,"childNodes"),V(S);if(o.styles.backgroundColor)te(S,ie("fontSize"),re("backgroundColor",se(o.styles.backgroundColor,n)))}d.moveToBookmark(a),ye(d.getRng(C)),u.nodeChanged()}else ve("apply",e,n);l.postProcess(e,u)}}function j(e,t,n,i){var r=H(e),o=r[0],a,s,l=true;function c(e){var n,i,a,s,u;if(1===e.nodeType&&N(e))s=l,l="true"===N(e),u=true;if(n=R(e.childNodes),l&&!u)for(i=0,a=r.length;i<a;i++)if(de(r[i],t,e,e))break;if(o.deep)if(n.length){for(i=0,a=n.length;i<a;i++)c(n[i]);if(u)l=s}}function p(n){var r;return _(M(n.parentNode).reverse(),function(n){var o;if(!r&&"_start"!=n.id&&"_end"!=n.id)if(o=K(n,e,t,i),o&&false!==o.split)r=n}),r}function g(e,n,i,a){var s,l,u,c,d,m;if(e){for(m=e.parentNode,s=n.parentNode;s&&s!=m;s=s.parentNode){for(l=f.clone(s,w),d=0;d<r.length;d++)if(de(r[d],t,l,l)){l=0;break}if(l){if(u)l.appendChild(u);if(!c)c=l;u=l}}if(a&&(!o.mixed||!h(e)))n=f.split(e,n);if(u)i.parentNode.insertBefore(u,i),c.appendChild(i)}return n}function y(e){return g(p(e),e,e,true)}function b(e){var t=f.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];if(T(n))n=n[e?"firstChild":"lastChild"];if(3==n.nodeType&&0===n.data.length)n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling;return f.remove(t,true),n}function x(e){var t,n,i=e.commonAncestorContainer;if(e=ce(e,r,C),o.split){if(t=ge(e,C),n=ge(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild)if("TR"==t.nodeName)t=t.firstChild.firstChild||t;else t=t.firstChild||t;if(i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&D(n)&&n.firstChild)n=n.firstChild||n;if(f.isChildOf(t,n)&&!h(n)&&!D(t)&&!D(n))return t=ue(t,"span",{id:"_start","data-mce-type":"bookmark"}),y(t),void(t=b(C));t=ue(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=ue(n,"span",{id:"_end","data-mce-type":"bookmark"}),y(t),y(n),t=b(C),n=b()}else t=n=y(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=v(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=v(n)+1}m.walk(e,function(e){_(e,function(e){if(c(e),1===e.nodeType&&"underline"===u.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===W(e.parentNode))de({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}if(n){if(n.nodeType)(s=f.createRng()).setStartBefore(n),s.setEndAfter(n),x(s);else x(n);return}if("false"===N(d.getNode())){n=d.getNode();for(var k=0,E=r.length;k<E;k++)if(r[k].ceFalseOverride)if(de(r[k],t,n,n))break;return}if(!d.isCollapsed()||!o.inline||f.select("td[data-mce-selected],th[data-mce-selected]").length){if(a=d.getBookmark(),x(d.getRng(C)),d.moveToBookmark(a),o.inline&&Y(e,t,d.getStart()))ye(d.getRng(true));u.nodeChanged()}else ve("remove",e,t,i)}function q(e,t,n){var i=H(e);if(Y(e,t,n)&&(!("toggle"in i[0])||i[0].toggle))j(e,t,n);else $(e,t,n)}function K(e,t,n,i){var r=H(t),o,a,s;function l(e,t,r){var o,a,s=t[r],l;if(t.onmatch)return t.onmatch(e,t,r);if(s)if(s.length===k){for(o in s)if(s.hasOwnProperty(o)){if("attributes"===r)a=f.getAttrib(e,o);else a=oe(e,o);if(i&&!a&&!t.exact)return;if((!i||t.exact)&&!ee(a,ae(se(s[o],n),o)))return}}else for(l=0;l<s.length;l++)if("attributes"===r?f.getAttrib(e,s[l]):oe(e,s[l]))return t;return t}if(r&&e)for(a=0;a<r.length;a++)if(o=r[a],Z(e,o)&&l(e,o,"attributes")&&l(e,o,"styles")){if(s=o.classes)for(a=0;a<s.length;a++)if(!f.hasClass(e,s[a]))return;return o}}function Y(e,t,n){var i;function r(n){var i=f.getRoot();if(n===i)return false;return n=f.getParent(n,function(n){if(U(n,e))return true;return n.parentNode===i||!!K(n,e,t,true)}),K(n,e,t)}if(n)return r(n);if(n=d.getNode(),r(n))return C;if(i=d.getStart(),i!=n)if(r(i))return C;return w}function X(e,t){var n,i=[],r={};return n=d.getStart(),f.getParent(n,function(n){var o,a;for(o=0;o<e.length;o++)if(a=e[o],!r[a]&&K(n,a,t))r[a]=true,i.push(a)},f.getRoot()),i}function G(e){var t=H(e),n,i,r,o,a;if(t)for(i=M(n=d.getStart()),o=t.length-1;o>=0;o--){if(a=t[o].selector,!a||t[o].defaultBlock)return C;for(r=i.length-1;r>=0;r--)if(f.is(i[r],a))return C}return w}function J(t,n,i){var r;if(!x)x={},r={},u.on("NodeChange",function(t){var n=M(t.element),i={};if(n=a.grep(n,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),n.length&&e.gecko)for(var o=n[0];o.hasChildNodes()&&1===o.childNodes.length&&o.firstChild.hasChildNodes();o=n[0])n.unshift(o.firstChild);_(x,function(e,t){_(n,function(o){if(K(o,t,{},e.similar)){if(!r[t])_(e,function(e){e(true,{node:o,format:t,parents:n})}),r[t]=e;return i[t]=e,false}if(U(o,t))return false})}),_(r,function(e,o){if(!i[o])delete r[o],_(e,function(e){e(false,{node:t.element,format:o,parents:n})})})});return _(t.split(","),function(e){if(!x[e])x[e]=[],x[e].similar=i;x[e].push(n)}),this}function Q(e){return s.getCssText(u,e)}(0,a.extend)(this,{get:H,register:F,unregister:z,apply:$,remove:j,toggle:q,match:Y,matchAll:X,matchNode:K,canApply:G,formatChanged:J,getCssText:Q}),O(),I(),u.on("BeforeGetContent",function(e){if(S&&"raw"!=e.format)S()}),u.on("mouseup keydown",function(e){if(E)E(e)});function Z(e,t){if(ee(e,t.inline))return C;if(ee(e,t.block))return C;if(t.selector)return 1==e.nodeType&&f.is(e,t.selector)}function ee(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function te(e,t,n){_(e.childNodes,function(e){if(ne(e)){if(t(e))n(e);if(e.hasChildNodes())te(e,t,n)}})}function ne(e){return 1==e.nodeType&&!T(e)&&!le(e)&&!L(e)}function ie(e){return o.curry(function(e,t){return!!(t&&oe(t,e))},e)}function re(e,t){return o.curry(function(e,t,n){f.setStyle(n,e,t)},e,t)}function oe(e,t){return ae(f.getStyle(e,t),t)}function ae(e,t){if("color"==t||"backgroundColor"==t)e=f.toHex(e);if("fontWeight"==t&&700==e)e="bold";if("fontFamily"==t)e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",");return""+e}function se(e,t){if("string"!=typeof e)e=e(t);else if(t)e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e});return e}function le(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function ue(e,t,n){var i=f.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function ce(e,n,i){var r,o,a,s=e.startContainer,l=e.startOffset,c=e.endContainer,d=e.endOffset;function m(e){var t,i,r,o,a;t=i=e?s:c,o=e?"previousSibling":"nextSibling",a=f.getRoot();function u(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}if(3==t.nodeType&&!le(t))if(e?l>0:d<t.nodeValue.length)return t;while(true){if(!n[0].block_expand&&h(i))return i;for(r=i[o];r;r=r[o])if(!T(r)&&!le(r)&&!u(r))return i;if(i==a||i.parentNode==a){t=i;break}i=i.parentNode}return t}function p(e,t){if(t===k)t=3===e.nodeType?e.length:e.childNodes.length;while(e&&e.hasChildNodes())if(e=e.childNodes[t],e)t=3===e.nodeType?e.length:e.childNodes.length;return{node:e,offset:t}}if(1==s.nodeType&&s.hasChildNodes())if(r=s.childNodes.length-1,s=s.childNodes[l>r?r:l],3==s.nodeType)l=0;if(1==c.nodeType&&c.hasChildNodes())if(r=c.childNodes.length-1,c=c.childNodes[d>r?r:d-1],3==c.nodeType)d=c.nodeValue.length;function g(e){var t=e;while(t){if(1===t.nodeType&&N(t))return"false"===N(t)?t:e;t=t.parentNode}return e}function y(e,n,r){var o,a,s,l;function c(e,t){var n,o,a=e.nodeValue;if("undefined"==typeof t)t=r?a.length:0;if(r){if(n=a.lastIndexOf(" ",t),o=a.lastIndexOf(" ",t),n=n>o?n:o,-1!==n&&!i)n++}else n=a.indexOf(" ",t),o=a.indexOf(" ",t),n=-1!==n&&(-1===o||n<o)?n:o;return n}if(3===e.nodeType){if(s=c(e,n),-1!==s)return{container:e,offset:s};l=e}o=new t(e,f.getParent(e,h)||u.getBody());while(a=o[r?"prev":"next"]())if(3===a.nodeType){if(l=a,s=c(a),-1!==s)return{container:a,offset:s}}else if(h(a))break;if(l){if(r)n=0;else n=l.length;return{container:l,offset:n}}}function b(t,i){var r,o,a,s;if(3==t.nodeType&&0===t.nodeValue.length&&t[i])t=t[i];for(r=M(t),o=0;o<r.length;o++)for(a=0;a<n.length;a++){if(s=n[a],"collapsed"in s&&s.collapsed!==e.collapsed)continue;if(f.is(r[o],s.selector))return r[o]}return t}function C(e,t){var i,r=f.getRoot();if(!n[0].wrapper)i=f.getParent(e,n[0].block,r);if(!i)i=f.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=r&&A(e)});if(i&&n[0].wrapper)i=M(i,"ul,ol").reverse()[0]||i;if(!i){i=e;while(i[t]&&!h(i[t]))if(i=i[t],ee(i,"br"))break}return i||e}if(s=g(s),c=g(c),T(s.parentNode)||T(s))if(s=T(s)?s:s.parentNode,s=s.nextSibling||s,3==s.nodeType)l=0;if(T(c.parentNode)||T(c))if(c=T(c)?c:c.parentNode,c=c.previousSibling||c,3==c.nodeType)d=c.length;if(n[0].inline){if(e.collapsed){if(a=y(s,l,true),a)s=a.container,l=a.offset;if(a=y(c,d),a)c=a.container,d=a.offset}if(o=p(c,d),o.node){while(o.node&&0===o.offset&&o.node.previousSibling)o=p(o.node.previousSibling);if(o.node&&o.offset>0&&3===o.node.nodeType&&" "===o.node.nodeValue.charAt(o.offset-1))if(o.offset>1)(c=o.node).splitText(o.offset-1)}}if(n[0].inline||n[0].block_expand){if(!n[0].inline||3!=s.nodeType||0===l)s=m(true);if(!n[0].inline||3!=c.nodeType||d===c.nodeValue.length)c=m()}if(n[0].selector&&n[0].expand!==w&&!n[0].inline)s=b(s,"previousSibling"),c=b(c,"nextSibling");if(n[0].block||n[0].selector)if(s=C(s,"previousSibling"),c=C(c,"nextSibling"),n[0].block){if(!h(s))s=m(true);if(!h(c))c=m()}if(1==s.nodeType)l=v(s),s=s.parentNode;if(1==c.nodeType)d=v(c)+1,c=c.parentNode;return{startContainer:s,startOffset:l,endContainer:c,endOffset:d}}function fe(e,t){return t.links&&"A"==e.tagName}function de(e,t,n,i){var r,o,a;if(!Z(n,e)&&!fe(n,e))return w;if("all"!=e.remove){if(_(e.styles,function(r,o){if(r=ae(se(r,t),o),"number"===typeof o)o=r,i=0;if(e.remove_similar||!i||ee(oe(i,o),r))f.setStyle(n,o,"");a=1}),a&&""===f.getAttrib(n,"style"))n.removeAttribute("style"),n.removeAttribute("data-mce-style");for(_(e.attributes,function(e,r){var o;if(e=se(e,t),"number"===typeof r)r=e,i=0;if(!i||ee(f.getAttrib(i,r),e)){if("class"==r)if(e=f.getAttrib(n,r),e)if(o="",_(e.split(/\s+/),function(e){if(/mce\-\w+/.test(e))o+=(o?" ":"")+e}),o)return void f.setAttrib(n,r,o);if("class"==r)n.removeAttribute("className");if(b.test(r))n.removeAttribute("data-mce-"+r);n.removeAttribute(r)}}),_(e.classes,function(e){if(e=se(e,t),!i||f.hasClass(i,e))f.removeClass(n,e)}),o=f.getAttribs(n),r=0;r<o.length;r++){var s=o[r].nodeName;if(0!==s.indexOf("_")&&0!==s.indexOf("data-"))return w}}if("none"!=e.remove)return me(n,e),C}function me(e,t){var n=e.parentNode,i;function r(e,t,n){return e=pe(e,t,n),!e||"BR"==e.nodeName||h(e)}if(t.block)if(!g){if(h(e)&&!h(n)){if(!r(e,w)&&!r(e.firstChild,C,1))e.insertBefore(f.create("br"),e.firstChild);if(!r(e,C)&&!r(e.lastChild,w,1))e.appendChild(f.create("br"))}}else if(n==f.getRoot())if(!t.list_block||!ee(e,t.list_block))_(R(e.childNodes),function(e){if(p(g,e.nodeName.toLowerCase()))if(!i)i=ue(e,g),f.setAttribs(i,u.settings.forced_root_block_attrs);else i.appendChild(e);else i=0});if(t.selector&&t.inline&&!ee(t.inline,e))return;f.remove(e,1)}function pe(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!le(e))return e}function he(e,t){var n,i,o=new r(f);function a(e,t){for(n=e;n;n=n[t]){if(3==n.nodeType&&0!==n.nodeValue.length)return e;if(1==n.nodeType&&!T(n))return n}return e}if(e&&t)if(e=a(e,"previousSibling"),t=a(t,"nextSibling"),o.compare(e,t)){for(n=e.nextSibling;n&&n!=t;)i=n,n=n.nextSibling,e.appendChild(i);return f.remove(t),_(R(t.childNodes),function(t){e.appendChild(t)}),e}return t}function ge(e,n){var i,r,o;if(i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"],1==i.nodeType){if(o=i.childNodes.length-1,!n&&r)r--;i=i.childNodes[r>o?o:r]}if(3===i.nodeType&&n&&r>=i.nodeValue.length)i=new t(i,u.getBody()).next()||i;if(3===i.nodeType&&!n&&0===r)i=new t(i,u.getBody()).prev()||i;return i}function ve(e,n,i,r){var o="_mce_caret",a=u.settings.caret_debug;function s(e){var t=f.create("span",{id:o,"data-mce-bogus":true,style:a?"color:red":""});if(e)t.appendChild(u.getDoc().createTextNode(y));return t}function l(e,t){while(e){if(3===e.nodeType&&e.nodeValue!==y||e.childNodes.length>1)return false;if(t&&1===e.nodeType)t.push(e);e=e.firstChild}return true}function c(e){while(e){if(e.id===o)return e;e=e.parentNode}}function p(e){var n;if(e)for(e=(n=new t(e,e)).current();e;e=n.next())if(3===e.nodeType)return e}function h(e,t){var n,i;if(!e){if(e=c(d.getStart()),!e)while(e=f.get(o))h(e,false)}else{if(i=d.getRng(true),l(e)){if(false!==t)i.setStartBefore(e),i.setEndBefore(e);f.remove(e)}else{if(n=p(e),n.nodeValue.charAt(0)===y){if(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0)i.setStart(n,i.startOffset-1);if(i.endContainer==n&&i.endOffset>0)i.setEnd(n,i.endOffset-1)}f.remove(e,1)}d.setRng(i)}}function g(){var e,t,r,o,a,l,u;if(e=d.getRng(true),o=e.startOffset,l=e.startContainer,u=l.nodeValue,t=c(d.getStart()),t)r=p(t);var f=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&o>0&&o<u.length&&f.test(u.charAt(o))&&f.test(u.charAt(o-1)))a=d.getBookmark(),e.collapse(true),e=ce(e,H(n)),e=m.split(e),$(n,i,e),d.moveToBookmark(a);else{if(!t||r.nodeValue!==y)r=(t=s(true)).firstChild,e.insertNode(t),o=1,$(n,i,t);else $(n,i,t);d.setCursorLocation(r,o)}}function v(){var e=d.getRng(true),t,o,a,l,u,c,p=[],h,g;if(t=e.startContainer,o=e.startOffset,u=t,3==t.nodeType){if(o!=t.nodeValue.length)l=true;u=u.parentNode}while(u){if(K(u,n,i,r)){c=u;break}if(u.nextSibling)l=true;p.push(u),u=u.parentNode}if(!c)return;if(l)a=d.getBookmark(),e.collapse(true),e=ce(e,H(n),true),e=m.split(e),j(n,i,e),d.moveToBookmark(a);else{for(u=g=s(),h=p.length-1;h>=0;h--)u.appendChild(f.clone(p[h],false)),u=u.firstChild;u.appendChild(f.doc.createTextNode(y)),u=u.firstChild;var v=f.getParent(c,A);if(v&&f.isEmpty(v))c.parentNode.replaceChild(g,c);else f.insertAfter(g,c);if(d.setCursorLocation(u,1),f.isEmpty(c))f.remove(c)}}function b(){var e;if(e=c(d.getStart()),e&&!f.isEmpty(e))B(e,function(e){if(1==e.nodeType&&e.id!==o&&!f.isEmpty(e))f.setAttrib(e,"data-mce-bogus",null)},"childNodes")}if(!u._hasCaretEvents)S=function(){var e=[],t;if(l(c(d.getStart()),e)){t=e.length;while(t--)f.setAttrib(e[t],"data-mce-bogus","1")}},E=function(e){var t=e.keyCode;if(h(),8==t&&d.isCollapsed()&&d.getStart().innerHTML==y)h(c(d.getStart()));if(37==t||39==t)h(c(d.getStart()));b()},u.on("SetContent",function(e){if(e.selection)b()}),u._hasCaretEvents=true;if("apply"==e)g();else v()}function ye(e){var n=e.startContainer,i=e.startOffset,r,o,a,s,l;if(e.startContainer==e.endContainer)if(P(e.startContainer.childNodes[e.startOffset]))return;if(3==n.nodeType&&i>=n.nodeValue.length)i=v(n),n=n.parentNode,r=true;if(1==n.nodeType){if(s=n.childNodes,n=s[Math.min(i,s.length-1)],o=new t(n,f.getParent(n,f.isBlock)),i>s.length-1||r)o.next();for(a=o.current();a;a=o.next())if(3==a.nodeType&&!le(a))return l=f.create("a",{"data-mce-bogus":"all"},y),a.parentNode.insertBefore(l,a),e.setStart(a,0),d.setRng(e),void f.remove(l)}}}}),r("tinymce/undo/Diff",[],function(){var e=0,t=1,n=2;return{KEEP:e,DELETE:n,INSERT:t,diff:function(i,r){var o=i.length+r.length+2,a=new Array(o),s=new Array(o),l=function(e,t,n){return{start:e,end:t,diag:n}},u=function(o,a,s,l,c){var d=f(o,a,s,l);if(null===d||d.start===a&&d.diag===a-l||d.end===o&&d.diag===o-s){var m=o,p=s;while(m<a||p<l)if(m<a&&p<l&&i[m]===r[p])c.push([e,i[m]]),++m,++p;else if(a-o>l-s)c.push([n,i[m]]),++m;else c.push([t,r[p]]),++p}else{u(o,d.start,s,d.start-d.diag,c);for(var h=d.start;h<d.end;++h)c.push([e,i[h]]);u(d.end,a,d.end-d.diag,l,c)}},c=function(e,t,n,o){var a=e;while(a-t<o&&a<n&&i[a]===r[a-t])++a;return l(e,a,t)},f=function(e,t,n,o){var l=t-e,u=o-n;if(0===l||0===u)return null;var f=l-u,d=u+l,m=(d%2===0?d:d+1)/2;a[1+m]=e,s[1+m]=t+1;for(var p=0;p<=m;++p){for(var h=-p;h<=p;h+=2){var g=h+m;if(h===-p||h!=p&&a[g-1]<a[g+1])a[g]=a[g+1];else a[g]=a[g-1]+1;var v=a[g],y=v-e+n-h;while(v<t&&y<o&&i[v]===r[y])a[g]=++v,++y;if(f%2!=0&&f-p<=h&&h<=f+p)if(s[g-f]<=a[g])return c(s[g-f],h+e-n,t,o)}for(h=f-p;h<=f+p;h+=2){if(g=h+m-f,h===f-p||h!=f+p&&s[g+1]<=s[g-1])s[g]=s[g+1]-1;else s[g]=s[g-1];y=(v=s[g]-1)-e+n-h;while(v>=e&&y>=n&&i[v]===r[y])s[g]=v--,y--;if(f%2===0&&-p<=h&&h<=p)if(s[g]<=a[g+f])return c(s[g],h+e-n,t,o)}}},d=[];return u(0,i.length,0,r.length,d),d}}}),r("tinymce/undo/Fragments",["tinymce/util/Arr","tinymce/html/Entities","tinymce/undo/Diff"],function(e,t,n){var i=function(e){if(1===e.nodeType)return e.outerHTML;else if(3===e.nodeType)return t.encodeRaw(e.data,false);else if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e";return""},r=function(e){var t,n,i;if(i=document.createElement("div"),t=document.createDocumentFragment(),e)i.innerHTML=e;while(n=i.firstChild)t.appendChild(n);return t},o=function(e,t,n){var i=r(t);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodes[n];o.parentNode.insertBefore(i,o)}else e.appendChild(i)},a=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},s=function(t,i){var r=0;e.each(t,function(e){if(e[0]===n.KEEP)r++;else if(e[0]===n.INSERT)o(i,e[1],r),r++;else if(e[0]===n.DELETE)a(i,r)})};return{read:function(t){return e.map(t.childNodes,i)},write:function(t,r){var o=e.map(r.childNodes,i);return s(n.diff(o,t),r),r}}}),r("tinymce/undo/Levels",["tinymce/util/Arr","tinymce/undo/Fragments"],function(e,t){var n=function(e){return-1!==e.indexOf("</iframe>")},i=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},r=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},o=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content};return{createFragmentedLevel:i,createCompleteLevel:r,createFromEditor:function(o){var a,s,l;return a=t.read(o.getBody()),l=e.map(a,function(e){return o.serializer.trimContent(e)}),s=l.join(""),n(s)?i(l):r(s)},applyToEditor:function(e,n,i){if("fragmented"===n.type)t.write(n.fragments,e.getBody());else e.setContent(n.content,{format:"raw"});e.selection.moveToBookmark(i?n.beforeBookmark:n.bookmark)},isEq:function(e,t){return o(e)===o(t)}}}),r("tinymce/UndoManager",["tinymce/util/VK","tinymce/util/Tools","tinymce/undo/Levels"],function(e,t,n){return function(e){var i=this,r=0,o=[],a,s,l=0;function u(t){e.setDirty(t)}function c(e){i.typing=false,i.add({},e)}function f(){if(i.typing)i.typing=false,i.add()}return e.on("init",function(){i.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;if("Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t)f(),i.beforeChange()}),e.on("ExecCommand",function(e){var t=e.command;if("Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t)c(e)}),e.on("ObjectResizeStart Cut",function(){i.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var r=t.keyCode;if(t.isDefaultPrevented())return;if(r>=33&&r<=36||r>=37&&r<=40||45===r||t.ctrlKey)c(),e.nodeChanged();if(46===r||8===r)e.nodeChanged();if(s&&i.typing){if(!e.isDirty())if(u(o[0]&&!n.isEq(n.createFromEditor(e),o[0])),e.isDirty())e.fire("change",{level:o[0],lastLevel:null});e.fire("TypingUndo"),s=false,e.nodeChanged()}}),e.on("KeyDown",function(e){var t=e.keyCode;if(e.isDefaultPrevented())return;if(t>=33&&t<=36||t>=37&&t<=40||45===t){if(i.typing)c(e);return}var n=e.ctrlKey&&!e.altKey||e.metaKey;if((t<16||t>20)&&224!==t&&91!==t&&!i.typing&&!n)i.beforeChange(),i.typing=true,i.add({},e),s=true}),e.on("MouseDown",function(e){if(i.typing)c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){if(!t.isDefaultPrevented())e.nodeChanged()}),i={data:o,typing:false,beforeChange:function(){if(!l)a=e.selection.getBookmark(2,true)},add:function(i,s){var c,f=e.settings,d,m;if(m=n.createFromEditor(e),i=i||{},i=t.extend(i,m),l||e.removed)return null;if(d=o[r],e.fire("BeforeAddUndo",{level:i,lastLevel:d,originalEvent:s}).isDefaultPrevented())return null;if(d&&n.isEq(d,i))return null;if(o[r])o[r].beforeBookmark=a;if(f.custom_undo_redo_levels)if(o.length>f.custom_undo_redo_levels){for(c=0;c<o.length-1;c++)o[c]=o[c+1];o.length--,r=o.length}if(i.bookmark=e.selection.getBookmark(2,true),r<o.length-1)o.length=r+1;o.push(i),r=o.length-1;var p={level:i,lastLevel:d,originalEvent:s};if(e.fire("AddUndo",p),r>0)u(true),e.fire("change",p);return i},undo:function(){var t;if(i.typing)i.add(),i.typing=false;if(r>0)t=o[--r],n.applyToEditor(e,t,true),u(true),e.fire("undo",{level:t});return t},redo:function(){var t;if(r<o.length-1)t=o[++r],n.applyToEditor(e,t,false),u(true),e.fire("redo",{level:t});return t},clear:function(){o=[],r=0,i.typing=false,i.data=o,e.fire("ClearUndos")},hasUndo:function(){return r>0||i.typing&&o[0]&&!n.isEq(n.createFromEditor(e),o[0])},hasRedo:function(){return r<o.length-1&&!i.typing},transact:function(e){f(),i.beforeChange();try{l++,e()}finally{l--}return i.add()},extra:function(t,a){var s,l;if(i.transact(t))if(l=o[r].bookmark,s=o[r-1],n.applyToEditor(e,s,true),i.transact(a))o[r-1].beforeBookmark=l}},i}}),r("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/caret/CaretContainer","tinymce/Env"],function(e,t,n,i){var r=i.ie&&i.ie<11;return function(o){var a=o.dom,s=o.selection,l=o.settings,u=o.undoManager,c=o.schema,f=c.getNonEmptyElements(),d=c.getMoveCaretBeforeOnEnterElements();function m(m){var p,h,g,v,y,b,w,C,x,k,N,E,S,T,_;function R(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function B(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function A(e){var t;if(a.isBlock(e))t=s.getRng(),e.appendChild(a.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t)}function D(e){var t=e,n=[],i;if(!t)return;while(t=t.firstChild){if(a.isBlock(t))return;if(1==t.nodeType&&!f[t.nodeName.toLowerCase()])n.push(t)}i=n.length;while(i--)if(t=n[i],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue)a.remove(t);else if("A"==t.nodeName&&" "===(t.innerText||t.textContent))a.remove(t)}function P(t){var n,r,o,l=t,u;function c(e){while(e){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}if(!t)return;if(i.ie&&i.ie<9&&b&&b.firstChild)if(b.firstChild==b.lastChild&&"BR"==b.firstChild.tagName)a.remove(b.firstChild);if(/^(LI|DT|DD)$/.test(t.nodeName)){var f=c(t.firstChild);if(f&&/^(UL|OL|DL)$/.test(f.nodeName))t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(o=a.createRng(),!i.ie)t.normalize();if(t.hasChildNodes()){n=new e(t,t);while(r=n.current()){if(3==r.nodeType){o.setStart(r,0),o.setEnd(r,0);break}if(d[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}l=r,r=n.next()}if(!r)o.setStart(l,0),o.setEnd(l,0)}else if("BR"==t.nodeName)if(t.nextSibling&&a.isBlock(t.nextSibling)){if(!w||w<9)u=a.create("br"),t.parentNode.insertBefore(u,t);o.setStartBefore(t),o.setEndBefore(t)}else o.setStartAfter(t),o.setEndAfter(t);else o.setStart(t,0),o.setEnd(t,0);s.setRng(o),a.remove(u),s.scrollIntoView(t)}function M(e){var t=l.forced_root_block;if(t&&t.toLowerCase()===e.tagName.toLowerCase())a.setAttribs(e,l.forced_root_block_attrs)}function L(e){e.innerHTML=!r?'<br data-mce-bogus="1">':""}function O(e){var t=v,n,i,o,s=c.getTextInlineElements();if(e||"TABLE"==E)M(n=a.create(e||T));else n=b.cloneNode(false);if(o=n,n.classList.remove("without-margin"),false!==l.keep_styles)do{if(s[t.nodeName]){if("_mce_caret"==t.id)continue;if(i=t.cloneNode(false),a.setAttrib(i,"id",""),n.hasChildNodes())i.appendChild(n.firstChild),n.appendChild(i);else o=i,n.appendChild(i)}}while((t=t.parentNode)&&t!=g);if(!r)o.innerHTML='<br data-mce-bogus="1">';return n}function I(t){var n=i.ie?/^[ \t\r\n\uFEFF]*$/:/^[ \t\r\n]*$/,r,o,a;if(3==v.nodeType&&(t?y>0:y<v.nodeValue.length))return false;if(v.parentNode==b&&_&&!t)return true;if(t&&1==v.nodeType&&v==b.firstChild)return true;if("TABLE"===v.nodeName||v.previousSibling&&"TABLE"==v.previousSibling.nodeName)return _&&!t||!_&&t;if(r=new e(v,b),3==v.nodeType)if(t&&0===y)r.prev();else if(!t&&y==v.nodeValue.length)r.next();while(o=r.current()){if(1===o.nodeType){if(!o.getAttribute("data-mce-bogus"))if(a=o.nodeName.toLowerCase(),f[a]&&"br"!==a)return false}else if(3===o.nodeType&&!n.test(o.nodeValue))return false;if(t)r.prev();else r.next()}return true}function H(e,t){var n,i,r,s,l,u,f=T||"P";if(i=a.getParent(e,a.isBlock),!i||!R(i)){if(i=i||g,i==o.getBody()||B(i))u=i.nodeName.toLowerCase();else u=i.parentNode.nodeName.toLowerCase();if(!i.hasChildNodes())return n=a.create(f),M(n),i.appendChild(n),p.setStart(n,0),p.setEnd(n,0),n;s=e;while(s.parentNode!=i)s=s.parentNode;while(s&&!a.isBlock(s))r=s,s=s.previousSibling;if(r&&c.isValidChild(u,f.toLowerCase())){M(n=a.create(f)),r.parentNode.insertBefore(n,r),s=r;while(s&&!a.isBlock(s))l=s.nextSibling,n.appendChild(s),s=l;p.setStart(e,t),p.setEnd(e,t)}}return e}function F(){function e(e){var t=N[e?"firstChild":"lastChild"];while(t){if(1==t.nodeType)break;t=t[e?"nextSibling":"previousSibling"]}return t===b}function t(){var e=N.parentNode;if(/^(LI|DT|DD)$/.test(e.nodeName))return e;return N}if(N==o.getBody())return;var n=N.parentNode.nodeName;if(/^(OL|UL|LI)$/.test(n))T="LI";if(x=T?O(T):a.create("BR"),e(true)&&e())if("LI"==n)a.insertAfter(x,t());else a.replace(x,N);else if(e(true))if("LI"==n)a.insertAfter(x,t()),x.appendChild(a.doc.createTextNode(" ")),x.appendChild(N);else N.parentNode.insertBefore(x,N);else if(e())a.insertAfter(x,t()),A(x);else if(N=t(),h=p.cloneRange(),h.setStartAfter(b),h.setEndAfter(N),k=h.extractContents(),"LI"==T&&"LI"==k.firstChild.nodeName)x=k.firstChild,a.insertAfter(k,N);else a.insertAfter(k,N),a.insertAfter(x,N);a.remove(b),P(x),u.add()}function z(){o.execCommand("InsertLineBreak",false,m)}function U(e){do{if(3===e.nodeType)e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"");e=e.firstChild}while(e)}function W(e){var t=a.getRoot(),n,i;n=e;while(n!==t&&"false"!==a.getContentEditable(n)){if("true"===a.getContentEditable(n))i=n;n=n.parentNode}return n!==t?i:t}function V(e){var t;if(!r)if(e.normalize(),t=e.lastChild,!t||/^(left|right)$/gi.test(a.getStyle(t,"float",true)))a.add(e,"br")}function $(){if(/^(H[1-6]|PRE|FIGURE)$/.test(E)&&"HGROUP"!=S)x=O(T);else x=O();if(l.end_container_on_empty_block&&R(N)&&a.isEmpty(b))x=a.split(N,b);else a.insertAfter(x,b);P(x)}if(p=s.getRng(true),m.isDefaultPrevented())return;if(!p.collapsed)return void o.execCommand("Delete");if(new t(a).normalize(p),v=p.startContainer,y=p.startOffset,T=(l.force_p_newlines?"p":"")||l.forced_root_block,T=T?T.toUpperCase():"",w=a.doc.documentMode,C=m.shiftKey,1==v.nodeType&&v.hasChildNodes())if(_=y>v.childNodes.length-1,v=v.childNodes[Math.min(y,v.childNodes.length-1)]||v,_&&3==v.nodeType)y=v.nodeValue.length;else y=0;if(g=W(v),!g)return;if(u.beforeChange(),!a.isBlock(g)&&g!=a.getRoot()){if(!T||C)z();return}if(T&&!C||!T&&C)v=H(v,y);if(b=a.getParent(v,a.isBlock),N=b?a.getParent(b.parentNode,a.isBlock):null,E=b?b.nodeName.toUpperCase():"",S=N?N.nodeName.toUpperCase():"","LI"==S&&!m.ctrlKey)b=N,E=S;if(o.undoManager.typing)o.undoManager.typing=false,o.undoManager.add();if(/^(LI|DT|DD)$/.test(E)){if(!T&&C)return void z();if(a.isEmpty(b))return void F()}if("PRE"==E&&false!==l.br_in_pre){if(!C)return void z()}else if(!T&&!C&&"LI"!=E||T&&C)return void z();if(T&&b===o.getBody())return;if(T=T||"P",n.isCaretContainerBlock(b)){if(x=n.showCaretContainerBlock(b),a.isEmpty(b))L(b);P(x)}else if(I())$();else if(I(true))A(x=b.parentNode.insertBefore(O(),b)),P(b);else{if(h=p.cloneRange(),h.setEndAfter(b),k=h.extractContents(),U(k),x=k.firstChild,a.insertAfter(k,b),D(x),V(b),a.isEmpty(b))L(b);if(x.normalize(),a.isEmpty(x))a.remove(x),$();else P(x)}a.setAttrib(x,"id",""),o.fire("NewBlock",{newBlock:x}),u.typing=false,u.add()}o.on("keydown",function(e){if(13==e.keyCode)if(false!==m(e))e.preventDefault()})}}),r("tinymce/ForceBlocks",[],function(){return function(e){var t=e.settings,n=e.dom,i=e.selection,r=e.schema,o=r.getBlockElements();function a(){var a=i.getStart(),s=e.getBody(),l,u,c,f,d,m,p,h=-16777215,g,v,y,b,w;if(w=t.forced_root_block,!a||1!==a.nodeType||!w)return;while(a&&a!=s){if(o[a.nodeName])return;a=a.parentNode}if(l=i.getRng(),l.setStart){u=l.startContainer,c=l.startOffset,f=l.endContainer,d=l.endOffset;try{v=e.getDoc().activeElement===s}catch(e){}}else{if(l.item)a=l.item(0),(l=e.getDoc().body.createTextRange()).moveToElementText(a);if(v=l.parentElement().ownerDocument===e.getDoc(),y=l.duplicate(),y.collapse(true),c=-1*y.move("character",h),!y.collapsed)(y=l.duplicate()).collapse(false),d=-1*y.move("character",h)-c}a=s.firstChild,b=s.nodeName.toLowerCase();while(a)if((3===a.nodeType||1==a.nodeType&&!o[a.nodeName])&&r.isValidChild(b,w.toLowerCase())){if(3===a.nodeType&&0===a.nodeValue.length){p=a,a=a.nextSibling,n.remove(p);continue}if(!m)m=n.create(w,e.settings.forced_root_block_attrs),a.parentNode.insertBefore(m,a),g=true;p=a,a=a.nextSibling,m.appendChild(p)}else m=null,a=a.nextSibling;if(g&&v){if(l.setStart)l.setStart(u,c),l.setEnd(f,d),i.setRng(l);else try{if(l=e.getDoc().body.createTextRange(),l.moveToElementText(s),l.collapse(true),l.moveStart("character",c),d>0)l.moveEnd("character",d);l.select()}catch(e){}e.nodeChanged()}}if(t.forced_root_block)e.on("NodeChange",a)}}),r("tinymce/caret/CaretUtils",["tinymce/util/Fun","tinymce/dom/TreeWalker","tinymce/dom/NodeType","tinymce/caret/CaretPosition","tinymce/caret/CaretContainer","tinymce/caret/CaretCandidate"],function(e,t,n,i,r,o){var a=n.isContentEditableTrue,s=n.isContentEditableFalse,l=n.matchStyleValues("display","block table table-cell table-caption"),u=r.isCaretContainer,c=r.isCaretContainerBlock,f=e.curry,d=n.isElement,m=o.isCaretCandidate;function p(e){return e>0}function h(e){return e<0}function g(e,t){var n;while(n=e(t))if(!c(n))return n;return null}function v(e,n,i,r,o){var a=new t(e,r);if(h(n)){if(s(e)||c(e))if(e=g(a.prev,true),i(e))return e;while(e=g(a.prev,o))if(i(e))return e}if(p(n)){if(s(e)||c(e))if(e=g(a.next,true),i(e))return e;while(e=g(a.next,o))if(i(e))return e}return null}function y(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(a(e))return e;return t}function b(e,t){while(e&&e!=t){if(l(e))return e;e=e.parentNode}return null}function w(e,t,n){return b(e.container(),n)==b(t.container(),n)}function C(e,t,n){return y(e.container(),n)==y(t.container(),n)}function x(e,t){var n,i;if(!t)return null;if(n=t.container(),i=t.offset(),!d(n))return null;return n.childNodes[i+e]}function k(e,t){var n=t.ownerDocument.createRange();if(e)n.setStartBefore(t),n.setEndBefore(t);else n.setStartAfter(t),n.setEndAfter(t);return n}function N(e,t,n){return b(t,e)==b(n,e)}function E(e,t,n){var i,r;if(e)r="previousSibling";else r="nextSibling";while(n&&n!=t){if(i=n[r],u(i))i=i[r];if(s(i)){if(N(t,i,n))return i;break}if(m(i))break;n=n.parentNode}return null}var S=f(k,true),T=f(k,false);function _(e,t,i){var o,a,l,c,m=f(E,true,t),p=f(E,false,t);if(a=i.startContainer,l=i.startOffset,r.isCaretContainerBlock(a)){if(!d(a))a=a.parentNode;if(c=a.getAttribute("data-mce-caret"),"before"==c)if(o=a.nextSibling,s(o))return S(o);if("after"==c)if(o=a.previousSibling,s(o))return T(o)}if(!i.collapsed)return i;if(n.isText(a)){if(u(a)){if(1===e){if(o=p(a),o)return S(o);if(o=m(a),o)return T(o)}if(-1===e){if(o=m(a),o)return T(o);if(o=p(a),o)return S(o)}return i}if(r.endsWithCaretContainer(a)&&l>=a.data.length-1){if(1===e)if(o=p(a),o)return S(o);return i}if(r.startsWithCaretContainer(a)&&l<=1){if(-1===e)if(o=m(a),o)return T(o);return i}if(l===a.data.length){if(o=p(a),o)return S(o);return i}if(0===l){if(o=m(a),o)return T(o);return i}}return i}function R(e,t){return s(x(e,t))}return{isForwards:p,isBackwards:h,findNode:v,getEditingHost:y,getParentBlock:b,isInSameBlock:w,isInSameEditingHost:C,isBeforeContentEditableFalse:f(R,0),isAfterContentEditableFalse:f(R,-1),normalizeRange:_}}),r("tinymce/caret/CaretWalker",["tinymce/dom/NodeType","tinymce/caret/CaretCandidate","tinymce/caret/CaretPosition","tinymce/caret/CaretUtils","tinymce/util/Arr","tinymce/util/Fun"],function(e,t,n,i,r,o){var a=e.isContentEditableFalse,s=e.isText,l=e.isElement,u=e.isBr,c=i.isForwards,f=i.isBackwards,d=t.isCaretCandidate,m=t.isAtomic,p=t.isEditableCaretCandidate;function h(e,t){var n=[];while(e&&e!=t)n.push(e),e=e.parentNode;return n}function g(e,t){if(e.hasChildNodes()&&t<e.childNodes.length)return e.childNodes[t];return null}function v(e,t){if(c(e)){if(d(t.previousSibling)&&!s(t.previousSibling))return n.before(t);if(s(t))return n(t,0)}if(f(e)){if(d(t.nextSibling)&&!s(t.nextSibling))return n.after(t);if(s(t))return n(t,t.data.length)}if(f(e)){if(u(t))return n.before(t);return n.after(t)}return n.before(t)}function y(t,r){var o;if(!e.isBr(t))return false;if(o=b(1,n.after(t),r),!o)return false;return!i.isInSameBlock(n.before(t),n.before(o),r)}function b(e,t,u){var w,C,x,k,N,E,S;if(!l(u)||!t)return null;if(S=t,w=S.container(),C=S.offset(),s(w)){if(f(e)&&C>0)return n(w,--C);if(c(e)&&C<w.length)return n(w,++C);x=w}else{if(f(e)&&C>0)if(k=g(w,C-1),d(k)){if(!m(k))if(N=i.findNode(k,e,p,k),N){if(s(N))return n(N,N.data.length);return n.after(N)}if(s(k))return n(k,k.data.length);return n.before(k)}if(c(e)&&C<w.childNodes.length)if(k=g(w,C),d(k)){if(y(k,u))return b(e,n.after(k),u);if(!m(k))if(N=i.findNode(k,e,p,k),N){if(s(N))return n(N,0);return n.before(N)}if(s(k))return n(k,0);return n.after(k)}x=S.getNode()}if(c(e)&&S.isAtEnd()||f(e)&&S.isAtStart())if(x=i.findNode(x,e,o.constant(true),u,true),p(x))return v(e,x);if(k=i.findNode(x,e,p,u),E=r.last(r.filter(h(w,u),a)),E&&(!k||!E.contains(k))){if(c(e))S=n.after(E);else S=n.before(E);return S}if(k)return v(e,k);return null}return function(e){return{next:function(t){return b(1,t,e)},prev:function(t){return b(-1,t,e)}}}}),r("tinymce/InsertList",["tinymce/util/Tools","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition"],function(e,t,n){var i=function(e){var t=e.firstChild,n=e.lastChild;if(t&&"META"===t.nodeName)t.parentNode.removeChild(t);if(n&&"mce_marker"===n.id)n.parentNode.removeChild(n);return e},r=function(e,t,n){var r=t.serialize(n),o=e.createFragment(r);return i(o)},o=function(t){return e.grep(t.childNodes,function(e){return"LI"===e.nodeName})},a=function(e){return!e.firstChild},s=function(e){return e.length>0&&a(e[e.length-1])?e.slice(0,-1):e},l=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},u=function(e,t){var n=t.cloneRange(),i=t.cloneRange();return n.setStartBefore(e),i.setEndAfter(e),[n.cloneContents(),i.cloneContents()]},c=function(e,i){var r=n.before(e),o=new t(i).next(r);return o?o.toRange():null},f=function(e,i){var r=n.after(e),o=new t(i).prev(r);return o?o.toRange():null},d=function(t,n,i,r){var o=u(t,r),a=t.parentNode;return a.insertBefore(o[0],t),e.each(n,function(e){a.insertBefore(e,t)}),a.insertBefore(o[1],t),a.removeChild(t),f(n[n.length-1],i)},m=function(t,n,i){var r=t.parentNode;return e.each(n,function(e){r.insertBefore(e,t)}),c(t,i)},p=function(e,t,n,i){return i.insertAfter(t.reverse(),e),f(t[0],n)};return{isListFragment:function(e){var t=e.firstChild,n=e.lastChild;if(t&&"meta"===t.name)t=t.next;if(n&&"mce_marker"===n.attr("id"))n=n.prev;if(!t||t!==n)return false;return"ul"===t.name||"ol"===t.name},insertAtCaret:function(e,i,a,u){var c=r(i,e,u),f=l(i,a.startContainer),h=s(o(c.firstChild)),g=1,v=2,y=i.getRoot(),b=function(e){var r=n.fromRangeStart(a),o=new t(i.getRoot()),s=e===g?o.prev(r):o.next(r);return s?l(i,s.getNode())!==f:true};if(b(g))return m(f,h,y);else if(b(v))return p(f,h,y,i);return d(f,h,y,a)},isParentBlockLi:function(e,t){return!!l(e,t)},trimListItems:s,listItems:o}}),r("tinymce/InsertContent",["tinymce/Env","tinymce/util/Tools","tinymce/html/Serializer","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition","tinymce/dom/ElementUtils","tinymce/dom/NodeType","tinymce/InsertList"],function(e,t,n,i,r,o,a,s){var l=a.matchNodeNames("td th"),u=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var i=n.firstChild,r=n.lastChild;if(!i||i===r&&"BR"===i.nodeName)e.dom.setHTML(n,t);else e.selection.setContent(t)}},c=function(a,c,f){var d,m,p,h,g,v,y,b,w,C,x,k,N=a.schema.getTextInlineElements(),E=a.selection,S=a.dom;function T(e){var t,n,i;t=E.getRng(true),n=t.startContainer,i=t.startOffset;function r(e){return n[e]&&3==n[e].nodeType}if(3==n.nodeType){if(i>0)e=e.replace(/^&nbsp;/," ");else if(!r("previousSibling"))e=e.replace(/^ /,"&nbsp;");if(i<n.length)e=e.replace(/&nbsp;(<br>|)$/," ");else if(!r("nextSibling"))e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")}return e}function _(){var e,t,n;if(e=E.getRng(true),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed)if(" "===t.data[n]){if(t.deleteData(n,1),!/[\u00a0| ]$/.test(c))c+=" "}else if(" "===t.data[n-1])if(t.deleteData(n-1,1),!/[\u00a0| ]$/.test(c))c=" "+c}function R(){if(k){var e=a.getBody(),n=new o(S);t.each(S.select("*[data-mce-fragment]"),function(t){if(N[t.nodeName.toLowerCase()])for(var i=t.parentNode;i&&i!=e;i=i.parentNode)if(n.compare(i,t)){for(var r,o=S.parseStyle(S.getAttrib(t,"style")),a=t.parentNode;a&&a!=i;a=a.parentNode){var s=S.parseStyle(S.getAttrib(a,"style"));for(var l in o)if(l in s&&s[l]!==o[l]){r=true;break}}if(!r){S.remove(t,true);break}}})}}function B(e){var t=e;while(t=t.walk())if(1===t.type)t.attr("data-mce-fragment","1")}function A(e){t.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}function D(e){return!!e.getAttribute("data-mce-fragment")}function P(e){return e&&!a.schema.getShortEndedElements()[e.nodeName]}function M(t){var n,o,s;function u(e){for(var t=a.getBody();e&&e!==t;e=e.parentNode)if("false"===a.dom.getContentEditable(e))return e;return null}if(!t)return;if(E.scrollIntoView(t),n=u(t),n)return S.remove(t),void E.select(n);if(b=S.createRng(),w=t.previousSibling,w&&3==w.nodeType){if(b.setStart(w,w.nodeValue.length),!e.ie)if(C=t.nextSibling,C&&3==C.nodeType)w.appendData(C.data),C.parentNode.removeChild(C)}else b.setStartBefore(t),b.setEndBefore(t);function c(e){var t=r.fromRangeStart(e);if(t=new i(a.getBody()).next(t),t)return t.toRange()}if(o=S.getParent(t,S.isBlock),S.remove(t),o&&S.isEmpty(o))if(a.$(o).empty(),b.setStart(o,0),b.setEnd(o,0),!l(o)&&!D(o)&&(s=c(b)))b=s,S.remove(o);else S.add(o,S.create("br",{"data-mce-bogus":"1"}));E.setRng(b)}if(/^ | $/.test(c))c=T(c);if(d=a.parser,k=f.merge,m=new n({validate:a.settings.validate},a.schema),x='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',v={content:c,format:"html",selection:true},a.fire("BeforeSetContent",v),c=v.content,-1==c.indexOf("{$caret}"))c+="{$caret}";c=c.replace(/\{\$caret\}/,x);var L=(b=E.getRng()).startContainer||(b.parentElement?b.parentElement():null),O=a.getBody();if(L===O&&E.isCollapsed())if(S.isBlock(O.firstChild)&&P(O.firstChild)&&S.isEmpty(O.firstChild))(b=S.createRng()).setStart(O.firstChild,0),b.setEnd(O.firstChild,0),E.setRng(b);if(!E.isCollapsed())a.selection.setRng(a.selection.getRng()),a.getDoc().execCommand("Delete",false,null),_();var I={context:(p=E.getNode()).nodeName.toLowerCase(),data:f.data};if(g=d.parse(c,I),true===f.paste&&s.isListFragment(g)&&s.isParentBlockLi(S,p))return b=s.insertAtCaret(m,S,a.selection.getRng(true),g),a.selection.setRng(b),void a.fire("SetContent",v);if(B(g),w=g.lastChild,"mce_marker"==w.attr("id"))for(y=w,w=w.prev;w;w=w.walk(true))if(3==w.type||!S.isBlock(w.name)){if(a.schema.isValidChild(w.parent.name,"span"))w.parent.insert(y,w,"br"===w.name);break}if(a._selectionOverrides.showBlockCaretContainer(p),!I.invalid)c=m.serialize(g),u(a,c,p);else{if(E.setContent(x),p=E.getNode(),h=a.getBody(),9==p.nodeType)p=w=h;else w=p;while(w!==h)p=w,w=w.parentNode;if(c=p==h?h.innerHTML:S.getOuterHTML(p),c=m.serialize(d.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return m.serialize(g)}))),p==h)S.setHTML(h,c);else S.setOuterHTML(p,c)}R(),M(S.get("mce_marker")),A(a.getBody()),a.fire("SetContent",v),a.addVisual()},f=function(e){var n;if("string"!==typeof e)return n=t.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:n};return{content:e,details:{}}};return{insertAtCaret:function(e,t){var n=f(t);c(e,n.content,n.details)}}}),r("tinymce/EditorCommands",["tinymce/Env","tinymce/util/Tools","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker","tinymce/InsertContent","tinymce/dom/NodeType"],function(e,n,i,r,o,a){var s=n.each,l=n.extend,u=n.map,c=n.inArray,f=n.explode,d=e.ie&&e.ie<11,m=true,p=false;return function(n){var h,g,v,y={state:{},exec:{},value:{}},b=n.settings,w;n.on("PreInit",function(){h=n.dom,g=n.selection,b=n.settings,v=n.formatter});function C(e,t,i,r){var o,a,l=0;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)&&(!r||!r.skip_focus))n.focus();if(r=n.fire("BeforeExecCommand",{command:e,ui:t,value:i}),r.isDefaultPrevented())return false;if(a=e.toLowerCase(),o=y.exec[a])return o(a,t,i),n.fire("ExecCommand",{command:e,ui:t,value:i}),true;if(s(n.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,i))return n.fire("ExecCommand",{command:e,ui:t,value:i}),l=true,false}),l)return l;if(n.theme&&n.theme.execCommand&&n.theme.execCommand(e,t,i))return n.fire("ExecCommand",{command:e,ui:t,value:i}),true;try{l=n.getDoc().execCommand(e,t,i)}catch(e){}if(l)return n.fire("ExecCommand",{command:e,ui:t,value:i}),true;return false}function x(e){var t;if(n.quirks.isHidden())return;if(e=e.toLowerCase(),t=y.state[e])return t(e);try{return n.getDoc().queryCommandState(e)}catch(e){}return false}function k(e){var t;if(n.quirks.isHidden())return;if(e=e.toLowerCase(),t=y.value[e])return t(e);try{return n.getDoc().queryCommandValue(e)}catch(e){}}function N(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){y[t][n]=e})})}function E(e,t,i){e=e.toLowerCase(),y.exec[e]=function(e,r,o,a){return t.call(i||n,r,o,a)}}function S(e){if(e=e.toLowerCase(),y.exec[e])return true;try{return n.getDoc().queryCommandSupported(e)}catch(e){}return false}function T(e,t,i){e=e.toLowerCase(),y.state[e]=function(){return t.call(i||n)}}function _(e,t,i){e=e.toLowerCase(),y.value[e]=function(){return t.call(i||n)}}function R(e){return e=e.toLowerCase(),!!y.exec[e]}l(this,{execCommand:C,queryCommandState:x,queryCommandValue:k,queryCommandSupported:S,addCommands:N,addCommand:E,addQueryStateHandler:T,addQueryValueHandler:_,hasCustomCommand:R});function B(e,i,r){if(i===t)i=p;if(r===t)r=null;return n.getDoc().execCommand(e,i,r)}function A(e){return v.match(e)}function D(e,i){v.toggle(e,i?{value:i}:t),n.nodeChanged()}function P(e){w=g.getBookmark(e)}function M(){g.moveToBookmark(w)}N({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(t){var i=n.getDoc(),r;try{B(t)}catch(e){r=m}if("paste"===t&&!i.queryCommandEnabled(t))r=true;if(r||!i.queryCommandSupported(t)){var o=n.translate("Your browser doesn't support direct access to the clipboard. "+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(e.mac)o=o.replace(/Ctrl\+/g,"⌘+");n.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(g.isCollapsed()){var e=n.dom.getParent(n.selection.getStart(),"a");if(e)n.dom.remove(e,true);return}v.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);if("full"==t)t="justify";if(s("left,center,right,justify".split(","),function(e){if(t!=e)v.remove("align"+e)}),"none"!=t)D("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;if(B(e),t=h.getParent(g.getNode(),"ol,ul"),t)if(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName))P(),h.split(n,t),M()},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){D(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){D(e,n)},FontSize:function(e,t,n){var i,r;if(n>=1&&n<=7)if(r=f(b.font_size_style_values),i=f(b.font_size_classes),i)n=i[n-1]||n;else n=r[n-1]||n;D(e,n)},RemoveFormat:function(e){v.remove(e)},mceBlockQuote:function(){D("blockquote")},FormatBlock:function(e,t,n){return D(n||"p")},mceCleanup:function(){var e=g.getBookmark();n.setContent(n.getContent({cleanup:m}),{cleanup:m}),g.moveToBookmark(e)},mceRemoveNode:function(e,t,i){var r=i||g.getNode();if(r!=n.getBody())P(),n.dom.remove(r,m),M()},mceSelectNodeDepth:function(e,t,i){var r=0;h.getParent(g.getNode(),function(e){if(1==e.nodeType&&r++==i)return g.select(e),p},n.getBody())},mceSelectNode:function(e,t,n){g.select(n)},mceInsertContent:function(e,t,i){o.insertAtCaret(n,i)},mceInsertRawHTML:function(e,t,i){g.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){D(n)},mceSetContent:function(e,t,i){n.setContent(i)},"Indent,Outdent":function(e){var t,i,r;if(t=b.indentation,i=/[a-z%]+$/i.exec(t),t=parseInt(t,10),!x("InsertUnorderedList")&&!x("InsertOrderedList")){if(!b.forced_root_block&&!h.getParent(g.getNode(),h.isBlock))v.apply("div");s(g.getSelectedBlocks(),function(o){if("false"===h.getContentEditable(o))return;if("LI"!==o.nodeName){var a=n.getParam("indent_use_margin",false)?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"==h.getStyle(o,"direction",true)?"Right":"Left","outdent"==e)r=Math.max(0,parseInt(o.style[a]||0,10)-t),h.setStyle(o,a,r?r+i:"");else r=parseInt(o.style[a]||0,10)+t+i,h.setStyle(o,a,r)}})}else B(e)},mceRepaint:function(){},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,i){n.execCommand("mceInsertContent",false,i.replace(/\{\$selection\}/g,g.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;if("string"==typeof n)n={href:n};if(i=h.getParent(g.getNode(),"a"),n.href=n.href.replace(" ","%20"),!i||!n.href)v.remove("link");if(n.href)v.apply("link",n,i)},selectAll:function(){var e=h.getRoot(),t;if(g.getRng().setStart){var n=h.getParent(g.getStart(),a.isContentEditableTrue);if(n)(t=h.createRng()).selectNodeContents(n),g.setRng(t)}else if(t=g.getRng(),!t.item)t.moveToElementText(e),t.select()},delete:function(){B("Delete");var e=n.getBody();if(h.isEmpty(e))if(n.setContent(""),e.firstChild&&h.isBlock(e.firstChild))n.selection.setCursorLocation(e.firstChild,0);else n.selection.setCursorLocation(e,0)},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(e,t,o){var a=o,s,l,u,c=g.getRng(true);new i(h).normalize(c);var f=c.startOffset,p=c.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var v=f>p.childNodes.length-1;if(p=p.childNodes[Math.min(f,p.childNodes.length-1)]||p,v&&3==p.nodeType)f=p.nodeValue.length;else f=0}var y=h.getParent(p,h.isBlock),b=y?y.nodeName.toUpperCase():"",w=y?h.getParent(y.parentNode,h.isBlock):null,C=w?w.nodeName.toUpperCase():"",x=a&&a.ctrlKey;if("LI"==C&&!x)y=w,b=C;function k(){var e=new r(p,y),t,i=n.schema.getNonEmptyElements();while(t=e.next())if(i[t.nodeName.toLowerCase()]||t.length>0)return true}if(p&&3==p.nodeType&&f>=p.nodeValue.length)if(!d&&!k())s=h.create("br"),c.insertNode(s),c.setStartAfter(s),c.setEndAfter(s),l=true;s=h.create("br"),c.insertNode(s);var N=h.doc.documentMode;if(d&&"PRE"==b&&(!N||N<8))s.parentNode.insertBefore(h.doc.createTextNode("\r"),s);if(u=h.create("span",{},"&nbsp;"),s.parentNode.insertBefore(u,s),g.scrollIntoView(u),h.remove(u),!l)c.setStartAfter(s),c.setEndAfter(s);else c.setStartBefore(s),c.setEndBefore(s);return g.setRng(c),n.undoManager.add(),m}}),N({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=g.isCollapsed()?[h.getParent(g.getNode(),h.isBlock)]:g.getSelectedBlocks(),i=u(n,function(e){return!!v.matchNode(e,t)});return-1!==c(i,m)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return A(e)},mceBlockQuote:function(){return A("blockquote")},Outdent:function(){var e;if(b.inline_styles){if((e=h.getParent(g.getStart(),h.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m;if((e=h.getParent(g.getEnd(),h.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m}return x("InsertUnorderedList")||x("InsertOrderedList")||!b.inline_styles&&!!h.getParent(g.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=h.getParent(g.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),N({"FontSize,FontName":function(e){var t=0,n;if(n=h.getParent(g.getNode(),"span"))if("fontsize"==e)t=n.style.fontSize;else t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return t}},"value"),N({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),r("tinymce/util/URI",["tinymce/util/Tools"],function(e){var t=e.each,n=e.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),r={ftp:21,http:80,https:443,mailto:25};function o(e,r){var a=this,s,l;if(e=n(e),r=a.settings=r||{},s=r.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(a.source=e);var u=0===e.indexOf("//");if(0===e.indexOf("/")&&!u)e=(s?s.protocol||"http":"http")+"://mce_host"+e;if(!/^[\w\-]*:?\/\//.test(e))if(l=r.base_uri?r.base_uri.path:new o(location.href).directory,""===r.base_uri.protocol)e="//mce_host"+a.toAbsPath(l,e);else e=/([^#?]*)([#?]?.*)/.exec(e),e=(s&&s.protocol||"http")+"://mce_host"+a.toAbsPath(l,e[1])+e[2];if(e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),t(i,function(t,n){var i=e[n];if(i)i=i.replace(/\(mce_at\)/g,"@@");a[t]=i}),s){if(!a.protocol)a.protocol=s.protocol;if(!a.userInfo)a.userInfo=s.userInfo;if(!a.port&&"mce_host"===a.host)a.port=s.port;if(!a.host||"mce_host"===a.host)a.host=s.host;a.source=""}if(u)a.protocol=""}return o.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,n;if("./"===e)return e;if(e=new o(e,{base_uri:t}),"mce_host"!=e.host&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var i=t.getURI(),r=e.getURI();if(i==r||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==r)return i;if(n=t.toRelPath(t.path,e.path),e.query)n+="?"+e.query;if(e.anchor)n+="#"+e.anchor;return n},toAbsolute:function(e,t){return e=new o(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return true;var t=r[this.protocol];if(t&&(this.port||t)==(e.port||t))return true}return false},toRelPath:function(e,t){var n,i=0,r="",o,a;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,a=e.length;o<a;o++)if(o>=n.length||e[o]!=n[o]){i=o+1;break}if(e.length<n.length)for(o=0,a=n.length;o<a;o++)if(o>=e.length||e[o]!=n[o]){i=o+1;break}if(1===i)return t;for(o=0,a=e.length-(i-1);o<a;o++)r+="../";for(o=i-1,a=n.length;o<a;o++)if(o!=i-1)r+="/"+n[o];else r+=n[o];return r},toAbsPath:function(e,n){var i,r=0,o=[],a,s;for(a=/\/$/.test(n)?"/":"",e=e.split("/"),n=n.split("/"),t(e,function(e){if(e)o.push(e)}),e=o,i=n.length-1,o=[];i>=0;i--){if(0===n[i].length||"."===n[i])continue;if(".."===n[i]){r++;continue}if(r>0){r--;continue}o.push(n[i])}if(i=e.length-r,i<=0)s=o.reverse().join("/");else s=e.slice(0,i).join("/")+"/"+o.reverse().join("/");if(0!==s.indexOf("/"))s="/"+s;if(a&&s.lastIndexOf("/")!==s.length-1)s+=a;return s},getURI:function(e){var t,n=this;if(!n.source||e){if(t="",!e){if(n.protocol)t+=n.protocol+"://";else t+="//";if(n.userInfo)t+=n.userInfo+"@";if(n.host)t+=n.host;if(n.port)t+=":"+n.port}if(n.path)t+=n.path;if(n.query)t+="?"+n.query;if(n.anchor)t+="#"+n.anchor;n.source=t}return n.source}},o.parseDataUri=function(e){var t,n;if(e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n)t=n[1];return{type:t,data:e[1]}},o.getDocumentBaseUrl=function(e){var t;if(0!==e.protocol.indexOf("http")&&"file:"!==e.protocol)t=e.href;else t=e.protocol+"//"+e.host+e.pathname;if(/^[^:]+:\/\/\/?[^\/]+\//.test(t))if(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),!/[\/\\]$/.test(t))t+="/";return t},o}),r("tinymce/util/Class",["tinymce/util/Tools"],function(e){var t=e.each,n=e.extend,i,r;function o(){}return o.extend=i=function(e){var o=this,a=o.prototype,s,l,u;function c(){var e,t,n,i=this;if(!r){if(i.init)i.init.apply(i,arguments);if(t=i.Mixins,t){e=t.length;while(e--)if(n=t[e],n.init)n.init.apply(i,arguments)}}}function f(){return this}function d(e,t){return function(){var n=this,i=n._super,r;return n._super=a[e],r=t.apply(n,arguments),n._super=i,r}}if(r=true,s=new o,r=false,e.Mixins)if(t(e.Mixins,function(t){for(var n in t)if("init"!==n)e[n]=t[n]}),a.Mixins)e.Mixins=a.Mixins.concat(e.Mixins);if(e.Methods)t(e.Methods.split(","),function(t){e[t]=f});if(e.Properties)t(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,i;if(e!==i)return t[n]=e,t;return t[n]}});if(e.Statics)t(e.Statics,function(e,t){c[t]=e});if(e.Defaults&&a.Defaults)e.Defaults=n({},a.Defaults,e.Defaults);for(l in e)if(u=e[l],"function"==typeof u&&a[l])s[l]=d(l,u);else s[l]=u;return c.prototype=s,c.constructor=c,c.extend=i,c},o}),r("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(e){var t=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");function n(t){var n=this,i,r={},o;function a(){return false}function s(){return true}i=(t=t||{}).scope||n,o=t.toggleEvent||a;function l(e,n){var o,l,u,f;if(e=e.toLowerCase(),n=n||{},n.type=e,!n.target)n.target=i;if(!n.preventDefault)n.preventDefault=function(){n.isDefaultPrevented=s},n.stopPropagation=function(){n.isPropagationStopped=s},n.stopImmediatePropagation=function(){n.isImmediatePropagationStopped=s},n.isDefaultPrevented=a,n.isPropagationStopped=a,n.isImmediatePropagationStopped=a;if(t.beforeFire)t.beforeFire(n);if(o=r[e],o)for(l=0,u=o.length;l<u;l++){if(f=o[l],f.once)c(e,f.func);if(n.isImmediatePropagationStopped())return n.stopPropagation(),n;if(false===f.func.call(i,n))return n.preventDefault(),n}return n}function u(t,i,s,l){var u,c,f;if(false===i)i=a;if(i){if(i={func:i},l)e.extend(i,l);f=(c=t.toLowerCase().split(" ")).length;while(f--){if(t=c[f],u=r[t],!u)u=r[t]=[],o(t,true);if(s)u.unshift(i);else u.push(i)}}return n}function c(e,t){var i,a,s,l,u;if(e){i=(l=e.toLowerCase().split(" ")).length;while(i--){if(e=l[i],a=r[e],!e){for(s in r)o(s,false),delete r[s];return n}if(a){if(!t)a.length=0;else{u=a.length;while(u--)if(a[u].func===t)a=a.slice(0,u).concat(a.slice(u+1)),r[e]=a}if(!a.length)o(e,false),delete r[e]}}}else{for(e in r)o(e,false);r={}}return n}function f(e,t,n){return u(e,t,n,{once:true})}function d(e){return e=e.toLowerCase(),!(!r[e]||0===r[e].length)}n.fire=l,n.on=u,n.off=c,n.once=f,n.has=d}return n.isNative=function(e){return!!t[e.toLowerCase()]},n}),r("tinymce/data/Binding",[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,i){var r;function o(t){e.set(i,t.value)}function a(e){t.set(n,e.value)}if(e.on("change:"+i,a),t.on("change:"+n,o),r=e._bindings,!r)r=e._bindings=[],e.on("destroy",function(){var e=r.length;while(e--)r[e]()});return r.push(function(){t.off("change:"+n,o)}),t.get(n)}})},e}),r("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(e){function t(t){if(!t._eventDispatcher)t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){if(e.isNative(n)&&t.toggleNativeEvent)t.toggleNativeEvent(n,i)}});return t._eventDispatcher}return{fire:function(e,n,i){var r=this;if(r.removed&&"remove"!==e)return n;if(n=t(r).fire(e,n,i),false!==i&&r.parent){var o=r.parent();while(o&&!n.isPropagationStopped())o.fire(e,n,false),o=o.parent()}return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),r("tinymce/data/ObservableObject",["tinymce/data/Binding","tinymce/util/Observable","tinymce/util/Class","tinymce/util/Tools"],function(e,t,n,i){function r(e){return e.nodeType>0}function o(e,t){var n,a;if(e===t)return true;if(null===e||null===t)return e===t;if("object"!==typeof e||"object"!==typeof t)return e===t;if(i.isArray(t)){if(e.length!==t.length)return false;n=e.length;while(n--)if(!o(e[n],t[n]))return false}if(r(e)||r(t))return e===t;a={};for(n in t){if(!o(e[n],t[n]))return false;a[n]=true}for(n in e)if(!a[n]&&!o(e[n],t[n]))return false;return true}return n.extend({Mixins:[t],init:function(t){var n,i;t=t||{};for(n in t)if(i=t[n],i instanceof e)t[n]=i.create(this,n);this.data=t},set:function(t,n){var i,r,a=this.data[t];if(n instanceof e)n=n.create(this,t);if("object"===typeof t){for(i in t)this.set(i,t[i]);return this}if(!o(a,n))this.data[t]=n,r={target:this,name:t,value:n,oldValue:a},this.fire("change:"+t,r),this.fire("change",r);return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),r("tinymce/ui/Selector",["tinymce/util/Class"],function(e){function t(e){var t=[],n=e.length,i;while(n--)if(i=e[n],!i.__checked)t.push(i),i.__checked=1;n=t.length;while(n--)delete t[n].__checked;return t}var n=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,o,a=e.extend({init:function(e){var t=this.match;function o(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function a(e){if(e)return function(t){return t._name===e}}function s(e){if(e)return e=e.split("."),function(t){var n=e.length;while(n--)if(!t.classes.contains(e[n]))return false;return true}}function l(e,t,n){if(e)return function(i){var r=i[e]?i[e]():"";return!t?!!n:"="===t?r===n:"*="===t?r.indexOf(n)>=0:"~="===t?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===t?r!=n:"^="===t?0===r.indexOf(n):"$="===t?r.substr(r.length-n.length)===n:false}}function u(e){var n;if(e){if(e=/(?:not\((.+)\))|(.+)/i.exec(e),!e[1])return e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:t[e]?t[e]():false};return n=f(e[1],[]),function(e){return!t(e,n)}}}function c(e,t,i){var c;function f(e){if(e)t.push(e)}return c=n.exec(e.replace(r,"")),f(o(c[1])),f(a(c[2])),f(s(c[3])),f(l(c[4],c[5],c[6])),f(u(c[7])),t.pseudo=!!c[7],t.direct=i,t}function f(e,t){var n=[],r,o,a;do{if(i.exec(""),o=i.exec(e),o)if(e=o[3],n.push(o[1]),o[2]){r=o[3];break}}while(o);if(r)f(r,t);for(e=[],a=0;a<n.length;a++)if(">"!=n[a])e.push(c(n[a],[],">"===n[a-1]));return t.push(e),t}this._selectors=f(e,[])},match:function(e,t){var n,i,r,o,a,s,l,u,c,f,d,m,p;for(n=0,i=(t=t||this._selectors).length;n<i;n++){for(p=e,m=0,r=(o=(a=t[n]).length)-1;r>=0;r--){u=a[r];while(p){if(u.pseudo){c=f=(d=p.parent().items()).length;while(c--)if(d[c]===p)break}for(s=0,l=u.length;s<l;s++)if(!u[s](p,c,f)){s=l+1;break}if(s===l){m++;break}else if(r===o-1)break;p=p.parent()}}if(m===o)return true}return false},find:function(e){var n=[],i,r,s=this._selectors;function l(e,t,i){var r,o,a,s,u,c=t[i];for(r=0,o=e.length;r<o;r++){for(u=e[r],a=0,s=c.length;a<s;a++)if(!c[a](u,r,o)){a=s+1;break}if(a===s){if(i==t.length-1)n.push(u);else if(u.items)l(u.items(),t,i+1)}else if(c.direct)return;if(u.items)l(u.items(),t,i)}}if(e.items){for(i=0,r=s.length;i<r;i++)l(e.items(),s[i],0);if(r>1)n=t(n)}if(!o)o=a.Collection;return new o(n)}});return a}),r("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(e,t,n){var i,r,o=Array.prototype.push,a=Array.prototype.slice;return r={length:0,init:function(e){if(e)this.add(e)},add:function(t){var n=this;if(!e.isArray(t))if(t instanceof i)n.add(t.toArray());else o.call(n,t);else o.apply(n,t);return n},set:function(e){var t=this,n=t.length,i;for(t.length=0,t.add(e),i=t.length;i<n;i++)delete t[i];return t},filter:function(e){var n=this,r,o,a=[],s,l;if("string"===typeof e)e=new t(e),l=function(t){return e.match(t)};else l=e;for(r=0,o=n.length;r<o;r++)if(s=n[r],l(s))a.push(s);return new i(a)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){var t=this,n=t.length;while(n--)if(t[n]===e)break;return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].classes.contains(e):false},prop:function(e,t){var n=this,i,r;if(t!==i)return n.each(function(n){if(n[e])n[e](t)}),n;if(r=n[0],r&&r[e])return r[e]()},exec:function(t){var n=this,i=e.toArray(arguments).slice(1);return n.each(function(e){if(e[t])e[t].apply(e,i)}),n},remove:function(){var e=this.length;while(e--)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){r[t]=function(){var n=e.toArray(arguments);return this.each(function(e){if(t in e)e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){r[e]=function(t){return this.prop(e,t)}}),i=n.extend(r),t.Collection=i,i}),r("tinymce/ui/DomUtils",["tinymce/Env","tinymce/util/Tools","tinymce/dom/DOMUtils"],function(e,t,n){var i=0,r={id:function(){return"mceu_"+i++},create:function(e,i,r){var o=document.createElement(e);if(n.DOM.setAttribs(o,i),"string"===typeof r)o.innerHTML=r;else t.each(r,function(e){if(e.nodeType)o.appendChild(e)});return o},createFragment:function(e){return n.DOM.createFragment(e)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return n.DOM.getPos(e,t||r.getContainer())},getContainer:function(){return e.container?e.container:document.body},getViewPort:function(e){return n.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return n.DOM.addClass(e,t)},removeClass:function(e,t){return n.DOM.removeClass(e,t)},hasClass:function(e,t){return n.DOM.hasClass(e,t)},toggleClass:function(e,t,i){return n.DOM.toggleClass(e,t,i)},css:function(e,t,i){return n.DOM.setStyle(e,t,i)},getRuntimeStyle:function(e,t){return n.DOM.getStyle(e,t,true)},on:function(e,t,i,r){return n.DOM.bind(e,t,i,r)},off:function(e,t,i){return n.DOM.unbind(e,t,i)},fire:function(e,t,i){return n.DOM.fire(e,t,i)},innerHtml:function(e,t){n.DOM.setHTML(e,t)}};return r}),r("tinymce/ui/BoxUtils",[],function(){return{parseBox:function(e){var t,n=10;if(!e)return;if("number"===typeof e)return e=e||0,{top:e,left:e,bottom:e,right:e};if(e=e.split(" "),t=e.length,1===t)e[1]=e[2]=e[3]=e[0];else if(2===t)e[2]=e[0],e[3]=e[1];else if(3===t)e[3]=e[1];return{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0}},measureBox:function(e,t){function n(t){var n=document.defaultView;if(n)return t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t);return e.currentStyle[t]}function i(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}}}}),r("tinymce/ui/ClassList",["tinymce/util/Tools"],function(e){function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){if(e&&!this.contains(e))this.cls._map[e]=true,this.cls.push(e),this._change();return this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length;t++)if(this.cls[t]===e)break;this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);if(n!==t){if(n)this.remove(e);else this.add(e);this._change()}return this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++){if(t>0)e+=" ";e+=this.prefix+this.cls[t]}return e},n}),r("tinymce/ui/ReflowQueue",["tinymce/util/Delay"],function(e){var t={},n;return{add:function(i){var r=i.parent();if(r){if(!r._layout||r._layout.isNative())return;if(!t[r._id])t[r._id]=r;if(!n)n=true,e.requestAnimationFrame(function(){var e,i;n=false;for(e in t)if(i=t[e],i.state.get("rendered"))i.reflow();t={}},document.body)}},remove:function(e){if(t[e._id])delete t[e._id]}}}),r("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/data/ObservableObject","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/ui/BoxUtils","tinymce/ui/ClassList","tinymce/ui/ReflowQueue"],function(e,t,n,i,r,o,a,s,l,u){var c="onmousewheel"in document,f=false,d="mce-",m,p=0,h={Statics:{classPrefix:d},isRtl:function(){return m.rtl},classPrefix:d,init:function(e){var n=this,r,o;function u(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)n.classes.add(e[t])}if(n.settings=e=t.extend({},n.Defaults,e),n._id=e.id||"mceu_"+p++,n._aria={role:e.role},n._elmCache={},n.$=a,n.state=new i({visible:true,active:false,disabled:false,value:""}),n.data=new i(e.data),n.classes=new l(function(){if(n.state.get("rendered"))n.getEl().className=this.toString()}),n.classes.prefix=n.classPrefix,r=e.classes,r){if(n.Defaults)if(o=n.Defaults.classes,o&&r!=o)u(o);u(r)}if(t.each("title text name visible disabled active value".split(" "),function(t){if(t in e)n[t](e[t])}),n.on("click",function(){if(n.disabled())return false}),n.settings=e,n.borderBox=s.parseBox(e.border),n.paddingBox=s.parseBox(e.padding),n.marginBox=s.parseBox(e.margin),e.hidden)n.hide()},Properties:"parent,name",getContainerElm:function(){return o.getContainer()},getParentCtrl:function(e){var t,n=this.getRoot().controlIdLookup;while(e&&n){if(t=n[e.id],t)break;e=e.parentNode}return t},initLayoutRect:function(){var e=this,t=e.settings,n,i,r=e.getEl(),a,l,u,c,f,d,m,p;n=e.borderBox=e.borderBox||s.measureBox(r,"border"),e.paddingBox=e.paddingBox||s.measureBox(r,"padding"),e.marginBox=e.marginBox||s.measureBox(r,"margin"),p=o.getSize(r),d=t.minWidth,m=t.minHeight,u=d||p.width,c=m||p.height,a=t.width,l=t.height,f="undefined"!=typeof(f=t.autoResize)?f:!a&&!l,a=a||u,l=l||c;var h=n.left+n.right,g=n.top+n.bottom,v=t.maxWidth||65535,y=t.maxHeight||65535;return e._layoutRect=i={x:t.x||0,y:t.y||0,w:a,h:l,deltaW:h,deltaH:g,contentW:a-h,contentH:l-g,innerW:a-h,innerH:l-g,startMinWidth:d||0,startMinHeight:m||0,minW:Math.min(u,v),minH:Math.min(c,y),maxW:v,maxH:y,autoResize:f,scrollW:0},e._lastLayoutRect={},i},layoutRect:function(e){var t=this,n=t._layoutRect,i,r,o,a,s,l;if(!n)n=t.initLayoutRect();if(e){if(o=n.deltaW,a=n.deltaH,e.x!==s)n.x=e.x;if(e.y!==s)n.y=e.y;if(e.minW!==s)n.minW=e.minW;if(e.minH!==s)n.minH=e.minH;if(r=e.w,r!==s)r=(r=r<n.minW?n.minW:r)>n.maxW?n.maxW:r,n.w=r,n.innerW=r-o;if(r=e.h,r!==s)r=(r=r<n.minH?n.minH:r)>n.maxH?n.maxH:r,n.h=r,n.innerH=r-a;if(r=e.innerW,r!==s)r=(r=r<n.minW-o?n.minW-o:r)>n.maxW-o?n.maxW-o:r,n.innerW=r,n.w=r+o;if(r=e.innerH,r!==s)r=(r=r<n.minH-a?n.minH-a:r)>n.maxH-a?n.maxH-a:r,n.innerH=r,n.h=r+a;if(e.contentW!==s)n.contentW=e.contentW;if(e.contentH!==s)n.contentH=e.contentH;if(i=t._lastLayoutRect,i.x!==n.x||i.y!==n.y||i.w!==n.w||i.h!==n.h){if(l=m.repaintControls,l)if(l.map&&!l.map[t._id])l.push(t),l.map[t._id]=true;i.x=n.x,i.y=n.y,i.w=n.w,i.h=n.h}return t}return n},repaint:function(){var e=this,t,n,i,r,o,a,s,l,u,c;if(u=!document.createRange?Math.round:function(e){return e},t=e.getEl().style,r=e._layoutRect,l=e._lastRepaintRect||{},o=e.borderBox,a=o.left+o.right,s=o.top+o.bottom,r.x!==l.x)t.left=u(r.x)+"px",l.x=r.x;if(r.y!==l.y)t.top=u(r.y)+"px",l.y=r.y;if(r.w!==l.w)c=u(r.w-a),t.width=(c>=0?c:0)+"px",l.w=r.w;if(r.h!==l.h)c=u(r.h-s),t.height=(c>=0?c:0)+"px",l.h=r.h;if(e._hasBody&&r.innerW!==l.innerW){if(c=u(r.innerW),i=e.getEl("body"),i)(n=i.style).width=(c>=0?c:0)+"px";l.innerW=r.innerW}if(e._hasBody&&r.innerH!==l.innerH){if(c=u(r.innerH),i=i||e.getEl("body"),i)(n=n||i.style).height=(c>=0?c:0)+"px";l.innerH=r.innerH}e._lastRepaintRect=l,e.fire("repaint",{},false)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,o.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n=this;function i(e){var t,i;if("string"!=typeof e)return e;return function(r){if(!t)n.parentsAndSelf().each(function(n){var r=n.settings.callbacks;if(r&&(t=r[e]))return i=n,false});if(!t)return r.action=e,void this.fire("execute",r);return t.call(i,r)}}return g(n).on(e,i(t)),n},off:function(e,t){return g(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},!t.control)t.control=i;if(t=g(i).fire(e,t),false!==n&&i.parent){var r=i.parent();while(r&&!t.isPropagationStopped())r.fire(e,t,false),r=r.parent()}return t},hasEventListeners:function(e){return g(this).has(e)},parents:function(e){var t=this,n,i=new r;for(n=t.parent();n;n=n.parent())i.add(n);if(e)i=i.filter(e);return i},parentsAndSelf:function(e){return new r(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;if(!this._elmCache[t])this._elmCache[t]=a("#"+t)[0];return this._elmCache[t]},show:function(){return this.visible(true)},hide:function(){return this.visible(false)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);if("undefined"===typeof t)return n._aria[e];if(n._aria[e]=t,n.state.get("rendered"))i.setAttribute("role"==e?e:"aria-"+e,t);return n},encode:function(e,t){if(false!==t)e=this.translate(e);return(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return m.translate?m.translate(e):e},before:function(e){var t=this,n=t.parent();if(n)n.insert(e,n.items().indexOf(t),true);return t},after:function(e){var t=this,n=t.parent();if(n)n.insert(e,n.items().indexOf(t));return t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),i,r;if(e.items){var o=e.items().toArray();r=o.length;while(r--)o[r].remove()}if(n&&n.items)i=[],n.items().each(function(t){if(t!==e)i.push(t)}),n.items().set(i),n._lastRect=null;if(e._eventsRoot&&e._eventsRoot==e)a(t).off();var s=e.getRoot().controlIdLookup;if(s)delete s[e._id];if(t&&t.parentNode)t.parentNode.removeChild(t);return e.state.set("rendered",false),e.state.destroy(),e.fire("remove"),e},renderBefore:function(e){return a(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return a(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e=this,t=e.settings,n,i,r,o,s;e.$el=a(e.getEl()),e.state.set("rendered",true);for(o in t)if(0===o.indexOf("on"))e.on(o.substr(2),t[o]);if(e._eventsRoot){for(r=e.parent();!s&&r;r=r.parent())s=r._eventsRoot;if(s)for(o in s._nativeEvents)e._nativeEvents[o]=true}if(v(e),t.style)if(n=e.getEl(),n)n.setAttribute("style",t.style),n.style.cssText=t.style;if(e.settings.border)i=e.borderBox,e.$el.css({"border-top-width":i.top,"border-right-width":i.right,"border-bottom-width":i.bottom,"border-left-width":i.left});var l=e.getRoot();if(!l.controlIdLookup)l.controlIdLookup={};l.controlIdLookup[e._id]=e;for(var c in e._aria)e.aria(c,e._aria[c]);if(false===e.state.get("visible"))e.getEl().style.display="none";e.bindStates(),e.state.on("change:visible",function(t){var n=t.value,i;if(e.state.get("rendered"))e.getEl().style.display=false===n?"none":"",e.getEl().getBoundingClientRect();if(i=e.parent(),i)i._lastRect=null;e.fire(n?"show":"hide"),u.add(e)}),e.fire("postrender",{},false)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,i,r=e;n=i=0;while(r&&r!=t&&r.nodeType)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}var n=this.getEl(),i=n.parentNode,r,o,a,s,l,u,c=t(n,i);if(r=c.x,o=c.y,a=n.offsetWidth,s=n.offsetHeight,l=i.clientWidth,u=i.clientHeight,"end"==e)r-=l-a,o-=u-s;else if("center"==e)r-=l/2-a/2,o-=u/2-s/2;return i.scrollLeft=r,i.scrollTop=o,this},getRoot:function(){var e=this,t,n=[];while(e){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}if(!t)t=this;var i=n.length;while(i--)n[i].rootControl=t;return t},reflow:function(){u.remove(this);var e=this.parent();if(e._layout&&!e._layout.isNative())e.reflow();return this}};t.each("text title visible disabled active value".split(" "),function(e){h[e]=function(t){if(0===arguments.length)return this.state.get(e);if("undefined"!=typeof t)this.state.set(e,t);return this}});function g(e){if(!e._eventDispatcher)e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){if(i&&n.isNative(t)){if(!e._nativeEvents)e._nativeEvents={};if(e._nativeEvents[t]=true,e.state.get("rendered"))v(e)}}});return e._eventDispatcher}function v(e){var t,n,i,r,o,s;function l(t){var n=e.getParentCtrl(t.target);if(n)n.fire(t.type,t)}function u(){var e=r._lastHoverCtrl;if(e)e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),r._lastHoverCtrl=null}function d(t){var n=e.getParentCtrl(t.target),i=r._lastHoverCtrl,o=0,a,s,l;if(n!==i){if(r._lastHoverCtrl=n,s=n.parents().toArray().reverse(),s.push(n),i){for((l=i.parents().toArray().reverse()).push(i),o=0;o<l.length;o++)if(s[o]!==l[o])break;for(a=l.length-1;a>=o;a--)(i=l[a]).fire("mouseleave",{target:i.getEl()})}for(a=o;a<s.length;a++)(n=s[a]).fire("mouseenter",{target:n.getEl()})}}function m(t){if(t.preventDefault(),"mousewheel"==t.type){if(t.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX)t.deltaX=-1/40*t.wheelDeltaX}else t.deltaX=0,t.deltaY=t.detail;t=e.fire("wheel",t)}if(o=e._nativeEvents,o){for((i=e.parents().toArray()).unshift(e),t=0,n=i.length;!r&&t<n;t++)r=i[t]._eventsRoot;if(!r)r=i[i.length-1]||e;for(e._eventsRoot=r,n=t,t=0;t<n;t++)i[t]._eventsRoot=r;var p=r._delegates;if(!p)p=r._delegates={};for(s in o){if(!o)return false;if("wheel"===s&&!f){if(c)a(e.getEl()).on("mousewheel",m);else a(e.getEl()).on("DOMMouseScroll",m);continue}if("mouseenter"===s||"mouseleave"===s){if(!r._hasMouseEnter)a(r.getEl()).on("mouseleave",u).on("mouseover",d),r._hasMouseEnter=1}else if(!p[s])a(r.getEl()).on(s,l),p[s]=true;o[s]=false}}}return m=e.extend(h)}),r("tinymce/ui/Factory",[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,i){var r,o,a;if(!t){a=tinymce.ui;for(o in a)e[o.toLowerCase()]=a[o];t=true}if("string"==typeof n)(i=i||{}).type=n;else n=(i=n).type;if(n=n.toLowerCase(),r=e[n],!r)throw new Error("Could not find control by type: "+n);return r=new r(i),r.type=n,r}}}),r("tinymce/ui/KeyboardNavigation",[],function(){return function(e){var t=e.root,n,i;function r(e){return e&&1===e.nodeType}try{n=document.activeElement}catch(e){n=document.body}i=t.getParentCtrl(n);function o(e){if(e=e||n,r(e))return e.getAttribute("role");return null}function a(e){var t,i=e||n;while(i=i.parentNode)if(t=o(i))return t}function s(e){var t=n;if(r(t))return t.getAttribute("aria-"+e)}function l(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function u(e){if(l(e)&&!e.hidden)return true;if(/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(e)))return true;return false}function c(e){var n=[];function i(e){if(1!=e.nodeType||"none"==e.style.display||e.disabled)return;if(u(e))n.push(e);for(var t=0;t<e.childNodes.length;t++)i(e.childNodes[t])}return i(e||t.getEl()),n}function f(e){var t,n;(n=(e=e||i).parents().toArray()).unshift(e);for(var r=0;r<n.length;r++)if(t=n[r],t.settings.ariaRoot)break;return t}function d(e){var t=f(e),n=c(t.getEl());if(t.settings.ariaRemember&&"lastAriaIndex"in t)m(t.lastAriaIndex,n);else m(0,n)}function m(e,t){if(e<0)e=t.length-1;else if(e>=t.length)e=0;if(t[e])t[e].focus();return e}function p(e,t){var i=-1,r=f();t=t||c(r.getEl());for(var o=0;o<t.length;o++)if(t[o]===n)i=o;i+=e,r.lastAriaIndex=m(i,t)}function h(){if("tablist"==a())p(-1,c(n.parentNode));else if(i.parent().submenu)w();else p(-1)}function g(){var e=o(),t=a();if("tablist"==t)p(1,c(n.parentNode));else if("menuitem"==e&&"menu"==t&&s("haspopup"))C();else p(1)}function v(){p(-1)}function y(){var e=o(),t=a();if("menuitem"==e&&"menubar"==t)C();else if("button"==e&&s("haspopup"))C({key:"down"});else p(1)}function b(e){if("tablist"==a()){var t=c(i.getEl("body"))[0];if(t)t.focus()}else p(e.shiftKey?-1:1)}function w(){i.fire("cancel")}function C(e){e=e||{},i.fire("click",{target:n,aria:e})}return t.on("keydown",function(e){function t(e,t){if(l(n))return;if("slider"===o(n))return;if(false!==t(e))e.preventDefault()}if(e.isDefaultPrevented())return;switch(e.keyCode){case 37:t(e,h);break;case 39:t(e,g);break;case 38:t(e,v);break;case 40:t(e,y);break;case 27:w();break;case 14:case 13:case 32:t(e,C);break;case 9:if(false!==b(e))e.preventDefault()}}),t.on("focusin",function(e){n=e.target,i=e.control}),{focusFirst:d}}}),r("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/dom/DomQuery","tinymce/ui/ClassList","tinymce/ui/ReflowQueue"],function(e,t,n,i,r,o,a,s,l){var u={};return e.extend({init:function(e){var n=this;if(n._super(e),e=n.settings,e.fixed)n.state.set("fixed",true);if(n._items=new t,n.isRtl())n.classes.add("rtl");if(n.bodyClasses=new s(function(){if(n.state.get("rendered"))n.getEl("body").className=this.toString()}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls)n.classes.add(e.containerCls);if(n._layout=i.create((e.layout||"")+"layout"),n.settings.items)n.add(n.settings.items);else n.add(n.render());n._hasBody=true},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,i,r;if(e)if(i=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav,i)return void i.focusFirst(t);if(r=t.find("*"),t.statusbar)r.add(t.statusbar.items());if(r.each(function(e){if(e.settings.autofocus)return n=null,false;if(e.canFocus)n=n||e}),n)n.focus();return t},replace:function(e,t){var n,i=this.items(),r=i.length;while(r--)if(i[r]===e){i[r]=t;break}if(r>=0){if(n=t.getEl(),n)n.parentNode.removeChild(n);if(n=e.getEl(),n)n.parentNode.removeChild(n)}t.parent(this)},create:function(t){var n=this,r,a=[];if(!o.isArray(t))t=[t];return o.each(t,function(t){if(t){if(!(t instanceof e)){if("string"==typeof t)t={type:t};r=o.extend({},n.settings.defaults,t),t.type=r.type=r.type||t.type||n.settings.defaultType||(r.defaults?r.defaults.type:null),t=i.create(r)}a.push(t)}}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var i;if(t.parent(e),!t.state.get("rendered")){if(i=e.getEl("body"),i.hasChildNodes()&&n<=i.childNodes.length-1)a(i.childNodes[n]).before(t.renderHtml());else a(i).append(t.renderHtml());t.postRender(),l.add(t)}}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i=this,r,o,a;if(e=i.create(e),r=i.items(),!n&&t<r.length-1)t+=1;if(t>=0&&t<r.length)o=r.slice(0,t).toArray(),a=r.slice(t).toArray(),r.set(o.concat(e,a));return i.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e={};return this.find("*").each(function(t){var n=t.name(),i=t.value();if(n&&"undefined"!=typeof i)e[n]=i}),e},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+">"+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this,t;if(e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",true),e.settings.style)e.$el.css(e.settings.style);if(e.settings.border)t=e.borderBox,e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left});if(!e.parent())e.keyboardNav=new r({root:e});return e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},true},reflow:function(){var t;if(l.remove(this),this.visible()){e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;while(t--)e.repaintControls[t].repaint();if("flow"!==this.settings.layout&&"stack"!==this.settings.layout)this.repaint();e.repaintControls=[]}return this}})}),r("tinymce/ui/DragHelper",["tinymce/dom/DomQuery"],function(e){function t(e){var t,n,i,r,o,a,s,l,u=Math.max;return t=e.documentElement,n=e.body,i=u(t.scrollWidth,n.scrollWidth),r=u(t.clientWidth,n.clientWidth),o=u(t.offsetWidth,n.offsetWidth),a=u(t.scrollHeight,n.scrollHeight),s=u(t.clientHeight,n.clientHeight),l=u(t.offsetHeight,n.offsetHeight),{width:i<o?r:i,height:a<l?s:a}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(i,r){var o,a=r.document||document,s,l,u,c,f,d;r=r||{};function m(){return a.getElementById(r.handle||i)}l=function(i){var l=t(a),p,h;if(n(i),i.preventDefault(),s=i.button,p=m(),f=i.screenX,d=i.screenY,window.getComputedStyle)h=window.getComputedStyle(p,null).getPropertyValue("cursor");else h=p.runtimeStyle.cursor;o=e("<div></div>").css({position:"absolute",top:0,left:0,width:l.width,height:l.height,zIndex:2147483647,opacity:1e-4,cursor:h}).appendTo(a.body),e(a).on("mousemove touchmove",c).on("mouseup touchend",u),r.start(i)},c=function(e){if(n(e),e.button!==s)return u(e);e.deltaX=e.screenX-f,e.deltaY=e.screenY-d,e.preventDefault(),r.drag(e)},u=function(t){if(n(t),e(a).off("mousemove touchmove",c).off("mouseup touchend",u),o.remove(),r.stop)r.stop(t)},this.destroy=function(){e(m()).off()},e(m()).on("mousedown touchstart",l)}}),r("tinymce/ui/Scrollable",["tinymce/dom/DomQuery","tinymce/ui/DragHelper"],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){var n=this,i=2;function r(){var t,r,o;function a(o,a,s,l,u,c){var f,d,m,p,h,g,v,y,b;if(d=n.getEl("scroll"+o),d){if(y=a.toLowerCase(),b=s.toLowerCase(),e(n.getEl("absend")).css(y,n.layoutRect()[l]-1),!u)return void e(d).css("display","none");e(d).css("display","block"),f=n.getEl("body"),m=n.getEl("scroll"+o+"t"),p=f["client"+s]-2*i,g=(p-=t&&r?d["client"+c]:0)/(h=f["scroll"+s]),(v={})[y]=f["offset"+a]+i,v[b]=p,e(d).css(v),(v={})[y]=f["scroll"+a]*g,v[b]=p*g,e(m).css(v)}}o=n.getEl("body"),t=o.scrollWidth>o.clientWidth,r=o.scrollHeight>o.clientHeight,a("h","Left","Width","contentW",t,"Height"),a("v","Top","Height","contentH",r,"Width")}function o(){function r(r,o,a,s,l){var u,c=n._id+"-scroll"+r,f=n.classPrefix;e(n.getEl()).append('<div id="'+c+'" class="'+f+"scrollbar "+f+"scrollbar-"+r+'">'+'<div id="'+c+'t" class="'+f+'scrollbar-thumb"></div>'+"</div>"),n.draghelper=new t(c+"t",{start:function(){u=n.getEl("body")["scroll"+o],e("#"+c).addClass(f+"active")},drag:function(e){var t,c,f,d,m=n.layoutRect();c=m.contentW>m.innerW,f=m.contentH>m.innerH,d=n.getEl("body")["client"+a]-2*i,t=(d-=c&&f?n.getEl("scroll"+r)["client"+l]:0)/n.getEl("body")["scroll"+a],n.getEl("body")["scroll"+o]=u+e["delta"+s]/t},stop:function(){e("#"+c).removeClass(f+"active")}})}n.classes.add("scroll"),r("v","Top","Height","Y","Width"),r("h","Left","Width","X","Height")}if(n.settings.autoScroll){if(!n._hasScroll)n._hasScroll=true,o(),n.on("wheel",function(e){var t=n.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,r()}),e(n.getEl("body")).on("scroll",r);r()}}}}),r("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;if(e.preRender(),t.preRender(e),"undefined"==typeof n)n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>";else{if("function"==typeof n)n=n.call(e);e._hasBody=false}return'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),r("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(e){function t(t,n,i){var r,o,a,s,l,u,c,f,d,m;if(d=e.getViewPort(),o=e.getPos(n),a=o.x,s=o.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position"))a-=d.x,s-=d.y;if(r=t.getEl(),m=e.getSize(r),l=m.width,u=m.height,m=e.getSize(n),c=m.width,f=m.height,i=(i||"").split(""),"b"===i[0])s+=f;if("r"===i[1])a+=c;if("c"===i[0])s+=Math.round(f/2);if("c"===i[1])a+=Math.round(c/2);if("b"===i[3])s-=u;if("r"===i[4])a-=l;if("c"===i[3])s-=Math.round(u/2);if("c"===i[4])a-=Math.round(l/2);return{x:a,y:s,w:l,h:u}}return{testMoveRel:function(n,i){for(var r=e.getViewPort(),o=0;o<i.length;o++){var a=t(this,n,i[o]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<r.w&&a.y>0&&a.y+a.h<r.h)return i[o]}else if(a.x>r.x&&a.x+a.w<r.w+r.x&&a.y>r.y&&a.y+a.h<r.h+r.y)return i[o]}return i[0]},moveRel:function(e,n){if("string"!=typeof n)n=this.testMoveRel(e,n);var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(t,n){var i=this;function r(e,t,n){if(e<0)return 0;if(e+n>t)return e=t-n,e<0?0:e;return e}if(i.settings.constrainToViewport){var o=e.getViewPort(window),a=i.layoutRect();t=r(t,o.w+o.x,a.w),n=r(n,o.h+o.y,a.h)}if(i.state.get("rendered"))i.layoutRect({x:t,y:n}).repaint();else i.settings.x=t,i.settings.y=n;return i.fire("move",{x:t,y:n}),i}}}),r("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=true,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var i=e.getWindowSize();t=t<=1?t*i.w:t,n=n<=1?n*i.h:n}return this._layoutRect.autoResize=false,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}}}),r("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/util/Delay"],function(e,t,n,i,r,o){var a,s,l,u=[],c=[],f;function d(e,t){while(e){if(e==t)return true;e=e.parent()}}function m(e){var t=u.length;while(t--){var n=u[t],i=n.getParentCtrl(e.target);if(n.settings.autohide){if(i)if(d(i,n)||n.parent()===i)continue;if(e=n.fire("autohide",{target:e.target}),!e.isDefaultPrevented())n.hide()}}}function p(){if(!a)a=function(e){if(2==e.button)return;m(e)},r(document).on("click touchstart",a)}function h(){if(!s)s=function(){var e;e=u.length;while(e--)v(u[e])},r(window).on("scroll",s)}function g(){if(!l){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;l=function(){if(!document.all||t!=e.clientWidth||n!=e.clientHeight)t=e.clientWidth,n=e.clientHeight,b.hideAll()},r(window).on("resize",l)}}function v(e){var t=i.getViewPort().y;function n(t,n){for(var i,r=0;r<u.length;r++)if(u[r]!=e){i=u[r].parent();while(i&&(i=i.parent()))if(i==e)u[r].fixed(t).moveBy(0,n).repaint()}}if(e.settings.autofix)if(!e.state.get("fixed")){if(e._autoFixY=e.layoutRect().y,e._autoFixY<t)e.fixed(true).layoutRect({y:0}).repaint(),n(true,t-e._autoFixY)}else if(e._autoFixY>t)e.fixed(false).layoutRect({y:e._autoFixY}).repaint(),n(false,e._autoFixY-t)}function y(e,t){var n,i=b.zIndex||65535,o;if(e)c.push(t);else{n=c.length;while(n--)if(c[n]===t)c.splice(n,1)}if(c.length)for(n=0;n<c.length;n++){if(c[n].modal)i++,o=c[n];c[n].getEl().style.zIndex=i,c[n].zIndex=i,i++}var a=r("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];if(o)r(a).css("z-index",o.zIndex-1);else if(a)a.parentNode.removeChild(a),f=false;b.currentZIndex=i}var b=e.extend({Mixins:[t,n],init:function(e){var t=this;if(t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide)p(),g(),u.push(t);if(e.autofix)h(),t.on("move",function(){v(this)});if(t.on("postrender show",function(e){if(e.control==t){var n,i=t.classPrefix;if(t.modal&&!f){if(n=r("#"+i+"modal-block",t.getContainerElm()),!n[0])n=r('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(t.getContainerElm());o.setTimeout(function(){n.addClass(i+"in"),r(t.getEl()).addClass(i+"in")}),f=true}y(true,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(true),false})}),e.popover)t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start");t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=i.getViewPort();if(e)t.layoutRect().y-=n.y;else t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e=this,t,n=e._super();t=u.length;while(t--)if(u[t]===e)break;if(-1===t)u.push(e);return n},hide:function(){return w(this),y(false,this),this._super()},hideAll:function(){b.hideAll()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented())e.remove(),y(false,e);return e},remove:function(){w(this),this._super()},postRender:function(){var e=this;if(e.settings.bodyRole)this.getEl("body").setAttribute("role",e.settings.bodyRole);return e._super()}});b.hideAll=function(){var e=u.length;while(e--){var t=u[e];if(t&&t.settings.autohide)t.hide(),u.splice(e,1)}};function w(e){var t;t=u.length;while(t--)if(u[t]===e)u.splice(t,1);t=c.length;while(t--)if(c[t]===e)c.splice(t,1)}return b}),r("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/ui/DragHelper","tinymce/ui/BoxUtils","tinymce/Env","tinymce/util/Delay"],function(e,t,n,i,r,o,a,s){var l=[],u="";function c(e){var t="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",n=i("meta[name=viewport]")[0],r;if(false===a.overrideViewPort)return;if(!n)(n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n);if(r=n.getAttribute("content"),r&&"undefined"!=typeof u)u=r;n.setAttribute("content",e?t:u)}function f(e,t){if(d()&&false===t)i([document.documentElement,document.body]).removeClass(e+"fullscreen")}function d(){for(var e=0;e<l.length;e++)if(l[e]._fullscreen)return true;return false}function m(){if(!a.desktop){var e={w:window.innerWidth,h:window.innerHeight};s.setInterval(function(){var t=window.innerWidth,n=window.innerHeight;if(e.w!=t||e.h!=n)e={w:t,h:n},i(window).trigger("resize")},100)}function t(){var e,t=n.getWindowSize(),i;for(e=0;e<l.length;e++)i=l[e].layoutRect(),l[e].moveTo(l[e].settings.x||Math.max(0,t.w/2-i.w/2),l[e].settings.y||Math.max(0,t.h/2-i.h/2))}i(window).on("resize",t)}var p=e.extend({modal:true,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var i=this;if(i._super(e),i.isRtl())i.classes.add("rtl");if(i.classes.add("window"),i.bodyClasses.add("window-body"),i.state.set("fixed",true),e.buttons)i.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),i.statusbar.classes.add("foot"),i.statusbar.parent(i);i.on("click",function(e){var t=i.classPrefix+"close";if(n.hasClass(e.target,t)||n.hasClass(e.target.parentNode,t))i.close()}),i.on("cancel",function(){i.close()}),i.aria("describedby",i.describedBy||i._id+"-none"),i.aria("label",e.title),i._fullscreen=false},recalc:function(){var e=this,t=e.statusbar,i,r,o,a;if(e._fullscreen)e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH;if(e._super(),i=e.layoutRect(),e.settings.title&&!e._fullscreen)if(r=i.headerW,r>i.w)o=i.x-Math.max(0,r/2),e.layoutRect({w:r,x:o}),a=true;if(t)if(t.layoutRect({w:e.layoutRect().innerW}).recalc(),r=t.layoutRect().minW+i.deltaW,r>i.w)o=i.x-Math.max(0,r-i.w),e.layoutRect({w:r,x:o}),a=true;if(a)e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),i=0,r;if(e.settings.title&&!e._fullscreen){r=e.getEl("head");var o=n.getSize(r);t.headerW=o.width,t.headerH=o.height,i+=t.headerH}if(e.statusbar)i+=e.statusbar.layoutRect().h;t.deltaH+=i,t.minH+=i,t.h+=i;var a=n.getWindowSize();return t.x=e.settings.x||Math.max(0,a.w/2-t.w/2),t.y=e.settings.y||Math.max(0,a.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,r=e.settings,o="",a="",s=r.html;if(e.preRender(),t.preRender(e),r.title)o='<div id="'+n+'-head" class="'+i+'window-head">'+'<div id="'+n+'-title" class="'+i+'title">'+e.encode(r.title)+"</div>"+'<div id="'+n+'-dragh" class="'+i+'dragh"></div>'+'<button type="button" class="'+i+'close" aria-hidden="true">'+'<i class="mce-ico mce-i-remove"></i>'+"</button>"+"</div>";if(r.url)s='<iframe src="'+r.url+'" tabindex="-1"></iframe>';if("undefined"==typeof s)s=t.renderHtml(e);if(e.statusbar)a=e.statusbar.renderHtml();return'<div id="'+n+'" class="'+e.classes+'" hidefocus="1">'+'<div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div>"+"</div>"},fullscreen:function(e){var t=this,r=document.documentElement,a,l=t.classPrefix,u;if(e!=t._fullscreen)if(i(window).on("resize",function(){var e;if(t._fullscreen)if(!a){e=(new Date).getTime();var i=n.getWindowSize();if(t.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-e>50)a=true}else if(!t._timer)t._timer=s.setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50)}),u=t.layoutRect(),t._fullscreen=e,!e)t.borderBox=o.parseBox(t.settings.border),t.getEl("head").style.display="",u.deltaH+=u.headerH,i([r,document.body]).removeClass(l+"fullscreen"),t.classes.remove("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);else{t._initial={x:u.x,y:u.y,w:u.w,h:u.h},t.borderBox=o.parseBox("0"),t.getEl("head").style.display="none",u.deltaH-=u.headerH+2,i([r,document.body]).addClass(l+"fullscreen"),t.classes.add("fullscreen");var c=n.getWindowSize();t.moveTo(0,0).resizeTo(c.w,c.h)}return t.reflow()},postRender:function(){var e=this,t;if(setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar)e.statusbar.postRender();e.focus(),this.dragHelper=new r(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){if(!t.isDefaultPrevented())e.close()}),l.push(e),c(true)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t;if(e.dragHelper.destroy(),e._super(),e.statusbar)this.statusbar.remove();f(e.classPrefix,false),t=l.length;while(t--)if(l[t]===e)l.splice(t,1);c(l.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return m(),p}),r("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:true,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:true,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var i,r=n.callback||function(){};function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(n.buttons){case t.OK_CANCEL:i=[o("Ok",true,true),o("Cancel",false)];break;case t.YES_NO:case t.YES_NO_CANCEL:if(i=[o("Yes",1,true),o("No",0)],n.buttons==t.YES_NO_CANCEL)i.push(o("Cancel",-1));break;default:i=[o("Ok",true,true)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:true,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(false)}}).renderTo(document.body).reflow()},alert:function(e,n){if("string"==typeof e)e={text:e};return e.callback=n,t.msgBox(e)},confirm:function(e,n){if("string"==typeof e)e={text:e};return e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(e,t){return function(n){var i=this,r=[];function o(){if(r.length)return r[r.length-1]}function a(e){n.fire("OpenWindow",{win:e})}function s(e){n.fire("CloseWindow",{win:e})}i.windows=r,n.on("remove",function(){var e=r.length;while(e--)r[e].close()}),i.open=function(t,i){var o;if(n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url)t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10);if(t.body)t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands};if(!t.url&&!t.buttons)t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}];if(o=new e(t),r.push(o),o.on("close",function(){var e=r.length;while(e--)if(r[e]===o)r.splice(e,1);if(!r.length)n.focus();s(o)}),t.data)o.on("postRender",function(){this.find("*").each(function(e){var n=e.name();if(n in t.data)e.value(t.data[n])})});if(o.features=t||{},o.params=i||{},1===r.length)n.nodeChanged();return o=o.renderTo().reflow(),a(o),o},i.alert=function(e,i,r){var o;(o=t.alert(e,function(){if(i)i.call(r||this);else n.focus()})).on("close",function(){s(o)}),a(o)},i.confirm=function(e,n,i){var r;(r=t.confirm(e,function(e){n.call(i||this,e)})).on("close",function(){s(r)}),a(r)},i.close=function(){if(o())o().close()},i.getParams=function(){return o()?o().params:null},i.setParams=function(e){if(o())o().params=e},i.getWindows=function(){return r}}}),r("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div>"+"</div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65535+65535}})}),r("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(e,t){var n,i=e.extend({init:function(e){var t=this;if(t._super(e),e=t.settings,t.canFocus=true,e.tooltip&&false!==i.tooltips)t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var r=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"==r),i.classes.toggle("tooltip-nw","bc-tl"==r),i.classes.toggle("tooltip-ne","bc-tr"==r),i.moveRel(t.getEl(),r)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()});t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){if(!n)(n=new t({type:"tooltip"})).renderTo();return n},postRender:function(){var e=this,t=e.settings;if(e._super(),!e.parent()&&(t.width||t.height))e.initLayoutRect(),e.repaint();if(t.autofocus)e.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}if(e.state.on("change:disabled",function(e){t(e.value)}),e.state.on("change:active",function(e){n(e.value)}),e.state.get("disabled"))t(true);if(e.state.get("active"))n(true);return e._super()},remove:function(){if(this._super(),n)n.remove(),n=null}});return i}),r("tinymce/ui/Progress",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{value:0},init:function(e){var t=this;if(t._super(e),t.classes.add("progress"),!t.settings.filter)t.settings.filter=function(e){return Math.round(e)}},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'">'+'<div class="'+n+'bar-container">'+'<div class="'+n+'bar"></div>'+"</div>"+'<div class="'+n+'text">0%</div>'+"</div>"},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",function(e){t(e.value)}),t(e.state.get("value")),e._super()}})}),r("tinymce/ui/Notification",["tinymce/ui/Control","tinymce/ui/Movable","tinymce/ui/Progress","tinymce/util/Delay"],function(e,t,n,i){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;if(t._super(e),e.text)t.text(e.text);if(e.icon)t.icon=e.icon;if(e.color)t.color=e.color;if(e.type)t.classes.add("notification-"+e.type);if(e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton)t.closeButton=false;else t.classes.add("has-close"),t.closeButton=true;if(e.progressBar)t.progressBar=new n;t.on("click",function(e){if(-1!=e.target.className.indexOf(t.classPrefix+"close"))t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",i="",r="",o="";if(e.icon)n='<i class="'+t+"ico"+" "+t+"i-"+e.icon+'"></i>';if(e.color)o=' style="background-color: '+e.color+'"';if(e.closeButton)i='<button type="button" class="'+t+'close" aria-hidden="true">×</button>';if(e.progressBar)r=e.progressBar.renderHtml();return'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+r+i+"</div>"},postRender:function(){var e=this;return i.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var e=this;if(e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar)e.progressBar.bindStates();return e._super()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented())e.remove();return e},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65535-1}})}),r("tinymce/NotificationManager",["tinymce/ui/Notification","tinymce/util/Delay","tinymce/util/Tools"],function(e,t,n){return function(i){var r=this,o=[];function a(){if(o.length)return o[o.length-1]}r.notifications=o;function s(){t.requestAnimationFrame(function(){l(),u()})}function l(){for(var e=0;e<o.length;e++)o[e].moveTo(0,0)}function u(){if(o.length>0){var e=o.slice(0,1)[0],t=i.inline?i.getElement():i.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),o.length>1)for(var n=1;n<o.length;n++)o[n].moveRel(o[n-1].getEl(),"bc-tc")}}i.on("remove",function(){var e=o.length;while(e--)o[e].close()}),i.on("ResizeEditor",u),i.on("ResizeWindow",s),r.open=function(t){if(i.removed)return;var n;i.editorManager.setActive(i);var r=c(o,t);if(null===r){if(n=new e(t),o.push(n),t.timeout>0)n.timer=setTimeout(function(){n.close()},t.timeout);n.on("close",function(){var e=o.length;if(n.timer)i.getWin().clearTimeout(n.timer);while(e--)if(o[e]===n)o.splice(e,1);u()}),n.renderTo(),u()}else n=r;return n},r.close=function(){if(a())a().close()},r.getNotifications=function(){return o},i.on("SkinLoaded",function(){var e=i.settings.service_message;if(e)i.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})});function c(e,t){if(!d(t))return null;var i=n.grep(e,function(e){return f(t,e)});return 0===i.length?null:i[0]}function f(e,t){return e.type===t.settings.type&&e.text===t.settings.text}function d(e){return!e.progressBar&&!e.timeout}}}),r("tinymce/dom/NodePath",["tinymce/dom/DOMUtils"],function(e){function t(t,n,i){for(var r=[];n&&n!=t;n=n.parentNode)r.push(e.nodeIndex(n,i));return r}function n(e,t){var n,i,r;for(i=e,n=t.length-1;n>=0;n--){if(r=i.childNodes,t[n]>r.length-1)return null;i=r[t[n]]}return i}return{create:t,resolve:n}}),r("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker","tinymce/dom/NodePath","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/util/Delay","tinymce/caret/CaretContainer","tinymce/caret/CaretPosition","tinymce/caret/CaretWalker"],function(e,t,n,i,r,o,a,s,l,u,c,f){return function(d){var m=s.each,p=d.$,h=e.BACKSPACE,g=e.DELETE,v=d.dom,y=d.selection,b=d.settings,w=d.parser,C=d.serializer,x=a.gecko,k=a.ie,N=a.webkit,E="data:text/mce-internal,",S=k?"Text":"URL";function T(e,t){try{d.getDoc().execCommand(e,false,t)}catch(e){}}function _(){var e=d.getDoc().documentMode;return e?e:6}function R(e){return e.isDefaultPrevented()}function B(e){var t,n;if(e.dataTransfer){if(d.selection.isCollapsed()&&"IMG"==e.target.tagName)y.select(e.target);if(t=d.selection.getContent(),t.length>0)n=E+escape(d.id)+","+escape(t),e.dataTransfer.setData(S,n)}}function A(e){var t;if(e.dataTransfer)if(t=e.dataTransfer.getData(S),t&&t.indexOf(E)>=0)return t=t.substr(E.length).split(","),{id:unescape(t[0]),html:unescape(t[1])};return null}function D(e){if(d.queryCommandSupported("mceInsertClipboardContent"))d.execCommand("mceInsertClipboardContent",false,{content:e});else d.execCommand("mceInsertContent",false,e)}function P(){var r=d.getDoc(),o=d.dom,u=d.selection,c=window.MutationObserver,f,m;if(!c)f=true,c=function(){var e=[],t;function n(t){var n=t.relatedNode||t.target;e.push({target:n,addedNodes:[n]})}function i(t){var n=t.relatedNode||t.target;e.push({target:n,attributeName:t.attrName})}this.observe=function(e){(t=e).addEventListener("DOMSubtreeModified",n,false),t.addEventListener("DOMNodeInsertedIntoDocument",n,false),t.addEventListener("DOMNodeInserted",n,false),t.addEventListener("DOMAttrModified",i,false)},this.disconnect=function(){t.removeEventListener("DOMSubtreeModified",n,false),t.removeEventListener("DOMNodeInsertedIntoDocument",n,false),t.removeEventListener("DOMNodeInserted",n,false),t.removeEventListener("DOMAttrModified",i,false)},this.takeRecords=function(){return e}};function v(e){var t=o.schema.getBlockElements(),n=d.getBody();if("BR"!=e.nodeName)return false;for(;e!=n&&!t[e.nodeName];e=e.parentNode)if(e.nextSibling)return false;return true}function y(e,t){var n;for(n=e.nextSibling;n&&n!=t;n=n.nextSibling){if(3==n.nodeType&&0===p.trim(n.data).length)continue;if(n!==t)return false}return n===t}function b(e,t,i){var r,a,s;if(!o.isChildOf(e,d.getBody()))return;s=o.schema.getNonEmptyElements(),r=new n(i||e,e);while(a=r[t?"next":"prev"]()){if(s[a.nodeName]&&!v(a))return a;if(3==a.nodeType&&a.data.length>0)return a}}function w(e){var n,i,r,a,s;if(e.collapsed)return;var l=o.getRoot();if(!o.isChildOf(e.startContainer,l))if(l.firstChild)e.setStartBefore(l.firstChild);else e.setStart(l,0);if(!o.isChildOf(e.endContainer,l))if(l.lastChild)e.setEndAfter(l.lastChild);else e.setEnd(l,0);if(n=o.getParent(t.getNode(e.startContainer,e.startOffset),o.isBlock),i=o.getParent(t.getNode(e.endContainer,e.endOffset),o.isBlock),n==i)return;if(s=d.schema.getTextBlockElements(),!s[n.nodeName]||!s[i.nodeName])return;if("false"===o.getContentEditable(n)||"false"===o.getContentEditable(i))return;e.deleteContents(),r=b(n,false),a=b(i,true);var c=function(e){for(var t=e.parentNode;t&&t.parentNode&&t!==l&&o.isEmpty(t);t=t.parentNode)e=t;if(e&&e.parentNode)e.parentNode.removeChild(e)},f=o.isEmpty(n),m=o.isEmpty(i);if(!f&&!m)p(n).append(i.childNodes),m=true;if(m)c(i);if(f)if(c(n),m&&!l.innerHTML)d.setContent("");if(r)if(1==r.nodeType)if("BR"==r.nodeName)e.setStartBefore(r),e.setEndBefore(r);else e.setStartAfter(r),e.setEndAfter(r);else e.setStart(r,r.data.length),e.setEnd(r,r.data.length);else if(a)if(1==a.nodeType)e.setStartBefore(a),e.setEndBefore(a);else e.setStart(a,0),e.setEnd(a,0);return u.setRng(e),true}function C(e,n){var i,r,a,s,l,u;if(!e.collapsed)return e;if(l=e.startContainer,u=e.startOffset,3==l.nodeType)if(n){if(u<l.data.length)return e}else if(u>0)return e;i=t.getNode(l,u),a=o.getParent(i,o.isBlock),r=b(d.getBody(),n,i),s=o.getParent(r,o.isBlock);var c=1===l.nodeType&&u>l.childNodes.length-1;if(!i||!r)return e;if(s&&a!=s)if(!n){if(!y(s,a))return e;if(1==r.nodeType)if("BR"==r.nodeName)e.setStartBefore(r);else e.setStartAfter(r);else e.setStart(r,r.data.length);if(1==i.nodeType)if(c)e.setEndAfter(i);else e.setEndBefore(i);else e.setEndBefore(i)}else{if(!y(a,s))return e;if(1==i.nodeType)if("BR"==i.nodeName)e.setStartBefore(i);else e.setStartAfter(i);else e.setStart(i,i.data.length);if(1==r.nodeType)e.setEnd(r,0);else e.setEndBefore(r)}return e}function x(e){var t=u.getRng();if(t=C(t,e),w(t))return true}function k(e,t){var n,r,a,l,u,c,f,m,h;function g(e,n){if(h=p(n).parents().filter(function(e,t){return!!d.schema.getTextInlineElements()[t.nodeName]}),a=e.cloneNode(false),h=s.map(h,function(e){if(e=e.cloneNode(false),a.hasChildNodes())e.appendChild(a.firstChild),a.appendChild(e);else a.appendChild(e);return a.appendChild(e),e}),h.length)return m=o.create("br"),h[0].appendChild(m),o.replace(a,e),t.setStartBefore(m),t.setEndBefore(m),d.selection.setRng(t),m;return null}function v(e){return e&&d.schema.getTextBlockElements()[e.tagName]}if(!t.collapsed)return;if(c=t.startContainer,f=t.startOffset,r=o.getParent(c,o.isBlock),!v(r))return;if(1==c.nodeType){if(c=c.childNodes[f],c&&"BR"!=c.tagName)return;if(e)u=r.nextSibling;else u=r.previousSibling;if(o.isEmpty(r)&&v(u)&&o.isEmpty(u))if(g(r,c))return o.remove(u),true}else if(3==c.nodeType){if(n=i.create(r,c),l=r.cloneNode(true),c=i.resolve(l,n),e){if(f>=c.data.length)return;c.deleteData(f,1)}else{if(f<=0)return;c.deleteData(f-1,1)}if(o.isEmpty(l))return g(r,c)}}function N(e){var t,n,i;if(x(e))return;s.each(d.getBody().getElementsByTagName("*"),function(e){if("SPAN"==e.tagName)e.setAttribute("mce-data-marked",1);if(!e.hasAttribute("data-mce-style")&&e.hasAttribute("style"))d.dom.setAttrib(e,"style",d.dom.getAttrib(e,"style"))}),(t=new c(function(){})).observe(d.getDoc(),{childList:true,attributes:true,subtree:true,attributeFilter:["style"]}),d.getDoc().execCommand(e?"ForwardDelete":"Delete",false,null),n=d.selection.getRng(),i=n.startContainer.parentNode,s.each(t.takeRecords(),function(e){if(!o.isChildOf(e.target,d.getBody()))return;if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");if(t)e.target.setAttribute("style",t);else e.target.removeAttribute("style")}s.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,r;if(e==i)t=n.startOffset,r=e.firstChild;if(o.remove(e,true),r)n.setStart(r,t),n.setEnd(r,t),d.selection.setRng(n)}})}),t.disconnect(),s.each(d.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}function E(e){d.undoManager.transact(function(){N(e)})}if(d.on("keydown",function(e){var t=e.keyCode==g,n=e.ctrlKey||e.metaKey;if(!R(e)&&(t||e.keyCode==h)){var i=d.selection.getRng(),r=i.startContainer,o=i.startOffset;if(t&&e.shiftKey)return;if(k(t,i))return void e.preventDefault();if(!n&&i.collapsed&&3==r.nodeType)if(t?o<r.data.length:o>0)return;if(e.preventDefault(),n)d.selection.getSel().modify("extend",t?"forward":"backward",e.metaKey?"lineboundary":"word");N(t)}}),d.on("keypress",function(t){if(!R(t)&&!u.isCollapsed()&&t.charCode>31&&!e.metaKeyPressed(t)){var n,i,r,a,s,l;if(n=d.selection.getRng(),l=String.fromCharCode(t.charCode),t.preventDefault(),i=p(n.startContainer).parents().filter(function(e,t){return!!d.schema.getTextInlineElements()[t.nodeName]}),N(true),i=i.filter(function(e,t){return!p.contains(d.getBody(),t)}),i.length){if(r=o.createFragment(),i.each(function(e,t){if(t=t.cloneNode(false),r.hasChildNodes())t.appendChild(r.firstChild),r.appendChild(t);else s=t,r.appendChild(t);r.appendChild(t)}),s.appendChild(d.getDoc().createTextNode(l)),a=o.getParent(n.startContainer,o.isBlock),o.isEmpty(a))p(a).empty().append(r);else n.insertNode(r);n.setStart(s.firstChild,1),n.setEnd(s.firstChild,1),d.selection.setRng(n)}else d.selection.setContent(l)}}),d.addCommand("Delete",function(){N()}),d.addCommand("ForwardDelete",function(){N(true)}),f)return;d.on("dragstart",function(e){if(m=u.getRng(),m.collapsed){var t=r.elementFromPoint(e.clientX,e.clientY);if(t)(m=r.createRange()).setStartBefore(t),m.setEndAfter(t)}B(e)}),d.on("drop",function(e){if(!R(e)){var n=A(e);if(n)e.preventDefault(),l.setEditorTimeout(d,function(){var i=t.getCaretRangeFromPoint(e.x,e.y,r);if(m)u.setRng(m),m=null,E();u.setRng(i),D(n.html)})}}),d.on("cut",function(e){if(!R(e)&&e.clipboardData&&!d.selection.isCollapsed()){e.preventDefault(),e.clipboardData.clearData();var t=d.selection,n=t.getRng();e.clipboardData.setData("text/html",0===n.startOffset&&3===n.commonAncestorContainer.nodeType&&n.endOffset===n.commonAncestorContainer.nodeValue.length&&!t.dom.isBlock(t.getNode())?t.dom.getOuterHTML(t.getNode()):t.getContent());var i=t.getContent({format:"text"});e.clipboardData.setData("text/plain",(a.webkit||a.ie)&&-1!==navigator.userAgent.search(/\bwindows\b/i)?i.replace(/\n/gi,"\r\n"):i),l.setEditorTimeout(d,function(){E(true)})}})}function M(){function e(e){var t=v.create("body"),n=e.cloneContents();return t.appendChild(n),y.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return false;var i=n.duplicate();return i.moveToElementText(d.getBody()),t.compareRanges(n,i)}var r=e(n),o=v.createRng();return o.selectNode(d.getBody()),r===e(o)}d.on("keydown",function(e){var t=e.keyCode,i,r;if(!R(e)&&(t==g||t==h)){if(i=d.selection.isCollapsed(),r=d.getBody(),i&&!v.isEmpty(r))return;if(!i&&!n(d.selection.getRng()))return;if(e.preventDefault(),d.setContent(""),r.firstChild&&v.isBlock(r.firstChild))d.selection.setCursorLocation(r.firstChild,0);else d.selection.setCursorLocation(r,0);d.nodeChanged()}})}function L(){d.shortcuts.add("meta+a",null,"SelectAll")}function O(){if(!d.settings.content_editable)v.bind(d.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==d.getDoc().documentElement)if(t=y.getRng(),d.getBody().focus(),"mousedown"==e.type){if(u.isCaretContainer(t.startContainer))return;y.placeCaretAt(e.clientX,e.clientY)}else y.setRng(t)})}function I(){d.on("keydown",function(e){if(!R(e)&&e.keyCode===h){if(!d.getBody().getElementsByTagName("hr").length)return;if(y.isCollapsed()&&0===y.getRng(true).startOffset){var t=y.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return v.remove(t),void e.preventDefault();if(n&&n.nodeName&&"hr"===n.nodeName.toLowerCase())v.remove(n),e.preventDefault()}}})}function H(){if(!window.Range.prototype.getClientRects)d.on("mousedown",function(e){if(!R(e)&&"HTML"===e.target.nodeName){var t=d.getBody();t.blur(),l.setEditorTimeout(d,function(){t.focus()})}})}function F(){d.on("click",function(e){var t=e.target;if(/^(IMG|HR)$/.test(t.nodeName)&&"false"!==v.getContentEditableParent(t))e.preventDefault(),y.select(t),d.nodeChanged();if("A"==t.nodeName&&v.hasClass(t,"mce-item-anchor"))e.preventDefault(),y.select(t)})}function z(){function e(){var e=v.getAttribs(y.getStart().cloneNode(false));return function(){var t=y.getStart();if(t!==d.getBody())v.setAttrib(t,"style",null),m(e,function(e){t.setAttributeNode(e.cloneNode(true))})}}function t(){return!y.isCollapsed()&&v.getParent(y.getStart(),v.isBlock)!=v.getParent(y.getEnd(),v.isBlock)}d.on("keypress",function(n){var i;if(!R(n)&&(8==n.keyCode||46==n.keyCode)&&t())return i=e(),d.getDoc().execCommand("delete",false,null),i(),n.preventDefault(),false}),v.bind(d.getDoc(),"cut",function(n){var i;if(!R(n)&&t())i=e(),l.setEditorTimeout(d,function(){i()})})}function U(){document.body.setAttribute("role","application")}function W(){d.on("keydown",function(e){if(!R(e)&&e.keyCode===h)if(y.isCollapsed()&&0===y.getRng(true).startOffset){var t=y.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),false}})}function V(){if(_()>7)return;T("RespectVisibilityInDesign",true),d.contentStyles.push(".mceHideBrInPre pre br {display: none}"),v.addClass(d.getBody(),"mceHideBrInPre"),w.addNodeFilter("pre",function(e){var t=e.length,n,i,o,a;while(t--){i=(n=e[t].getAll("br")).length;while(i--)if(o=n[i],a=o.prev,a&&3===a.type&&"\n"!=a.value.charAt(a.value-1))a.value+="\n";else o.parent.insert(new r("#text",3),o,true).value="\n"}}),C.addNodeFilter("pre",function(e){var t=e.length,n,i,r,o;while(t--){i=(n=e[t].getAll("br")).length;while(i--)if(r=n[i],o=r.prev,o&&3==o.type)o.value=o.value.replace(/\r?\n$/,"")}})}function $(){v.bind(d.getBody(),"mouseup",function(){var e,t=y.getNode();if("IMG"==t.nodeName){if(e=v.getStyle(t,"width"))v.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),v.setStyle(t,"width","");if(e=v.getStyle(t,"height"))v.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),v.setStyle(t,"height","")}})}function j(){d.on("keydown",function(t){var n,i,r,o,a;if(R(t)||t.keyCode!=e.BACKSPACE)return;if(n=y.getRng(),i=n.startContainer,r=n.startOffset,o=v.getRoot(),a=i,!n.collapsed||0!==r)return;while(a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=o)a=a.parentNode;if("BLOCKQUOTE"===a.tagName)d.formatter.toggle("blockquote",null,a),(n=v.createRng()).setStart(i,0),n.setEnd(i,0),y.setRng(n)})}function q(){function e(){if(ue(),T("StyleWithCSS",false),T("enableInlineTableEditing",false),!b.object_resizing)T("enableObjectResizing",false)}if(!b.readonly)d.on("BeforeExecCommand MouseDown",e)}function K(){function e(){m(v.select("a"),function(e){var t=e.parentNode,n=v.getRoot();if(t.lastChild===e){while(t&&!v.isBlock(t)){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}v.add(t,"br",{"data-mce-bogus":1})}})}d.on("SetContent ExecCommand",function(t){if("setcontent"==t.type||"mceInsertLink"===t.command)e()})}function Y(){if(b.forced_root_block)d.on("init",function(){T("DefaultParagraphSeparator",b.forced_root_block)})}function X(){d.on("keydown",function(e){var t;if(!R(e)&&e.keyCode==h)if(t=d.getDoc().selection.createRange(),t&&t.item)e.preventDefault(),d.undoManager.beforeChange(),v.remove(t.item(0)),d.undoManager.add()})}function G(){var e;if(_()>=10)e="",m("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+".controls-richEditor "+t+":empty"}),d.contentStyles.push(e+"{padding-right: 1px !important}")}function J(){if(_()<9)w.addNodeFilter("noscript",function(e){var t=e.length,n,i;while(t--)if(n=e[t],i=n.firstChild,i)n.attr("data-mce-innertext",i.value)}),C.addNodeFilter("noscript",function(e){var t=e.length,n,i,a;while(t--)if(n=e[t],i=e[t].firstChild,i)i.value=o.decode(i.value);else if(a=n.attributes.map["data-mce-innertext"],a)n.attr("data-mce-innertext",null),(i=new r("#text",3)).value=a,i.raw=true,n.append(i)})}function Q(){var e=v.doc,t=e.body,n,i,r;function o(e,n){var i=t.createTextRange();try{i.moveToPoint(e,n)}catch(e){i=null}return i}function a(e){var t;if(e.button){if(t=o(e.x,e.y),t){if(t.compareEndPoints("StartToStart",i)>0)t.setEndPoint("StartToStart",i);else t.setEndPoint("EndToEnd",i);t.select()}}else s()}function s(){var t=e.selection.createRange();if(i&&!t.item&&0===t.compareEndPoints("StartToEnd",t))i.select();v.unbind(e,"mouseup",s),v.unbind(e,"mousemove",a),i=n=0}e.documentElement.unselectable=true,v.bind(e,"mousedown contextmenu",function(t){if("HTML"===t.target.nodeName){if(n)s();if(r=e.documentElement,r.scrollHeight>r.clientHeight)return;if(n=1,i=o(t.x,t.y),i)v.bind(e,"mouseup",s),v.bind(e,"mousemove",a),v.getRoot().focus(),i.select()}})}function Z(){d.on("keyup focusin mouseup",function(t){if(65!=t.keyCode||!e.metaKeyPressed(t))y.normalize()},true)}function ee(){d.contentStyles.push("img:-moz-broken {"+"-moz-force-broken-image-icon:1;"+"min-width:24px;"+"min-height:24px"+"}")}function te(){if(!d.inline)d.on("keydown",function(){if(document.activeElement==document.body)d.getWin().focus()})}function ne(){if(!d.inline)d.contentStyles.push("body {min-height: 150px}"),d.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(a.ie>11)return void d.getBody().focus();t=d.selection.getRng(),d.getBody().focus(),d.selection.setRng(t),d.selection.normalize(),d.nodeChanged()}})}function ie(){if(a.mac)d.on("keydown",function(t){if(e.metaKeyPressed(t)&&!t.shiftKey&&(37==t.keyCode||39==t.keyCode))t.preventDefault(),d.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary")})}function re(){T("AutoUrlDetect",false)}function oe(){d.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),d.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function ae(){d.on("init",function(){d.dom.bind(d.getBody(),"submit",function(e){e.preventDefault()})})}function se(){w.addNodeFilter("br",function(e){var t=e.length;while(t--)if("Apple-interchange-newline"==e[t].attr("class"))e[t].remove()})}function le(){var e;d.on("dragstart",function(t){e=y.getRng(),B(t)}),d.on("drop",function(n){if(!R(n)){var i=A(n);if(i){n.preventDefault();var r=t.getCaretRangeFromPoint(n.clientX,n.clientY,d.getDoc());if(i.id==d.id&&e)y.setRng(e),d.undoManager.transact(e.deleteContents.bind(e));e=null,y.setRng(r),D(i.html)}}})}function ue(){}function ce(){var e;if(!x)return 0;return e=d.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount}function fe(){function t(e){var t=new f(e.getBody()),n=e.selection.getRng(),i=c.fromRangeStart(n),r=c.fromRangeEnd(n),o=t.prev(i),a=t.next(r);return!e.selection.isCollapsed()&&(!o||o.isAtStart()&&i.isEqual(o))&&(!a||a.isAtEnd()&&i.isEqual(a))}d.on("keypress",function(n){if(!R(n)&&!y.isCollapsed()&&n.charCode>31&&!e.metaKeyPressed(n))if(t(d))n.preventDefault(),d.setContent(String.fromCharCode(n.charCode)),d.selection.select(d.getBody(),true),d.selection.collapse(false),d.nodeChanged()}),d.on("keydown",function(e){var n=e.keyCode;if(!R(e)&&(n==g&&!e.shiftKey||n==h))if(t(d))e.preventDefault(),d.setContent(""),d.nodeChanged()})}if(j(),M(),!a.windowsPhone)Z();if(N)if(fe(),P(),O(),F(),Y(),ae(),W(),se(),a.iOS)te(),ne(),oe();else L();if(k&&a.ie<11)I(),U(),V(),$(),X(),G(),J(),Q();if(a.ie>=11)ne(),W();if(a.ie)L(),re(),le();if(x)fe(),P(),I(),H(),z(),q(),K(),ee(),ie(),W();return{refreshContentEditable:ue,isHidden:ce}}}),r("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t,n){var i=t.DOM,r;function o(e,t){if("selectionchange"==t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;if(e.settings.event_root){if(!e.eventRoot)e.eventRoot=i.select(e.settings.event_root)[0];return e.eventRoot}return e.getBody()}function a(e,t){var n=o(e,t),a;function s(e){return!e.hidden&&!e.readonly}if(!e.delegates)e.delegates={};if(e.delegates[t])return;if(e.settings.event_root){if(!r)r={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor)if(r){for(t in r)e.dom.unbind(o(e,t));r=null}});if(r[t])return;a=function(n){var r=n.target,o=e.editorManager.editors,a=o.length;while(a--){var l=o[a].getBody();if(l===r||i.isChildOf(r,l))if(s(o[a]))o[a].fire(t,n)}},r[t]=a,i.bind(n,t,a)}else a=function(n){if(s(e))e.fire(t,n)},i.bind(n,t,a),e.delegates[t]=a}var s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){a(e,t)})},toggleNativeEvent:function(e,t){var n=this;if("focus"==e||"blur"==e)return;if(t)if(n.initialized)a(n,e);else if(!n._pendingNativeEvents)n._pendingNativeEvents=[e];else n._pendingNativeEvents.push(e);else if(n.initialized)n.dom.unbind(o(n,e),e,n.delegates[e]),delete n.delegates[e]},unbindAllNativeEvents:function(){var e=this,t;if(e.delegates){for(t in e.delegates)e.dom.unbind(o(e,t),t,e.delegates[t]);delete e.delegates}if(!e.inline)e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc());e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return s=n.extend({},e,s),s}),r("tinymce/Mode",[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}}function t(e){var t,n;return t=e.getBody(),n=function(t){if(e.dom.getParents(t.target,"a").length>0)t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}function n(n,i){if(n._clickBlocker)n._clickBlocker.unbind(),n._clickBlocker=null;if(i)n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=true,n.getBody().contentEditable=false;else n.readonly=false,n.getBody().contentEditable=true,e(n,"StyleWithCSS",false),e(n,"enableInlineTableEditing",false),e(n,"enableObjectResizing",false),n.focus(),n.nodeChanged()}function i(e,t){var i=e.readonly?"readonly":"design";if(t==i)return;if(e.initialized)n(e,"readonly"==t);else e.on("init",function(){n(e,"readonly"==t)});e.fire("SwitchMode",{mode:t})}return{setMode:i}}),r("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each,i=e.explode,r={f9:120,f10:121,f11:122},o=e.makeMap("alt,ctrl,shift,meta,access");return function(a){var s=this,l={},u=[];function c(e){var a,s,l={};n(i(e,"+"),function(e){if(e in o)l[e]=true;else if(/^[0-9]{2,}$/.test(e))l.keyCode=parseInt(e,10);else l.charCode=e.charCodeAt(0),l.keyCode=r[e]||e.toUpperCase().charCodeAt(0)}),a=[l.keyCode];for(s in o)if(l[s])a.push(s);else l[s]=false;if(l.id=a.join(","),l.access)if(l.alt=true,t.mac)l.ctrl=true;else l.shift=true;if(l.meta)if(t.mac)l.meta=true;else l.ctrl=true,l.meta=false;return l}function f(t,n,r,o){var s;return s=e.map(i(t,">"),c),s[s.length-1]=e.extend(s[s.length-1],{func:r,scope:o||a}),e.extend(s[0],{desc:a.translate(n),subpatterns:s.slice(1)})}function d(e){return e.altKey||e.ctrlKey||e.metaKey}function m(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}function p(e,t){if(!t)return false;if(t.ctrl!=e.ctrlKey||t.meta!=e.metaKey)return false;if(t.alt!=e.altKey||t.shift!=e.shiftKey)return false;if(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)return e.preventDefault(),true;return false}function h(e){return e.func?e.func.call(e.scope):null}a.on("keyup keypress keydown",function(e){if((d(e)||m(e))&&!e.isDefaultPrevented())if(n(l,function(t){if(p(e,t)){if(u=t.subpatterns.slice(0),"keydown"==e.type)h(t);return true}}),p(e,u[0])){if(1===u.length)if("keydown"==e.type)h(u[0]);u.shift()}}),s.add=function(t,r,o,s){var u;if(u=o,"string"===typeof o)o=function(){a.execCommand(u,false,null)};else if(e.isArray(u))o=function(){a.execCommand(u[0],u[1],u[2])};return n(i(e.trim(t.toLowerCase())),function(e){var t=f(e,r,o,s);l[t.id]=t}),true},s.remove=function(e){var t=f(e);if(l[t.id])return delete l[t.id],true;return false}}}),r("tinymce/file/Uploader",["tinymce/util/Promise","tinymce/util/Tools","tinymce/util/Fun"],function(e,t,n){return function(i,r){var o={};function a(e){var t,n;return n={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"},t=n[e.blob().type.toLowerCase()]||"dat",e.filename()+"."+t}function s(e,t){if(e)return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"");return t}function l(e){return{id:e.id,blob:e.blob,base64:e.base64,filename:n.constant(a(e))}}function u(e,t,n,i){var o,a;(o=new XMLHttpRequest).open("POST",r.url),o.withCredentials=r.credentials,o.upload.onprogress=function(e){i(e.loaded/e.total*100)},o.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e;if(200!=o.status)return void n("HTTP Error: "+o.status);if(e=JSON.parse(o.responseText),!e||"string"!=typeof e.location)return void n("Invalid JSON: "+o.responseText);t(s(r.basePath,e.location))},(a=new FormData).append("file",e.blob(),e.filename()),o.send(a)}function c(){return new e(function(e){e([])})}function f(e,t){return{url:t,blobInfo:e,status:true}}function d(e,t){return{url:"",blobInfo:e,status:false,error:t}}function m(e,n){t.each(o[e],function(e){e(n)}),delete o[e]}function p(t,n,r){return i.markPending(t.blobUri()),new e(function(e){var o,a,s=function(){};try{var u=function(){if(o)o.close(),a=s},c=function(n){u(),i.markUploaded(t.blobUri(),n),m(t.blobUri(),f(t,n)),e(f(t,n))},p=function(n){u(),i.removeFailed(t.blobUri()),m(t.blobUri(),d(t,n)),e(d(t,n))};a=function(e){if(e<0||e>100)return;if(!o)o=r();o.progressBar.value(e)},n(l(t),c,p,a)}catch(n){e(d(t,n.message))}})}function h(e){return e===u}function g(t){var n=t.blobUri();return new e(function(e){o[n]=o[n]||[],o[n].push(e)})}function v(n,o){return n=t.grep(n,function(e){return!i.isUploaded(e.blobUri())}),e.all(t.map(n,function(e){return i.isPending(e.blobUri())?g(e):p(e,r.handler,o)}))}function y(e,t){return!r.url&&h(r.handler)?c():v(e,t)}return r=t.extend({credentials:false,handler:u},r),{upload:y}}}),r("tinymce/file/Conversions",["tinymce/util/Promise"],function(e){function t(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,true),n.responseType="blob",n.onload=function(){if(200==this.status)e(this.response)},n.send()})}function n(e){var t,n;if(e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n)t=n[1];return{type:t,data:e[1]}}function i(t){return new e(function(e){var i,r,o;t=n(t);try{i=atob(t.data)}catch(t){return void e(new Blob([]))}for(r=new Uint8Array(i.length),o=0;o<r.length;o++)r[o]=i.charCodeAt(o);e(new Blob([r],{type:t.type}))})}function r(e){if(0===e.indexOf("blob:"))return t(e);if(0===e.indexOf("data:"))return i(e);return null}function o(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:r,blobToDataUri:o,parseDataUri:n}}),r("tinymce/file/ImageScanner",["tinymce/util/Promise","tinymce/util/Arr","tinymce/util/Fun","tinymce/file/Conversions","tinymce/Env"],function(e,t,n,i,r){var o=0,a=function(e){return(e||"blobid")+o++};return function(o,s){var l={};function u(u,c){var f,d;function m(e,t){var n,r;if(0===e.src.indexOf("blob:")){if(r=s.getByUri(e.src),r)t({image:e,blobInfo:r});else i.uriToBlob(e.src).then(function(o){i.blobToDataUri(o).then(function(l){n=i.parseDataUri(l).data,r=s.create(a(),o,n),s.add(r),t({image:e,blobInfo:r})})});return}if(n=i.parseDataUri(e.src).data,r=s.findFirst(function(e){return e.base64()===n}),r)t({image:e,blobInfo:r});else i.uriToBlob(e.src).then(function(i){r=s.create(a(),i,n),s.add(r),t({image:e,blobInfo:r})})}if(!c)c=n.constant(true);return f=t.filter(u.getElementsByTagName("img"),function(e){var t=e.src;if(!r.fileApi)return false;if(e.hasAttribute("data-mce-bogus"))return false;if(e.hasAttribute("data-mce-placeholder"))return false;if(!t||t==r.transparentSrc)return false;if(0===t.indexOf("blob:"))return!o.isUploaded(t);if(0===t.indexOf("data:"))return c(e);return false}),d=t.map(f,function(t){var n;if(l[t.src])return new e(function(e){l[t.src].then(function(n){e({image:t,blobInfo:n.blobInfo})})});return n=new e(function(e){m(t,e)}).then(function(e){return delete l[e.image.src],e})["catch"](function(e){return delete l[t.src],e}),l[t.src]=n,n}),e.all(d)}return{findAll:u}}}),r("tinymce/file/BlobCache",["tinymce/util/Arr","tinymce/util/Fun"],function(e,t){return function(){var n=[],i=t.constant;function r(e,t,n,r){return{id:i(e),filename:i(r||e),blob:i(t),base64:i(n),blobUri:i(URL.createObjectURL(t))}}function o(e){if(!a(e.id()))n.push(e)}function a(e){return s(function(t){return t.id()===e})}function s(t){return e.filter(n,t)[0]}function l(e){return s(function(t){return t.blobUri()==e})}function u(t){n=e.filter(n,function(e){if(e.blobUri()===t)return URL.revokeObjectURL(e.blobUri()),false;return true})}function c(){e.each(n,function(e){URL.revokeObjectURL(e.blobUri())}),n=[]}return{create:r,add:o,get:a,getByUri:l,findFirst:s,removeByUri:u,destroy:c}}}),r("tinymce/file/UploadStatus",[],function(){return function(){var e=1,t=2,n={};function i(e,t){return{status:e,resultUri:t}}function r(e){return e in n}function o(e){var t=n[e];return t?t.resultUri:null}function a(t){return r(t)?n[t].status===e:false}function s(e){return r(e)?n[e].status===t:false}function l(t){n[t]=i(e,null)}function u(e,r){n[e]=i(t,r)}function c(e){delete n[e]}function f(){n={}}return{hasBlobUri:r,getResultUri:o,isPending:a,isUploaded:s,markPending:l,markUploaded:u,removeFailed:c,destroy:f}}}),r("tinymce/ErrorReporter",["tinymce/AddOnManager"],function(e){var t=e.PluginManager,n=function(e,n){for(var i in t.urls)if(t.urls[i]+"/plugin"+n+".js"===e)return i;return null},i=function(e,t){var i=n(t,e.suffix);return i?"Failed to load plugin: "+i+" from url "+t:"Failed to load plugin url: "+t},r=function(e,t){e.notificationManager.open({type:"error",text:t})},o=function(e,t){if(e._skinLoaded)r(e,t);else e.on("SkinLoaded",function(){r(e,t)})};return{pluginLoadError:function(e,t){o(e,i(e,t))},uploadError:function(e,t){o(e,"Failed to upload image: "+t)}}}),r("tinymce/EditorUpload",["tinymce/util/Arr","tinymce/file/Uploader","tinymce/file/ImageScanner","tinymce/file/BlobCache","tinymce/file/UploadStatus","tinymce/ErrorReporter"],function(e,t,n,i,r,o){return function(a){var s=new i,l,u,c=a.settings,f=new r;function d(e){return function(t){if(a.selection)return e(t);return[]}}function m(){return"?"+(new Date).getTime()}function p(e,t,n){var i=0;do{if(i=e.indexOf(t,i),-1!==i)e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1}while(-1!==i);return e}function h(e,t,n){return e=p(e,'src="'+t+'"','src="'+n+'"'),e=p(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"'),e}function g(t,n){e.each(a.undoManager.data,function(i){if("fragmented"===i.type)i.fragments=e.map(i.fragments,function(e){return h(e,t,n)});else i.content=h(i.content,t,n)})}function v(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:true})}function y(e,t){s.removeByUri(e.src),g(e.src,t),a.$(e).attr({src:c.images_reuse_filename?t+m():t,"data-mce-src":a.convertURL(t,"src")})}function b(n){if(!l)l=new t(f,{url:c.images_upload_url,basePath:c.images_upload_base_path,credentials:c.images_upload_credentials,handler:c.images_upload_handler});return x().then(d(function(t){var i;return i=e.map(t,function(e){return e.blobInfo}),l.upload(i,v).then(d(function(i){if(i=e.map(i,function(e,n){var i=t[n].image;if(e.status&&false!==a.settings.images_replace_blob_uris)y(i,e.url);else if(e.error)o.uploadError(a,e.error);return{element:i,status:e.status}}),n)n(i);return i}))}))}function w(e){if(false!==c.automatic_uploads)return b(e)}function C(e){return c.images_dataimg_filter?c.images_dataimg_filter(e):true}function x(){if(!u)u=new n(f,s);return u.findAll(a.getBody(),C).then(d(function(t){return e.each(t,function(e){g(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))}function k(){s.destroy(),f.destroy(),u=l=null}function N(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var i=f.getResultUri(n);if(i)return'src="'+i+'"';var r=s.getByUri(n);if(!r)r=e.reduce(a.editorManager.editors,function(e,t){return e||t.editorUpload.blobCache.getByUri(n)},null);if(r)return'src="data:'+r.blob().type+";base64,"+r.base64()+'"';return t})}return a.on("setContent",function(){if(false!==a.settings.automatic_uploads)w();else x()}),a.on("RawSaveContent",function(e){e.content=N(e.content)}),a.on("getContent",function(e){if(e.source_view||"raw"==e.format)return;e.content=N(e.content)}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(s.getByUri(t))return;var n=f.getResultUri(t);if(n)e.attr("src",n)})})}),{blobCache:s,uploadImages:b,uploadImagesAuto:w,scanForImages:x,destroy:k}}}),r("tinymce/caret/FakeCaret",["tinymce/caret/CaretContainer","tinymce/caret/CaretPosition","tinymce/dom/NodeType","tinymce/dom/RangeUtils","tinymce/dom/DomQuery","tinymce/geom/ClientRect","tinymce/util/Delay"],function(e,t,n,i,r,o,a){var s=n.isContentEditableFalse;return function(t,n){var i,l,u;function c(e,n){var i=o.collapse(e.getBoundingClientRect(),n),r,a,s,l,u;if("BODY"==t.tagName)r=t.ownerDocument.documentElement,a=t.scrollLeft||r.scrollLeft,s=t.scrollTop||r.scrollTop;else u=t.getBoundingClientRect(),a=t.scrollLeft-u.left,s=t.scrollTop-u.top;if(i.left+=a,i.right+=a,i.top+=s,i.bottom+=s,i.width=1,l=e.offsetWidth-e.clientWidth,l>0){if(n)l*=-1;i.left+=l,i.right+=l}return i}function f(){var n,i,o,a,s;for(n=r("*[contentEditable=false]",t),a=0;a<n.length;a++){if(i=n[a],o=i.previousSibling,e.endsWithCaretContainer(o))if(s=o.data,1==s.length)o.parentNode.removeChild(o);else o.deleteData(s.length-1,1);if(o=i.nextSibling,e.startsWithCaretContainer(o))if(s=o.data,1==s.length)o.parentNode.removeChild(o);else o.deleteData(0,1)}return null}function d(i,o){var a,f;if(m(),n(o)){if(u=e.insertBlock("p",o,i),a=c(o,i),r(u).css("top",a.top),l=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(t),i)l.addClass("mce-visual-caret-before");p(),(f=o.ownerDocument.createRange()).setStart(u,0),f.setEnd(u,0)}else{if(u=e.insertInline(o,i),f=o.ownerDocument.createRange(),s(u.nextSibling))f.setStart(u,0),f.setEnd(u,0);else f.setStart(u,1),f.setEnd(u,1);return f}return f}function m(){if(f(),u)e.remove(u),u=null;if(l)l.remove(),l=null;clearInterval(i)}function p(){i=a.setInterval(function(){r("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden")},500)}function h(){a.clearInterval(i)}function g(){return".mce-visual-caret {"+"position: absolute;"+"background-color: black;"+"background-color: currentcolor;"+"}"+".mce-visual-caret-hidden {"+"display: none;"+"}"+"*[data-mce-caret] {"+"position: absolute;"+"left: -1000px;"+"right: auto;"+"top: 0;"+"margin: 0;"+"padding: 0;"+"}"}return{show:d,hide:m,getCss:g,destroy:h}}}),r("tinymce/dom/Dimensions",["tinymce/util/Arr","tinymce/dom/NodeType","tinymce/geom/ClientRect"],function(e,t,n){function i(r){function o(t){return e.map(t,function(e){return e=n.clone(e),e.node=r,e})}if(e.isArray(r))return e.reduce(r,function(e,t){return e.concat(i(t))},[]);if(t.isElement(r))return o(r.getClientRects());if(t.isText(r)){var a=r.ownerDocument.createRange();return a.setStart(r,0),a.setEnd(r,r.data.length),o(a.getClientRects())}}return{getClientRects:i}}),r("tinymce/caret/LineWalker",["tinymce/util/Fun","tinymce/util/Arr","tinymce/dom/Dimensions","tinymce/caret/CaretCandidate","tinymce/caret/CaretUtils","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition","tinymce/geom/ClientRect"],function(e,t,n,i,r,o,a,s){var l=e.curry;function u(e,t,n,o){while(o=r.findNode(o,e,i.isEditableCaretCandidate,t))if(n(o))return}function c(e,i,r,o,a,s){var l=0,c,f=[],d;function m(o){var s,u,c;if(c=n.getClientRects(o),-1==e)c=c.reverse();for(s=0;s<c.length;s++){if(u=c[s],r(u,d))continue;if(f.length>0&&i(u,t.last(f)))l++;if(u.line=l,a(u))return true;f.push(u)}}if(d=t.last(s.getClientRects()),!d)return f;return c=s.getNode(),m(c),u(e,o,m,c),f}function f(e,t){return t.line>e}function d(e,t){return t.line===e}function m(e,n,i,r){var l=new o(n),u,c,f,d,m=[],p=0,h,g;function v(n){if(1==e)return t.last(n.getClientRects());return t.last(n.getClientRects())}if(1==e)u=l.next,c=s.isBelow,f=s.isAbove,d=a.after(r);else u=l.prev,c=s.isAbove,f=s.isBelow,d=a.before(r);g=v(d);do{if(!d.isVisible())continue;if(h=v(d),f(h,g))continue;if(m.length>0&&c(h,t.last(m)))p++;if(h=s.clone(h),h.position=d,h.line=p,i(h))return m;m.push(h)}while(d=u(d));return m}return{upUntil:l(c,-1,s.isAbove,s.isBelow),downUntil:l(c,1,s.isBelow,s.isAbove),positionsUntil:m,isAboveLine:l(f),isLine:l(d)}}),r("tinymce/caret/LineUtils",["tinymce/util/Fun","tinymce/util/Arr","tinymce/dom/NodeType","tinymce/dom/Dimensions","tinymce/geom/ClientRect","tinymce/caret/CaretUtils","tinymce/caret/CaretCandidate"],function(e,t,n,i,r,o,a){var s=n.isContentEditableFalse,l=o.findNode,u=e.curry;function c(e,t){return Math.abs(e.left-t)}function f(e,t){return Math.abs(e.right-t)}function d(e,n){function i(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var r,o;if(r=Math.min(c(e,n),f(e,n)),o=Math.min(c(t,n),f(t,n)),i(n,t))return t;if(i(n,e))return e;if(o==r&&s(t.node))return t;if(o<r)return t;return e})}function m(e,t,n,i){while(i=l(i,e,a.isEditableCaretCandidate,t))if(n(i))return}function p(e,n){var o=[];function a(e,r){var a;return a=t.filter(i.getClientRects(r),function(t){return!e(t,n)}),o=o.concat(a),0===a.length}return o.push(n),m(-1,e,u(a,r.isAbove),n.node),m(1,e,u(a,r.isBelow),n.node),o}function h(e){return t.filter(t.toArray(e.getElementsByTagName("*")),s)}function g(e,t){return{node:e.node,before:c(e,t)<f(e,t)}}function v(e,n,r){var o,a;if(o=i.getClientRects(h(e)),o=t.filter(o,function(e){return r>=e.top&&r<=e.bottom}),a=d(o,n),a)if(a=d(p(e,a),n),a&&s(a.node))return g(a,n);return null}return{findClosestClientRect:d,findLineNodeRects:p,closestCaret:v}}),r("tinymce/dom/MousePosition",[],function(){var e=function(e){var t,n,i,r;return r=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,i=t.defaultView,{top:r.top+i.pageYOffset-n.clientTop,left:r.left+i.pageXOffset-n.clientLeft}},t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}},n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},i=function(e){var t=e.getBody(),n=e.getDoc().documentElement,i={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?i:r},r=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var r=e(t.getContentAreaContainer()),o=i(t);return{left:n.pageX-r.left+o.left,top:n.pageY-r.top+o.top}}return{left:n.pageX,top:n.pageY}},o=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}};return{calc:function(e,i){return o(t(e),n(e),r(e,i))}}}),r("tinymce/DragDropOverrides",["tinymce/dom/NodeType","tinymce/util/Arr","tinymce/util/Fun","tinymce/util/Delay","tinymce/dom/DOMUtils","tinymce/dom/MousePosition","tinymce/Env"],function(e,t,n,i,r,o,a){var s=e.isContentEditableFalse,l=e.isContentEditableTrue,u=function(e,t){return s(t)&&t!==e},c=function(e,t,n){if(t===n||e.dom.isChildOf(t,n))return false;if(s(t))return false;return true},f=function(e){var t=e.cloneNode(true);return t.removeAttribute("data-mce-selected"),t},d=function(e,t,n,i){var r=t.cloneNode(true);e.dom.setStyles(r,{width:n,height:i}),e.dom.setAttrib(r,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",zIndex:1e6,opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),e.dom.setStyles(r,{margin:0,boxSizing:"border-box"}),o.appendChild(r),o},m=function(e,t){if(e.parentNode!==t)t.appendChild(e)},p=function(e,t,n,i,r,o){var a=0,s=0;if(e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r)a=t.pageX+n-r;if(t.pageY+i>o)s=t.pageY+i-o;e.style.width=n-a+"px",e.style.height=i-s+"px"},h=function(e){if(e&&e.parentNode)e.parentNode.removeChild(e)},g=function(e){return 0===e.button},v=function(e){return e.element},y=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY-(a.ie?e.relY:-5)}},b=function(e,i){return function(r){if(g(r)){var o=t.find(i.dom.getParents(r.target),n.or(s,l));if(u(i.getBody(),o)){var c=i.dom.getPos(o),f=a.ie?document.body:i.getBody(),m=i.getDoc().documentElement;e.element=o,e.screenX=r.screenX,e.screenY=r.screenY,e.maxX=(i.inline?f.scrollWidth:m.offsetWidth)-2,e.maxY=(i.inline?f.scrollHeight:m.offsetHeight)-2,e.relX=r.pageX-c.x,e.relY=r.pageY-c.y,e.width=o.offsetWidth,e.height=o.offsetHeight,e.ghost=d(i,o,e.width,e.height)}}}},w=function(e,t){var n=i.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(i){var r=Math.max(Math.abs(i.screenX-e.screenX),Math.abs(i.screenY-e.screenY));if(v(e)&&!e.dragging&&r>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=true,t.focus()}if(e.dragging){var s=a.ie?{inline:false,getDoc:function(){return document},getBody:function(){return document.body}}:t,l=y(e,o.calc(s,i));m(e.ghost,s.getBody()),p(e.ghost,l,e.width,e.height,e.maxX,e.maxY),n(i.clientX,i.clientY)}}},C=function(e){var t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t},x=function(e,t){return function(n){if(e.dragging)if(c(t,C(t.selection),e.element)){var i=f(e.element),r=t.fire("drop",{targetClone:i,clientX:n.clientX,clientY:n.clientY});if(!r.isDefaultPrevented())i=r.targetClone,t.undoManager.transact(function(){h(e.element),t.insertContent(t.dom.getOuterHTML(i)),t._selectionOverrides.hideFakeCaret()})}N(e)}},k=function(e,t){return function(){if(N(e),e.dragging)t.fire("dragend")}},N=function(e){e.dragging=false,e.element=null,h(e.ghost)},E=function(e){var t={},n,i,o,a,s,l;n=r.DOM,l=document,i=b(t,e),o=w(t,e),a=x(t,e),s=k(t,e),e.on("mousedown",i),e.on("mousemove",o),e.on("mouseup",a),n.bind(l,"mousemove",o),n.bind(l,"mouseup",s),e.on("remove",function(){n.unbind(l,"mousemove",o),n.unbind(l,"mouseup",s)})},S=function(e){e.on("drop",function(t){var n="undefined"!==typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;if(s(n)||s(e.dom.getContentEditableParent(n)))t.preventDefault()})};return{init:function(e){E(e),S(e)}}}),r("tinymce/SelectionOverrides",["tinymce/Env","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition","tinymce/caret/CaretContainer","tinymce/caret/CaretUtils","tinymce/caret/FakeCaret","tinymce/caret/LineWalker","tinymce/caret/LineUtils","tinymce/dom/NodeType","tinymce/dom/RangeUtils","tinymce/geom/ClientRect","tinymce/util/VK","tinymce/util/Fun","tinymce/util/Arr","tinymce/util/Delay","tinymce/DragDropOverrides"],function(e,t,n,i,r,o,a,s,l,u,c,f,d,m,p,h){var g=d.curry,v=l.isContentEditableTrue,y=l.isContentEditableFalse,b=l.isElement,w=r.isAfterContentEditableFalse,C=r.isBeforeContentEditableFalse,x=u.getSelectedNode;function k(e,t){while(t=e(t))if(t.isVisible())return t;return t}function N(u){var N=u.getBody(),E=new t(N),S=g(k,E.next),T=g(k,E.prev),_=new o(u.getBody(),M),R="sel-"+u.dom.uniqueId(),B,A=u.$;function D(e){return u.dom.hasClass(e,"mce-offscreen-selection")}function P(){var e=u.dom.get(R);return e?e.getElementsByTagName("*")[0]:e}function M(e){return u.dom.isBlock(e)}function L(e){if(e)u.selection.setRng(e)}function O(){return u.selection.getRng()}function I(e,t){u.selection.scrollIntoView(e,t)}function H(e,t,n){var i;if(i=u.fire("ShowCaret",{target:t,direction:e,before:n}),i.isDefaultPrevented())return null;return I(t,-1===e),_.show(n,t)}function F(e){var t;if(t=u.fire("BeforeObjectSelected",{target:e}),t.isDefaultPrevented())return null;return z(e)}function z(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}function U(e,t){var n=r.isInSameBlock(e,t);if(!n&&l.isBr(e.getNode()))return true;return n}function W(e,t){if(t=r.normalizeRange(e,N,t),-1==e)return n.fromRangeStart(t);return n.fromRangeEnd(t)}function V(e){return i.isCaretContainerBlock(e.startContainer)}function $(e,t,n,i){var r,o,a,s;if(!i.collapsed)if(r=x(i),y(r))return H(e,r,-1==e);if(s=V(i),o=W(e,i),n(o))return F(o.getNode(-1==e));if(o=t(o),!o){if(s)return i;return null}if(n(o))return H(e,o.getNode(-1==e),1==e);if(a=t(o),n(a))if(U(o,a))return H(e,a.getNode(-1==e),1==e);if(s)return Q(o.toRange());return null}function j(e,t,n){var i,r,o,l,u,c,f,d,p;if(p=x(n),i=W(e,n),r=t(N,a.isAboveLine(1),i),o=m.filter(r,a.isLine(1)),u=m.last(i.getClientRects()),C(i))p=i.getNode();if(w(i))p=i.getNode(true);if(!u)return null;if(c=u.left,l=s.findClosestClientRect(o,c),l)if(y(l.node))return f=Math.abs(c-l.left),d=Math.abs(c-l.right),H(e,l.node,f<d);if(p){var h=a.positionsUntil(e,N,a.isAboveLine(1),p);if(l=s.findClosestClientRect(m.filter(h,a.isLine(1)),c),l)return Q(l.position.toRange());if(l=m.last(m.filter(h,a.isLine(0))),l)return Q(l.position.toRange())}}function q(t,i){var r,o,a;function s(){var t=u.dom.create(u.settings.forced_root_block);if(!e.ie||e.ie>=11)t.innerHTML='<br data-mce-bogus="1">';return t}if(i.collapsed&&u.settings.forced_root_block){if(r=u.dom.getParent(i.startContainer,"PRE"),!r)return;if(1==t)o=S(n.fromRangeStart(i));else o=T(n.fromRangeStart(i));if(!o){if(a=s(),1==t)u.$(r).after(a);else u.$(r).before(a);u.selection.select(a,true),u.selection.collapse()}}}function K(e,t,n,i){var r;if(r=$(e,t,n,i),r)return r;if(r=q(e,i),r)return r;return null}function Y(e,t,n){var i;if(i=j(e,t,n),i)return i;if(i=q(e,n),i)return i;return null}function X(){return A("*[data-mce-caret]")[0]}function G(e){if(e.hasAttribute("data-mce-caret"))i.showCaretContainerBlock(e),L(O()),I(e[0])}function J(e){var t,i;if(e=r.normalizeRange(1,N,e),t=n.fromRangeStart(e),y(t.getNode()))return H(1,t.getNode(),!t.isAtEnd());if(y(t.getNode(true)))return H(1,t.getNode(true),false);if(i=u.dom.getParent(t.getNode(),d.or(y,v)),y(i))return H(1,i,false);return null}function Q(e){var t;if(!e||!e.collapsed)return e;if(t=J(e),t)return t;return e}function Z(e){var t,r,o,a;if(!y(e))return null;if(y(e.previousSibling))o=e.previousSibling;if(r=T(n.before(e)),!r)t=S(n.after(e));if(t&&b(t.getNode()))a=t.getNode();if(i.remove(e.previousSibling),i.remove(e.nextSibling),u.dom.remove(e),u.dom.isEmpty(u.getBody()))return u.setContent(""),void u.focus();if(o)return n.after(o).toRange();if(a)return n.before(a).toRange();if(r)return r.toRange();if(t)return t.toRange();return null}function ee(e){var t=u.schema.getTextBlockElements();return e.nodeName in t}function te(e){return u.dom.isEmpty(e)}function ne(e,t,i){var r=u.dom,o,a,s,l;if(o=r.getParent(t.getNode(),r.isBlock),a=r.getParent(i.getNode(),r.isBlock),-1===e){if(l=i.getNode(true),w(i)&&M(l)){if(ee(o)){if(te(o))r.remove(o);return n.after(l).toRange()}return Z(i.getNode(true))}}else if(l=t.getNode(),C(t)&&M(l)){if(ee(a)){if(te(a))r.remove(a);return n.before(l).toRange()}return Z(t.getNode())}if(o===a||!ee(o)||!ee(a))return null;while(s=o.firstChild)a.appendChild(s);return u.dom.remove(o),i.toRange()}function ie(e,t,n,r){var o,a,s,l;if(!r.collapsed)if(o=x(r),y(o))return Q(Z(o));if(a=W(e,r),n(a)&&i.isCaretContainerBlock(r.startContainer))return l=-1==e?E.prev(a):E.next(a),l?Q(l.toRange()):r;if(t(a))return Q(Z(a.getNode(-1==e)));var u;if(t(s=-1==e?E.prev(a):E.next(a))){if(-1===e)u=ne(e,a,s);u=ne(e,s,a)}if(u&&!(!r.collapsed&&u.collapsed)&&u.commonAncestorContainer.parentNode)return u}function re(){var r=g(K,1,S,C),o=g(K,-1,T,w),l=g(ie,1,C,w),d=g(ie,-1,w,C),b=g(Y,-1,a.upUntil),x=g(Y,1,a.downUntil);function k(e,t){var n=t(O());if(n&&!e.isDefaultPrevented())e.preventDefault(),L(n)}function E(e){var t=u.getBody();while(e&&e!=t){if(v(e)||y(e))return e;e=e.parentNode}return null}function _(e,t,n){if(n.collapsed)return false;return m.reduce(n.getClientRects(),function(n,i){return n||c.containsXY(i,e,t)},false)}u.on("mouseup",function(){var e=O();if(e.collapsed)L(J(e))}),u.on("click",function(e){var t;if(t=E(e.target),t){if(y(t))e.preventDefault(),u.focus();if(v(t))if(u.dom.isChildOf(t,u.selection.getNode()))le()}}),u.on("blur NewBlock",function(){le(),ce()});function R(e){var t=false;e.on("touchstart",function(){t=false}),e.on("touchmove",function(){t=true}),e.on("touchend",function(e){var n=E(e.target);if(y(n))if(!t)e.preventDefault(),se(F(n))})}var A=function(e){var i=new t(e);if(!e.firstChild)return false;var r=n.before(e.firstChild),o=i.next(r);return o&&!C(o)&&!w(o)},I=function(e,t){return u.dom.getParent(e,u.dom.isBlock)===u.dom.getParent(t,u.dom.isBlock)},z=function(e){if(e.keyCode>=112&&e.keyCode<=123)return false;return true},U=function(e,t){var n=u.dom.getParent(e,u.dom.isBlock),i=u.dom.getParent(t,u.dom.isBlock);return n&&!I(n,i)&&A(n)};R(u),u.on("mousedown touchstart",function(e){var t;if(t=E(e.target),t){if(y(t))e.preventDefault(),se(F(t));else if(!_(e.clientX,e.clientY,u.selection.getRng()))u.selection.placeCaretAt(e.clientX,e.clientY)}else{le(),ce();var n=s.closestCaret(N,e.clientX,e.clientY);if(n)if(!U(e.target,n.node))e.preventDefault(),u.getBody().focus(),L(H(1,n.node,n.before))}}),u.on("keydown",function(e){if(f.modifierPressed(e))return;switch(e.keyCode){case f.RIGHT:k(e,r);break;case f.DOWN:k(e,x);break;case f.LEFT:k(e,o);break;case f.UP:k(e,b);break;case f.DELETE:k(e,l);break;case f.BACKSPACE:k(e,d);break;default:if(y(u.selection.getNode())&&z(e))e.preventDefault()}});function W(){var e,t=E(u.selection.getNode());if(v(t)&&M(t)&&u.dom.isEmpty(t))e=u.dom.create("br",{"data-mce-bogus":"1"}),u.$(t).empty().append(e),u.selection.setRng(n.before(e).toRange())}function V(e){var t=X();if(!t)return;if("compositionstart"==e.type)return e.preventDefault(),e.stopPropagation(),void G(t);if(i.hasContent(t))G(t)}function $(e){var t;switch(e.keyCode){case f.DELETE:case f.BACKSPACE:t=W()}if(t)e.preventDefault()}u.on("keyup compositionstart",function(e){V(e),$(e)},true),u.on("cut",function(){var e=u.selection.getNode();if(y(e))p.setEditorTimeout(u,function(){L(Q(Z(e)))})}),u.on("getSelectionRange",function(e){var t=e.range;if(B){if(!B.parentNode)return void(B=null);(t=t.cloneRange()).selectNode(B),e.range=t}}),u.on("setSelectionRange",function(e){var t;if(t=se(e.range),t)e.range=t}),u.on("AfterSetSelectionRange",function(e){var t=e.range;if(!ae(t))ce();if(!D(t.startContainer.parentNode))le()}),u.on("focus",function(e){p.setEditorTimeout(u,function(){if(!u.destroyed&&u.editorManager&&u.editorManager.focusedEditor===u)u.selection.setRng(Q(u.selection.getRng()))},0)}),u.on("copy",function(t){var n=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!e.ie){var i=P();if(i)t.preventDefault(),n.clearData(),n.setData("text/html",i.outerHTML),n.setData("text/plain",i.outerText)}}),h.init(u)}function oe(){var e=u.contentStyles,t=".mce-content-body";e.push(_.getCss()),e.push(t+" .mce-offscreen-selection {"+"position: absolute;"+"left: -9999999999px;"+"max-width: 1000000px;"+"}"+t+" *[contentEditable=false] {"+"cursor: default;"+"}"+t+" *[contentEditable=true] {"+"cursor: text;"+"}")}function ae(e){return i.isCaretContainer(e.startContainer)||i.isCaretContainer(e.endContainer)}function se(t){var n,i=u.$,r=u.dom,o,a,s,l,c,f,d,m,p;if(!t)return null;if(t.collapsed){if(!ae(t)){if(d=W(1,t),y(d.getNode()))return H(1,d.getNode(),!d.isAtEnd());if(y(d.getNode(true)))return H(1,d.getNode(true),false)}return null}if(s=t.startContainer,l=t.startOffset,c=t.endOffset,3==s.nodeType&&0==l&&y(s.parentNode))s=s.parentNode,l=r.nodeIndex(s),s=s.parentNode;if(1!=s.nodeType)return null;if(c==l+1)n=s.childNodes[l];if(!y(n))return null;if(m=p=n.cloneNode(true),f=u.fire("ObjectSelected",{target:n,targetClone:m}),f.isDefaultPrevented())return null;if(m=f.targetClone,o=i("#"+R),0===o.length)(o=i('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",R)).appendTo(u.getBody());if(t=u.dom.createRng(),m===p&&e.ie)o.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(m),t.setStartAfter(o[0].firstChild.firstChild),t.setEndAfter(m);else o.empty().append(" ").append(m).append(" "),t.setStart(o[0].firstChild,1),t.setEnd(o[0].lastChild,0);return o.css({top:r.getPos(n,u.getBody()).y}),o[0].focus(),a=u.selection.getSel(),a.removeAllRanges(),a.addRange(t),u.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),B=n,ce(),t}function le(){if(B)B.removeAttribute("data-mce-selected"),u.$("#"+R).remove(),B=null}function ue(){_.destroy(),B=null}function ce(){_.hide()}if(e.ceFalse)re(),oe();return{showBlockCaretContainer:G,hideFakeCaret:ce,destroy:ue}}return N}),r("tinymce/util/Uuid",[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()};return{uuid:function(n){return n+e+++t()}}}),r("tinymce/ui/Sidebar",[],function(){return{add:function(e,t,n){var i=e.sidebars?e.sidebars:[];i.push({name:t,settings:n}),e.sidebars=i}}}),r("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/NotificationManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/util/Delay","tinymce/EditorObservable","tinymce/Mode","tinymce/Shortcuts","tinymce/EditorUpload","tinymce/SelectionOverrides","tinymce/util/Uuid","tinymce/ui/Sidebar","tinymce/ErrorReporter"],function(e,n,i,r,o,a,s,l,u,c,f,d,m,p,h,g,v,y,b,w,C,x,k,N,E,S,T,_,R,B,A,D){var P=e.DOM,M=i.ThemeManager,L=i.PluginManager,O=k.extend,I=k.each,H=k.explode,F=k.inArray,z=k.trim,U=k.resolve,W=g.Event,V=x.gecko,$=x.ie;function j(e,t,r){var o=this,a,s,l;if(a=o.documentBaseUrl=r.documentBaseURL,s=r.baseURI,l=r.defaultSettings,t=O({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:"<!DOCTYPE html>",visual:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:true,padd_empty_editor:true,render_ui:true,indentation:"30px",inline_styles:true,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:true,entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o,ie7_compat:true},l,t),l&&l.external_plugins&&t.external_plugins)t.external_plugins=O({},l.external_plugins,t.external_plugins);if(o.settings=t,i.language=t.language||"en",i.languageLoad=t.language_load,i.baseURL=r.baseURL,o.id=t.id=e,o.setDirty(false),o.plugins={},o.documentBaseURI=new p(t.document_base_url||a,{base_uri:s}),o.baseURI=s,o.contentCSS=[],o.contentStyles=[],o.shortcuts=new T(o),o.loadedCSS={},o.editorCommands=new m(o),o.suffix=r.suffix,o.editorManager=r,o.inline=t.inline,o.settings.content_editable=o.inline,t.cache_suffix)x.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"");if(false===t.override_viewport)x.overrideViewPort=false;r.fire("SetupEditor",o),o.execCallback("setup",o),o.$=n.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})}return j.prototype={render:function(){var e=this,t=e.settings,n=e.id,i=e.suffix;function r(){P.unbind(window,"ready",r),e.render()}if(!W.domLoaded)return void P.bind(window,"ready",r);if(!e.getElement())return;if(!x.contentEditable)return;if(!t.inline)e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden";else e.inline=true;var o=e.getElement().form||P.getParent(n,"form");if(o){if(e.formElement=o,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName))P.insertAfter(P.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=true;if(e.formEventDelegate=function(t){e.fire(t.type,t)},P.bind(o,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),t.submit_patch&&!o.submit.nodeType&&!o.submit.length&&!o._mceOldSubmit)o._mceOldSubmit=o.submit,o.submit=function(){return e.editorManager.triggerSave(),e.setDirty(false),o._mceOldSubmit(o)}}if(e.windowManager=new v(e),e.notificationManager=new y(e),"xml"==t.encoding)e.on("GetContent",function(e){if(e.save)e.content=P.encode(e.content)});if(t.add_form_submit_trigger)e.on("submit",function(){if(e.initialized)e.save()});if(t.add_unload_trigger)e._beforeUnload=function(){if(e.initialized&&!e.destroyed&&!e.isHidden())e.save({format:"raw",no_events:true,set_dirty:false})},e.editorManager.on("BeforeUnload",e._beforeUnload);function a(){var n=h.ScriptLoader;if(t.language&&"en"!=t.language&&!t.language_url)t.language_url=e.editorManager.baseURL+"/langs/"+t.language+".js";if(t.language_url)n.add(t.language_url);if(t.theme&&"function"!=typeof t.theme&&"-"!=t.theme.charAt(0)&&!M.urls[t.theme]){var r=t.theme_url;if(r)r=e.documentBaseURI.toAbsolute(r);else r="themes/"+t.theme+"/theme"+i+".js";M.load(t.theme,r)}if(k.isArray(t.plugins))t.plugins=t.plugins.join(" ");I(t.external_plugins,function(e,n){L.load(n,e),t.plugins+=" "+n}),I(t.plugins.split(/[ ,]/),function(e){if(e=z(e),e&&!L.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=L.dependencies(e);I(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"};e=L.createUrl(t,e),L.load(e.resource,e)})}else L.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"})}),n.loadQueue(function(){if(!e.removed)e.init()},e,function(t){if(D.pluginLoadError(e,t[0]),!e.removed)e.init()})}e.editorManager.add(e),a()},init:function(){var e=this,t=e.settings,n=e.getElement(),i,r,o,a,s,l,u,c,f,d,m,p=[];if(e.rtl=t.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(t.language),t.aria_label=t.aria_label||P.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),t.theme)if("function"!=typeof t.theme){if(t.theme=t.theme.replace(/-/,""),l=M.get(t.theme),e.theme=new l(e,M.urls[t.theme]),e.theme.init)e.theme.init(e,M.urls[t.theme]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme=t.theme;function h(t){var n=L.get(t),i,r;if(i=L.urls[t]||e.documentBaseUrl.replace(/\/$/,""),t=z(t),n&&-1===F(p,t)){if(I(L.dependencies(t),function(e){h(e)}),e.plugins[t])return;if(r=new n(e,i,e.$),e.plugins[t]=r,r.init)r.init(e,i),p.push(t)}}if(I(t.plugins.replace(/\-/g,"").split(/[ ,]/),h),t.render_ui&&e.theme){if(e.orgDisplay=n.style.display,"function"!=typeof t.theme){if(i=t.width||n.style.width||n.offsetWidth,r=t.height||n.style.height||n.offsetHeight,o=t.min_height||100,d=/^[0-9\.]+(|px)$/i,d.test(""+i))i=Math.max(parseInt(i,10),100);if(d.test(""+r))r=Math.max(parseInt(r,10),o);if(s=e.theme.renderUI({targetNode:n,width:i,height:r,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),!t.content_editable)if(r=(s.iframeHeight||r)+("number"==typeof r?s.deltaHeight||0:""),r<o)r=o}else{if(s=t.theme(e,n),s.editorContainer.nodeType)s.editorContainer.id=s.editorContainer.id||e.id+"_parent";if(s.iframeContainer.nodeType)s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer";r=s.iframeHeight||n.offsetHeight}e.editorContainer=s.editorContainer}if(t.content_css)I(H(t.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))});if(t.content_style)e.contentStyles.push(t.content_style);if(t.content_editable)return n=a=s=null,e.initContentBody();if(e.iframeHTML=t.doctype+"<html><head>",t.document_base_url!=e.documentBaseUrl)e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />';if(!x.caretAfter&&t.ie7_compat)e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />';if(e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(m=0;m<e.contentCSS.length;m++){var g=e.contentCSS[m];e.iframeHTML+='<link type="text/css" '+'rel="stylesheet" '+'href="'+k._addCacheSuffix(g)+'" />',e.loadedCSS[g]=true}if(c=t.body_id||"tinymce",-1!=c.indexOf("="))c=(c=e.getParam("body_id","","hash"))[e.id]||c;if(f=t.body_class||"",-1!=f.indexOf("="))f=(f=e.getParam("body_class","","hash"))[e.id]||"";if(t.content_security_policy)e.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+t.content_security_policy+'" />';e.iframeHTML+='</head><body id="'+c+'" class="mce-content-body '+f+'" data-id="'+e.id+'"><br></body></html>';var v="javascript:(function(){"+'document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);'+"document.close();ed.initContentBody(true);})()";if(document.domain!=location.hostname)if(x.ie&&x.ie<12)u=v;var y=P.create("iframe",{id:e.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. "+"Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:r,display:"block"}});if(y.onload=function(){y.onload=null,e.fire("load")},P.setAttrib(y,"src",u||'javascript:""'),e.contentAreaContainer=s.iframeContainer,e.iframeElement=y,a=P.add(s.iframeContainer,y),$)try{e.getDoc()}catch(e){a.src=u=v}if(s.editorContainer)P.get(s.editorContainer).style.display=e.orgDisplay,e.hidden=P.isHidden(s.editorContainer);if(e.getElement().style.display="none",P.setAttrib(e.id,"aria-hidden",true),!u)e.initContentBody();n=a=s=null},initContentBody:function(t){var n=this,i=n.settings,s=n.getElement(),m=n.getDoc(),p,h;if(!i.inline)n.getElement().style.visibility=n.orgVisibility;if(!t&&!i.content_editable)m.open(),m.write(n.iframeHTML),m.close();if(i.content_editable)n.on("remove",function(){var e=this.getBody();P.removeClass(e,"mce-content-body"),P.removeClass(e,"mce-edit-focus"),P.setAttrib(e,"contentEditable",null)}),P.addClass(s,"mce-content-body"),n.contentDocument=m=i.content_document||document,n.contentWindow=i.content_window||window,n.bodyElement=s,i.content_document=i.content_window=null,i.root_name=s.nodeName.toLowerCase();if(p=n.getBody(),p.disabled=true,n.readonly=i.readonly,!n.readonly){if(n.inline&&"static"==P.getStyle(p,"position",true))p.style.position="relative";p.contentEditable=n.getParam("content_editable_state",true)}if(p.disabled=false,n.editorUpload=new _(n),n.schema=new b(i),n.dom=new e(m,{keep_values:true,url_converter:n.convertURL,url_converter_scope:n,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:true,root_element:n.inline?n.getBody():null,collect:i.content_editable,schema:n.schema,onSetAttrib:function(e){n.fire("SetAttrib",e)}}),n.parser=new w(i,n.schema),n.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){var i=e.length,r,o=n.dom,a,s;while(i--)if(r=e[i],a=r.attr(t),s="data-mce-"+t,!r.attributes.map[s]){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;if("style"===t){if(a=o.serializeStyle(o.parseStyle(a),r.name),!a.length)a=null;r.attr(s,a),r.attr(t,a)}else if("tabindex"===t)r.attr(s,a),r.attr(t,null);else r.attr(s,n.convertURL(a,t,r.name))}}),n.parser.addNodeFilter("script",function(e){var t=e.length,n,i;while(t--)if(n=e[t],i=n.attr("type")||"no/type",0!==i.indexOf("mce-"))n.attr("type","mce-"+i)}),n.parser.addNodeFilter("#cdata",function(e){var t=e.length,n;while(t--)(n=e[t]).type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){var t=e.length,i,r=n.schema.getNonEmptyElements();while(t--)if(i=e[t],i.isEmpty(r)&&0===i.getAll("br").length)i.append(new o("br",1)).shortEnded=true}),n.serializer=new a(i,n),n.selection=new l(n.dom,n.getWin(),n.serializer,n),n.formatter=new u(n),n.undoManager=new c(n),n.forceBlocks=new d(n),n.enterKey=new f(n),n._nodeChangeDispatcher=new r(n),n._selectionOverrides=new R(n),n.fire("PreInit"),!i.browser_spellcheck&&!i.gecko_spellcheck)m.body.spellcheck=false,P.setAttrib(p,"spellcheck","false");if(n.quirks=new C(n),n.fire("PostRender"),i.directionality)p.dir=i.directionality;if(i.nowrap)p.style.whiteSpace="nowrap";if(i.protect)n.on("BeforeSetContent",function(e){I(i.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})});if(n.on("SetContent",function(){n.addVisual(n.getBody())}),i.padd_empty_editor)n.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(n.load({initial:true,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=true,n.bindPendingEventDelegates(),n.fire("init"),n.focus(true),n.nodeChanged({initial:true}),n.execCallback("init_instance_callback",n),n.on("compositionstart compositionend",function(e){n.composing="compositionstart"===e.type}),n.contentStyles.length>0)h="",I(n.contentStyles,function(e){h+=e+"\r\n"}),n.dom.addStyle(h);if(I(n.contentCSS,function(e){if(!n.loadedCSS[e])n.dom.loadCSS(e),n.loadedCSS[e]=true}),i.auto_focus)N.setEditorTimeout(n,function(){var e;if(true===i.auto_focus)e=n;else e=n.editorManager.get(i.auto_focus);if(!e.destroyed)e.focus()},100);s=m=p=null,n.fire("initContentBody")},focus:function(e){var t=this,n=t.selection,i=t.settings.content_editable,r,o,a=t.getDoc(),s=t.getBody(),l;function u(e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})}if(!e){if(r=n.getRng(),r.item)o=r.item(0);if(t.quirks.refreshContentEditable(),l=u(n.getNode()),t.$.contains(s,l))return l.focus(),n.normalize(),void t.editorManager.setActive(t);if(!i){if(!x.opera)t.getBody().focus();t.getWin().focus()}if(V||i){if(s.setActive)try{s.setActive()}catch(e){s.focus()}else s.focus();if(i)n.normalize()}if(o&&o.ownerDocument==a)(r=a.body.createControlRange()).addElement(o),r.select()}t.editorManager.setActive(t)},execCallback:function(e){var t=this,n=t.settings[e],i;if(!n)return;if(t.callbackLookup&&(i=t.callbackLookup[e]))n=i.func,i=i.scope;if("string"===typeof n)i=(i=n.replace(/\.\w+$/,""))?U(i):0,n=U(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:i};return n.apply(i||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;if(!e)return"";return e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}),this.editorManager.translate(e)},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var i=e in this.settings?this.settings[e]:t,r;if("hash"===n){if(r={},"string"===typeof i)I(i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){if(e=e.split("="),e.length>1)r[z(e[0])]=z(e[1]);else r[z(e[0])]=z(e)});else r=i;return r}return i},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;if(t.cmd)t.onclick=function(){n.execCommand(t.cmd)};if(!t.text&&!t.icon)t.icon=e;n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return A.add(this,e,t)},addMenuItem:function(e,t){var n=this;if(t.cmd)t.onclick=function(){n.execCommand(t.cmd)};n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this,i;if(n.contextToolbars=n.contextToolbars||[],"string"==typeof e)i=e,e=function(e){return n.dom.is(e,i)};n.contextToolbars.push({id:B.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;if(e.hidden){if(e.hidden=false,e.inline)e.getBody().contentEditable=true;else P.show(e.getContainer()),P.hide(e.id);e.load(),e.fire("show")}},hide:function(){var e=this,t=e.getDoc();if(!e.hidden){if($&&t&&!e.inline)t.execCommand("SelectAll");if(e.save(),e.inline){if(e.getBody().contentEditable=false,e==e.editorManager.focusedEditor)e.editorManager.focusedEditor=null}else P.hide(e.getContainer()),P.setStyle(e.id,"display",e.orgDisplay);e.hidden=true,e.fire("hide")}},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,i=n.getElement(),r;if(i){if(e=e||{},e.load=true,r=n.setContent(i.value!==t?i.value:i.innerHTML,e),e.element=i,!e.no_events)n.fire("LoadContent",e);return e.element=i=null,r}},save:function(e){var t=this,n=t.getElement(),i,r;if(!n||!t.initialized)return;if(e=e||{},e.save=true,e.element=n,i=e.content=t.getContent(e),!e.no_events)t.fire("SaveContent",e);if("raw"==e.format)t.fire("RawSaveContent",e);if(i=e.content,!/TEXTAREA|INPUT/i.test(n.nodeName)){if(!t.inline)n.innerHTML=i;if(r=P.getParent(t.id,"form"))I(r.elements,function(e){if(e.name==t.id)return e.value=i,false})}else n.value=i;if(e.element=n=null,false!==e.set_dirty)t.setDirty(false);return i},setContent:function(e,t){var n=this,i=n.getBody(),r,o;if(t=t||{},t.format=t.format||"html",t.set=true,t.content=e,!t.no_events)n.fire("BeforeSetContent",t);if(e=t.content,0===e.length||/^\s+$/.test(e)){if(o=$&&$<11?"":'<br data-mce-bogus="1">',"TABLE"==i.nodeName)e="<tr><td>"+o+"</td></tr>";else if(/^(UL|OL)$/.test(i.nodeName))e="<li>"+o+"</li>";if(r=n.settings.forced_root_block,r&&n.schema.isValidChild(i.nodeName.toLowerCase(),r.toLowerCase()))e=o,e=n.dom.createHTML(r,n.settings.forced_root_block_attrs,e);else if(!$&&!e)e='<br data-mce-bogus="1">';n.dom.setHTML(i,e),n.fire("SetContent",t)}else{if("raw"!==t.format)e=new s({validate:n.validate},n.schema).serialize(n.parser.parse(e,{isRootContent:true}));if(t.content=z(e),n.dom.setHTML(i,t.content),!t.no_events)n.fire("SetContent",t)}return t.content},getContent:function(e){var t=this,n,i=t.getBody();if(e=e||{},e.format=e.format||"html",e.get=true,e.getInner=true,!e.no_events)t.fire("BeforeGetContent",e);if("raw"==e.format)n=k.trim(t.serializer.getTrimmedContent());else if("text"==e.format)n=i.innerText||i.textContent;else n=t.serializer.serialize(i,e);if("text"!=e.format)e.content=z(n);else e.content=n;if(!e.no_events)t.fire("GetContent",e);return e.content},insertContent:function(e,t){if(t)e=O({content:e},t);this.execCommand("mceInsertContent",false,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;if(this.isNotDirty=!e,e&&e!=t)this.fire("dirty")},setMode:function(e){S.setMode(this,e)},getContainer:function(){var e=this;if(!e.container)e.container=P.get(e.editorContainer||e.id+"_parent");return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){if(!this.targetElm)this.targetElm=P.get(this.id);return this.targetElm},getWin:function(){var e=this,t;if(!e.contentWindow)if(t=e.iframeElement,t)e.contentWindow=t.contentWindow;return e.contentWindow},getDoc:function(){var e=this,t;if(!e.contentDocument)if(t=e.getWin(),t)e.contentDocument=t.document;return e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var i=this,r=i.settings;if(r.urlconverter_callback)return i.execCallback("urlconverter_callback",e,n,true,t);if(!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length)return e;if(r.relative_urls)return i.documentBaseURI.toRelative(e);return e=i.documentBaseURI.toAbsolute(e,r.remove_script_host),e},addVisual:function(e){var n=this,i=n.settings,r=n.dom,o;if(e=e||n.getBody(),n.hasVisual===t)n.hasVisual=i.visual;I(r.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":if(o=i.visual_table_class||"mce-item-table",t=r.getAttrib(e,"border"),(!t||"0"==t)&&n.hasVisual)r.addClass(e,o);else r.removeClass(e,o);return;case"A":if(!r.getAttrib(e,"href",false))if(t=r.getAttrib(e,"name")||e.id,o=i.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual)r.addClass(e,o);else r.removeClass(e,o);return}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;if(!e.removed){if(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput)P.remove(e.getElement().nextSibling);if(!e.inline){if($&&$<10)e.getDoc().execCommand("SelectAll",false,null);P.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null}e.fire("remove"),e.editorManager.remove(e),P.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy()}},destroy:function(e){var t=this,n;if(t.destroyed)return;if(!e&&!t.removed)return void t.remove();if(!e){if(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy)t.theme.destroy();t.selection.destroy(),t.dom.destroy()}if(n=t.formElement,n){if(n._mceOldSubmit)n.submit=n._mceOldSubmit,n._mceOldSubmit=null;P.unbind(n,"submit reset",t.formEventDelegate)}if(t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection)t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null;t.destroyed=1},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},O(j.prototype,E),j}),r("tinymce/util/I18n",["tinymce/util/Tools"],function(e){var t={},n="en";return{setCode:function(e){if(e)n=e,this.rtl=this.data[e]?"rtl"===this.data[e]._dir:false},getCode:function(){return n},rtl:false,add:function(e,n){var i=t[e];if(!i)t[e]=i={};for(var r in n)i[r]=n[r];this.setCode(e)},translate:function(i){var r=t[n]||{};function o(t){if(e.is(t,"function"))return Object.prototype.toString.call(t);return!a(t)?""+t:""}function a(t){return""===t||null===t||e.is(t,"undefined")}function s(t){return t=o(t),e.hasOwn(r,t)?o(r[t]):t}if(a(i))return"";if(e.is(i,"object")&&e.hasOwn(i,"raw"))return o(i.raw);if(e.is(i,"array")){var l=i.slice(1);i=s(i[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(l,n)?o(l[n]):t})}return s(i).replace(/{context:\w+}$/,"")},data:t}}),r("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/util/Delay","tinymce/Env"],function(e,t,n){var i,r,o,a=e.DOM,s=function(e,t){if(e.destroyed)return;var n=e?e.settings.custom_ui_selector:"";return null!==a.getParent(t,function(t){return l.isEditorUIElement(t)||(n?e.dom.is(t,n):false)})};function l(e){function l(){try{return document.activeElement}catch(e){return document.body}}function u(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;if(t.startContainer)(n=e.getDoc().createRange()).setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset);else n=t;return n}function f(f){var d=f.editor;if(d.on("init",function(){if(d.inline||n.ie){if("onbeforedeactivate"in document&&n.ie<9)d.dom.bind(d.getBody(),"beforedeactivate",function(e){if(e.target!=d.getBody())return;try{d.lastRng=d.selection.getRng()}catch(e){}});else d.on("nodechange mouseup keyup",function(e){var t=l();if("nodechange"==e.type&&e.selectionChange)return;if(t&&t.id==d.id+"_ifr")t=d.getBody();if(d.dom.isChildOf(t,d.getBody()))d.lastRng=d.selection.getRng()});if(n.webkit&&!i)i=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();if(n&&!n.collapsed)d.lastRng=n}},a.bind(document,"selectionchange",i)}}),d.on("setcontent",function(){d.lastRng=null}),d.on("mousedown",function(){d.selection.lastFocusBookmark=null}),d.on("focusin",function(){var t=e.focusedEditor,n;if(d.selection.lastFocusBookmark)n=c(d,d.selection.lastFocusBookmark),d.selection.lastFocusBookmark=null,d.selection.setRng(n);if(t!=d){if(t)t.fire("blur",{focusedEditor:d});e.setActive(d),e.focusedEditor=d,d.fire("focus",{blurredEditor:t}),d.focus(true)}d.lastRng=null}),d.on("focusout",function(){t.setEditorTimeout(d,function(){var t=e.focusedEditor;if(!s(d,l())&&t==d)if(d.fire("blur",{focusedEditor:null}),e.focusedEditor=null,d.selection)d.selection.lastFocusBookmark=null})}),!r)r=function(t){var n=e.activeEditor,i;if(i=t.target,n&&i.ownerDocument==document){if(n.selection&&i!=n.getBody())n.selection.lastFocusBookmark=u(n.dom,n.lastRng);if(i!=document.body&&!s(n,i)&&e.focusedEditor==n)n.fire("blur",{focusedEditor:null}),e.focusedEditor=null}},a.bind(document,"focusin",r);if(d.inline&&!o)o=function(t){var n=e.activeEditor,i=n.dom;if(n.inline&&i&&!i.isChildOf(t.target,n.getBody())){var r=n.selection.getRng();if(!r.collapsed)n.lastRng=r}},a.bind(document,"mouseup",o)}function d(t){if(e.focusedEditor==t.editor)e.focusedEditor=null;if(!e.activeEditor)a.unbind(document,"selectionchange",i),a.unbind(document,"focusin",r),a.unbind(document,"mouseup",o),i=r=o=null}e.on("AddEditor",f),e.on("RemoveEditor",d)}return l.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},l._isUIElement=s,l}),r("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Promise","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager","tinymce/AddOnManager"],function(e,t,n,i,r,o,a,s,l,u,c){var f=n.DOM,d=o.explode,m=o.each,p=o.extend,h=0,g,v,y=false;function b(e){m(v.editors,function(t){if("scroll"===e.type)t.fire("ScrollWindow",e);else t.fire("ResizeWindow",e)})}function w(e,n){if(n!==y){if(n)t(window).on("resize scroll",b);else t(window).off("resize scroll",b);y=n}}function C(e){var t=v.editors,n;delete t[e.id];for(var i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1),n=true;break}if(v.activeEditor==e)v.activeEditor=t[0];if(v.focusedEditor==e)v.focusedEditor=null;return n}function x(e){if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode)C(e),e.unbindAllNativeEvents(),e.destroy(true),e.removed=true,e=null;return e}return v={$:t,majorVersion:"4",minorVersion:"5.6",releaseDate:"2017-03-30",editors:[],i18n:l,activeEditor:null,setup:function(){var e=this,t,n,r="",o,a;if(n=i.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n))if(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),!/[\/\\]$/.test(n))n+="/";if(o=window.tinymce||window.tinyMCEPreInit,o)t=o.base||o.baseURL,r=o.suffix;else{for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var c=(a=s[l].src).substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){if(-1!=c.indexOf(".min"))r=".min";t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){if(a=document.currentScript.src,-1!=a.indexOf(".min"))r=".min";t=a.substring(0,a.lastIndexOf("/"))}}e.baseURL=new i(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new i(e.baseURL),e.suffix=r,e.focusManager=new u(e)},overrideDefaults:function(e){var t,n;if(t=e.base_url,t)this.baseURL=new i(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new i(this.baseURL);if(n=e.suffix,e.suffix)this.suffix=n;this.defaultSettings=e;var r=e.plugin_base_urls;for(var o in r)c.PluginManager.urls[o]=r[o]},init:function(n){var i=this,r,s;s=o.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track "+"colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");function l(e,t){return e.inline&&t.tagName.toLowerCase()in s}function u(e,t){if(window.console&&!window.test)window.console.log(e,t)}function c(e){var t=e.id;if(!t){if(t=e.name,t&&!f.get(t))t=e.name;else t=f.uniqueId();e.setAttribute("id",t)}return t}function g(e){var t=n[e];if(!t)return;return t.apply(i,Array.prototype.slice.call(arguments,2))}function v(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}function y(e){var t,n=[];if(e.types)return m(e.types,function(e){n=n.concat(f.select(e.selector))}),n;else if(e.selector)return f.select(e.selector);else if(e.target)return[e.target];switch(e.mode){case"exact":if(t=e.elements||"",t.length>0)m(d(t),function(e){var t;if(t=f.get(e))n.push(t);else m(document.forms,function(t){m(t.elements,function(t){if(t.name===e)e="mce_editor_"+h++,f.setAttrib(t,"id",e),n.push(t)})})});break;case"textareas":case"specific_textareas":m(f.select("textarea"),function(t){if(e.editor_deselector&&v(t,e.editor_deselector))return;if(!e.editor_selector||v(t,e.editor_selector))n.push(t)})}return n}var b=function(e){r=e};function w(){var r=0,a=[],s;function d(t,n,o){var l=new e(t,n,i);a.push(l),l.on("init",function(){if(++r===s.length)b(a)}),l.targetElm=l.targetElm||o,l.render()}if(f.unbind(window,"ready",w),g("onpageload"),s=t.unique(y(n)),n.types)return void m(n.types,function(e){o.each(s,function(t){if(f.is(t,e.selector))return d(c(t),p({},n,e),t),false;return true})});o.each(s,function(e){x(i.get(e.id))}),s=o.grep(s,function(e){return!i.get(e.id)}),m(s,function(e){if(l(n,e))u("Could not initialize inline editor on invalid inline target element",e);else d(c(e),n,e)})}return i.settings=n,f.bind(window,"ready",w),new a(function(e){if(r)e(r);else b=function(t){e(t)}})},get:function(e){if(!arguments.length)return this.editors;return e in this.editors?this.editors[e]:null},add:function(e){var t=this,n=t.editors;if(n[e.id]=e,n.push(e),w(n,true),t.activeEditor=e,t.fire("AddEditor",{editor:e}),!g)g=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",g);return e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,i=t.editors,r;if(!e){for(n=i.length-1;n>=0;n--)t.remove(i[n]);return}if("string"==typeof e)return e=e.selector||e,void m(f.select(e),function(e){if(r=i[e.id],r)t.remove(r)});if(r=e,!i[r.id])return null;if(C(r))t.fire("RemoveEditor",{editor:r});if(!i.length)f.unbind(window,"beforeunload",g);return r.remove(),w(i,i.length>0),r},execCommand:function(t,n,i){var r=this,o=r.get(i);switch(t){case"mceAddEditor":if(!r.get(i))new e(i,r.settings,r).render();return true;case"mceRemoveEditor":if(o)o.remove();return true;case"mceToggleEditor":if(!o)return r.execCommand("mceAddEditor",0,i),true;if(o.isHidden())o.show();else o.hide();return true}if(r.activeEditor)return r.activeEditor.execCommand(t,n,i);return false},triggerSave:function(){m(this.editors,function(e){e.save()})},addI18n:function(e,t){l.add(e,t)},translate:function(e){return l.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!=e){if(t)t.fire("deactivate",{relatedTarget:e});e.fire("activate",{relatedTarget:t})}this.activeEditor=e}},p(v,s),v.setup(),window.tinymce=window.tinyMCE=v,v}),r("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){var e,r,o,a=t.settings;function s(e,t){n(t,function(t,n){if(t)o.setStyle(e,n,t)}),o.rename(e,"span")}function l(i){if(o=t.dom,a.convert_fonts_to_spans)n(o.select("font,u,strike",i.node),function(t){e[t.nodeName.toLowerCase()](o,t)})}if(a.inline_styles)r=i(a.font_size_legacy_values),e={font:function(e,t){s(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size,10)-1]})},u:function(e,n){if("html4"===t.settings.schema)s(n,{textDecoration:"underline"})},strike:function(e,t){s(t,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",l)})})}),r("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],function(e,t){var n={send:function(e){var i,r=0;function o(){if(!e.async||4==i.readyState||r++>1e4){if(e.success&&r<1e4&&200==i.status)e.success.call(e.success_scope,""+i.responseText,i,e);else if(e.error)e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",i,e);i=null}else setTimeout(o,10)}if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=false===e.async?false:true,e.data=e.data||"",n.fire("beforeInitialize",{settings:e}),i=new XMLHttpRequest,i){if(i.overrideMimeType)i.overrideMimeType(e.content_type);if(i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain)i.withCredentials=true;if(e.content_type)i.setRequestHeader("Content-Type",e.content_type);if(e.requestheaders)t.each(e.requestheaders,function(e){i.setRequestHeader(e.key,e.value)});if(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=n.fire("beforeSend",{xhr:i,settings:e}).xhr,i.send(e.data),!e.async)return o();setTimeout(o,10)}}};return t.extend(n,e),n}),r("tinymce/util/JSON",[],function(){function e(t,n){var i,r,o,a;if(n=n||'"',null===t)return"null";if(o=typeof t,"string"==o)return r="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){if('"'===n&&"'"===e)return e;if(i=r.indexOf(t),i+1)return"\\"+r.charAt(i+1);return e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,r="[";i<t.length;i++)r+=(i>0?",":"")+e(t[i],n);return r+"]"}r="{";for(a in t)if(t.hasOwnProperty(a))r+="function"!=typeof t[a]?(r.length>1?","+n:n)+a+n+":"+e(t[a],n):"";return r+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),r("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,n){var i=n.extend;function r(e){this.settings=i({},e),this.count=0}return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,o=n.success;(n=i(this.settings,n)).success=function(t,i){if(t=e.parse(t),"undefined"==typeof t)t={error:"JSON Parse error."};if(t.error)r.call(n.error_scope||n.scope,t.error,i);else o.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){if(r)r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(e){return{callbacks:{},count:0,send:function(n){var i=this,r=e.DOM,o=n.count!==t?n.count:i.count,a="tinymce_jsonp_"+o;i.callbacks[o]=function(e){r.remove(a),delete i.callbacks[o],n.callback(e)},r.add(r.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),i.count++}}}),r("tinymce/util/LocalStorage",[],function(){var e,n,i,r,o,a;try{if(window.localStorage)return localStorage}catch(e){}if(o="tinymce",n=document.documentElement,a=!!n.addBehavior,a)n.addBehavior("#default#userData");function s(){r=[];for(var t in i)r.push(t);e.length=r.length}function l(){var e,r,l,u=0;if(i={},!a)return;function c(e){var n,i;if(i=e!==t?u+e:r.indexOf(",",u),-1===i||i>r.length)return null;return n=r.substring(u,i),u=i+1,n}n.load(o),r=n.getAttribute(o)||"";do{var f=c();if(null===f)break;if(e=c(parseInt(f,32)||0),null!==e){if(f=c(),null===f)break;if(l=c(parseInt(f,32)||0),e)i[e]=l}}while(null!==e);s()}function u(){var e,t="";if(!a)return;for(var r in i)e=i[r],t+=(t?",":"")+r.length.toString(32)+","+r+","+e.length.toString(32)+","+e;n.setAttribute(o,t);try{n.save(o)}catch(e){}s()}return e={key:function(e){return r[e]},getItem:function(e){return e in i?i[e]:null},setItem:function(e,t){i[e]=""+t,u()},removeItem:function(e){delete i[e],u()},clear:function(){i={},u()}},l(),e}),r("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(e,t,n,i,r,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,r.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(e){a[e]=r[e]}),r.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),r("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t=this.settings,n,i,r,o;if(n=t.firstControlClass,i=t.lastControlClass,e.each(function(e){if(e.classes.remove(n).remove(i).add(t.controlClass),e.visible()){if(!r)r=e;o=e}}),r)r.classes.add(n);if(o)o.classes.add(i)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return false}})}),r("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;if(e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc)e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r("tinymce/ui/Button",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;if(t._super(e),e=t.settings,n=t.settings.size,t.on("click mousedown",function(e){e.preventDefault()}),t.on("touchstart",function(e){t.fire("click",e),e.preventDefault()}),e.subtype)t.classes.add(e.subtype);if(n)t.classes.add("btn-"+n);if(e.icon)t.icon(e.icon)},icon:function(e){if(!arguments.length)return this.state.get("icon");return this.state.set("icon",e),this},repaint:function(){var e=this.getEl().firstChild,t;if(e)(t=e.style).width=t.height="100%";this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("icon"),r,o=e.state.get("text"),a="";if(r=e.settings.image,r){if(i="none","string"!=typeof r)r=window.getSelection?r[0]:r[1];r=" style=\"background-image: url('"+r+"')\""}else r="";if(o)e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>";return i=i?n+"ico "+n+"i-"+i:"",'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'">'+'<button role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+r+"></i>":"")+a+"</button>"+"</div>"},bindStates:function(){var e=this,t=e.$,n=e.classPrefix+"txt";function i(i){var r=t("span."+n,e.getEl());if(i){if(!r[0])t("button:first",e.getEl()).append('<span class="'+n+'"></span>'),r=t("span."+n,e.getEl());r.html(e.encode(i))}else r.remove();e.classes.toggle("btn-has-text",!!i)}return e.state.on("change:text",function(e){i(e.value)}),e.state.on("change:icon",function(t){var n=t.value,r=e.classPrefix;e.settings.icon=n,n=n?r+"ico "+r+"i-"+e.settings.icon:"";var o=e.getEl().firstChild,a=o.getElementsByTagName("i")[0];if(n){if(!a||a!=o.firstChild)a=document.createElement("i"),o.insertBefore(a,o.firstChild);a.className=n}else if(a)o.removeChild(a);i(e.state.get("text"))}),e._super()}})}),r("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:false},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){if(e.preventDefault(),!t.disabled())t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){if(!arguments.length)return this.state.get("checked");return this.state.set("checked",e),this},value:function(e){if(!arguments.length)return this.checked();return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span>"+"</div>"},bindStates:function(){var e=this;function t(t){e.classes.toggle("checked",t),e.aria("checked",t)}if(e.state.on("change:text",function(t){e.getEl("al").firstChild.data=e.translate(t.value)}),e.state.on("change:checked change:value",function(n){e.fire("change"),t(n.value)}),e.state.on("change:icon",function(t){var n=t.value,i=e.classPrefix;if("undefined"==typeof n)return e.settings.icon;e.settings.icon=n,n=n?i+"ico "+i+"i-"+e.settings.icon:"";var r=e.getEl().firstChild,o=r.getElementsByTagName("i")[0];if(n){if(!o||o!=r.firstChild)o=document.createElement("i"),r.insertBefore(o,r.firstChild);o.className=n}else if(o)r.removeChild(o)}),e.state.get("checked"))t(true);return e._super()}})}),r("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/util/VK","tinymce/util/Tools"],function(e,t,n,i,r,o){return e.extend({init:function(e){var t=this;if(t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=true,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu)e.icon="caret";t.on("click",function(n){var r=n.target,o=t.getEl();if(!i.contains(o,r)&&r!=o)return;while(r&&r!=o){if(r.id&&-1!=r.id.indexOf("-open"))if(t.fire("action"),e.menu)if(t.showMenu(),n.aria)t.menu.items()[0].focus();r=r.parentNode}}),t.on("keydown",function(e){var n;if(13==e.keyCode&&"INPUT"===e.target.nodeName)e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,false}),t.fire("submit",{data:n.toJSON()})}),t.on("keyup",function(e){if("INPUT"==e.target.nodeName){var n=t.state.get("value"),i=e.target.value;if(i!==n)t.state.set("value",i),t.fire("autocomplete",e)}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var i=t.statusMessage()||"Ok",r=n.text(i).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==r),n.classes.toggle("tooltip-nw","bc-tl"==r),n.classes.toggle("tooltip-ne","bc-tr"==r),n.moveRel(e.target,r)}})},statusLevel:function(e){if(arguments.length>0)this.state.set("statusLevel",e);return this.state.get("statusLevel")},statusMessage:function(e){if(arguments.length>0)this.state.set("statusMessage",e);return this.state.get("statusMessage")},showMenu:function(){var e=this,n=e.settings,i;if(!e.menu){if(i=n.menu||[],i.length)i={type:"menu",items:i};else i.type=i.type||"menu";e.menu=t.create(i).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){if(t.control===e.menu)e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){if("INPUT"==t.target.tagName.toUpperCase())e.menu.hide()}),e.aria("expanded",true)}e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),r=e.getEl("open"),o=e.layoutRect(),a,s,l=0,u=t.firstChild;if(e.statusLevel()&&"none"!==e.statusLevel())l=parseInt(n.getRuntimeStyle(u,"padding-right"),10)-parseInt(n.getRuntimeStyle(u,"padding-left"),10);if(r)a=o.w-n.getSize(r).width-10;else a=o.w-10;var c=document;if(c.all&&(!c.documentMode||c.documentMode<=8))s=e.layoutRect().h-2+"px";return i(u).css({width:a-l,lineHeight:s}),e._super(),e},postRender:function(){var e=this;return i(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.classPrefix,r=e.state.get("value")||"",o,a,s="",l="",u="";if("spellcheck"in n)l+=' spellcheck="'+n.spellcheck+'"';if(n.maxLength)l+=' maxlength="'+n.maxLength+'"';if(n.size)l+=' size="'+n.size+'"';if(n.subtype)l+=' type="'+n.subtype+'"';if(u='<i id="'+t+'-status" class="mce-status mce-ico" style="display: none"></i>',e.disabled())l+=' disabled="disabled"';if(o=n.icon,o&&"caret"!=o)o=i+"ico "+i+"i-"+n.icon;if(a=e.state.get("text"),o||a)s='<div id="'+t+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button">'+'<button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=o?'<i class="'+o+'"></i>':'<i class="'+i+'caret"></i>')+(a?(o?" ":"")+a:"")+"</button>"+"</div>",e.classes.add("has-open");return'<div id="'+t+'" class="'+e.classes+'">'+'<input id="'+t+'-inp" class="'+i+'textbox" value="'+e.encode(r,false)+'" hidefocus="1"'+l+' placeholder="'+e.encode(n.placeholder)+'" />'+u+s+"</div>"},value:function(e){if(arguments.length)return this.state.set("value",e),this;if(this.state.get("rendered"))this.state.set("value",this.getEl("inp").value);return this.state.get("value")},showAutoComplete:function(e,n){var i=this;if(0===e.length)return void i.hideMenu();var r=function(e,t){return function(){i.fire("selectitem",{title:t,value:e})}};if(i.menu)i.menu.items().remove();else i.menu=t.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(i).renderTo();o.each(e,function(e){i.menu.add({text:e.title,url:e.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),i.menu.renderNew(),i.hideMenu(),i.menu.on("cancel",function(e){if(e.control.parent()===i.menu)e.stopPropagation(),i.focus(),i.hideMenu()}),i.menu.on("select",function(){i.focus()});var a=i.layoutRect().w;i.menu.layoutRect({w:a,minW:0,maxW:a}),i.menu.reflow(),i.menu.show(),i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){if(this.menu)this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){if(e.getEl("inp").value!=t.value)e.getEl("inp").value=t.value}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var i=e.getEl("status"),r=e.classPrefix,o=t.value;n.css(i,"display","none"===o?"none":""),n.toggleClass(i,r+"i-checkmark","ok"===o),n.toggleClass(i,r+"i-warning","warn"===o),n.toggleClass(i,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()}),n.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){if(e.menu&&e.menu.visible())t.stopPropagation(),e.hideMenu()});var t=function(e,t){if(t&&t.items().length>0)t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var i=n.keyCode;if("INPUT"===n.target.nodeName)if(i===r.DOWN)n.preventDefault(),e.fire("autocomplete"),t(0,e.menu);else if(i===r.UP)n.preventDefault(),t(-1,e.menu)}),e._super()},remove:function(){if(i(this.getEl("inp")).off(),this.menu)this.menu.remove();this._super()}})}),r("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],function(e){return e.extend({init:function(e){var t=this;if(e.spellcheck=false,e.onaction)e.icon="none";t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){if(e.state.get("rendered"))e.repaintColor(t.value)}),e._super()}})}),r("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(true),!e.panel){var i=n.panel;if(i.type)i={layout:"grid",items:i};i.role=i.role||"dialog",i.popover=true,i.autohide=true,i.ariaRoot=true,e.panel=new t(i).on("hide",function(){e.active(false)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}else e.panel.show();e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;if(e.panel)e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",true),e.on("click",function(t){if(t.control===e)if(e.panel&&e.panel.visible())e.hidePanel();else e.showPanel(),e.panel.focus(!!t.aria)}),e._super()},remove:function(){if(this.panel)this.panel.remove(),this.panel=null;return this._super()}})}),r("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){if(e)return this._color=e,this.getEl("preview").style.backgroundColor=e,this;return this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";if(i)e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(i)+"</span>";return'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(i){if(i.aria&&"down"==i.aria.key)return;if(i.control==e&&!n.getParent(i.target,"."+e.classPrefix+"open"))i.stopImmediatePropagation(),t.call(e,i)}),delete e.settings.onclick,e._super()}})}),r("tinymce/util/Color",[],function(){var e=Math.min,t=Math.max,n=Math.round;function i(i){var r=this,o=0,a=0,s=0;function l(i,r,o){var a,s,l,u,c,f;if(a=0,s=0,l=0,i/=255,r/=255,o/=255,c=e(i,e(r,o)),f=t(i,t(r,o)),c==f)return l=c,{h:0,s:0,v:100*l};return u=i==c?r-o:o==c?i-r:o-i,a=i==c?3:o==c?1:5,a=60*(a-u/(f-c)),s=(f-c)/f,l=f,{h:n(a),s:n(100*s),v:n(100*l)}}function u(i,r,l){var u,c,f,d;if(i=(parseInt(i,10)||0)%360,r=parseInt(r,10)/100,l=parseInt(l,10)/100,r=t(0,e(r,1)),l=t(0,e(l,1)),0===r)return void(o=a=s=n(255*l));switch(u=i/60,c=l*r,f=c*(1-Math.abs(u%2-1)),d=l-c,Math.floor(u)){case 0:o=c,a=f,s=0;break;case 1:o=f,a=c,s=0;break;case 2:o=0,a=c,s=f;break;case 3:o=0,a=f,s=c;break;case 4:o=f,a=0,s=c;break;case 5:o=c,a=0,s=f;break;default:o=a=s=0}o=n(255*(o+d)),a=n(255*(a+d)),s=n(255*(s+d))}function c(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(o)+e(a)+e(s)}function f(){return{r:o,g:a,b:s}}function d(){return l(o,a,s)}function m(e){var t;if("object"==typeof e){if("r"in e)o=e.r,a=e.g,s=e.b;else if("v"in e)u(e.h,e.s,e.v)}else if(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))o=parseInt(t[1],10),a=parseInt(t[2],10),s=parseInt(t[3],10);else if(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))o=parseInt(t[1],16),a=parseInt(t[2],16),s=parseInt(t[3],16);else if(t=/#([0-F])([0-F])([0-F])/gi.exec(e))o=parseInt(t[1]+t[1],16),a=parseInt(t[2]+t[2],16),s=parseInt(t[3]+t[3],16);return o=o<0?0:o>255?255:o,a=a<0?0:a>255?255:a,s=s<0?0:s>255?255:s,r}if(i)m(i);r.toRgb=f,r.toHsv=d,r.toHex=c,r.parse=m}return i}),r("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],function(e,t,n,i){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e=this,r=e.color(),o,a,s,l,u;a=e.getEl("h"),s=e.getEl("hp"),l=e.getEl("sv"),u=e.getEl("svp");function c(e,t){var i=n.getPos(e),r,o;return r=t.pageX-i.x,o=t.pageY-i.y,r=Math.max(0,Math.min(r/e.clientWidth,1)),o=Math.max(0,Math.min(o/e.clientHeight,1)),{x:r,y:o}}function f(t,r){var o=(360-t.h)/360;if(n.css(s,{top:100*o+"%"}),!r)n.css(u,{left:t.s+"%",top:100-t.v+"%"});l.style.background=new i({s:100,v:100,h:t.h}).toHex(),e.color().parse({s:t.s,v:t.v,h:t.h})}function d(t){var n;n=c(l,t),o.s=100*n.x,o.v=100*(1-n.y),f(o),e.fire("change")}function m(t){var n;n=c(a,t),(o=r.toHsv()).h=360*(1-n.y),f(o,true),e.fire("change")}e._repaint=function(){f(o=r.toHsv())},e._super(),e._svdraghelper=new t(e._id+"-sv",{start:d,drag:d}),e._hdraghelper=new t(e._id+"-h",{start:m,drag:m}),e._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(arguments.length){if(t.color().parse(e),t._rendered)t._repaint()}else return t.color().toHex()},color:function(){if(!this._color)this._color=new i;return this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";function o(){var e,t,i="",o,a;for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(a=r.split(",")).length-1;e<t;e++)i+='<div class="'+n+'colorpicker-h-chunk" style="'+"height:"+100/t+"%;"+o+a[e]+",endColorstr="+a[e+1]+");"+"-ms-"+o+a[e]+",endColorstr="+a[e+1]+")"+'"></div>';return i}return i='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="'+("background: -ms-linear-gradient(top,"+r+");"+"background: linear-gradient(to bottom,"+r+");")+'">'+o()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div>'+"</div>",'<div id="'+t+'" class="'+e.classes+'">'+'<div id="'+t+'-sv" class="'+n+'colorpicker-sv">'+'<div class="'+n+'colorpicker-overlay1">'+'<div class="'+n+'colorpicker-overlay2">'+'<div id="'+t+'-svp" class="'+n+'colorpicker-selector1">'+'<div class="'+n+'colorpicker-selector2"></div>'+"</div>"+"</div>"+"</div>"+"</div>"+i+"</div>"}})}),r("tinymce/ui/Path",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;if(!e.delimiter)e.delimiter="»";t._super(e),t.classes.add("path"),t.canFocus=true,t.on("click",function(e){var n;if(n=e.target.getAttribute("data-index"))t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){if(!arguments.length)return this.state.get("row");return this.state.set("row",e),this},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t=this,n=e||[],i,r,o="",a=t.classPrefix;for(i=0,r=n.length;i<r;i++)o+=(i>0?'<div class="'+a+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(i==r-1?" "+a+"last":"")+'" data-index="'+i+'" tabindex="-1" id="'+t._id+"-"+i+'" aria-level="'+(i+1)+'">'+n[i].name+"</div>";if(!o)o='<div class="'+a+'path-item"> </div>';return o}})}),r("tinymce/ui/ElementPath",["tinymce/ui/Path"],function(e){return e.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"==e.nodeName||!!e.getAttribute("data-mce-bogus"))return true;if("bookmark"===e.getAttribute("data-mce-type"))return true}return false}if(false!==t.settings.elementpath)e.on("select",function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()}),t.on("nodeChange",function(i){var r=[],o=i.parents,a=o.length;while(a--)if(1==o[a].nodeType&&!n(o[a])){var s=t.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(!s.isDefaultPrevented())r.push({name:s.name,element:o[a]});if(s.isPropagationStopped())break}e.row(r)});return e._super()}})}),r("tinymce/ui/FormItem",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,i=e.items();if(!e.settings.formItemDefaults)e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}};i.each(function(i){var r,o=i.settings.label;if(o){if(r=new t(n.extend({items:{type:"label",id:i._id+"-l",text:o,flex:0,forId:i._id,disabled:i.disabled()}},e.settings.formItemDefaults)),r.type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex)i.settings.flex=1;e.replace(i,r),r.add(i)}})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){var e=this;e._super();function t(){var t=0,n=[],i,r,o;if(false===e.settings.labelGapCalc)return;if("children"==e.settings.labelGapCalc)o=e.find("formitem");else o=e.items();o.filter("formitem").each(function(e){var i=e.items()[0],r=i.getEl().clientWidth;t=r>t?r:t,n.push(i)}),r=e.settings.labelGap||0,i=n.length;while(i--)n[i].settings.minWidth=t+r}e.on("show",t),t()}})}),r("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}})}),r("tinymce/content/LinkTargets",["tinymce/dom/DOMUtils","tinymce/util/Fun","tinymce/util/Arr","tinymce/util/Uuid","tinymce/util/Tools","tinymce/dom/NodeType"],function(e,t,n,i,r,o){var a=r.trim,s=function(e,t,n,i,r){return{type:e,title:t,url:n,level:i,attach:r}},l=function(e){while(e=e.parentNode){var t=e.contentEditable;if(t&&"inherit"!==t)return o.isContentEditableTrue(e)}return false},u=function(t,n){return e.DOM.select(t,n)},c=function(e){return e.innerText||e.textContent},f=function(e){return e.id?e.id:i.uuid("h")},d=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},m=function(e){return d(e)&&h(e)},p=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},h=function(e){return l(e)&&!o.isContentEditableFalse(e)},g=function(e){return p(e)&&h(e)},v=function(e){return p(e)?parseInt(e.nodeName.substr(1),10):0},y=function(e){var t=f(e),n=function(){e.id=t};return s("header",c(e),"#"+t,v(e),n)},b=function(e){var n=e.id||e.name,i=c(e);return s("anchor",i?i:"#"+n,"#"+n,0,t.noop)},w=function(e){return n.map(n.filter(e,g),y)},C=function(e){return n.map(n.filter(e,m),b)},x=function(e){return u("h1,h2,h3,h4,h5,h6,a:not([href])",e)},k=function(e){return a(e.title).length>0};return{find:function(e){var t=x(e);return n.filter(w(t).concat(C(t)),k)}}}),r("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools","tinymce/util/Arr","tinymce/util/Fun","tinymce/util/VK","tinymce/content/LinkTargets"],function(e,t,n,i,r,o){var a={},s=5,l=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},u=function(e){return t.map(e,l)},c=function(e,t){return{title:e,value:{title:e,url:t,attach:i.noop}}},f=function(e,t){return!n.find(t,function(t){return t.url===e})},d=function(e,t,n){var i=t in e?e[t]:n;return false===i?null:i},m=function(e,r,o,s){var l={title:"-"},m=function(e){var a=n.filter(e[o],function(e){return f(e,r)});return t.map(a,function(e){return{title:e,value:{title:e,url:e,attach:i.noop}}})},p=function(e){var t=n.filter(r,function(t){return t.type==e});return u(t)},g=function(){var e=p("anchor"),t=d(s,"anchor_top","#top"),n=d(s,"anchor_bottom","#bottom");if(null!==t)e.unshift(c("<top>",t));if(null!==n)e.push(c("<bottom>",n));return e},v=function(e){return n.reduce(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(l,t)},[])};if(false===s.typeahead_urls)return[];return"file"===o?v([h(e,m(a)),h(e,p("header")),h(e,g())]):h(e,m(a))},p=function(e,t){var i=a[t];if(!/^https?/.test(e))return;if(i){if(-1===n.indexOf(i,e))a[t]=i.slice(0,s).concat(e)}else a[t]=[e]},h=function(e,n){var i=e.toLowerCase(),r=t.grep(n,function(e){return-1!==e.title.toLowerCase().indexOf(i)});return 1===r.length&&r[0].title===e?[]:r},g=function(e){var t=e.title;return t.raw?t.raw:t},v=function(e,t,n,i){var r=function(r){var a=o.find(n),s=m(r,a,i,t);e.showAutoComplete(s,r)};e.on("autocomplete",function(){r(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var r=g(n);if("image"===i)e.fire("change",{meta:{alt:r,attach:n.attach}});else e.fire("change",{meta:{text:r,attach:n.attach}});e.focus()}),e.on("click",function(t){if(0===e.value().length&&"INPUT"===t.target.nodeName)r("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){if(!t.isDefaultPrevented())p(e.value(),i)})})},y=function(e){var t=e.status,n=e.message;if("valid"===t)return{status:"ok",message:n};else if("unknown"===t)return{status:"warn",message:n};else if("invalid"===t)return{status:"warn",message:n};else return{status:"none",message:""}},b=function(e,t,n){var i=t.filepicker_validator_handler;if(i){var r=function(t){if(0===t.length)return void e.statusLevel("none");i({url:t,type:n},function(t){var n=y(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){r(e.value)})}};return e.extend({init:function(e){var n=this,i=tinymce.activeEditor,r=i.settings,o,a,s,l=e.filetype;if(e.spellcheck=false,s=r.file_picker_types||r.file_browser_callback_types,s)s=t.makeMap(s,/[, ]/);if(!s||s[l])if(a=r.file_picker_callback,a&&(!s||s[l]))o=function(){var e=n.fire("beforecall").meta;e=t.extend({filetype:l},e),a.call(i,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),e)};else if(a=r.file_browser_callback,a&&(!s||s[l]))o=function(){a(n.getEl("inp").id,n.value(),l,window)};if(o)e.icon="browse",e.onaction=o;n._super(e),v(n,r,i.getBody(),l),b(n,r,l)}})}),r("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){if(e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc)e.recalc()})}})}),r("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,r,o,a,s,l,u,c,f,d,m,p,h,g,v=[],y,b,w,C,x,k,N,E,S,T,_,R,B,A,D,P,M,L,O,I,H,F,z=Math.max,U=Math.min;if(i=e.items().filter(":visible"),r=e.layoutRect(),o=e.paddingBox,a=e.settings,d=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,u=a.spacing||0,"row-reversed"==d||"column-reverse"==d)i=i.set(i.toArray().reverse()),d=d.split("-")[0];if("column"==d)S="y",N="h",E="minH",T="maxH",R="innerH",_="top",B="deltaH",A="contentH",O="left",M="w",D="x",P="innerW",L="minW",I="right",H="deltaW",F="contentW";else S="x",N="w",E="minW",T="maxW",R="innerW",_="left",B="deltaW",A="contentW",O="top",M="h",D="y",P="innerH",L="minH",I="bottom",H="deltaH",F="contentH";for(f=r[R]-o[_]-o[_],k=c=0,t=0,n=i.length;t<n;t++){if(m=i[t],p=m.layoutRect(),h=m.settings,g=h.flex,f-=t<n-1?u:0,g>0){if(c+=g,p[T])v.push(m);p.flex=g}if(f-=p[E],y=o[O]+p[L]+o[I],y>k)k=y}if(C={},f<0)C[E]=r[E]-f+r[B];else C[E]=r[R]-f+r[B];if(C[L]=k+r[H],C[A]=r[R]-f,C[F]=k,C.minW=U(C.minW,r.maxW),C.minH=U(C.minH,r.maxH),C.minW=z(C.minW,r.startMinWidth),C.minH=z(C.minH,r.startMinHeight),r.autoResize&&(C.minW!=r.minW||C.minH!=r.minH)){if(C.w=C.minW,C.h=C.minH,e.layoutRect(C),this.recalc(e),null===e._lastRect){var W=e.parent();if(W)W._lastRect=null,W.recalc()}return}for(w=f/c,t=0,n=v.length;t<n;t++)if(m=v[t],p=m.layoutRect(),b=p[T],y=p[E]+p.flex*w,y>b)f-=p[T]-p[E],c-=p.flex,p.flex=0,p.maxFlexSize=b;else p.maxFlexSize=0;if(w=f/c,x=o[_],C={},0===c)if("end"==l)x=f+o[_];else if("center"==l){if(x=Math.round(r[R]/2-(r[R]-f)/2)+o[_],x<0)x=o[_]}else if("justify"==l)x=o[_],u=Math.floor(f/(i.length-1));for(C[D]=o[O],t=0,n=i.length;t<n;t++){if(m=i[t],p=m.layoutRect(),y=p.maxFlexSize||p[E],"center"===s)C[D]=Math.round(r[P]/2-p[M]/2);else if("stretch"===s)C[M]=z(p[L]||0,r[P]-o[O]-o[I]),C[D]=o[O];else if("end"===s)C[D]=r[P]-p[M]-o.top;if(p.flex>0)y+=p.flex*w;if(C[N]=y,C[S]=x,m.layoutRect(C),m.recalc)m.recalc();x+=y+u}}})}),r("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){if(e.recalc)e.recalc()})},isNative:function(){return true}})}),r("tinymce/fmt/FontInfo",["tinymce/dom/DOMUtils"],function(e){var n=function(e,t,n){while(n!==t){if(n.style[e])return n.style[e];n=n.parentNode}return""},i=function(e){return e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")},r=function(t,n){return e.DOM.getStyle(n,t,true)};return{getFontSize:function(e,t){var i=n("fontSize",e,t);return""!==i?i:r("fontSize",t)},getFontFamily:function(e,o){var a=n("fontFamily",e,o),s=""!==a?a:r("fontFamily",o);return s!==t?i(s):""},toPt:function(e){if(/[0-9.]+px$/.test(e))return Math.round(72*parseInt(e,10)/96)+"pt";return e}}}),r("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/util/Arr","tinymce/dom/DOMUtils","tinymce/EditorManager","tinymce/Env","tinymce/fmt/FontInfo"],function(e,t,n,i,r,o,a,s,l){var u=i.each,c=function(e){return r.reduce(e,function(e,t){return e.concat(t)},[])};a.on("AddEditor",function(e){var t=e.editor;d(t),m(t),f(t)}),e.translate=function(e){return a.translate(e)},t.tooltips=!s.iOS;function f(e){if(e.settings.ui_container)s.container=o.DOM.select(e.settings.ui_container)[0]}function d(t){t.on("ScriptsLoaded",function(){if(t.rtl)e.rtl=true})}function m(e){var t;function r(t,n){return function(){var i=this;e.on("nodeChange",function(r){var o=e.formatter,a=null;u(r.parents,function(e){if(u(t,function(t){if(n){if(o.matchNode(e,n,{value:t.value}))a=t.value}else if(o.matchNode(e,t.value))a=t.value;if(a)return false}),a)return false}),i.value(a)})}}function o(t){return function(){var n=this,i=function(e){return e?e.split(",")[0]:""};e.on("nodeChange",function(r){var o,a=null;if(o=l.getFontFamily(e.getBody(),r.element),u(t,function(e){if(e.value.toLowerCase()===o.toLowerCase())a=e.value}),u(t,function(e){if(!a&&i(e.value).toLowerCase()===i(o).toLowerCase())a=e.value}),n.value(a),!a&&o)n.text(i(o))})}}function a(t){return function(){var n=this;e.on("nodeChange",function(i){var r,o,a=null;if(r=l.getFontSize(e.getBody(),i.element),o=l.toPt(r),u(t,function(e){if(e.value===r)a=r;else if(e.value===o)a=o}),n.value(a),!a)n.text(o)})}}function s(e){var t=(e=e.replace(/;$/,"").split(";")).length;while(t--)e[t]=e[t].split("=");return e}function f(){var t=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];function r(e){var i=[];if(!e)return;return u(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=r(e.items);else{var a=e.format||"custom"+t++;if(!e.format)e.name=a,n.push(e);o.format=a,o.cmd=e.cmd}i.push(o)}),i}function o(){var t;if(e.settings.style_formats_merge)if(e.settings.style_formats)t=r(i.concat(e.settings.style_formats));else t=r(i);else t=r(e.settings.style_formats||i);return t}return e.on("init",function(){u(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:o(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:true,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;if(n=t.settings.format,n)t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n));if(i=t.settings.cmd,i)t.active(e.queryCommandState(i))})},onclick:function(){if(this.settings.format)b(this.settings.format);if(this.settings.cmd)e.execCommand(this.settings.cmd)}}}}t=f();function d(t){return function(){var n=this;if(e.formatter)e.formatter.formatChanged(t,function(e){n.active(e)});else e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}u({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:d(n),onclick:function(){b(n)}})}),u({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),u({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:d(n)})});function m(t){return function(){var n=this;function i(){var n="redo"==t?"hasRedo":"hasUndo";return e.undoManager?e.undoManager[n]():false}n.disabled(!i()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!i())})}}function p(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}var h=function(e){var t=e;if(t.length>0&&"-"===t[0].text)t=t.slice(1);if(t.length>0&&"-"===t[t.length-1].text)t=t.slice(0,t.length-1);return t},g=function(t){var n,r;if("string"===typeof t)r=t.split(" ");else if(i.isArray(t))return c(i.map(t,g));return n=i.grep(r,function(t){return"|"===t||t in e.menuItems}),i.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},v=function(t){var n=[{text:"-"}],r=i.grep(e.menuItems,function(e){return e.context===t});return i.each(r,function(e){if("before"==e.separator)n.push({text:"|"});if(e.prependToContext)n.unshift(e);else n.push(e);if("after"==e.separator)n.push({text:"|"})}),n},y=function(e){if(e.insert_button_items)return h(g(e.insert_button_items));else return h(v("insert"))};e.addButton("undo",{tooltip:"Undo",onPostRender:m("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:m("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:m("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:m("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:true,onPostRender:p,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(y(e.settings)),this.menu.renderNew()}}),u({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()});function b(t){if(t.control)t=t.control.value();if(t)e.execCommand("mceToggleFormat",false,t)}function w(t){var n=t.length;return i.each(t,function(t){if(t.menu)t.hidden=0===w(t.menu);var i=t.format;if(i)t.hidden=!e.formatter.canApply(i);if(t.hidden)n--}),n}function C(t){var n=t.items().length;return t.items().each(function(t){if(t.menu)t.visible(C(t.menu)>0);if(!t.menu&&t.settings.menu)t.visible(w(t.settings.menu)>0);var i=t.settings.format;if(i)t.visible(e.formatter.canApply(i));if(!t.visible())n--}),n}e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){if(e.settings.style_formats_autohide)C(this.menu)}}),e.addButton("formatselect",function(){var t=[],n=s(e.settings.block_formats||"Paragraph=p;"+"Heading 1=h1;"+"Heading 2=h2;"+"Heading 3=h3;"+"Heading 4=h4;"+"Heading 5=h5;"+"Heading 6=h6;"+"Preformatted=pre");return u(n,function(n){t.push({text:n[0],value:n[1],textStyle:function(){return e.formatter.getCssText(n[1])}})}),{type:"listbox",text:n[0][0],values:t,fixedWidth:true,onselect:b,onPostRender:r(t)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,monospace;"+"Arial=arial,helvetica,sans-serif;"+"Arial Black=arial black,sans-serif;"+"Book Antiqua=book antiqua,palatino,serif;"+"Comic Sans MS=comic sans ms,sans-serif;"+"Courier New=courier new,courier,monospace;"+"Georgia=georgia,palatino,serif;"+"Helvetica=helvetica,arial,sans-serif;"+"Impact=impact,sans-serif;"+"Symbol=symbol;"+"Tahoma=tahoma,arial,helvetica,sans-serif;"+"Terminal=terminal,monaco,monospace;"+"Times New Roman=times new roman,times,serif;"+"Trebuchet MS=trebuchet ms,geneva,sans-serif;"+"Verdana=verdana,geneva,sans-serif;"+"Webdings=webdings;"+"Wingdings=wingdings,zapf dingbats",n=[],i=s(e.settings.font_formats||t);return u(i,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:true,onPostRender:o(n),onselect:function(t){if(t.control.settings.value)e.execCommand("FontName",false,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",i=e.settings.fontsize_formats||n;return u(i.split(" "),function(e){var n=e,i=e,r=e.split("=");if(r.length>1)n=r[0],i=r[1];t.push({text:n,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:true,onPostRender:a(t),onclick:function(t){if(t.control.settings.value)e.execCommand("FontSize",false,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:t})}}),r("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,r,o,a,s,l,u,c,f,d,m,p,h,g,v,y,b,w,C,x,k,N=[],E=[],S,T,_,R,B,A;if(t=e.settings,r=e.items().filter(":visible"),o=e.layoutRect(),i=t.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/i),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,C=t.alignV||t.align,g=e.paddingBox,B="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w)w=[w];if(C&&"string"==typeof C)C=[C];for(f=0;f<i;f++)N.push(0);for(d=0;d<n;d++)E.push(0);for(d=0;d<n;d++)for(f=0;f<i;f++){if(c=r[d*i+f],!c)break;S=(u=c.layoutRect()).minW,T=u.minH,N[f]=S>N[f]?S:N[f],E[d]=T>E[d]?T:E[d]}for(_=o.innerW-g.left-g.right,x=0,f=0;f<i;f++)x+=N[f]+(f>0?y:0),_-=(f>0?y:0)+N[f];for(R=o.innerH-g.top-g.bottom,k=0,d=0;d<n;d++)k+=E[d]+(d>0?b:0),R-=(d>0?b:0)+E[d];if(x+=g.left+g.right,k+=g.top+g.bottom,l={},l.minW=x+(o.w-o.innerW),l.minH=k+(o.h-o.innerH),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH,l.minW=Math.min(l.minW,o.maxW),l.minH=Math.min(l.minH,o.maxH),l.minW=Math.max(l.minW,o.startMinWidth),l.minH=Math.max(l.minH,o.startMinHeight),o.autoResize&&(l.minW!=o.minW||l.minH!=o.minH)){if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var D=e.parent();if(D)D._lastRect=null,D.recalc()}return}if(o.autoResize)(l=e.layoutRect(l)).contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH;var P;if("start"==t.packV)P=0;else P=R>0?Math.floor(R/n):0;var M=0,L=t.flexWidths;if(L)for(f=0;f<L.length;f++)M+=L[f];else M=i;var O=_/M;for(f=0;f<i;f++)N[f]+=L?L[f]*O:O;for(p=g.top,d=0;d<n;d++){for(m=g.left,s=E[d]+P,f=0;f<i;f++){if(B)A=d*i+i-1-f;else A=d*i+f;if(c=r[A],!c)break;if(h=c.settings,u=c.layoutRect(),a=Math.max(N[f],u.startMinWidth),u.x=m,u.y=p,v=h.alignH||(w?w[f]||w[0]:null),"center"==v)u.x=m+a/2-u.w/2;else if("right"==v)u.x=m+a-u.w;else if("stretch"==v)u.w=a;if(v=h.alignV||(C?C[f]||C[0]:null),"center"==v)u.y=p+s/2-u.h/2;else if("bottom"==v)u.y=p+s-u.h;else if("stretch"==v)u.h=s;if(c.layoutRect(u),m+=a+y,c.recalc)c.recalc()}p+=s+b}}})}),r("tinymce/ui/Iframe",["tinymce/ui/Widget","tinymce/util/Delay"],function(e,t){return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=false,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var i=this,r=this.getEl().contentWindow.document.body;if(!r)t.setTimeout(function(){i.html(e)});else if(r.innerHTML=e,n)n();return this}})}),r("tinymce/ui/InfoBox",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=false},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'">'+'<div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1">'+'<i class="'+t+"ico "+t+'i-help"></i>'+"</button>"+"</div>"+"</div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){if(e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered"))e.updateLayoutRect()}),e.state.on("change:help",function(t){if(e.classes.toggle("has-help",t.value),e.state.get("rendered"))e.updateLayoutRect()}),e._super()}})}),r("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;if(t._super(e),t.classes.add("widget").add("label"),t.canFocus=false,e.multiline)t.classes.add("autoscroll");if(e.strong)t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){if(t.getSize(e.getEl()).width>n.maxW)n.minW=n.maxW,e.classes.add("multiline");e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;if(!e.settings.multiline)e.getEl().style.lineHeight=e.layoutRect().h+"px";return e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e=this,t,n,i=e.settings.forId;if(!i&&(n=e.settings.forName))if(t=e.getRoot().find("#"+n)[0],t)i=t._id;if(i)return'<label id="'+e._id+'" class="'+e.classes+'"'+(i?' for="'+i+'"':"")+">"+e.encode(e.state.get("text"))+"</label>";return'<span id="'+e._id+'" class="'+e.classes+'">'+e.encode(e.state.get("text"))+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){if(e.innerHtml(e.encode(t.value)),e.state.get("rendered"))e.updateLayoutRect()}),e._super()}})}),r("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),r("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:true,defaults:{type:"menubutton"}}})}),r("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(e,t,n){function i(e,t){while(e){if(t===e)return true;e=e.parentNode}return false}var r=e.extend({init:function(e){var t=this;if(t._renderOpen=true,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth)t.classes.add("fixed-width");t.aria("haspopup",true),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var n=this,i;if(n.menu&&n.menu.visible()&&false!==e)return n.hideMenu();if(!n.menu){if(i=n.state.get("menu")||[],i.length)i={type:"menu",items:i};else i.type=i.type||"menu";if(!i.renderTo)n.menu=t.create(i).parent(n).renderTo();else n.menu=i.parent(n).show().renderTo();n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){if(e.control.parent()===n.menu)e.stopPropagation(),n.focus(),n.hideMenu()}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){if(e.control==n.menu)n.activeMenu("show"==e.type);n.aria("expanded","show"==e.type)}).fire("show")}n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){var e=this;if(e.menu)e.menu.items().each(function(e){if(e.hideMenu)e.hideMenu()}),e.menu.hide()},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,i=e.classPrefix,r=e.settings.icon,o,a=e.state.get("text"),s="";if(o=e.settings.image,o){if(r="none","string"!=typeof o)o=window.getSelection?o[0]:o[1];o=" style=\"background-image: url('"+o+"')\""}else o="";if(a)e.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+e.encode(a)+"</span>";return r=e.settings.icon?i+"ico "+i+"i-"+r:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'">'+'<button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+s+' <i class="'+i+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;return e.on("click",function(t){if(t.control===e&&i(t.target,e.getEl()))if(e.focus(),e.showMenu(!t.aria),t.aria)e.menu.items().filter(":visible")[0].focus()}),e.on("mouseenter",function(t){var n=t.control,i=e.parent(),o;if(n&&i&&n instanceof r&&n.parent()==i)if(i.items().filter("MenuButton").each(function(e){if(e.hideMenu&&e!=n){if(e.menu&&e.menu.visible())o=true;e.hideMenu()}}),o)n.focus(),n.showMenu()}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){if(e.menu)e.menu.remove();e.menu=null}),e._super()},remove:function(){if(this._super(),this.menu)this.menu.remove()}});return r}),r("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env","tinymce/util/Delay"],function(e,t,n,i){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this,n;if(t._super(e),e=t.settings,t.classes.add("menu-item"),e.menu)t.classes.add("menu-item-expand");if(e.preview)t.classes.add("menu-item-preview");if(n=t.state.get("text"),"-"===n||"|"===n)t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-");if(e.selectable)t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),e.icon="selected";if(!e.preview&&!e.selectable)t.classes.add("menu-item-normal");if(t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu)t.aria("haspopup",true)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,i,r=e.parent();if(r.items().each(function(t){if(t!==e)t.hideMenu()}),n.menu){if(i=e.menu,!i){if(i=n.menu,i.length)i={type:"menu",items:i};else i.type=i.type||"menu";if(r.settings.itemDefaults)i.itemDefaults=r.settings.itemDefaults;(i=e.menu=t.create(i).parent(e).renderTo()).reflow(),i.on("cancel",function(t){t.stopPropagation(),e.focus(),i.hide()}),i.on("show hide",function(e){if(e.control.items)e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),i.on("hide",function(t){if(t.control===i)e.classes.remove("selected")}),i.submenu=true}else i.show();i._parentMenu=r,i.classes.add("menu-sub");var o=i.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);i.moveRel(e.getEl(),o),i.rel=o,o="menu-sub-"+o,i.classes.remove(i._lastRel).add(o),i._lastRel=o,e.classes.add("selected"),e.aria("expanded",true)}},hideMenu:function(){var e=this;if(e.menu)e.menu.items().each(function(e){if(e.hideMenu)e.hideMenu()}),e.menu.hide(),e.aria("expanded",false);return e},renderHtml:function(){var e=this,t=e._id,i=e.settings,r=e.classPrefix,o=e.state.get("text"),a=e.settings.icon,s="",l=i.shortcut,u=e.encode(i.url),c="";function f(e){var t,i,r={};if(n.mac)r={alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"};else r={meta:"Ctrl"};for(e=e.split("+"),t=0;t<e.length;t++)if(i=r[e[t].toLowerCase()],i)e[t]=i;return e.join("+")}function d(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t=i.match||"";return t?e.replace(new RegExp(d(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function p(e){return e.replace(new RegExp(d("!mce~match["),"g"),"<b>").replace(new RegExp(d("]mce~match!"),"g"),"</b>")}if(a)e.parent().classes.add("menu-has-icons");if(i.image)s=" style=\"background-image: url('"+i.image+"')\"";if(l)l=f(l);return a=r+"ico "+r+"i-"+(e.settings.icon||"none"),c="-"!==o?'<i class="'+a+'"'+s+"></i> ":"",o=p(e.encode(m(o))),u=p(e.encode(m(u))),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1">'+c+("-"!==o?'<span id="'+t+'-text" class="'+r+'text">'+o+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n)n=n.call(this);if(n){var r=e.getEl("text");if(r)r.setAttribute("style",n)}return e.on("mouseenter click",function(n){if(n.control===e)if(!t.menu&&"click"===n.type)e.fire("select"),i.requestAnimationFrame(function(){e.parent().hideAll()});else if(e.showMenu(),n.aria)e.menu.focus(true)}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",true),e},active:function(e){if("undefined"!=typeof e)this.aria("checked",e);return this._super(e)},remove:function(){if(this._super(),this.menu)this.menu.remove()}})}),r("tinymce/ui/Throbber",["tinymce/dom/DomQuery","tinymce/ui/Control","tinymce/util/Delay"],function(e,t,n){return function(i,r){var o=this,a,s=t.classPrefix,l;o.show=function(t,u){function c(){if(a)if(e(i).append('<div class="'+s+"throbber"+(r?" "+s+"throbber-inline":"")+'"></div>'),u)u()}if(o.hide(),a=true,t)l=n.setTimeout(c,t);else c();return o},o.hide=function(){var e=i.lastChild;if(n.clearTimeout(l),e&&-1!=e.className.indexOf("throbber"))e.parentNode.removeChild(e);return a=false,o}}}),r("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/ui/Throbber","tinymce/util/Tools"],function(e,t,n,i){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:true},init:function(e){var t=this;if(e.autohide=true,e.constrainToViewport=true,"function"===typeof e.items)e.itemsFactory=e.items,e.items=[];if(e.itemDefaults){var n=e.items,r=n.length;while(r--)n[r]=i.extend({},e.itemDefaults,n[r])}t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",true),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){var e=this,t,i;function r(){if(e.throbber)e.throbber.hide(),e.throbber=null}if(i=e.settings.itemsFactory,!i)return;if(!e.throbber){if(e.throbber=new n(e.getEl("body"),true),0===e.items().length)e.throbber.show(),e.fire("loading");else e.throbber.show(100,function(){e.items().remove(),e.fire("loading")});e.on("hide close",r)}e.requestTime=t=(new Date).getTime(),e.settings.itemsFactory(function(n){if(0===n.length)return void e.hide();if(e.requestTime!==t)return;e.getEl().style.width="",e.getEl("body").style.width="",r(),e.items().remove(),e.getEl("body").innerHTML="",e.add(n),e.renderNew(),e.fire("loaded")})},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;if(e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=true,false}),e.settings.itemsFactory)e.on("postrender",function(){if(e.settings.itemsFactory)e.load()});return e._super()}})}),r("tinymce/ui/ListBox",["tinymce/ui/MenuButton","tinymce/ui/Menu"],function(e,t){return e.extend({init:function(e){var t=this,n,i,r,o;function a(n){for(var o=0;o<n.length;o++){if(i=n[o].selected||e.value===n[o].value,i)return r=r||n[o].text,t.state.set("value",n[o].value),true;if(n[o].menu)if(a(n[o].menu))return true}}if(t._super(e),e=t.settings,t._values=n=e.values,n){if("undefined"!=typeof e.value)a(n);if(!i&&n.length>0)r=n[0].text,t.state.set("value",n[0].value);t.state.set("menu",n)}t.state.set("text",e.text||r),t.classes.add("listbox"),t.on("select",function(n){var i=n.control;if(o)n.lastControl=o;if(e.multiple)i.active(!i.active());else t.value(n.control.value());o=i})},bindStates:function(){var e=this;function n(e,n){if(e instanceof t)e.items().each(function(e){if(!e.hasMenus())e.active(e.value()===n)})}function i(e,t){var n;if(!e)return;for(var r=0;r<e.length;r++){if(e[r].value===t)return e[r];if(e[r].menu)if(n=i(e[r].menu,t),n)return n}}return e.on("show",function(t){n(t.control,e.value())}),e.state.on("change:value",function(t){var n=i(e.state.get("menu"),t.value);if(n)e.text(n.text);else e.text(e.settings.text)}),e._super()}})}),r("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;if(e.classes.add("resizehandle"),"both"==e.settings.direction)e.classes.add("resizehandle-both");return e.canFocus=false,'<div id="'+e._id+'" class="'+e.classes+'">'+'<i class="'+t+"ico "+t+'i-resize"></i>'+"</div>"},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){if("both"!=e.settings.direction)t.deltaX=0;e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){if(this.resizeDragHelper)this.resizeDragHelper.destroy();return this._super()}})}),r("tinymce/ui/SelectBox",["tinymce/ui/Widget"],function(e){function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;if(t._super(e),t.settings.size)t.size=t.settings.size;if(t.settings.options)t._options=t.settings.options;t.on("keydown",function(e){var n;if(13==e.keyCode)e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,false}),t.fire("submit",{data:n.toJSON()})})},options:function(e){if(!arguments.length)return this.state.get("options");return this.state.set("options",e),this},renderHtml:function(){var e=this,n,i="";if(n=t(e._options),e.size)i=' size = "'+e.size+'"';return'<select id="'+e._id+'" class="'+e.classes+'"'+i+">"+n+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),r("tinymce/ui/Slider",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils"],function(e,t,n){function i(e,t,n){if(e<t)e=t;if(e>n)e=n;return e}function r(e,t,n){e.setAttribute("aria-"+t,n)}function o(e,t){var i,o,a,s,l,u;if("v"==e.settings.orientation)s="top",a="height",o="h";else s="left",a="width",o="w";u=e.getEl("handle"),l=(i=(e.layoutRect()[o]||100)-n.getSize(u)[a])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",u.style[s]=l,u.style.height=e.layoutRect().h+"px",r(u,"valuenow",t),r(u,"valuetext",""+e.settings.previewFilter(t)),r(u,"valuemin",e._minValue),r(u,"valuemax",e._maxValue)}return e.extend({init:function(e){var t=this;if(!e.previewFilter)e.previewFilter=function(e){return Math.round(100*e)/100};if(t._super(e),t.classes.add("slider"),"v"==e.orientation)t.classes.add("vertical");t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'">'+'<div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div>'+"</div>"},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e=this,r,o,a,s,l,u;function c(e,t,n){return(n+e)/(t-e)}function f(e,t,n){return n*(t-e)-e}function d(t,n){function r(r){var o;o=e.value(),o=i(o=f(t,n,c(t,n,o)+.05*r),t,n),e.value(o),e.fire("dragstart",{value:o}),e.fire("drag",{value:o}),e.fire("dragend",{value:o})}e.on("keydown",function(e){switch(e.keyCode){case 37:case 38:r(-1);break;case 39:case 40:r(1)}})}function m(r,o,c){var f,d,m,p,h;e._dragHelper=new t(e._id,{handle:e._id+"-handle",start:function(t){f=t[a],d=parseInt(e.getEl("handle").style[s],10),m=(e.layoutRect()[u]||100)-n.getSize(c)[l],e.fire("dragstart",{value:h})},drag:function(t){var n=t[a]-f;p=i(d+n,0,m),c.style[s]=p+"px",h=r+p/m*(o-r),e.value(h),e.tooltip().text(""+e.settings.previewFilter(h)).show().moveRel(c,"bc tc"),e.fire("drag",{value:h})},stop:function(){e.tooltip().hide(),e.fire("dragend",{value:h})}})}if(r=e._minValue,o=e._maxValue,"v"==e.settings.orientation)a="screenY",s="top",l="height",u="h";else a="screenX",s="left",l="width",u="w";e._super(),d(r,o,e.getEl("handle")),m(r,o,e.getEl("handle"))},repaint:function(){this._super(),o(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){o(e,t.value)}),e._super()}})}),r("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=false,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),r("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils","tinymce/dom/DomQuery"],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,i=e.getEl(),r=e.layoutRect(),o,a;return e._super(),o=i.firstChild,a=i.lastChild,n(o).css({width:r.w-t.getSize(a).width,height:r.h-2}),n(a).css({height:r.h-2}),e},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i,r=e.state.get("icon"),o=e.state.get("text"),a="";if(i=e.settings.image,i){if(r="none","string"!=typeof i)i=window.getSelection?i[0]:i[1];i=" style=\"background-image: url('"+i+"')\""}else i="";if(r=e.settings.icon?n+"ico "+n+"i-"+r:"",o)e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>";return'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1">'+'<button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+a+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)while(n){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open")){if(e.stopImmediatePropagation(),t)t.call(this,e);return}n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),r("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return true}})}),r("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/dom/DomQuery","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;if(this.activeTabId)n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false");this.activeTabId="t"+e,(n=this.getEl("t"+e)).setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){if(e!=n)t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,r){var o=e._id+"-t"+r;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+i+'tab" '+'unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+'<div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id==e._id+"-head"){var i=n.childNodes.length;while(i--)if(n.childNodes[i]==t.target)e.activateTab(i)}})},initLayoutRect:function(){var e=this,t,i,r;i=n.getSize(e.getEl("head")).width,i=i<0?0:i,r=0,e.items().each(function(e){i=Math.max(i,e.layoutRect().minW),r=Math.max(r,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=i,e.settings.h=r,e.layoutRect({x:0,y:0,w:i,h:r})});var o=n.getSize(e.getEl("head")).height;return e.settings.minWidth=i,e.settings.minHeight=r+o,t=e._super(),t.deltaH+=o,t.innerH=t.h-t.deltaH,t}})}),r("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/util/Tools","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;if(t._super(e),t.classes.add("textbox"),e.multiline)t.classes.add("multiline");else t.on("keydown",function(e){var n;if(13==e.keyCode)e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,false}),t.fire("submit",{data:n.toJSON()})}),t.on("keyup",function(e){t.state.set("value",e.target.value)})},repaint:function(){var e=this,t,n,i,r,o=0,a;t=e.getEl().style,n=e._layoutRect,a=e._lastRepaintRect||{};var s=document;if(!e.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8))t.lineHeight=n.h-o+"px";if(i=e.borderBox,r=i.left+i.right+8,o=i.top+i.bottom+(e.settings.multiline?8:0),n.x!==a.x)t.left=n.x+"px",a.x=n.x;if(n.y!==a.y)t.top=n.y+"px",a.y=n.y;if(n.w!==a.w)t.width=n.w-r+"px",a.w=n.w;if(n.h!==a.h)t.height=n.h-o+"px",a.h=n.h;return e._lastRepaintRect=a,e.fire("repaint",{},false),e},renderHtml:function(){var e=this,i=e.settings,r,o;if(r={id:e._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){r[e]=i[e]}),e.disabled())r.disabled="disabled";if(i.subtype)r.type=i.subtype;return o=n.create(i.multiline?"textarea":"input",r),o.value=e.state.get("value"),o.className=e.classes,o.outerHTML},value:function(e){if(arguments.length)return this.state.set("value",e),this;if(this.state.get("rendered"))this.state.set("value",this.getEl().value);return this.state.get("value")},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){if(e.getEl().value!=t.value)e.getEl().value=t.value}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),r("tinymce/Register",[],function(){var e=this||window,t=function(){return e.tinymce};if("function"===typeof e.define)if(!e.define.amd)e.define("ephox/tinymce",[],t);if("object"===typeof module)module.exports=window.tinymce;return{}}),s(["tinymce/geom/Rect","tinymce/util/Promise","tinymce/util/Delay","tinymce/Env","tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/util/Observable","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/ReflowQueue","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Progress","tinymce/ui/Notification","tinymce/NotificationManager","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/InfoBox","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/MenuItem","tinymce/ui/Throbber","tinymce/ui/Menu","tinymce/ui/ListBox","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/SelectBox","tinymce/ui/Slider","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox"])})(window),function(){var e={},t=function(e){for(var t=r(e),n=e.split("."),i=Function("return this;")(),o=0;o<n.length-1;++o){if(void 0===i[n[o]])i[n[o]]={};i=i[n[o]]}i[n[n.length-1]]=t},n=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;l<a;++l)s[l]=r(i[l]);var u=o.apply(null,s);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},i=function(t,n,i){if("string"!==typeof t)throw"module id must be a string";else if(void 0===n)throw"no dependencies for "+t;else if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},r=function(t){var i=e[t];if(void 0===i)throw"module ["+t+"] was undefined";else if(void 0===i.instance)n(t);return i.instance},o=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i.push(r(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:i,require:o,demand:r}}};var a=i,s=o,l=r,u=function(e,t){a(e,[],function(){return t})};u("global!tinymce.PluginManager",tinymce.PluginManager),u("global!tinymce.util.Delay",tinymce.util.Delay),u("global!tinymce.util.Tools",tinymce.util.Tools),u("global!tinymce.html.SaxParser",tinymce.html.SaxParser),u("global!tinymce.html.Schema",tinymce.html.Schema),u("global!tinymce.dom.DOMUtils.DOM",tinymce.dom.DOMUtils.DOM),a("tinymce.media.core.VideoScript",[],function(){return{getVideoScriptMatch:function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]}}}),a("tinymce.media.core.Size",[],function(){var e=function(e){return e.replace(/px$/,"")},t=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},n=function(t){return function(n){return n?e(n.style[t]):""}},i=function(e){return function(n,i){if(n)n.style[e]=t(i)}};return{getMaxWidth:n("maxWidth"),getMaxHeight:n("maxHeight"),setMaxWidth:i("maxWidth"),setMaxHeight:i("maxHeight")}}),a("tinymce.media.core.HtmlToData",["global!tinymce.util.Tools","global!tinymce.html.SaxParser","global!tinymce.html.Schema","global!tinymce.dom.DOMUtils.DOM","tinymce.media.core.VideoScript","tinymce.media.core.Size"],function(e,t,n,i,r,o){var a=function(e){return i.getAttrib(e,"data-ephox-embed-iri")},s=function(e){var t=i.createFragment(e);return""!==a(t.firstChild)},l=function(n,i){var o={};return new t({validate:false,allow_conditional_comments:true,special:"script,noscript",start:function(t,i){if(!o.source1&&"param"===t)o.source1=i.map.movie;if("iframe"===t||"object"===t||"embed"===t||"video"===t||"audio"===t){if(!o.type)o.type=t;o=e.extend(i.map,o)}if("script"===t){var a=r.getVideoScriptMatch(n,i.map.src);if(!a)return;o={type:"script",source1:i.map.src,width:a.width,height:a.height}}if("source"===t)if(!o.source1)o.source1=i.map.src;else if(!o.source2)o.source2=i.map.src;if("img"===t&&!o.poster)o.poster=i.map.src}}).parse(i),o.source1=o.source1||o.src||o.data,o.source2=o.source2||"",o.poster=o.poster||"",o},u=function(e){var t=i.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:a(t),source2:"",poster:"",width:o.getMaxWidth(t),height:o.getMaxHeight(t)}};return{htmlToData:function(e,t){return s(t)?u(t):l(e,t)}}}),u("global!tinymce.html.Writer",tinymce.html.Writer),a("tinymce.media.core.UpdateHtml",["global!tinymce.html.Writer","global!tinymce.html.SaxParser","global!tinymce.html.Schema","global!tinymce.dom.DOMUtils.DOM","tinymce.media.core.Size"],function(e,t,n,i,r){var o=function(e,t){var n,i,r,o;for(n in t)if(r=""+t[n],e.map[n]){i=e.length;while(i--)if(o=e[i],o.name===n)if(r)e.map[n]=r,o.value=r;else delete e.map[n],e.splice(i,1)}else if(r)e.push({name:n,value:r}),e.map[n]=r},a=function(n){var i=new e;return new t(i).parse(n),i.getContent()},s=function(i,r,a){var s=new e,l=0,u;return new t({validate:false,allow_conditional_comments:true,special:"script,noscript",comment:function(e){s.comment(e)},cdata:function(e){s.cdata(e)},text:function(e,t){s.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":o(t,{width:r.width,height:r.height})}if(a)switch(e){case"video":if(o(t,{poster:r.poster,src:""}),r.source2)o(t,{src:""});break;case"iframe":o(t,{src:r.source1});break;case"source":if(l++,l<=2)if(o(t,{src:r["source"+l],type:r["source"+l+"mime"]}),!r["source"+l])return;break;case"img":if(!r.poster)return;u=true}s.start(e,t,n)},end:function(e){if("video"===e&&a)for(var t=1;t<=2;t++)if(r["source"+t]){var n=[];if(n.map={},l<t)o(n,{src:r["source"+t],type:r["source"+t+"mime"]}),s.start("source",n,true)}if(r.poster&&"object"===e&&a&&!u){var i=[];i.map={},o(i,{src:r.poster,width:r.width,height:r.height}),s.start("img",i,true)}s.end(e)}},new n({})).parse(i),s.getContent()},l=function(e){var t=i.createFragment(e);return""!==i.getAttrib(t.firstChild,"data-ephox-embed-iri")},u=function(e,t){var n=i.createFragment(e).firstChild;return r.setMaxWidth(n,t.width),r.setMaxHeight(n,t.height),a(n.outerHTML)};return{updateHtml:function(e,t,n){return l(e)?u(e,t):s(e,t,n)}}}),a("tinymce.media.core.Mime",[],function(){return{guess:function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t?t:""}}}),a("tinymce.media.core.UrlPatterns",[],function(){return{urlPatterns:[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:true},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:true},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:true},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:true},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:true},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:false},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:true}]}}),a("tinymce.media.core.DataToHtml",["tinymce.media.core.Mime","tinymce.media.core.HtmlToData","tinymce.media.core.UrlPatterns","tinymce.media.core.VideoScript","tinymce.media.core.UpdateHtml","global!tinymce.util.Tools"],function(e,t,n,i,r,o){return{dataToHtml:function(a,s){var l="",u=o.extend({},s);if(!u.source1)if(o.extend(u,t.htmlToData(a.settings.media_scripts,u.embed)),!u.source1)return"";if(!u.source2)u.source2="";if(!u.poster)u.poster="";if(u.source1=a.convertURL(u.source1,"source"),u.source2=a.convertURL(u.source2,"source"),u.source1mime=e.guess(u.source1),u.source2mime=e.guess(u.source2),u.poster=a.convertURL(u.poster,"poster"),o.each(n.urlPatterns,function(e){var t,n,i=e.regex.exec(u.source1);if(i){for(n=e.url,t=0;i[t];t++)n=n.replace("$"+t,function(){return i[t]});u.source1=n,u.type=e.type,u.allowFullscreen=e.allowFullscreen,u.width=u.width||e.w,u.height=u.height||e.h}}),u.embed)l=r.updateHtml(u.embed,u,true);else{var c=i.getVideoScriptMatch(a.settings.media_scripts,u.source1);if(c)u.type="script",u.width=c.width,u.height=c.height;if(u.width=u.width||300,u.height=u.height||150,o.each(u,function(e,t){u[t]=a.dom.encode(e)}),"iframe"===u.type){var f=u.allowFullscreen?' allowFullscreen="1"':"";l+='<iframe src="'+u.source1+'" width="'+u.width+'" height="'+u.height+'"'+f+"></iframe>"}else if("application/x-shockwave-flash"===u.source1mime){if(l+='<object data="'+u.source1+'" width="'+u.width+'" height="'+u.height+'" type="application/x-shockwave-flash">',u.poster)l+='<img src="'+u.poster+'" width="'+u.width+'" height="'+u.height+'" />';l+="</object>"}else if(-1!==u.source1mime.indexOf("audio"))if(a.settings.audio_template_callback)l=a.settings.audio_template_callback(u);else l+='<audio controls="controls" src="'+u.source1+'">'+(u.source2?'\n<source src="'+u.source2+'"'+(u.source2mime?' type="'+u.source2mime+'"':"")+" />\n":"")+"</audio>";else if("script"===u.type)l+='<script src="'+u.source1+'"><\/script>';else if(a.settings.video_template_callback)l=a.settings.video_template_callback(u);else l='<video width="'+u.width+'" height="'+u.height+'"'+(u.poster?' poster="'+u.poster+'"':"")+' controls="controls">\n'+'<source src="'+u.source1+'"'+(u.source1mime?' type="'+u.source1mime+'"':"")+" />\n"+(u.source2?'<source src="'+u.source2+'"'+(u.source2mime?' type="'+u.source2mime+'"':"")+" />\n":"")+"</video>"}return l}}}),u("global!tinymce.util.Promise",tinymce.util.Promise),a("tinymce.media.core.Service",["tinymce.media.core.DataToHtml","global!tinymce.util.Promise"],function(e,t){var n=function(e,n,i){var r={};return new t(function(t,o){var a=function(i){if(i.html)r[e.source1]=i;return t({url:e.source1,html:i.html?i.html:n(e)})};if(r[e.source1])a(r[e.source1]);else i({url:e.source1},a,o)})},i=function(e,n){return new t(function(t){t({html:n(e),url:e.source1})})},r=function(t){return function(n){return e.dataToHtml(t,n)}};return{getEmbedHtml:function(e,t){var o=e.settings.media_url_resolver;return o?n(t,r(e),o):i(t,r(e))}}}),u("global!tinymce.Env",tinymce.Env),a("tinymce.media.ui.SizeManager",[],function(){var e=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},t=function(e,t){var n=e.find("#width")[0],i=e.find("#height")[0],r=e.find("#constrain")[0];if(n&&i&&r)t(n,i,r.checked())},n=function(t,n,i){var r=t.state.get("oldVal"),o=n.state.get("oldVal"),a=t.value(),s=n.value();if(i&&r&&o&&a&&s)if(a!==r){if(s=Math.round(a/r*s),!isNaN(s))n.value(s)}else if(a=Math.round(s/o*a),!isNaN(a))t.value(a);e(t,n)},i=function(e){t(e,n)};return{createUi:function(e){var t=function(){e(function(e){i(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]}},syncSize:function(n){t(n,e)},updateSize:i}}),a("tinymce.media.ui.Dialog",["global!tinymce.util.Delay","tinymce.media.core.HtmlToData","tinymce.media.core.UpdateHtml","tinymce.media.core.Service","tinymce.media.core.Size","global!tinymce.util.Tools","global!tinymce.Env","tinymce.media.ui.SizeManager"],function(e,t,n,i,r,o,a,s){var l=a.ie&&a.ie<=8?"onChange":"onInput",u=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},c=function(e){var n=e.selection.getNode(),i=n.getAttribute("data-ephox-embed-iri");if(i)return{source1:i,"data-ephox-embed-iri":i,width:r.getMaxWidth(n),height:r.getMaxHeight(n)};return n.getAttribute("data-mce-object")?t.htmlToData(e.settings.media_scripts,e.serializer.serialize(n,{selection:true})):{}},f=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},d=function(e,n){return function(i){var r=i.html,a=e.find("#embed")[0],l=o.extend(t.htmlToData(n.settings.media_scripts,r),{source1:i.url});if(e.fromJSON(l),a)a.value(r),s.updateSize(e)}},m=function(e,t){var n,i,r=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(i=r.length-1;i>=0;i--)if(t[n]===r[i])r.splice(i,1);e.selection.select(r[0])},p=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),m(e,n),e.nodeChanged()},h=function(e,t){var r=e.toJSON();if(r.embed=n.updateHtml(r.embed,r),r.embed)p(t,r.embed);else i.getEmbedHtml(t,r).then(function(e){p(t,e.html)})["catch"](u(t))},g=function(e,t){o.each(t,function(t,n){e.find("#"+n).value(t)})};return{showDialog:function(e){var r,a,m=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:true,label:"Source",onpaste:function(){setTimeout(function(){i.getEmbedHtml(e,r.toJSON()).then(d(r,e))["catch"](u(e))},1)},onchange:function(t){i.getEmbedHtml(e,r.toJSON()).then(d(r,e))["catch"](u(e)),g(r,t.meta)},onbeforecall:function(e){e.meta=r.toJSON()}}],p=[],v=function(e){e(r),a=r.toJSON(),r.find("#embed").value(n.updateHtml(a.embed,a))};if(false!==e.settings.media_alt_source)p.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"});if(false!==e.settings.media_poster)p.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"});if(false!==e.settings.media_dimensions){var y=s.createUi(v);m.push(y)}a=c(e);var b={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:f(e),multiline:true,rows:5,label:"Source"},w=function(){a=o.extend({},t.htmlToData(e.settings.media_scripts,this.value())),this.parent().parent().fromJSON(a)};b[l]=w,r=e.windowManager.open({title:"Insert/edit media",data:a,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},b]},{title:"Advanced",type:"form",items:p}],onSubmit:function(){s.updateSize(r),h(r,e)}}),s.syncSize(r)}}}),a("tinymce.media.core.Sanitize",["global!tinymce.util.Tools","global!tinymce.html.Writer","global!tinymce.html.SaxParser","global!tinymce.html.Schema"],function(e,t,n,i){return{sanitize:function(e,r){if(false===e.settings.media_filter_html)return r;var o=new t,a;return new n({validate:false,allow_conditional_comments:false,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(t,n,i){if(a=true,"script"===t||"noscript"===t)return;for(var r=0;r<n.length;r++){if(0===n[r].name.indexOf("on"))return;if("style"===n[r].name)n[r].value=e.dom.serializeStyle(e.dom.parseStyle(n[r].value),t)}o.start(t,n,i),a=false},end:function(e){if(a)return;o.end(e)}},new i({})).parse(r),o.getContent()}}}),u("global!tinymce.html.Node",tinymce.html.Node),a("tinymce.media.core.Nodes",["tinymce.media.core.Sanitize","tinymce.media.core.VideoScript","global!tinymce.html.Node","global!tinymce.Env"],function(e,t,n,i){var r=function(e,t){var r,o=t.name;return r=new n("img",1),r.shortEnded=true,a(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===o?"30":"150"),style:t.attr("style"),src:i.transparentSrc,"data-mce-object":o,class:"mce-object mce-object-"+o}),r},o=function(e,t){var i,r,o,s=t.name;return i=new n("span",1),i.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":s,class:"mce-preview-object mce-object-"+s}),a(e,t,i),r=new n(s,1),r.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:t.attr("width")||"300",height:t.attr("height")||("audio"===s?"30":"150"),frameborder:"0"}),o=new n("span",1),o.attr("class","mce-shim"),i.append(r),i.append(o),i},a=function(t,n,i){var r,o,a,s,l;s=(a=n.attributes).length;while(s--)if(r=a[s].name,o=a[s].value,"width"!==r&&"height"!==r&&"style"!==r){if("data"===r||"src"===r)o=t.convertURL(o,r);i.attr("data-mce-p-"+r,o)}if(l=n.firstChild&&n.firstChild.value,l)i.attr("data-mce-html",escape(e.sanitize(t,l))),i.firstChild=null},s=function(e){while(e=e.parent)if(e.attr("data-ephox-embed-iri"))return true;return false};return{createPreviewIframeNode:o,createPlaceholderNode:r,placeHolderConverter:function(e){return function(n){var a=n.length,l,u;while(a--){if(l=n[a],!l.parent)continue;if(l.parent.attr("data-mce-object"))continue;if("script"===l.name)if(u=t.getVideoScriptMatch(e.settings.media_scripts,l.attr("src")),!u)continue;if(u){if(u.width)l.attr("width",u.width.toString());if(u.height)l.attr("height",u.height.toString())}if("iframe"===l.name&&false!==e.settings.media_live_embeds&&i.ceFalse){if(!s(l))l.replace(o(e,l))}else if(!s(l))l.replace(r(e,l))}}}}}),a("tinymce.media.Plugin",["global!tinymce.PluginManager","tinymce.media.ui.Dialog","tinymce.media.core.Sanitize","tinymce.media.core.UpdateHtml","tinymce.media.core.Nodes"],function(e,t,n,i,r){var o=function(e){e.on("ResolveName",function(e){var t;if(1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object")))e.name=t}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var i=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){i[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",r.placeHolderConverter(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,i){var r=t.length,o,a,s,l,u,c,f,d;while(r--){if(o=t[r],!o.parent)continue;if(f=o.attr(i),a=new tinymce.html.Node(f,1),"audio"!==f&&"script"!==f)if(d=o.attr("class"),d&&-1!==d.indexOf("mce-preview-object"))a.attr({width:o.firstChild.attr("width"),height:o.firstChild.attr("height")});else a.attr({width:o.attr("width"),height:o.attr("height")});a.attr({style:o.attr("style")}),s=(l=o.attributes).length;while(s--){var m=l[s].name;if(0===m.indexOf("data-mce-p-"))a.attr(m.substr(11),l[s].value)}if("script"===f)a.attr("type","text/javascript");if(u=o.attr("data-mce-html"),u)(c=new tinymce.html.Node("#text",3)).raw=true,c.value=n.sanitize(e,unescape(u)),a.append(c);o.replace(a)}})}),e.on("click keyup",function(){var t=e.selection.getNode();if(t&&e.dom.hasClass(t,"mce-preview-object"))if(e.dom.getAttrib(t,"data-mce-selected"))t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");if("audio"===t||"script"===t)e.preventDefault()}),e.on("objectResized",function(e){var t=e.target,n;if(t.getAttribute("data-mce-object"))if(n=t.getAttribute("data-mce-html"),n)n=unescape(n),t.setAttribute("data-mce-html",escape(i.updateHtml(n,{width:e.width,height:e.height})))}),this.showDialog=function(){t.showDialog(e)},e.addButton("media",{tooltip:"Insert/edit media",onclick:this.showDialog,stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",onclick:this.showDialog,context:"insert",prependToContext:true}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var i=e.$(n);if(0===i.find("span.mce-shim",n).length)i.append('<span class="mce-shim"></span>')})}),e.addCommand("mceMedia",this.showDialog)};return e.add("media",o),function(){}}),r("tinymce.media.Plugin")()}(),function(e,t){"use strict";var n={};function i(e,t){for(var i,r=[],o=0;o<e.length;++o){if(i=n[e[o]]||a(e[o]),!i)throw"module definition dependecy not found: "+e[o];r.push(i)}t.apply(null,r)}function r(e,r,o){if("string"!==typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";i(r,function(){n[e]=o.apply(null,arguments)})}function o(e){return!!n[e]}function a(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}function s(i){var r,o,a,s,l;for(r=0;r<i.length;r++){o=e,s=(a=i[r]).split(/[.\/]/);for(var u=0;u<s.length-1;++u){if(o[s[u]]===t)o[s[u]]={};o=o[s[u]]}o[s[s.length-1]]=n[a]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(a in n)l[a]=n[a];for(r=0;r<i.length;r++)delete l[i[r]];e.privateModules=l}}r("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,n){function i(t,n){return e.each(n,function(e){if(e.constructor==RegExp)t=t.replace(e,"");else t=t.replace(e[0],e[1])}),t}function r(r){var o=new n,a=new t({},o),s="",l=o.getShortEndedElements(),u=e.makeMap("script noscript style textarea video audio iframe object"," "),c=o.getBlockElements();function f(e){var t=e.name,n=e;if("br"===t)return void(s+="\n");if(l[t])s+=" ";if(u[t])return void(s+=" ");if(3==e.type)s+=e.value;if(!e.shortEnded)if(e=e.firstChild)do{f(e)}while(e=e.next);if(c[t]&&n.next)if(s+="\n","p"==t)s+="\n"}return r=i(r,[/<!\[[^\]]+\]>/g]),f(a.parse(r)),s}function o(e){function t(e,t,n){if(!t&&!n)return" ";return" "}return e=i(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e}function a(e){var t=0;return function(){return e+t++}}return{filter:i,innerText:r,trimHtml:o,createIdGenerator:a}}),r("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.;&%@~#]+$/i.test(e)},n=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),true},i=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){var n={target:"_blank",rel:null,class:null,title:null,href:t};e.execCommand("mceInsertLink",false,n)}),true},r=function(e,n,r){return false===e.selection.isCollapsed()&&t(n)?i(e,n,r):false},o=function(e,t,n){return false},a=function(e,t){return e.insertContent(t,{merge:false!==e.settings.paste_merge_formats,paste:true}),true},s=function(t,n){e.each([r,o,a],function(e){return true!==e(t,n,a)})};return{isImageUrl:function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},isAbsoluteUrl:t,insertContent:function(e,t){if(false===e.settings.smart_paste)a(e,t);else s(e,t)}}}),r("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(e,t,n,i,r,o){return function(a){var s=this,l,u,c=0,f=false,d="%MCEPASTEBIN%",m,p="data:text/mce-internal,",h=i.createIdGenerator("mceclip");function g(e){var t,n=a.dom;if(t=a.fire("BeforePastePreProcess",{content:e}),t=a.fire("PastePreProcess",t),e=t.content,!t.isDefaultPrevented()){if(a.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var i=n.add(a.getBody(),"div",{style:"display:none"},e);t=a.fire("PastePostProcess",{node:i}),n.remove(i),e=t.node.innerHTML}if(!t.isDefaultPrevented())r.insertContent(a,e)}}function v(e){e=a.dom.encode(e).replace(/\r\n/g,"\n");var t=a.dom.getParent(a.selection.getStart(),a.dom.isBlock),n=a.settings.forced_root_block,r;if(n)r=(r=a.dom.createHTML(n,a.settings.forced_root_block_attrs)).substr(0,r.length-3)+">";if(t&&/^(PRE|DIV)$/.test(t.nodeName)||!n)e=i.filter(e,[[/\n/g,"<br>"]]);else if(e=i.filter(e,[[/\n\n/g,"</p>"+r],[/^(.*<\/p>)(<p>)$/,r+"$1"],[/\n/g,"<br />"]]),-1!=e.indexOf("<p>"))e=r+e;return e}function y(e){g(e=v(e))}function b(){var t=a.dom,n=a.getBody(),i=a.dom.getViewPort(a.getWin()).y,r=20,o;if(u=a.selection.getRng(),a.inline)if(o=a.selection.getScrollContainer(),o&&o.scrollTop>0)i=o.scrollTop;function s(e){var n,i,r,o=e.startContainer;if(n=e.getClientRects(),n.length)return n[0];if(!e.collapsed||1!=o.nodeType)return;r=o.childNodes[u.startOffset];while(r&&3==r.nodeType&&!r.data.length)r=r.nextSibling;if(!r)return;if("BR"==r.tagName)i=t.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(i,r),(e=t.createRng()).setStartBefore(i),e.setEndAfter(i),n=e.getClientRects(),t.remove(i);if(n.length)return n[0]}if(u.getClientRects){var c=s(u);if(c)r=i+(c.top-t.getPos(n).y);else{r=i;var f=u.startContainer;if(f){if(3==f.nodeType&&f.parentNode!=n)f=f.parentNode;if(1==f.nodeType)r=t.getPos(f,o||n).y}}}if(l=t.add(a.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+r+"px;"+"width: 10px; height: 10px; overflow: hidden; opacity: 0"},d),e.ie||e.gecko)t.setStyle(l,"left","rtl"==t.getStyle(n,"direction",true)?65535:-65535);t.bind(l,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),l.focus(),a.selection.select(l,true)}function w(){if(l){var e;while(e=a.dom.get("mcepastebin"))a.dom.remove(e),a.dom.unbind(e);if(u)a.selection.setRng(u)}l=u=null}function C(){var e="",t,n,i,r;for(t=a.dom.select("div[id=mcepastebin]"),n=0;n<t.length;n++){if(i=t[n],i.firstChild&&"mcepastebin"==i.firstChild.id)i=i.firstChild;if(r=i.innerHTML,e!=d)e+=r}return e}function x(e){var t={};if(e){if(e.getData){var n=e.getData("Text");if(n&&n.length>0)if(-1==n.indexOf(p))t["text/plain"]=n}if(e.types)for(var i=0;i<e.types.length;i++){var r=e.types[i];t[r]=e.getData(r)}}return t}function k(e){return x(e.clipboardData||a.getDoc().dataTransfer)}function N(e){return A(e,"text/html")||A(e,"text/plain")}function E(e){var t;if(t=e.indexOf(","),-1!==t)return e.substr(t+1);return null}function S(e,t){return e.images_dataimg_filter?e.images_dataimg_filter(t):true}function T(e,t,n){if(e)a.selection.setRng(e),e=null;var i=t.result,r=E(i),o=new Image;if(o.src=i,S(a.settings,o)){var s=a.editorUpload.blobCache,l,u;if(u=s.findFirst(function(e){return e.base64()===r}),!u)l=s.create(h(),n,r),s.add(l);else l=u;g('<img src="'+l.blobUri()+'">')}else g('<img src="'+i+'">')}function _(e,t){var n=e.clipboardData||e.dataTransfer;function i(n){var i,r,o,a=false;if(n)for(i=0;i<n.length;i++)if(r=n[i],/^image\/(jpeg|png|gif|bmp)$/.test(r.type)){var s=r.getAsFile?r.getAsFile():r;(o=new FileReader).onload=T.bind(null,t,o,s),o.readAsDataURL(s),e.preventDefault(),a=true}return a}if(a.settings.paste_data_images&&n)return i(n.items)||i(n.files)}function R(e){var t=e.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function B(e){return t.getCaretRangeFromPoint(e.clientX,e.clientY,a.getDoc())}function A(e,t){return t in e&&e[t].length>0}function D(e){return n.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function P(){a.on("keydown",function(t){function n(e){if(D(e)&&!e.isDefaultPrevented())w()}if(D(t)&&!t.isDefaultPrevented()){if(m=t.shiftKey&&86==t.keyCode,m&&e.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),c=(new Date).getTime(),e.ie&&m)return t.preventDefault(),void a.fire("paste",{ieFake:true});w(),b(),a.once("keyup",n),a.once("paste",function(){a.off("keyup",n)})}});function t(e,t,n){var r;if(A(e,"text/html"))r=e["text/html"];else if(r=C(),r==d)n=true;if(r=i.trimHtml(r),l&&l.firstChild&&"mcepastebin"===l.firstChild.id)n=true;if(w(),!r.length)n=true;if(n)if(A(e,"text/plain")&&-1==r.indexOf("</p>"))r=e["text/plain"];else r=i.innerText(r);if(a.fire("onBeforePaste",{content:r}).isDefaultPrevented())return;if(r==d){if(!t)a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}if(n)y(r);else g(r)}var n=function(){return u||a.selection.getRng()};a.on("paste",function(i){var r=(new Date).getTime(),u=k(i),f=(new Date).getTime()-r,d=(new Date).getTime()-c-f<1e3,p="text"==s.pasteFormat||m;if(m=false,i.isDefaultPrevented()||R(i))return void w();if(!N(u)&&_(i,n()))return void w();if(!d)i.preventDefault();if(e.ie&&(!d||i.ieFake))b(),a.dom.bind(l,"paste",function(e){e.stopPropagation()}),a.getDoc().execCommand("Paste",false,null),u["text/html"]=C();if(A(u,"text/html"))i.preventDefault(),t(u,d,p);else o.setEditorTimeout(a,function(){t(u,d,p)},0)}),a.on("dragstart dragend",function(e){f="dragstart"==e.type});function r(e){var t=e["text/plain"];return t?0===t.indexOf("file://"):false}a.on("drop",function(e){var t,n;if(n=B(e),e.isDefaultPrevented()||f)return;if(t=x(e.dataTransfer),(!N(t)||r(t))&&_(e,n))return;if(n&&false!==a.settings.paste_filter_drop){var s=t["mce-internal"]||t["text/html"]||t["text/plain"];if(s)e.preventDefault(),o.setEditorTimeout(a,function(){a.undoManager.transact(function(){if(t["mce-internal"])a.execCommand("Delete");if(a.selection.setRng(n),s=i.trimHtml(s),!t["text/html"])y(s);else g(s)})})}}),a.on("dragover dragend",function(e){if(a.settings.paste_data_images)e.preventDefault()})}s.pasteHtml=g,s.pasteText=y,s.pasteImageData=_,s.prepareTextBeforePaste=v,a.on("preInit",function(){P(),a.parser.addNodeFilter("img",function(t,n,i){function r(e){return e.data&&true===e.data.paste}function o(t){if(!t.attr("data-mce-object")&&c!==e.transparentSrc)t.remove()}function s(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!a.settings.paste_data_images&&r(i)){var u=t.length;while(u--){var c=t[u].attributes.map.src;if(!c)continue;if(s(c))o(t[u]);else if(!a.settings.allow_html_data_urls&&l(c))o(t[u])}}})})}}),r("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,n,i,r,o){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function s(t){var n,i;return i=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(i,function(e){if(e.test(t))return n=true,false}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function u(u){var c=u.settings;u.on("BeforePastePreProcess",function(f){var d=f.content,m,p;if(d=d.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),d=d.replace(/<br class="?Apple-interchange-newline"?>/gi,""),m=c.paste_retain_style_properties,m)p=e.makeMap(m.split(/[, ]/));function h(e){var t,n,i=1;function o(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=o(e)}while(e=e.next);return t}function a(e,t){if(3===e.type)if(t.test(e.value))return e.value=e.value.replace(t,""),false;if(e=e.firstChild)do{if(!a(e,t))return false}while(e=e.next);return true}function u(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{u(e)}while(e=e.next)}function c(e,o,s){var l=e._listLevel||i;if(l!=i)if(l<i){if(t)t=t.parent.parent}else n=t,t=null;if(!t||t.name!=o){if(n=n||t,t=new r(o,1),s>1)t.attr("start",""+s);e.wrap(t)}else t.append(e);if(e.name="li",l>i&&n)n.lastChild.append(t);i=l,u(e),a(e,/^\u00a0+/),a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),a(e,/^\u00a0+/)}var f=[],d=e.firstChild;while("undefined"!==typeof d&&null!==d)if(f.push(d),d=d.walk(),null!==d)while("undefined"!==typeof d&&d.parent!==e)d=d.walk();for(var m=0;m<f.length;m++)if(e=f[m],"p"==e.name&&e.firstChild){var p=o(e);if(l(p)){c(e,"ul");continue}if(s(p)){var h=/([0-9]+)\./.exec(p),g=1;if(h)g=parseInt(h[1],10);c(e,"ol",g);continue}if(e._listLevel){c(e,"ul",1);continue}t=null}else n=t,t=null}function g(t,n){var i={},o,a=u.dom.parseStyle(n);if(e.each(a,function(e,r){switch(r){case"mso-list":if(o=/\w+ \w+([0-9]+)/i.exec(n),o)t._listLevel=parseInt(o[1],10);if(/Ignore/i.test(e)&&t.firstChild)t._listIgnore=true,t.firstChild._listIgnore=true;break;case"horiz-align":r="text-align";break;case"vert-align":r="vertical-align";break;case"font-color":case"mso-foreground":r="color";break;case"mso-background":case"mso-highlight":r="background";break;case"font-weight":case"font-style":if("normal"!=e)i[r]=e;return;case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}if(0===r.indexOf("mso-comment"))return void t.remove();if(0===r.indexOf("mso-"))return;if("all"==m||p&&p[r])i[r]=e}),/(bold)/i.test(i["font-weight"]))delete i["font-weight"],t.wrap(new r("b",1));if(/(italic)/i.test(i["font-style"]))delete i["font-style"],t.wrap(new r("i",1));if(i=u.dom.serializeStyle(i,t.name),i)return i;return null}if(false===c.paste_enable_default_filters)return;if(a(f.content)){f.wordContent=true,d=o.filter(d,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var v=c.paste_word_valid_elements;if(!v)v="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,"+"-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,"+"td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";var y=new n({valid_elements:v,valid_children:"-li[p]"});e.each(y.elements,function(e){if(!e.attributes["class"])e.attributes["class"]={},e.attributesOrder.push("class");if(!e.attributes.style)e.attributes.style={},e.attributesOrder.push("style")});var b=new t({},y);b.addAttributeFilter("style",function(e){var t=e.length,n;while(t--)if(n=e[t],n.attr("style",g(n,n.attr("style"))),"span"==n.name&&n.parent&&!n.attributes.length)n.unwrap()}),b.addAttributeFilter("class",function(e){var t=e.length,n,i;while(t--){if(n=e[t],i=n.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(i))n.remove();n.attr("class",null)}}),b.addNodeFilter("del",function(e){var t=e.length;while(t--)e[t].remove()}),b.addNodeFilter("a",function(e){var t=e.length,n,i,r;while(t--){if(n=e[t],i=n.attr("href"),r=n.attr("name"),i&&-1!=i.indexOf("#_msocom_")){n.remove();continue}if(i&&0===i.indexOf("file://"))if(i=i.split("#")[1],i)i="#"+i;if(!i&&!r)n.unwrap();else{if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){n.unwrap();continue}n.attr({href:i,name:r})}}});var w=b.parse(d);if(false!==c.paste_convert_word_fake_lists)h(w);f.content=new i({validate:c.validate},y).serialize(w)}})}return u.isWordContent=a,u}),r("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,i){return function(r){function o(e){r.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function a(e){r.on("PastePostProcess",function(t){e(t.node)})}function s(e){if(!n.isWordContent(e))return e;var o=[];t.each(r.schema.getBlockElements(),function(e,t){o.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+o.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=i.filter(e,[[a,"$1"]]),e=i.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),e}function l(e){if(n.isWordContent(e))return e;var t=r.settings.paste_webkit_styles;if(false===r.settings.paste_remove_styles_if_webkit||"all"==t)return e;if(t)t=t.split(/[, ]/);if(t){var i=r.dom,o=r.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,r,a){var s=i.parseStyle(r,"span"),l={};if("none"===t)return n+a;for(var u=0;u<t.length;u++){var c=s[t[u]],f=i.getStyle(o,t[u],true);if(/color/.test(t[u]))c=i.toHex(c),f=i.toHex(f);if(f!=c)l[t[u]]=c}if(l=i.serializeStyle(l,"span"),l)return n+' style="'+l+'"'+a;return n+a})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,i){return t+' style="'+n+'"'+i}),e}function u(e){r.$("a",e).find("font,u").each(function(e,t){r.dom.remove(t,true)})}if(e.webkit)o(l);if(e.ie)o(s),a(u)}}),r("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,n,i){var r;e.add("paste",function(o){var a=this,s,l=o.settings;function u(){return r||false===o.settings.paste_plaintext_inform}function c(){if("text"==s.pasteFormat)s.pasteFormat="html",o.fire("PastePlainTextToggle",{state:false});else if(s.pasteFormat="text",o.fire("PastePlainTextToggle",{state:true}),!u()){var e=o.translate("Paste is now in plain text mode. Contents will now "+"be pasted as plain text until you toggle this option off.");o.notificationManager.open({text:e,type:"info"}),r=true}o.focus()}function f(){var e=this;e.active("text"===s.pasteFormat),o.on("PastePlainTextToggle",function(t){e.active(t.state)})}if(/(^|[ ,])powerpaste([, ]|$)/.test(l.plugins)&&e.get("powerpaste")){if("undefined"!==typeof console&&console.log)console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.");return}if(a.clipboard=s=new t(o),a.quirks=new i(o),a.wordFilter=new n(o),o.settings.paste_as_text)a.clipboard.pasteFormat="text";if(l.paste_preprocess)o.on("PastePreProcess",function(e){l.paste_preprocess.call(a,a,e)});if(l.paste_postprocess)o.on("PastePostProcess",function(e){l.paste_postprocess.call(a,a,e)});if(o.addCommand("mceInsertClipboardContent",function(e,t){if(t.content)a.clipboard.pasteHtml(t.content);if(t.text)a.clipboard.pasteText(t.text)}),o.settings.paste_block_drop)o.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()});if(!o.settings.paste_data_images)o.on("drop",function(e){var t=e.dataTransfer;if(t&&t.files&&t.files.length>0)e.preventDefault()});o.addCommand("mceTogglePlainTextPaste",c),o.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:c,onPostRender:f}),o.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:s.pasteFormat,onclick:c,onPostRender:f})})}),s(["tinymce/pasteplugin/Utils"])}(window),function(){var e={},t=function(e){for(var t=r(e),n=e.split("."),i=Function("return this;")(),o=0;o<n.length-1;++o){if(void 0===i[n[o]])i[n[o]]={};i=i[n[o]]}i[n[n.length-1]]=t},n=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;l<a;++l)s[l]=r(i[l]);var u=o.apply(null,s);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},i=function(t,n,i){if("string"!==typeof t)throw"module id must be a string";else if(void 0===n)throw"no dependencies for "+t;else if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},r=function(t){var i=e[t];if(void 0===i)throw"module ["+t+"] was undefined";else if(void 0===i.instance)n(t);return i.instance},o=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i.push(r(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:i,require:o,demand:r}}};var a=i,s=o,l=r,u=function(e,t){a(e,[],function(){return t})};u("global!tinymce.PluginManager",tinymce.PluginManager),u("global!tinymce.util.Tools",tinymce.util.Tools),u("global!tinymce.util.VK",tinymce.util.VK),a("tinymce.lists.core.NodeType",[],function(){var e=function(e){return e&&"BR"===e.nodeName};return{isTextNode:function(e){return e&&3===e.nodeType},isListNode:function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},isListItemNode:function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},isBr:e,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBogusBr:function(t,n){if(!e(n))return false;if(t.isBlock(n.nextSibling)&&!e(n.previousSibling))return true;return false},isEmpty:function(e,t,n){var i=e.isEmpty(t);if(n&&e.select("span[data-mce-type=bookmark]",t).length>0)return false;return i},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),u("global!tinymce.dom.TreeWalker",tinymce.dom.TreeWalker),u("global!tinymce.dom.RangeUtils",tinymce.dom.RangeUtils),a("tinymce.lists.core.Selection",["global!tinymce.util.Tools","tinymce.lists.core.NodeType"],function(e,t){return{getSelectedListItems:function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})}}}),u("global!tinymce.dom.DOMUtils.DOM",tinymce.dom.DOMUtils.DOM),a("tinymce.lists.core.Range",["global!tinymce.dom.RangeUtils","tinymce.lists.core.NodeType"],function(e,t){var n=function(n,i){var r=e.getNode(n,i);if(t.isListItemNode(n)&&t.isTextNode(r))return{container:r,offset:i>=n.childNodes.length?r.data.length:0};return{container:n,offset:i}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),i=n(e.startContainer,e.startOffset);t.setStart(i.container,i.offset);var r=n(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t}}}),a("tinymce.lists.core.Bookmark",["global!tinymce.dom.DOMUtils.DOM","tinymce.lists.core.NodeType","tinymce.lists.core.Range"],function(e,t,n){return{createBookmark:function(t){var n={},i=function(i){var r,o,a;if(o=t[i?"startContainer":"endContainer"],a=t[i?"startOffset":"endOffset"],1===o.nodeType){if(r=e.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes())if(a=Math.min(a,o.childNodes.length-1),i)o.insertBefore(r,o.childNodes[a]);else e.insertAfter(r,o.childNodes[a]);else o.appendChild(r);o=r,a=0}n[i?"startContainer":"endContainer"]=o,n[i?"startOffset":"endOffset"]=a};if(i(true),!t.collapsed)i();return n},resolveBookmark:function(t){function i(n){var i,r,o,a=function(e){var t=e.parentNode.firstChild,n=0;while(t){if(t===e)return n;if(1!==t.nodeType||"bookmark"!==t.getAttribute("data-mce-type"))n++;t=t.nextSibling}return-1};if(i=o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],!i)return;if(1===i.nodeType)r=a(i),i=i.parentNode,e.remove(o);t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=r}i(true),i();var r=e.createRng();if(r.setStart(t.startContainer,t.startOffset),t.endContainer)r.setEnd(t.endContainer,t.endOffset);return n.normalizeRange(r)}}}),a("tinymce.lists.core.NormalizeLists",["global!tinymce.dom.DOMUtils.DOM","global!tinymce.util.Tools","tinymce.lists.core.NodeType"],function(e,t,n){var i=function(t,i){var r,o=i.parentNode;if("LI"===o.nodeName&&o.firstChild===i)if(r=o.previousSibling,r&&"LI"===r.nodeName){if(r.appendChild(i),n.isEmpty(t,o))e.remove(o)}else e.setStyle(o,"listStyleType","none");if(n.isListNode(o))if(r=o.previousSibling,r&&"LI"===r.nodeName)r.appendChild(i)};return{normalizeList:i,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){i(e,t)})}}}),u("global!tinymce.dom.BookmarkManager",tinymce.dom.BookmarkManager),u("global!tinymce.Env",tinymce.Env),a("tinymce.lists.core.TextBlock",["global!tinymce.dom.DOMUtils.DOM","global!tinymce.Env"],function(e,t){return{createNewTextBlock:function(n,i,r){var o,a,s=e.createFragment(),l,u=n.schema.getBlockElements();if(n.settings.forced_root_block)r=r||n.settings.forced_root_block;if(r){if(a=e.create(r),a.tagName===n.settings.forced_root_block)e.setAttribs(a,n.settings.forced_root_block_attrs);s.appendChild(a)}if(i)while(o=i.firstChild){var c=o.nodeName;if(!l&&("SPAN"!==c||"bookmark"!==o.getAttribute("data-mce-type")))l=true;if(u[c])s.appendChild(o),a=null;else if(r){if(!a)a=e.create(r),s.appendChild(a);a.appendChild(o)}else s.appendChild(o)}if(!n.settings.forced_root_block)s.appendChild(e.create("br"));else if(!l&&(!t.ie||t.ie>10))a.appendChild(e.create("br",{"data-mce-bogus":"1"}));return s}}}),a("tinymce.lists.core.SplitList",["global!tinymce.dom.DOMUtils.DOM","global!tinymce.util.Tools","tinymce.lists.core.TextBlock","tinymce.lists.core.NodeType"],function(e,t,n,i){return{splitList:function(r,o,a,s){var l,u,c,f,d=function(n){t.each(c,function(e){n.parentNode.insertBefore(e,a.parentNode)}),e.remove(n)};for(c=e.select('span[data-mce-type="bookmark"]',o),s=s||n.createNewTextBlock(r,a),(l=e.createRng()).setStartAfter(a),l.setEndAfter(o),f=(u=l.extractContents()).firstChild;f;f=f.firstChild)if("LI"===f.nodeName&&r.dom.isEmpty(f)){e.remove(f);break}if(!r.dom.isEmpty(u))e.insertAfter(u,o);if(e.insertAfter(s,o),i.isEmpty(r.dom,a.parentNode))d(a.parentNode);if(e.remove(a),i.isEmpty(r.dom,o))e.remove(o)}}}),a("tinymce.lists.actions.Outdent",["global!tinymce.dom.DOMUtils.DOM","tinymce.lists.core.NodeType","tinymce.lists.core.Bookmark","tinymce.lists.core.Selection","tinymce.lists.core.SplitList","tinymce.lists.core.NormalizeLists","tinymce.lists.core.TextBlock"],function(e,t,n,i,r,o,a){var s=function(n,i){if(t.isEmpty(n,i))e.remove(i)},l=function(n,i){var l=i.parentNode,u=l.parentNode,c;if(l===n.getBody())return true;if("DD"===i.nodeName)return e.rename(i,"DT"),true;if(t.isFirstChild(i)&&t.isLastChild(i)){if("LI"===u.nodeName)e.insertAfter(i,u),s(n.dom,u),e.remove(l);else if(t.isListNode(u))e.remove(l,true);else u.insertBefore(a.createNewTextBlock(n,i),l),e.remove(l);return true}else if(t.isFirstChild(i)){if("LI"===u.nodeName)e.insertAfter(i,u),i.appendChild(l),s(n.dom,u);else if(t.isListNode(u))u.insertBefore(i,l);else u.insertBefore(a.createNewTextBlock(n,i),l),e.remove(i);return true}else if(t.isLastChild(i)){if("LI"===u.nodeName)e.insertAfter(i,u);else if(t.isListNode(u))e.insertAfter(i,l);else e.insertAfter(a.createNewTextBlock(n,i),l),e.remove(i);return true}if("LI"===u.nodeName)l=u,c=a.createNewTextBlock(n,i,"LI");else if(t.isListNode(u))c=a.createNewTextBlock(n,i,"LI");else c=a.createNewTextBlock(n,i);return r.splitList(n,l,i,c),o.normalizeLists(n.dom,l.parentNode),true};return{outdent:l,outdentSelection:function(e){var t=i.getSelectedListItems(e);if(t.length){var r=n.createBookmark(e.selection.getRng(true)),o,a,s=e.getBody();o=t.length;while(o--){var u=t[o].parentNode;while(u&&u!==s){a=t.length;while(a--)if(t[a]===u){t.splice(o,1);break}u=u.parentNode}}for(o=0;o<t.length;o++)if(!l(e,t[o])&&0===o)break;return e.selection.setRng(n.resolveBookmark(r)),e.nodeChanged(),true}}}}),a("tinymce.lists.actions.ToggleList",["global!tinymce.util.Tools","global!tinymce.dom.BookmarkManager","tinymce.lists.core.Selection","tinymce.lists.core.NodeType","tinymce.lists.core.Bookmark","tinymce.lists.core.SplitList","tinymce.lists.core.NormalizeLists","tinymce.lists.actions.Outdent"],function(e,t,n,i,r,o,a,s){var l=function(e,t,n){var i=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",i)},u=function(t,n){e.each(n,function(e,n){t.setAttribute(n,e)})},c=function(t,n,i){u(n,i["list-attributes"]),e.each(t.select("li",n),function(e){u(e,i["list-item-attributes"])})},f=function(e,t,n){l(e,t,n),c(e,t,n)},d=function(e,t,n){var r,o,a=e.getBody();if(r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===r.nodeType)r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r;while(r.parentNode!==a){if(i.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},m=function(n,r){for(var o=[],a=n.getBody(),s=n.dom,l=d(n,r,true),u=d(n,r,false),c,f=[],m=l;m;m=m.nextSibling)if(f.push(m),m===u)break;return e.each(f,function(e){if(i.isTextBlock(n,e))return o.push(e),void(c=null);if(s.isBlock(e)||i.isBr(e)){if(i.isBr(e))s.remove(e);return void(c=null)}var r=e.nextSibling;if(t.isBookmarkNode(e))if(i.isTextBlock(n,r)||!r&&e.parentNode===a)return void(c=null);if(!c)c=s.create("p"),e.parentNode.insertBefore(c,e),o.push(c);c.appendChild(e)}),o},p=function(t,n,o){var a=t.selection.getRng(true),s,l="LI",u=t.dom;if(o=o?o:{},"false"===u.getContentEditable(t.selection.getNode()))return;if(n=n.toUpperCase(),"DL"===n)l="DT";s=r.createBookmark(a),e.each(m(t,a),function(e){var r,a,s=function(e){var t=u.getStyle(e,"list-style-type"),n=o?o["list-style-type"]:"";return n=null===n?"":n,t===n};if(a=e.previousSibling,a&&i.isListNode(a)&&a.nodeName===n&&s(a))r=a,e=u.rename(e,l),a.appendChild(e);else r=u.create(n),e.parentNode.insertBefore(r,e),r.appendChild(e),e=u.rename(e,l);f(u,r,o),w(t.dom,r)}),t.selection.setRng(r.resolveBookmark(s))},h=function(t){var l=r.createBookmark(t.selection.getRng(true)),u=t.getBody(),c=n.getSelectedListItems(t),f=e.grep(c,function(e){return t.dom.isEmpty(e)});c=e.grep(c,function(e){return!t.dom.isEmpty(e)}),e.each(f,function(e){if(i.isEmpty(t.dom,e))return void s.outdent(t,e)}),e.each(c,function(e){var n,r;if(e.parentNode===t.getBody())return;for(n=e;n&&n!==u;n=n.parentNode)if(i.isListNode(n))r=n;o.splitList(t,r,e),a.normalizeLists(t.dom,r.parentNode)}),t.selection.setRng(r.resolveBookmark(l))},g=function(e,t){return e&&t&&i.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){return e.getStyle(t,"list-style-type",true)===e.getStyle(n,"list-style-type",true)},y=function(e,t){return e.className===t.className},b=function(e,t,n){return g(t,n)&&v(e,t,n)&&y(t,n)},w=function(e,t){var n,i;if(n=t.nextSibling,b(e,t,n)){while(i=n.firstChild)t.appendChild(i);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){while(i=n.lastChild)t.insertBefore(i,t.firstChild);e.remove(n)}};return{toggleList:function(e,t,n){var i=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n?n:{},i===e.getBody())return;if(i)if(i.nodeName===t)h(e,t);else{var o=r.createBookmark(e.selection.getRng(true));f(e.dom,i,n),w(e.dom,e.dom.rename(i,t)),e.selection.setRng(r.resolveBookmark(o))}else p(e,t,n)},removeList:h,mergeWithAdjacentLists:w}}),a("tinymce.lists.core.Delete",["global!tinymce.dom.TreeWalker","global!tinymce.dom.RangeUtils","global!tinymce.util.VK","tinymce.lists.core.Selection","tinymce.lists.core.NodeType","tinymce.lists.core.Bookmark","tinymce.lists.core.Range","tinymce.lists.core.NormalizeLists","tinymce.lists.actions.ToggleList"],function(e,t,n,i,r,o,a,s,l){var u=function(n,i,o){var a=i.startContainer,s=i.startOffset,l,u;if(3===a.nodeType&&(o?s<a.data.length:s>0))return a;if(l=n.schema.getNonEmptyElements(),1===a.nodeType)a=t.getNode(a,s);if(u=new e(a,n.getBody()),o)if(r.isBogusBr(n.dom,a))u.next();while(a=u[o?"next":"prev2"]()){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(l[a.nodeName])return a;if(3===a.nodeType&&a.data.length>0)return a}},c=function(e,t,n){var i,o,a=t.parentNode;if(!r.isChildOfBody(e,t)||!r.isChildOfBody(e,n))return;if(r.isListNode(n.lastChild))o=n.lastChild;if(a===n.lastChild)if(r.isBr(a.previousSibling))e.remove(a.previousSibling);if(i=n.lastChild,i&&r.isBr(i)&&t.hasChildNodes())e.remove(i);if(r.isEmpty(e,n,true))e.$(n).empty();if(!r.isEmpty(e,t,true))while(i=t.firstChild)n.appendChild(i);if(o)n.appendChild(o);if(e.remove(t),r.isEmpty(e,a)&&a!==e.getRoot())e.remove(a)},f=function(e,t){var n=e.dom,i=e.selection,s=n.getParent(i.getStart(),"LI"),f,d,m;if(s){if(f=s.parentNode,f===e.getBody()&&r.isEmpty(n,f))return true;if(d=a.normalizeRange(i.getRng(true)),m=n.getParent(u(e,d,t),"LI"),m&&m!==s){var p=o.createBookmark(d);if(t)c(n,m,s);else c(n,s,m);return e.selection.setRng(o.resolveBookmark(p)),true}else if(!m)if(!t&&l.removeList(e,f.nodeName))return true}return false},d=function(e,t){var n=e.dom,i=n.getParent(e.selection.getStart(),n.isBlock);if(i&&n.isEmpty(i)){var r=a.normalizeRange(e.selection.getRng(true)),o=n.getParent(u(e,r,t),"LI");if(o)return e.undoManager.transact(function(){n.remove(i),l.mergeWithAdjacentLists(n,o.parentNode),e.selection.select(o,true),e.selection.collapse(t)}),true}return false},m=function(e,t){return f(e,t)||d(e,t)},p=function(e){if(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||i.getSelectedListItems(e).length>0)return e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),true;return false},h=function(e,t){return e.selection.isCollapsed()?m(e,t):p(e)};return{setup:function(e){e.on("keydown",function(t){if(t.keyCode===n.BACKSPACE){if(h(e,false))t.preventDefault()}else if(t.keyCode===n.DELETE)if(h(e,true))t.preventDefault()})},backspaceDelete:h}}),a("tinymce.lists.actions.Indent",["global!tinymce.dom.DOMUtils.DOM","tinymce.lists.core.NodeType","tinymce.lists.core.Bookmark","tinymce.lists.core.Selection"],function(e,t,n,i){var r=function(n,i){var r;if(t.isListNode(n)){while(r=n.firstChild)i.appendChild(r);e.remove(n)}},o=function(n){var i,o,a;if("DT"===n.nodeName)return e.rename(n,"DD"),true;if(i=n.previousSibling,i&&t.isListNode(i))return i.appendChild(n),true;if(i&&"LI"===i.nodeName&&t.isListNode(i.lastChild))return i.lastChild.appendChild(n),r(n.lastChild,i.lastChild),true;if(i=n.nextSibling,i&&t.isListNode(i))return i.insertBefore(n,i.firstChild),true;if(i=n.previousSibling,i&&"LI"===i.nodeName){if(o=e.create(n.parentNode.nodeName),a=e.getStyle(n.parentNode,"listStyleType"),a)e.setStyle(o,"listStyleType",a);return i.appendChild(o),o.appendChild(n),r(n.lastChild,o),true}return false};return{indentSelection:function(e){var t=i.getSelectedListItems(e);if(t.length){for(var r=n.createBookmark(e.selection.getRng(true)),a=0;a<t.length;a++)if(!o(t[a])&&0===a)break;return e.selection.setRng(n.resolveBookmark(r)),e.nodeChanged(),true}}}}),a("tinymce.lists.Plugin",["global!tinymce.PluginManager","global!tinymce.util.Tools","global!tinymce.util.VK","tinymce.lists.core.NodeType","tinymce.lists.core.Delete","tinymce.lists.actions.Indent","tinymce.lists.actions.Outdent","tinymce.lists.actions.ToggleList"],function(e,t,n,i,r,o,a,s){var l=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},u=function(e){e.on("BeforeExecCommand",function(t){var n=t.command.toLowerCase(),i;if("indent"===n){if(o.indentSelection(e))i=true}else if("outdent"===n)if(a.outdentSelection(e))i=true;if(i)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),true}),e.addCommand("InsertUnorderedList",function(t,n){s.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){s.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){s.toggleList(e,"DL",n)})},c=function(e){e.addQueryStateHandler("InsertUnorderedList",l(e,"UL")),e.addQueryStateHandler("InsertOrderedList",l(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",l(e,"DL"))},f=function(e){e.on("keydown",function(t){if(9!==t.keyCode||n.metaKeyPressed(t))return;if(e.dom.getParent(e.selection.getStart(),"LI,DT,DD"))if(t.preventDefault(),t.shiftKey)a.outdentSelection(e);else o.indentSelection(e)})},d=function(e){var n=function(n){return function(){var r=this;e.on("NodeChange",function(e){var o=t.grep(e.parents,i.isListNode);r.active(o.length>0&&o[0].nodeName===n)})}};if(!function(e,n){var i=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(i.split(/[ ,]/),n)}(e,"advlist"))e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")});e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),r=false,o=0,a=t.length;!r&&o<a;o++){var s=t[o].nodeName;r="LI"===s&&i.isFirstChild(t[o])||"UL"===s||"OL"===s||"DD"===s}n.disabled(r)})}})};return e.add("lists",function(e){return d(e),r.setup(e),e.on("init",function(){u(e),c(e),f(e)}),{backspaceDelete:function(t){r.backspaceDelete(e,t)}}}),function(){}}),r("tinymce.lists.Plugin")()}(),tinymce.PluginManager.add("noneditable",function(e){var t,n,i,r="contenteditable";function o(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}}function a(t){var r=i.length,o=t.content,a=tinymce.trim(n);function s(t){var n=arguments,i=n[n.length-2],r=i>0?o.charAt(i-1):"";if('"'===r)return t;if(">"===r){var s=o.lastIndexOf("<",i);if(-1!==s)if(-1!==o.substring(s,i).indexOf('contenteditable="false"'))return t}return'<span class="'+a+'" data-mce-content="'+e.dom.encode(n[0])+'">'+e.dom.encode("string"===typeof n[1]?n[1]:n[0])+"</span>"}if("raw"==t.format)return;while(r--)o=o.replace(i[r],s);t.content=o}t=" "+tinymce.trim(e.getParam("noneditable_editable_class","mceEditable"))+" ",n=" "+tinymce.trim(e.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";var s=o(t),l=o(n);if(i=e.getParam("noneditable_regexp"),i&&!i.length)i=[i];e.on("PreInit",function(){if(i)e.on("BeforeSetContent",a);e.parser.addAttributeFilter("class",function(e){var t=e.length,n;while(t--)if(n=e[t],s(n))n.attr(r,"true");else if(l(n))n.attr(r,"false")}),e.serializer.addAttributeFilter(r,function(e){var t=e.length,n;while(t--){if(n=e[t],!s(n)&&!l(n))continue;if(i&&n.attr("data-mce-content"))n.name="#text",n.type=3,n.raw=true,n.value=n.attr("data-mce-content");else n.attr(r,null)}})})}),function(){var e={},t=function(e){for(var t=r(e),n=e.split("."),i=Function("return this;")(),o=0;o<n.length-1;++o){if(void 0===i[n[o]])i[n[o]]={};i=i[n[o]]}i[n[n.length-1]]=t},n=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;l<a;++l)s[l]=r(i[l]);var u=o.apply(null,s);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},i=function(t,n,i){if("string"!==typeof t)throw"module id must be a string";else if(void 0===n)throw"no dependencies for "+t;else if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},r=function(t){var i=e[t];if(void 0===i)throw"module ["+t+"] was undefined";else if(void 0===i.instance)n(t);return i.instance},o=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i.push(r(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:i,require:o,demand:r}}};var a=i,s=o,l=r,u=function(e,t){a(e,[],function(){return t})};u("global!tinymce.Env",tinymce.Env),u("global!tinymce.EditorManager",tinymce.EditorManager),u("global!tinymce.ThemeManager",tinymce.ThemeManager),u("global!tinymce.util.Tools",tinymce.util.Tools),u("global!tinymce.ui.Factory",tinymce.ui.Factory),u("global!tinymce.DOM",tinymce.DOM),a("tinymce.modern.ui.Toolbar",["global!tinymce.util.Tools","global!tinymce.ui.Factory"],function(e,t){var n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | "+"bullist numlist outdent indent | link image",i=function(n,i,r){var o=[],a;if(!i)return;return e.each(i.split(/[ ,]/),function(e){var i,s=function(){var t=n.selection;if(e.settings.stateSelector)t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},true);if(e.settings.disabledStateSelector)t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};if("|"==e)a=null;else if(t.has(e))e={type:e,size:r},o.push(e),a=null;else{if(!a)a={type:"buttongroup",items:[]},o.push(a);if(n.buttons[e]){if(i=e,e=n.buttons[i],"function"==typeof e)e=e();if(e.type=e.type||"button",e.size=r,e=t.create(e),a.items.push(e),n.initialized)s();else n.on("init",s)}}}),{type:"toolbar",layout:"flow",items:o}};return{createToolbar:i,createToolbars:function(t,r){var o=[],a=t.settings,s=function(e){if(e)return o.push(i(t,e,r)),true};if(e.isArray(a.toolbar)){if(0===a.toolbar.length)return;e.each(a.toolbar,function(e,t){a["toolbar"+(t+1)]=e}),delete a.toolbar}for(var l=1;l<10;l++)if(!s(a["toolbar"+l]))break;if(!o.length&&false!==a.toolbar)s(a.toolbar||n);if(o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:o}}}}),a("tinymce.modern.ui.Menubar",["global!tinymce.util.Tools"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){var n;if("|"==t)return{text:"|"};return n=e[t],n},i=function(i,r,o){var a,s,l,u,c;if(c=e.makeMap((r.removed_menuitems||"").split(/[ ,]/)),r.menu)s=r.menu[o],u=true;else s=t[o];if(s){if(a={text:s.title},l=[],e.each((s.items||"").split(/[ ,]/),function(e){if(n(i,e)&&!c[e])l.push(n(i,e))}),!u)e.each(i,function(e){if(e.context==o){if("before"==e.separator)l.push({text:"|"});if(e.prependToContext)l.unshift(e);else l.push(e);if("after"==e.separator)l.push({text:"|"})}});for(var f=0;f<l.length;f++)if("|"==l[f].text)if(0===f||f==l.length-1)l.splice(f,1);if(a.menu=l,!a.menu.length)return null}return a};return{createMenuButtons:function(e){var n,r=[],o=e.settings,a=[];if(o.menu)for(n in o.menu)a.push(n);else for(n in t)a.push(n);for(var s="string"==typeof o.menubar?o.menubar.split(/[ ,]/):a,l=0;l<s.length;l++){var u=s[l];if(u=i(e.menuItems,e.settings,u),u)r.push(u)}return r}}}),u("global!tinymce.util.Delay",tinymce.util.Delay),u("global!tinymce.geom.Rect",tinymce.geom.Rect),a("tinymce.modern.ui.ContextToolbars",["global!tinymce.DOM","global!tinymce.util.Tools","global!tinymce.util.Delay","tinymce.modern.ui.Toolbar","global!tinymce.ui.Factory","global!tinymce.geom.Rect"],function(e,t,n,i,r,o){var a=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},s=function(e){t.each(e.contextToolbars,function(e){if(e.panel)e.panel.hide()})},l=function(e,t){e.moveTo(t.left,t.top)},u=function(e,n,i){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,r){e.classes.toggle("arrow-"+t,i(r,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,r){e.classes.toggle("arrow-"+t,i(r,n.substr(1,1)))})},c=function(e,t,n,i,r,o){if(o=a({x:t,y:n,w:o.w,h:o.h}),e)o=e({elementRect:a(i),contentAreaRect:a(r),panelRect:o});return o};return{addContextualToolbars:function(a){var f,d=a.settings,m=function(){return a.contextToolbars||[]},p=function(t){var n,i,r;if(n=e.getPos(a.getContentAreaContainer()),i=a.dom.getRect(t),r=a.dom.getRoot(),"BODY"===r.nodeName)i.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,i.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop;return i.x+=n.x,i.y+=n.y,i},h=function(t,n){var i,r,f,m,h,g,v,y,b=d.inline_toolbar_position_handler;if(a.removed)return;if(!t||!t.toolbar.panel)return void s(a);if(v=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],h=t.toolbar.panel,n)h.show();if(f=p(t.element),r=e.getRect(h.getEl()),m=e.getRect(a.getContentAreaContainer()||a.getBody()),y=25,"inline"!==e.getStyle(t.element,"display",true))f.w=t.element.clientWidth,f.h=t.element.clientHeight;if(!a.inline)m.w=a.getDoc().documentElement.offsetWidth;if(a.selection.controlSelection.isResizable(t.element)&&f.w<y)f=o.inflate(f,0,8);if(i=o.findBestRelativePosition(r,f,m,v),f=o.clamp(f,m),i)g=o.relativePosition(r,f,i),l(h,c(b,g.x,g.y,f,m,r));else if(m.h+=r.h,f=o.intersect(m,f),f)if(i=o.findBestRelativePosition(r,f,m,["bc-tc","bl-tl","br-tr"]),i)g=o.relativePosition(r,f,i),l(h,c(b,g.x,g.y,f,m,r));else l(h,c(b,f.x,f.y,f,m,r));else h.hide();u(h,i,function(e,t){return e===t})},g=function(e){return function(){var t=function(){if(a.selection)h(w(a.selection.getNode()),e)};n.requestAnimationFrame(t)}},v=function(){if(!f)f=a.selection.getScrollContainer()||a.getWin(),e.bind(f,"scroll",g(true)),a.on("remove",function(){e.unbind(f,"scroll")})},y=function(e){var t;if(e.toolbar.panel)return e.toolbar.panel.show(),void h(e);v(),t=r.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:true,border:1,items:i.createToolbar(a,e.toolbar.items),oncancel:function(){a.focus()}}),e.toolbar.panel=t,t.renderTo(document.body).reflow(),h(e)},b=function(){t.each(m(),function(e){if(e.panel)e.panel.hide()})},w=function(e){var t,n,i,r=m();for(t=(i=a.$(e).parents().add(e)).length-1;t>=0;t--)for(n=r.length-1;n>=0;n--)if(r[n].predicate(i[t]))return{toolbar:r[n],element:i[t]};return null};a.on("click keyup setContent ObjectResized",function(e){if("setcontent"===e.type&&!e.selection)return;n.setEditorTimeout(a,function(){var e;if(e=w(a.selection.getNode()),e)b(),y(e);else b()})}),a.on("blur hide contextmenu",b),a.on("ObjectResizeStart",function(){var e=w(a.selection.getNode());if(e&&e.toolbar.panel)e.toolbar.panel.hide()}),a.on("ResizeEditor ResizeWindow",g(true)),a.on("nodeChange",g(false)),a.on("remove",function(){t.each(m(),function(e){if(e.panel)e.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=w(a.selection.getNode());if(e&&e.toolbar.panel)e.toolbar.panel.items()[0].focus()})}}}),a("tinymce.modern.ui.A11y",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];if(n)n.focus(true)}};return{addKeys:function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})}}}),a("tinymce.modern.ui.Sidebar",["global!tinymce.util.Tools","global!tinymce.ui.Factory","global!tinymce.Env"],function(e,t,n){var i=function(e){return{element:function(){return e}}},r=function(e,t,n){var r=e.settings[n];if(r)r(i(t.getEl("body")))},o=function(t,n,i){e.each(i,function(e){var i=n.items().filter("#"+e.name)[0];if(i&&i.visible()&&e.name!==t)r(e,i,"onhide"),i.visible(false)})},a=function(e){e.items().each(function(e){e.active(false)})},s=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},l=function(e,n,i){return function(l){var u=l.control,c=u.parents().filter("panel")[0],f=c.find("#"+n)[0],d=s(i,n);if(o(n,c,i),a(u.parent()),f&&f.visible())r(d,f,"onhide"),f.hide(),u.active(false);else{if(f)f.show(),r(d,f,"onshow");else f=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),c.prepend(f),r(d,f,"onrender"),r(d,f,"onshow");u.active(true)}e.fire("ResizeEditor")}},u=function(){return!n.ie||n.ie>=11};return{hasSidebar:function(e){return u()&&e.sidebars?e.sidebars.length>0:false},createSidebar:function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:l(t,e.name,t.sidebars)}})}]}}}}),a("tinymce.modern.ui.SkinLoaded",[],function(){return{fireSkinLoaded:function(e){var t=function(){e._skinLoaded=true,e.fire("SkinLoaded")};return function(){if(e.initialized)t();else e.on("init",t)}}}}),a("tinymce.modern.ui.Resize",["global!tinymce.DOM"],function(e){var t=function(e){return{width:e.clientWidth,height:e.clientHeight}},n=function(n,i,r){var o,a,s,l,u=n.settings;if(o=n.getContainer(),a=n.getContentAreaContainer().firstChild,s=t(o),l=t(a),null!==i)i=Math.max(u.min_width||100,i),i=Math.min(u.max_width||65535,i),e.setStyle(o,"width",i+(s.width-l.width)),e.setStyle(a,"width",i);r=Math.max(u.min_height||100,r),r=Math.min(u.max_height||65535,r),e.setStyle(a,"height",r),n.fire("ResizeEditor")};return{resizeTo:n,resizeBy:function(e,t,i){var r=e.getContentAreaContainer();n(e,r.clientWidth+t,r.clientHeight+i)}}}),a("tinymce.modern.modes.Iframe",["global!tinymce.util.Tools","global!tinymce.ui.Factory","global!tinymce.DOM","tinymce.modern.ui.Toolbar","tinymce.modern.ui.Menubar","tinymce.modern.ui.ContextToolbars","tinymce.modern.ui.A11y","tinymce.modern.ui.Sidebar","tinymce.modern.ui.SkinLoaded","tinymce.modern.ui.Resize"],function(e,t,n,i,r,o,a,s,l,u){var c=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},f=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},d=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[f("0"),s.createSidebar(e)]}};return{render:function(e,l,m){var p,h,g,v=e.settings;if(p=l.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[false===v.menubar?null:{type:"menubar",border:"0 0 1 0",items:r.createMenuButtons(e)},i.createToolbars(e,v.toolbar_items_size),s.hasSidebar(e)?d(e):f("1 0 0 0")]}),false!==v.resize)h={type:"resizehandle",direction:v.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;g={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){if("both"===v.resize)u.resizeTo(e,g.width+t.deltaX,g.height+t.deltaY);else u.resizeTo(e,null,g.height+t.deltaY)}};if(false!==v.statusbar)p.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath",editor:e},h]});if(e.fire("BeforeRenderUI"),e.on("SwitchMode",c(p)),p.renderBefore(m.targetNode).reflow(),v.readonly)e.setMode("readonly");if(v.width)n.setStyle(p.getEl(),"width",v.width);return e.on("remove",function(){p.remove(),p=null}),a.addKeys(e,p),o.addContextualToolbars(e),{iframeContainer:p.find("#iframe")[0].getEl(),editorContainer:p.getEl()}}}}),u("global!tinymce.ui.FloatPanel",tinymce.ui.FloatPanel),a("tinymce.modern.modes.Inline",["global!tinymce.util.Tools","global!tinymce.ui.Factory","global!tinymce.DOM","global!tinymce.ui.FloatPanel","tinymce.modern.ui.Toolbar","tinymce.modern.ui.Menubar","tinymce.modern.ui.ContextToolbars","tinymce.modern.ui.A11y","tinymce.modern.ui.SkinLoaded"],function(e,t,n,i,r,o,a,s,l){return{render:function(e,l,u){var c,f,d=e.settings;if(d.fixed_toolbar_container)f=n.select(d.fixed_toolbar_container)[0];var m=function(){if(c&&c.moveRel&&c.visible()&&!c._fixed){var t=e.selection.getScrollContainer(),i=e.getBody(),r=0,o=0;if(t){var a=n.getPos(i),s=n.getPos(t);r=Math.max(0,s.x-a.x),o=Math.max(0,s.y-a.y)}c.fixed(false).moveRel(i,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,o)}},p=function(){if(c)c.show(),m(),n.addClass(e.getBody(),"mce-edit-focus")},h=function(){if(c)c.hide(),i.hideAll(),n.removeClass(e.getBody(),"mce-edit-focus")},g=function(){if(e.destroyed)return;if(c){if(!c.visible())p();return}c=l.panel=t.create({type:f?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:!!f,border:1,items:[false===d.menubar?null:{type:"menubar",border:"0 0 1 0",items:o.createMenuButtons(e)},r.createToolbars(e,d.toolbar_items_size)]}),e.fire("BeforeRenderUI"),c.renderTo(f||document.body).reflow(),s.addKeys(e,c),p(),a.addContextualToolbars(e),e.on("nodeChange",m),e.on("activate",p),e.on("deactivate",h),e.nodeChanged()};return d.content_editable=true,e.on("focus",function(){g()}),e.on("blur hide",h),e.on("remove",function(){if(c)c.remove(),c=null}),{}}}}),u("global!tinymce.ui.Throbber",tinymce.ui.Throbber),a("tinymce.modern.ui.ProgressState",["global!tinymce.ui.Throbber"],function(e){return{setup:function(t,n){var i;t.on("ProgressState",function(t){if(i=i||new e(n.panel.getEl("body")),t.state)i.show(t.time);else i.hide()})}}}),a("tinymce.modern.Theme",["global!tinymce.Env","global!tinymce.EditorManager","global!tinymce.ThemeManager","tinymce.modern.modes.Iframe","tinymce.modern.modes.Inline","tinymce.modern.ui.Resize","tinymce.modern.ui.ProgressState"],function(e,t,n,i,r,o,a){var s=function(e,n,o){var s=e.settings,l=false!==s.skin?s.skin||"lightgray":false;if(l){var u=s.skin_url;if(u)u=e.documentBaseURI.toAbsolute(u);else u=t.baseURL+"/skins/"+l}if(a.setup(e,n),s.inline)return r.render(e,n,o);return i.render(e,n,o)};return n.add("modern",function(e){return{renderUI:function(t){return s(e,this,t)},resizeTo:function(t,n){return o.resizeTo(e,t,n)},resizeBy:function(t,n){return o.resizeBy(e,t,n)}}}),function(){}}),r("tinymce.modern.Theme")()}(),function(e,t){"use strict";var n={};function i(e,t){for(var i,r=[],o=0;o<e.length;++o){if(i=n[e[o]]||a(e[o]),!i)throw"module definition dependecy not found: "+e[o];r.push(i)}t.apply(null,r)}function r(e,r,o){if("string"!==typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";i(r,function(){n[e]=o.apply(null,arguments)})}function o(e){return!!n[e]}function a(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}function s(i){var r,o,a,s,l;for(r=0;r<i.length;r++){o=e,s=(a=i[r]).split(/[.\/]/);for(var u=0;u<s.length-1;++u){if(o[s[u]]===t)o[s[u]]={};o=o[s[u]]}o[s[s.length-1]]=n[a]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(a in n)l[a]=n[a];for(r=0;r<i.length;r++)delete l[i[r]];e.privateModules=l}}r("tinymce/codesampleplugin/Prism",[],function(){var e={},t="undefined"!==typeof e?e:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},n=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=t.Prism={util:{encode:function(e){if(e instanceof i)return new i(e.type,n.util.encode(e.content),e.alias);else if("Array"===n.util.type(e))return e.map(n.util.encode);else return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var i in e)if(e.hasOwnProperty(i))t[i]=n.util.clone(e[i]);return t;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var i=n.util.clone(n.languages[e]);for(var r in t)i[r]=t[r];return i},insertBefore:function(e,t,i,r){var o=(r=r||n.languages)[e];if(2==arguments.length){i=arguments[1];for(var a in i)if(i.hasOwnProperty(a))o[a]=i[a];return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l==t)for(var a in i)if(i.hasOwnProperty(a))s[a]=i[a];s[l]=o[l]}return n.languages.DFS(n.languages,function(t,n){if(n===r[e]&&t!=e)this[t]=s}),r[e]=s},DFS:function(e,t,i){for(var r in e)if(e.hasOwnProperty(r))if(t.call(e,r,e[r],i||r),"Object"===n.util.type(e[r]))n.languages.DFS(e[r],t);else if("Array"===n.util.type(e[r]))n.languages.DFS(e[r],t,r)}},plugins:{},highlightAll:function(e,t){for(var i=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),r=0,o;o=i[r++];)n.highlightElement(o,true===e,t)},highlightElement:function(i,r,o){var a,s,l=i;while(l&&!e.test(l.className))l=l.parentNode;if(l)a=(l.className.match(e)||[,""])[1],s=n.languages[a];if(i.className=i.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,l=i.parentNode,/pre/i.test(l.nodeName))l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+a;var u=i.textContent,c={element:i,language:a,grammar:s,code:u};if(!u||!s)return void n.hooks.run("complete",c);if(n.hooks.run("before-highlight",c),r&&t.Worker){var f=new Worker(n.filename);f.onmessage=function(e){c.highlightedCode=e.data,n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,o&&o.call(c.element),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},f.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:true}))}else c.highlightedCode=n.highlight(c.code,c.grammar,c.language),n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,o&&o.call(i),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},highlight:function(e,t,r){var o=n.tokenize(e,t);return i.stringify(n.util.encode(o),r)},tokenize:function(e,t,i){var r=n.Token,o=[e],a=t.rest;if(a){for(var s in a)t[s]=a[s];delete t.rest}e:for(var s in t){if(!t.hasOwnProperty(s)||!t[s])continue;var l=t[s];l="Array"===n.util.type(l)?l:[l];for(var u=0;u<l.length;++u){var c=l[u],f=c.inside,d=!!c.lookbehind,m=0,p=c.alias;c=c.pattern||c;for(var h=0;h<o.length;h++){var g=o[h];if(o.length>e.length)break e;if(g instanceof r)continue;c.lastIndex=0;var v=c.exec(g);if(v){if(d)m=v[1].length;var y=v.index-1+m,b=y+(v=v[0].slice(m)).length,w=g.slice(0,y+1),C=g.slice(b+1),x=[h,1];if(w)x.push(w);var k=new r(s,f?n.tokenize(v,f):v,p);if(x.push(k),C)x.push(C);Array.prototype.splice.apply(o,x)}}}}return o},hooks:{all:{},add:function(e,t){var i=n.hooks.all;i[e]=i[e]||[],i[e].push(t)},run:function(e,t){var i=n.hooks.all[e];if(!i||!i.length)return;for(var r=0,o;o=i[r++];)o(t)}}},i=n.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(i.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return i.stringify(n,t,e)}).join("");var o={type:e.type,content:i.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==o.type)o.attributes["spellcheck"]="true";if(e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(o.classes,a)}n.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=(s?" ":"")+l+'="'+(o.attributes[l]||"")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'" '+s+">"+o.content+"</"+o.tag+">"},!t.document){if(!t.addEventListener)return t.Prism;return t.addEventListener("message",function(e){var i=JSON.parse(e.data),r=i.language,o=i.code,a=i.immediateClose;if(t.postMessage(n.highlight(o,n.languages[r],r)),a)t.close()},false),t.Prism}}();if("undefined"!==typeof module&&module.exports)module.exports=n;if("undefined"!==typeof global)global.Prism=n;if(n.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},n.hooks.add("wrap",function(e){if("entity"===e.type)e.attributes["title"]=e.content.replace(/&amp;/,"&")}),n.languages.xml=n.languages.markup,n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},n.languages.css["atrule"].inside.rest=n.util.clone(n.languages.css),n.languages.markup)n.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:n.languages.markup.tag.inside},rest:n.languages.css},alias:"language-css"}}),n.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:n.languages.css}},alias:"language-css"}},n.languages.markup.tag);if(n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:true},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:true}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:true,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),n.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:true}}),n.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}}}),n.languages.markup)n.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:n.languages.markup.tag.inside},rest:n.languages.javascript},alias:"language-javascript"}});if(n.languages.js=n.languages.javascript,n.languages.c=n.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),n.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:true,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:true}}}}),delete n.languages.c["class-name"],delete n.languages.c["boolean"],n.languages.csharp=n.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),n.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:true}}),n.languages.cpp=n.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),n.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:true}}),n.languages.java=n.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:true}}),n.languages.php=n.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:true}}),n.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:true,alias:"comment"}}),n.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:true,inside:{punctuation:/\\/}}}),n.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:true}}),n.languages.markup)n.hooks.add("before-highlight",function(e){if("php"!==e.language)return;e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"})}),n.hooks.add("before-insert",function(e){if("php"===e.language)e.code=e.backupCode,delete e.backupCode}),n.hooks.add("after-highlight",function(e){if("php"!==e.language)return;for(var t=0,i;i=e.tokenStack[t];t++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(t+1)+"}}}",n.highlight(i,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}),n.hooks.add("wrap",function(e){if("php"===e.language&&"markup"===e.type)e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>')}),n.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:n.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/});return n.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:true},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:true},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:true},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:true}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(n),n}),r("tinymce/codesampleplugin/Utils",[],function(){function e(e){return e&&"PRE"==e.nodeName&&-1!==e.className.indexOf("language-")}function t(e){return function(t,n){return e(n)}}return{isCodeSample:e,trimArg:t}}),r("tinymce/codesampleplugin/Dialog",["tinymce/dom/DOMUtils","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Prism"],function(e,t,n){var i=e.DOM;function r(e){var t=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],n=e.settings.codesample_languages;return n?n:t}function o(e,t,r){e.undoManager.transact(function(){var o=a(e);if(r=i.encode(r),o)e.dom.setAttrib(o,"class","language-"+t),o.innerHTML=r,n.highlightElement(o),e.selection.select(o);else e.insertContent('<pre id="__new" class="language-'+t+'">'+r+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0])})}function a(e){var n=e.selection.getNode();if(t.isCodeSample(n))return n;return null}function s(e){var t=a(e);if(t)return t.textContent;return""}function l(e){var t,n=a(e);if(n)return t=n.className.match(/language-(\w+)/),t?t[1]:"";return""}return{insertCodeSample:o,getCurrentCode:s,open:function(e){e.windowManager.open({title:"Insert/Edit code sample",minWidth:Math.min(i.getViewPort().w,e.getParam("codesample_dialog_width",800)),minHeight:Math.min(i.getViewPort().h,e.getParam("codesample_dialog_height",650)),layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:l(e),values:r(e)},{type:"textbox",name:"code",multiline:true,spellcheck:false,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:s(e),autofocus:true}],onSubmit:function(t){o(e,t.data.language,t.data.code)}})}}}),r("tinymce/codesampleplugin/Plugin",["tinymce/Env","tinymce/PluginManager","tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Utils"],function(e,t,n,i,r){var o,a=r.trimArg;t.add("codesample",function(t,s){var l=t.$,u;if(!e.ceFalse)return;function c(){var e,n=t.settings.codesample_content_css;if(t.inline&&o)return;if(!t.inline&&u)return;if(t.inline)o=true;else u=true}t.on("PreProcess",function(e){l("pre[contenteditable=false]",e.node).filter(a(r.isCodeSample)).each(function(e,t){var n=l(t),i=t.textContent;n.attr("class",l.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(l("<code></code>").each(function(){this.textContent=i}))})}),t.on("SetContent",function(){var e=l("pre").filter(a(r.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});if(e.length)t.undoManager.transact(function(){e.each(function(e,i){l(i).find("br").each(function(e,n){n.parentNode.replaceChild(t.getDoc().createTextNode("\n"),n)}),i.contentEditable=false,i.innerHTML=t.dom.encode(i.textContent),n.highlightElement(i),i.className=l.trim(i.className)})})}),t.addCommand("codesample",function(){var e=t.selection.getNode();if(t.selection.isCollapsed()||r.isCodeSample(e))i.open(t);else t.formatter.toggle("code")}),t.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),t.on("init",c),this.insertCodeSample=i.insertCodeSample,this.getCurrentCode=i.getCurrentCode})}),s(["tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Plugin"])}(window);
//# sourceMappingURL=tinymce.js.map