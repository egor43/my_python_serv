define("SBIS.VideoCall/Utils",["Core/helpers/generate-helpers","Core/EventBus","Core/Deferred","Core/UserInfo","SBIS.VideoCall/Environment"],function(e,i,n,t,r){var o=function(){var e=this;if(this._compatibility="undefined"!==typeof window&&function(){var e=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,i=e&&!!e.prototype;if(!i){if("undefined"!==typeof navigator&&(-1!==navigator.appVersion.indexOf("MSIE")&&window.atob||window.RTCIceTransport))i=true}else if(/(opera|opr)/i.test(navigator.userAgent))i=(/(opera|opr)\/(\d+)\./i.exec(navigator.userAgent)||[0,0,0])[2]>28;else if(r&&r.browser&&r.browser.safari&&r.browser.majorVersion<11)i=false;return i}(),this._availability=!t.get("isDemo"),!r.CpsUserId)this._compatibility=false;if("undefined"!==typeof window&&-1===location.hostname.indexOf("rc-"))require(["/webrtc/static/build/small.main.min.js"],function(){require(["webrtc/static/startup"],function(){if(e._compatibility)require(["webrtc!js!SBIS3.WebRTC.Listener"],function(i){e.Listener=i})})})};return o.prototype.isServiceAvailable=function(){return this._availability},o.prototype.isBrowserSupport=function(){return this._compatibility},o.prototype.isAvailable=function(){return this.isServiceAvailable()&&this.isBrowserSupport()},o.prototype.needRenderVideoCallButton=function(){return this.isAvailable()&&!(r&&r.inProgress)&&!t.get("guest")},o.prototype.initCall=function(e,i){if(this.Listener)this.Listener.call(e,i)},o.prototype.generateVideoCallLink=function(e,t){var r=new n;return i.channel("videoCall").subscribe("onReady",function(){require(["webrtc!js!SBIS3.WebRTC.ExCalls"],function(i){r.dependOn(i.generateLink(e,t))})}),r},o.prototype.showVideoCallLinkCopyDialog=function(e,t){var r=new n;return i.channel("videoCall").subscribe("onReady",function(){require(["webrtc!js!SBIS3.WebRTC.ExCalls"],function(i){r.dependOn(i.copyLink(e,t))})}),r},o.prototype.getVideoCallLink=function(i){return"/webrtc/room/"+e.createGUID()+"?video=true"+(i?"&meeting="+i:"")},o.prototype.getWebinarLink=function(e){return"/webinar-bl/"+e},o.prototype.getWebinarLandingPageLink=function(e){return"/webinars/"+e},o.prototype.openWebinarWindow=function(e){window.open(this.getWebinarLink.apply(this,arguments))},o.prototype.openWebinarLandingPage=function(e){window.open(this.getWebinarLandingPageLink.apply(this,arguments))},new o});
//# sourceMappingURL=Utils.js.map