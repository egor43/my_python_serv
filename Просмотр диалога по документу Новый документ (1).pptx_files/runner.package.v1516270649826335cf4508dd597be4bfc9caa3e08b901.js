define("View/Runner/common",["Core/constants","Core/RightsManager","Core/helpers/Object/isPlainObject","Core/IoC"],function e(t,n,r,i){"use strict";var o=function e(t,n){if(!t)t={};for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r];return t},s=function e(){return Object.__proto__},c=function e(t){return t&&t.prototype||s()},a=function e(t,n){for(var r in n)if(n.hasOwnProperty(r))return 0===t.indexOf(r)?r:void 0},u={object:{getMinAccessLevel:function(e,t){var n;if("undefined"!==typeof e["data-access-min-level"])n=e["data-access-min-level"];else if("undefined"!==typeof e["dataAccessMinLevel"])i.resolve("ILogger").info("entityHelpers","Для задания минимального уровня доступа для опции, используйте data-access-min-level вместо dataAccessMinLevel."),n=e["dataAccessMinLevel"];if("string"===typeof n)n=parseInt(n,10);if("number"!==typeof n||isNaN(n))n=t;return n},isAccessible:function(e,t){var r,o;if("undefined"===typeof t)t=1;if(o=t,"undefined"!==typeof e["data-access"])r=e["data-access"];else if("undefined"!==typeof e["dataAccess"])i.resolve("ILogger").info("entityHelpers","Для задания зоны доступа для опции, используйте data-access вместо dataAccess."),r=e["dataAccess"];if("string"===typeof r)o=n.checkAccessRights(r.split(","));return o>=t},iterate:function(e,t){for(var n in e)if(e.hasOwnProperty(n))t(e[n],n,e);return e},remove:function(e,t){delete e[t]}},array:{getMinAccessLevel:function(e,t){return t},isAccessible:function(){return true},iterate:function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e);return e},remove:function(e,t){e.splice(t,1)}}},f={mapForLoop:function e(t,n){var r=t.length,i=new Array(r),o;for(o=0;o<r;o++)i[o]=n(t[o],o,t);return i},eachObject:function e(t,n){var r;for(r in t)if(t.hasOwnProperty(r))t[r]=n(t[r],r);return t},inArray:function e(t,n){var r;for(r=0;r<t.length;r++)if(t[r]===n)return true;return false},isNode:function e(){return"undefined"!==typeof global&&"[object process]"===Object.prototype.toString.call(global.process)},isNumber:function e(t){return/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*)(?:[eE][+-]?\d+)?)$/.test(t.trim())},isString:function e(t){return"[object String]"===Object.prototype.toString.call(t)},isFunction:function e(t){return"[object Function]"===Object.prototype.toString.call(t)},isArray:function e(t){return"[object Array]"===Object.prototype.toString.call(t)},removeAllSpaces:function e(t){return t.replace(/\s/g,"")},notUndefOrNull:function e(t){return t||0===t||""===t||false===t},checkProp:function e(t,n){return t&&void 0!==t[n]},isEmpty:function e(t){for(var n in t)if(t.hasOwnProperty(n))return false;return true},clone:function e(t){function n(e,t,n){var r,i,o,s={};for(r in t)if(i=t[r],!(r in e)||e[r]!==i&&(!(r in s)||s[r]!==i))e[r]=n?n(i):i;return e}if(!t||"object"!=typeof t||"[object Function]"===Object.prototype.toString.call(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(true);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var r,i,o;if(t instanceof Array){for(r=[],i=0,o=t.length;i<o;++i)if(i in t)r.push(e(t[i]))}else r=t.constructor?new t.constructor:{};return n(r,t,e)},plainMergeAttrs:function e(t,n){return o(t,n)},escape:function e(t){if(t&&"string"===typeof t){var n={"<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;","{{":"&lcub;&lcub;","}}":"&rcub;&rcub;"};return t=t.replace(/&([^#])/g,function e(t,n){return"&amp;"+n}),t.replace(/({{)|(}})|([<>'"])/g,function e(t){return n[t]||t})}return t},escapeParenthesis:function e(t){if(t&&"string"===typeof t){var n={"{{":"&lcub;&lcub;","}}":"&rcub;&rcub;"};return t.replace(/({{)|(}})/g,function e(t){return n[t]||t})}return t},createNewScope:function e(t){return{__rootScope:t}},bindingArrayHolder:function e(t,n){if(!t)t=[];return t.push(n),t},toEqual:function e(t,n){return t===n},hasResolver:a,findResolverInConfig:function e(t,n){var r=a(t,n);if(r)return n[r]},plainMerge:o,addArgument:function(e,n){var r=Array.prototype.slice.call(n);if(void 0===r[0])r[0]=void 0;if(void 0===r[1])r[1]=void 0;if(void 0===r[2])r[2]=void 0;return r[3]=r[3]&&!t.isBuildOnServer,r.push(e),r},capitalize:function e(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},findInArray:function e(t,n){return n&&~n.indexOf(t)},applyRights:function e(t,r){var i=t&&t["data-access"],o=n.rightsNeeded();if(i&&o)switch(n.checkAccessRights(i.split(","))){case 0:return false;case 1:if(r["display"])r["readOnly"]=true,r["enabled"]=true,r["allowChangeEnable"]=false;else r["enabled"]=false,r["allowChangeEnable"]=false;return true}return this.applyRightsToEntity(r,1),this.removeBindCutOption(r),true},applyRightsToEntity:function e(t,n){var i=this,o;if(Array.isArray(t))o=u.array;else if(r(t))o=u.object;else return t;if(n=o.getMinAccessLevel(t,n),!o.isAccessible(t,n))return;return t=o.iterate(t,function(e,t,s){if(e&&e["__isRightsChecked"])return;if(r(e))Object.defineProperty(e,"__isRightsChecked",{enumerable:false,value:true});if(s[t]=i.applyRightsToEntity(e,n),void 0===s[t])o.remove(s,t)}),t},removeBindCutOption:function e(t){var n=false,r=[],i,o,s,c;if(t&&t.bindings&&t.bindings.length){for(var a=0,u=(o=t.bindings).length;a<u;a++){if(n=false,i=t,s=o[a],s.propPath&&s.propPath.length)c=s.propName.split("/");else c=[];if(c.length)for(var f=0,l=c.length;f<l;f++)if(i.hasOwnProperty(c[f])){if(i=i[c[f]],f+2===l)n=true}else break;else n=true;if(n)r.push(o[a])}t.bindings=r}},isTemplateString:function e(t){return 0===t.indexOf("tmpl!")||0===t.indexOf("html!")},isControlString:function e(t){return 0===t.indexOf("js!")},isOptionalString:function e(t){return 0===t.indexOf("optional!")},isSlashedControl:function e(t){return t.split("/").length>1&&!f.isTemplateString(t)&&-1===t.indexOf("<")&&-1===t.indexOf(" ")},isStringModules:function e(t,n){return f.isOptionalString(t)||f.isTemplateString(t)||f.isControlString(t)||f.isSlashedControl(t)||f.hasResolver(t,n&&n.resolvers)},isControlClass:function e(t){var n=t&&t.prototype;if(n&&"undefined"!==typeof n)return n.$constructor||n._template;return false},getEventName:function(e){return e.slice(3).toLowerCase()},splitJs:function e(t){var n;return n=t.split("js!"),n[1]},splitWs:function e(t){var n;if(void 0!==t)return n=t.split("ws:"),n[1];return}};return f});
define("View/Runner/expressions/scope",["View/Runner/common"],function(n){var e=function n(e,i,o){if(~r.indexOf(o)&&e&&i)e+=" "+i;else e=i;return e},r=["className"],i=function n(e,r){return e.hasOwnProperty(r)};return{calculateScope:function e(r,i){return n.isFunction(r)&&r.__$unite?r(i):r},controlPropMerge:function n(r,o){if(!r)r={};for(var t in o)if(i(o,t))r[t]=e(r[t],o[t],t);return r}}});
define("View/Runner/config/resolver",["View/Runner/common","View/Runner/expressions/scope","Core/core-merge"],function(e,n,r){function t(e,n){return e&&e.hasOwnProperty&&e.hasOwnProperty(n)}function a(e){if(e&&e.hasOwnProperty&&!e.global){if(e["__$$__originObject"])e=e["__$$__originObject"];if(t(e,"_options"))return e;else return a(Object.getPrototypeOf(e))}return null}function i(e,n,r){return"undefined"!==typeof n?r[n]&&t(r[n],"parent")&&t(r[n].parent,"_template")?r[n].parent:a(e):a(e)}function l(e,n,r){var t=i(e,n,r),a=true;if(t)a=t.isEnabled();else if(r){if(n&&r[n]){if(void 0!==r[n].enabled)a=r[n].enabled;else if(void 0!==r[n].parentEnabled)a=r[n].parentEnabled}else if(void 0!==r.enabled)a=r.enabled;else if(void 0!==r.parentEnabled)a=r.parentEnabled}else a=true;return a}function o(e,n,r){var t=i(e,n,r);return t?t.isVisible():r&&(false===r.visible||void 0===r.visible&&false===r.parentVisible)?false:true}function f(t,a){var f=a.internal||{};if(t=n.calculateScope(t,e.plainMerge),a.data&&a.data.content)t=r(t,a.data.content,{preferSource:true});return f.parent=i(a.ctx,a.pName,a.data),f.logicParent=a.viewController,f.parentEnabled=l(a.ctx,a.pName,a.data),f.parentVisible=o(a.ctx,a.pName,a.data),{user:t,internal:f}}return{calcParent:i,resolveControlCfg:f}});
define("View/Runner/expressions/attr",function(){function e(e){return/^(on:[A-z0-9])\w*$/.test(e)}function n(e){return 0===e.indexOf("attr:")}function r(r){var t={};for(var i in r)if(n(i))t[i.split(":")[1]]=r[i];else if(e(i))t[i]=r[i];return t}function t(e){for(var r in e)if(n(r))return true;return false}function i(e,n){for(var r in n)if(n.hasOwnProperty(r)&&void 0!==n[r]&&"undefined"!==n[r]){if("class"===r)e[r]=e[r]?e[r]+" "+n[r]:n[r];else if("tabindex"===r&&e.hasOwnProperty(r));else e[r]=n[r];if("string"===typeof e[r])e[r]=e[r].replace(/\\' \\+ /g,'" + ').replace(/ \\+ \\'/g,' + "')}for(r in e)if(e.hasOwnProperty(r)&&(void 0===e[r]||"undefined"===e[r]))delete e[r];return e}return{isAttr:n,finalizeAttr:r,checkAttr:t,joinAttrs:i,isEvent:e,getEventName:function(e){return e.slice(3).toLowerCase()}}});
define("View/Runner/markupGenerator",["View/Runner/config/resolver","Core/Deferred","Core/IoC","View/Runner/expressions/attr"],function(e,r,t,n){"use strict";var o={};return o.createWsControl=function e(r,t,n,o,a){throw new Error("MarkupGenerator.joinElements not realized")},o.createTemplate=function e(r,t,n,o,a,i){throw new Error("MarkupGenerator.joinElements not realized")},o.createController=function e(r,t,n,o,a){throw new Error("MarkupGenerator.joinElements not realized")},o.resolver=function e(r,t,n,o,a,i){throw new Error("MarkupGenerator.joinElements not realized")},o.joinElements=function e(r,t){throw new Error("MarkupGenerator.joinElements not realized")},o.createTag=function e(r,t,n,o,a){throw new Error("MarkupGenerator.createTag not realized")},o.createText=function e(r){throw new Error("MarkupGenerator.createText not realized")},o.createDirective=function e(r){throw new Error("MarkupGenerator.createDirective not realized")},o.chain=function e(n,o,a){var i=new r;return o.def.done().getResult().addCallbacks(function e(){var r=arguments&&arguments[0],t=Object.keys(r).reduce(function(e,t,n){var a=t;if(r[a])if(r[a].result)return e.replace("["+o.id[n]+"]",r[a].result);else return e.replace("["+o.id[n]+"]",r[a])},n);i.callback(t)},function(e){t.resolve("ILogger").error("Async render error",e.stack)}),i},o.createControl=function r(t,o,a,i,l,s,c,u,f,w,d){var p,v;(a=e.resolveControlCfg(a,l)).internal.logicParent=a.internal.logicParent||l.viewController,a.internal.parent=a.internal.parent||l.viewController,a.templateContext=w;for(var E in a.user)if(n.isAttr(E)||n.isEvent(E))if(v=E,n.isEvent(E))i[v]=a.user[E];else i[v]=i[v]?i[v]+" "+a.user[E]:a.user[E],delete a.user[E];if(null===o)return"";else{if("wsControl"===t)p=this.createWsControl(o,a,i,s,c);if("template"===t)p=this.createTemplate(o,a,i,s,c,f);if("controller"===t)p=this.createController(o,a,i,s,c);if("resolver"===t)p=this.resolver(o,a,i,s,c,u,f,d);if(void 0!==p)return p;else{if(o&&t)return"";throw new Error("MarkupGenerator: createControl type not resolved")}}},o.joinAttrs=n.joinAttrs,o});
define("View/Runner/Vdom/third-party/dom",["Core/detection","Core/helpers/String/unEscapeASCII"],function(e,n){var t={exports:{}},r=t.exports;function i(e){var t=/&(nbsp|amp|quot|apos|lt|gt);/g,r={nbsp:String.fromCharCode(160),amp:"&",quot:'"',apos:"'",lt:"<",gt:">"};return e=n(e),e.replace(t,function(e,n){return r[n]})}function o(){return e.isIE||e.isMobileIOS||e.isMacOSDesktop}function s(e){return"[object String]"===Object.prototype.toString.call(e)}return function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define("virtual-dom-lib",[],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.virtualDom=e()}}(function(){var e,n,t;return function e(n,t,r){function i(s,f){if(!t[s]){if(!n[s]){var u="function"==typeof require&&require;if(!f&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){var t=n[s][1][e];return i(t?t:e)},l,l.exports,e,n,t,r)}return t[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,t){var r=e("./vdom/create-element.js");n.exports=r},{"./vdom/create-element.js":15}],2:[function(e,n,t){var r=e("./vtree/diff.js");n.exports=r},{"./vtree/diff.js":35}],3:[function(e,n,t){var r=e("./virtual-hyperscript/index.js");n.exports=r},{"./virtual-hyperscript/index.js":22}],4:[function(e,n,t){var r=e("./diff.js"),i=e("./patch.js"),o=e("./h.js"),s=e("./create-element.js"),f=e("./vnode/vnode.js"),u=e("./vnode/vtext.js");n.exports={diff:r,patch:i,h:o,create:s,VNode:f,VText:u}},{"./create-element.js":1,"./diff.js":2,"./h.js":3,"./patch.js":13,"./vnode/vnode.js":31,"./vnode/vtext.js":33}],5:[function(e,n,t){n.exports=function e(n){var t=String.prototype.split,r=/()??/.exec("")[1]===n,i;return i=function(e,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return t.call(e,i,o);var s=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),u=0,i=new RegExp(i.source,f+"g"),a,l,c,v;if(e+="",!r)a=new RegExp("^"+i.source+"$(?!\\s)",f);o=o===n?-1>>>0:o>>>0;while(l=i.exec(e)){if(c=l.index+l[0].length,c>u){if(s.push(e.slice(u,l.index)),!r&&l.length>1)l[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)if(arguments[e]===n)l[e]=n});if(l.length>1&&l.index<e.length)Array.prototype.push.apply(s,l.slice(1));if(v=l[0].length,u=c,s.length>=o)break}if(i.lastIndex===l.index)i.lastIndex++}if(u===e.length){if(v||!i.test(""))s.push("")}else s.push(e.slice(u));return s.length>o?s.slice(0,o):s},i}()},{}],6:[function(e,n,t){},{}],7:[function(e,n,t){"use strict";var r="7";e("individual/one-version")("ev-store",r);var i="__EV_STORE_KEY@"+r;n.exports=o;function o(e){var n=e[i];if(!n)n=e[i]={};return n}},{"individual/one-version":9}],8:[function(e,n,t){(function(e){"use strict";var t="undefined"!==typeof window?window:"undefined"!==typeof e?e:{};n.exports=r;function r(e,n){if(e in t)return t[e];return t[e]=n,n}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],9:[function(e,n,t){"use strict";var r=e("./index.js");n.exports=i;function i(e,n,t){var i="__INDIVIDUAL_ONE_VERSION_"+e,o=r(i+"_ENFORCE_SINGLETON",n);if(o!==n)throw new Error("Can only have one copy of "+e+".\n"+"You already have version "+o+" installed.\n"+"This means you cannot install version "+n);return r(i,t)}},{"./index.js":8}],10:[function(e,n,t){(function(t){var r="undefined"!==typeof t?t:"undefined"!==typeof window?window:{},i=e("min-document");if("undefined"!==typeof document)n.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];if(!o)o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i;n.exports=o}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"min-document":6}],11:[function(e,n,t){"use strict";n.exports=function e(n){return"object"===typeof n&&null!==n}},{}],12:[function(e,n,t){var r=Array.isArray,i=Object.prototype.toString;n.exports=r||o;function o(e){return"[object Array]"===i.call(e)}},{}],13:[function(e,n,t){var r=e("./vdom/patch.js");n.exports=r},{"./vdom/patch.js":18}],14:[function(e,n,t){var r=e("is-object"),s=e("../vnode/is-vhook.js");n.exports=f;function f(e,n,t){for(var i in n){var f=n[i];if(void 0===f)u(e,i,f,t);else if(s(f)){if(u(e,i,f,t),f.hook)f.hook(e,i,t?t[i]:void 0)}else if(r(f))l(e,n,t,i,f);else if("style"===i&&o())e[i].cssText=f;else e[i]=f}}function u(e,n,t,r){if(r){var i=r[n];if(!s(i))if("attributes"===n)for(var o in i)e.removeAttribute(o);else if("style"===n)for(var f in i)e.style[f]="";else if("string"===typeof i)e[n]="";else e[n]=null;else if(i.unhook)i.unhook(e,n,t)}}function a(e,n,t){if("INPUT"===e.nodeName&&"checked"===n)e.checked=!!t;if(("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)&&"value"===n)e.value=t||""}function l(e,n,t,o,s){var f=t?t[o]:void 0;if("attributes"===o){for(var u in s){var l=s[u];if(void 0===l)a(e,u,l),e.removeAttribute(u);else{if("string"===typeof l)l=i(l);a(e,u,l),e.setAttribute(u,l)}}return}if(f&&r(f)&&c(f)!==c(s))return void(e[o]=s);if(!r(e[o]))e[o]={};var v="style"===o?"":void 0;for(var d in s){var p=s[d];e[o][d]=void 0===p?v:p}}function c(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);else if(e.__proto__)return e.__proto__;else if(e.constructor)return e.constructor.prototype}},{"../vnode/is-vhook.js":26,"is-object":11}],15:[function(e,n,t){var r=e("global/document"),o=e("./apply-properties"),f=e("../vnode/is-vnode.js"),u=e("../vnode/is-vtext.js"),a=e("../vnode/is-widget.js"),l=e("../vnode/handle-thunk.js");n.exports=c;function c(e,n){var t=n?n.document||r:r,v=n?n.warn:null,d=t.createElement("div");if(e=l(e).a,a(e))return e.init();else if(u(e))return t.createTextNode(i(e.text));else if(s(e)){if(e&&e.trim)d.innerHTML=e.trim();else d.innerHTML=e;return d.firstChild}else if(!f(e)){if(v)v("Item is not a valid virtual dom node",e);return null}var p=null===e.namespace?t.createElement(e.tagName):t.createElementNS(e.namespace,e.tagName),h=e.properties;o(p,h);for(var y=e.children,g=0;g<y.length;g++){var k=c(y[g],n);if(k)p.appendChild(k)}return p}},{"../vnode/handle-thunk.js":24,"../vnode/is-vnode.js":27,"../vnode/is-vtext.js":28,"../vnode/is-widget.js":29,"./apply-properties":14,"global/document":10}],16:[function(e,n,t){var r={};n.exports=i;function i(e,n,t,r){if(!t||0===t.length)return{};else return t.sort(f),o(e,n,t,r,0)}function o(e,n,t,i,f){if(i=i||{},e){if(s(t,f,f))i[f]=e;var u=n.children;if(u)for(var a=e.childNodes,l=0;l<n.children.length;l++){f+=1;var c=u[l]||r,v=f+(c.count||0);if(s(t,f,v))o(a[l],c,t,i,f);f=v}}return i}function s(e,n,t){if(0===e.length)return false;var r=0,i=e.length-1,o,s;while(r<=i)if(o=(i+r)/2>>0,s=e[o],r===i)return s>=n&&s<=t;else if(s<n)r=o+1;else if(s>t)i=o-1;else return true;return false}function f(e,n){return e>n?1:-1}},{}],17:[function(e,n,t){var r=e("./apply-properties"),o=e("../vnode/is-widget.js"),s=e("../vnode/vpatch.js"),f=e("./update-widget");n.exports=u;function u(e,n,t){var i=e.type,o=e.vNode,f=e.patch;switch(i){case s.REMOVE:return a(n,o);case s.INSERT:return l(n,f,t);case s.VTEXT:return v(n,o,f,t);case s.WIDGET:return d(n,o,f,t);case s.VNODE:return p(n,o,f,t);case s.ORDER:return y(n,f),n;case s.PROPS:return r(n,f,o.properties),n;case s.THUNK:return g(n,t.patch(n,f,t));case s.STRING:return c(n,o,f,t);default:return n}}function a(e,n){var t=e.parentNode;if(t)t.removeChild(e);return h(e,n),null}function l(e,n,t){var r=t.render(n,t);if(e)e.appendChild(r);return e}function c(e,n,t,r){var i=e.parentNode,o=r.render(t,r);if(i)i.removeChild(e),h(e,n),i.appendChild(o);return i}function v(e,n,t,r){var o;if(3===e.nodeType)e.replaceData(0,e.length,i(t.text)),o=e;else{var s=e.parentNode;if(o=r.render(t,r),e.wsControl)o.wsControl=e.wsControl;if(s&&o!==e)s.replaceChild(o,e)}return o}function d(e,n,t,r){var i=f(n,t),o;if(i)o=t.update(n,e)||e;else o=r.render(t,r);var s=e.parentNode;if(s&&o!==e)s.replaceChild(o,e);if(!i)h(e,n);return o}function p(e,n,t,r){var i=e.parentNode,o=r.render(t,r);if(i&&o!==e){if(e.wsControl)e.wsControl._container=$(o),o.wsControl=e.wsControl;i.replaceChild(o,e)}return o}function h(e,n){if("function"===typeof n.destroy&&o(n))n.destroy(e)}function y(e,n){for(var t=e.childNodes,r={},i,o,s,f=0;f<n.removes.length;f++){if(o=n.removes[f],i=t[o.from],o.key)r[o.key]=i;e.removeChild(i)}for(var u=t.length,a=0;a<n.inserts.length;a++)i=r[(s=n.inserts[a]).key],e.insertBefore(i,s.to>=u++?null:t[s.to])}function g(e,n){if(e&&n&&e!==n&&e.parentNode)e.parentNode.replaceChild(n,e);return n}},{"../vnode/is-widget.js":29,"../vnode/vpatch.js":32,"./apply-properties":14,"./update-widget":19}],18:[function(e,n,t){var r=e("global/document"),i=e("x-is-array"),o=e("./create-element"),s=e("./dom-index"),f=e("./patch-op");n.exports=u;function u(e,n,t){return t=t||{},t.patch=t.patch&&t.patch!==u?t.patch:a,t.render=t.render||o,t.patch(e,n,t)}function a(e,n,t){var i=c(n);if(0===i.length)return e;var o=s(e,n.a,i),f=e.ownerDocument;if(!t.document&&f!==r)t.document=f;for(var u=0;u<i.length;u++){var a=i[u];e=l(e,o[a],n[a],t)}return e}function l(e,n,t,r){if(!n)return e;var o;if(i(t)){for(var s=0;s<t.length;s++)if(o=f(t[s],n,r),n===e)e=o}else if(o=f(t,n,r),n===e)e=o;return e}function c(e){var n=[];for(var t in e)if("a"!==t)n.push(Number(t));return n}},{"./create-element":15,"./dom-index":16,"./patch-op":17,"global/document":10,"x-is-array":12}],19:[function(e,n,t){var r=e("../vnode/is-widget.js");n.exports=i;function i(e,n){if(r(e)&&r(n))if("name"in e&&"name"in n)return e.id===n.id;else return e.init===n.init;return false}},{"../vnode/is-widget.js":29}],20:[function(e,n,t){"use strict";var r=e("ev-store");n.exports=i;function i(e){if(!(this instanceof i))return new i(e);this.value=e}i.prototype.hook=function(e,n){r(e)[n.substr(3)]=this.value},i.prototype.unhook=function(e,n){r(e)[n.substr(3)]=void 0}},{"ev-store":7}],21:[function(e,n,t){"use strict";n.exports=r;function r(e){if(!(this instanceof r))return new r(e);this.value=e}r.prototype.hook=function(e,n){if(e[n]!==this.value)e[n]=this.value}},{}],22:[function(e,n,t){"use strict";var r=e("x-is-array"),i=e("../vnode/vnode.js"),o=e("../vnode/vtext.js"),s=e("../vnode/is-vnode"),f=e("../vnode/is-vtext"),u=e("../vnode/is-widget"),a=e("../vnode/is-vhook"),l=e("../vnode/is-thunk"),c=e("./parse-tag.js"),v=e("./hooks/soft-set-hook.js"),d=e("./hooks/ev-hook.js");n.exports=p;function p(e,n,t){var r=[],o,s,f,u;if(!t&&k(n))t=n,s={};if(s=s||n||{},o=c(e,s),s.hasOwnProperty("key"))f=s.key,s.key=void 0;if(s.hasOwnProperty("namespace"))u=s.namespace,s.namespace=void 0;if("INPUT"===o&&!u&&s.hasOwnProperty("value")&&void 0!==s.value&&!a(s.value))s.value=v(s.value);if(y(s),void 0!==t&&null!==t)h(t,r,o,s);return new i(o,s,r,f,u)}function h(e,n,t,i){if("string"===typeof e)n.push(new o(e));else if("number"===typeof e)n.push(new o(String(e)));else if(g(e))n.push(e);else if(r(e))for(var s=0;s<e.length;s++)h(e[s],n,t,i);else if(null===e||void 0===e)return;else throw x({foreignObject:e,parentVnode:{tagName:t,properties:i}})}function y(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];if(a(t))continue;if("ev-"===n.substr(0,3))e[n]=d(t)}}function g(e){return s(e)||f(e)||u(e)||l(e)}function k(e){return"string"===typeof e||r(e)||g(e)}function x(e){var n=new Error;return n.type="virtual-hyperscript.unexpected.virtual-element",n.message="Unexpected virtual child passed to h().\n"+"Expected a VNode / Vthunk / VWidget / string but:\n"+"got:\n"+w(e.foreignObject)+".\n"+"The parent vnode is:\n"+w(e.parentVnode),n.foreignObject=e.foreignObject,n.parentVnode=e.parentVnode,n}function w(e){try{return JSON.stringify(e,null,"    ")}catch(n){return String(e)}}},{"../vnode/is-thunk":25,"../vnode/is-vhook":26,"../vnode/is-vnode":27,"../vnode/is-vtext":28,"../vnode/is-widget":29,"../vnode/vnode.js":31,"../vnode/vtext.js":33,"./hooks/ev-hook.js":20,"./hooks/soft-set-hook.js":21,"./parse-tag.js":23,"x-is-array":12}],23:[function(e,n,t){"use strict";var r=e("browser-split"),i=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,o=/^\.|#/;n.exports=s;function s(e,n){if(!e)return"DIV";var t=!n.hasOwnProperty("id"),s=r(e,i),f=null;if(o.test(s[1]))f="DIV";var u,a,l,c;for(c=0;c<s.length;c++){if(a=s[c],!a)continue;if(l=a.charAt(0),!f)f=a;else if("."===l)(u=u||[]).push(a.substring(1,a.length));else if("#"===l&&t)n.id=a.substring(1,a.length)}if(u){if(n.className)u.push(n.className);n.className=u.join(" ")}return n.namespace?f:f.toUpperCase()}},{"browser-split":5}],24:[function(e,n,t){var r=e("./is-vnode"),i=e("./is-vtext"),o=e("./is-widget"),s=e("./is-thunk");n.exports=f;function f(e,n){var t=e,r=n;if(s(n))r=u(n,e);if(s(e))t=u(e,null);return{a:t,b:r}}function u(e,n){var t=e.vnode;if(!t)t=e.vnode=e.render(n);if(!(r(t)||i(t)||o(t)))throw new Error("thunk did not return a valid node");return t}},{"./is-thunk":25,"./is-vnode":27,"./is-vtext":28,"./is-widget":29}],25:[function(e,n,t){n.exports=r;function r(e){return e&&"Thunk"===e.type}},{}],26:[function(e,n,t){n.exports=r;function r(e){return e&&("function"===typeof e.hook&&!e.hasOwnProperty("hook")||"function"===typeof e.unhook&&!e.hasOwnProperty("unhook"))||e&&"function"===typeof e.fn&&"event"===e.name&&e.args&&e.controlNode}},{}],27:[function(e,n,t){var r=e("./version");n.exports=i;function i(e){return e&&"VirtualNode"===e.type&&e.version===r}},{"./version":30}],28:[function(e,n,t){var r=e("./version");n.exports=i;function i(e){return e&&"VirtualText"===e.type&&e.version===r}},{"./version":30}],29:[function(e,n,t){n.exports=r;function r(e){return e&&"Widget"===e.type}},{}],30:[function(e,n,t){n.exports="2"},{}],31:[function(e,n,t){var r=e("./version"),i=e("./is-vnode"),o=e("./is-widget"),s=e("./is-thunk"),f=e("./is-vhook");n.exports=l;var u={},a=[];function l(e,n,t,r,l){this.tagName=e,this.properties=n||u,this.children=t||a,this.key=null!=r?String(r):void 0,this.namespace="string"===typeof l?l:null;var c=t&&t.length||0,v=0,d=false,p=false,h=false,y;for(var g in n)if(n.hasOwnProperty(g)){var k=n[g];if(f(k)&&k.unhook){if(!y)y={};y[g]=k}}for(var x=0;x<c;x++){var w=t[x];if(i(w)){if(v+=w.count||0,!d&&w.hasWidgets)d=true;if(!p&&w.hasThunks)p=true;if(!h&&(w.hooks||w.descendantHooks))h=true}else if(!d&&o(w)){if("function"===typeof w.destroy)d=true}else if(!p&&s(w))p=true}this.count=c+v,this.hasWidgets=d,this.hasThunks=p,this.hooks=y,this.descendantHooks=h}l.prototype.version=r,l.prototype.type="VirtualNode"},{"./is-thunk":25,"./is-vhook":26,"./is-vnode":27,"./is-widget":29,"./version":30}],32:[function(e,n,t){var r=e("./version");i.NONE=0,i.VTEXT=1,i.VNODE=2,i.WIDGET=3,i.PROPS=4,i.ORDER=5,i.INSERT=6,i.REMOVE=7,i.THUNK=8,i.STRING=9,n.exports=i;function i(e,n,t){this.type=Number(e),this.vNode=n,this.patch=t}i.prototype.version=r,i.prototype.type="VirtualPatch"},{"./version":30}],33:[function(e,n,t){var r=e("./version");n.exports=i;function i(e){this.text=String(e)}i.prototype.version=r,i.prototype.type="VirtualText"},{"./version":30}],34:[function(e,n,t){var r=e("is-object"),i=e("../vnode/is-vhook");n.exports=o;function o(e,n){var t;for(var f in e){if(!(f in n))(t=t||{})[f]=void 0;var u=e[f],a=n[f];if(u===a)continue;else if(r(u)&&r(a))if(s(a)!==s(u))(t=t||{})[f]=a;else if(i(a))(t=t||{})[f]=a;else{var l=o(u,a);if(l)(t=t||{})[f]=l}else(t=t||{})[f]=a}for(var c in n)if(!(c in e))(t=t||{})[c]=n[c];return t}function s(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);else if(e.__proto__)return e.__proto__;else if(e.constructor)return e.constructor.prototype}},{"../vnode/is-vhook":26,"is-object":11}],35:[function(e,n,t){var r=e("x-is-array"),i=e("../vnode/vpatch"),o=e("../vnode/is-vnode"),f=e("../vnode/is-vtext"),u=e("../vnode/is-widget"),a=e("../vnode/is-thunk"),l=e("../vnode/handle-thunk"),c=e("./diff-props");n.exports=v;function v(e,n){var t={a:e};return d(e,n,t,0),t}function d(e,n,t,r){if(e===n)return;var l=t[r],v=false;if(a(e)||a(n))g(e,n,t,r);else if(null==n){if(!u(e))h(e,t,r),l=t[r];l=O(l,new i(i.REMOVE,e,n))}else if(o(n))if(o(e))if(e.tagName===n.tagName&&e.namespace===n.namespace&&e.key===n.key){var d=c(e.properties,n.properties);if(d)l=O(l,new i(i.PROPS,e,d));l=p(e,n,t,l,r)}else l=O(l,new i(i.VNODE,e,n)),v=true;else l=O(l,new i(i.VNODE,e,n)),v=true;else if(f(n)){if(!f(e))l=O(l,new i(i.VTEXT,e,n)),v=true;else if(e.text!==n.text)l=O(l,new i(i.VTEXT,e,n))}else if(u(n)){if(!u(e))v=true,l=O(l,new i(i.VNODE,e,n));l=O(l,new i(i.WIDGET,e,n))}else if(s(n)){if(!s(e))v=true;l=O(l,new i(i.STRING,e,n))}if(l)t[r]=l;if(v)h(e,t,r)}function p(e,n,t,r,s){for(var f=e.children,u=m(f,n.children),a=u.children,l=f.length,c=a.length,v=l>c?l:c,p=0;p<v;p++){var h=f[p],y=a[p];if(s+=1,!h){if(y)r=O(r,new i(i.INSERT,null,y))}else d(h,y,t,s);if(o(h)&&h.count)s+=h.count}if(u.moves)r=O(r,new i(i.ORDER,e,u.moves));return r}function h(e,n,t){x(e,n,t),y(e,n,t)}function y(e,n,t){if(u(e)){if("function"===typeof e.destroy)n[t]=O(n[t],new i(i.REMOVE,e,null))}else if(o(e)&&(e.hasWidgets||e.hasThunks))for(var r=e.children,s=r.length,f=0;f<s;f++){var l=r[f];if(t+=1,y(l,n,t),o(l)&&l.count)t+=l.count}else if(a(e))g(e,null,n,t)}function g(e,n,t,r){var o=l(e,n),s=v(o.a,o.b);if(k(s))t[r]=new i(i.THUNK,null,s)}function k(e){for(var n in e)if("a"!==n)return true;return false}function x(e,n,t){if(o(e)){if(e.hooks)n[t]=O(n[t],new i(i.PROPS,e,w(e.hooks)));if(e.descendantHooks||e.hasThunks)for(var r=e.children,s=r.length,f=0;f<s;f++){var u=r[f];if(t+=1,x(u,n,t),o(u)&&u.count)t+=u.count}}else if(a(e))g(e,null,n,t)}function w(e){var n={};for(var t in e)n[t]=void 0;return n}function m(e,n){var t=N(n),r=t.keys,i=t.free;if(i.length===n.length)return{children:n,moves:null};var o=N(e),s=o.keys;if(o.free.length===e.length)return{children:n,moves:null};for(var f=[],u=0,a=i.length,l=0,c=0;c<e.length;c++){var v=e[c],d;if(v.key)if(r.hasOwnProperty(v.key))d=r[v.key],f.push(n[d]);else d=c-l++,f.push(null);else if(u<a)d=i[u++],f.push(n[d]);else d=c-l++,f.push(null)}for(var p=u>=i.length?n.length:i[u],h=0;h<n.length;h++){var y=n[h];if(y.key){if(!s.hasOwnProperty(y.key))f.push(y)}else if(h>=p)f.push(y)}for(var g=f.slice(),k=0,x=[],w=[],m,O=0;O<n.length;){var E=n[O];m=g[k];while(null===m&&g.length)x.push(j(g,k,null)),m=g[k];if(!m||m.key!==E.key){if(E.key){if(m&&m.key)if(r[m.key]!==O+1)if(x.push(j(g,k,m.key)),m=g[k],!m||m.key!==E.key)w.push({key:E.key,to:O});else k++;else w.push({key:E.key,to:O});else w.push({key:E.key,to:O});O++}else if(m&&m.key)x.push(j(g,k,m.key))}else k++,O++}while(k<g.length)m=g[k],x.push(j(g,k,m&&m.key));if(x.length===l&&!w.length)return{children:f,moves:null};return{children:f,moves:{removes:x,inserts:w}}}function j(e,n,t){return e.splice(n,1),{from:n,key:t}}function N(e){for(var n={},t=[],r=e.length,i=0;i<r;i++){var o=e[i];if(o.key)n[o.key]=i;else t.push(i)}return{keys:n,free:t}}function O(e,n){if(e){if(r(e))e.push(n);else e=[e,n];return e}else return n}},{"../vnode/handle-thunk":24,"../vnode/is-thunk":25,"../vnode/is-vnode":27,"../vnode/is-vtext":28,"../vnode/is-widget":29,"../vnode/vpatch":32,"./diff-props":34,"x-is-array":12}]},{},[4])(4)}),t.exports});
define("View/Runner/Vdom/utils/optionsResolver",["Core/IoC"],function(e){"use strict";var n={resolveDefaultOptions:function(e,n){for(var t in n)if("undefined"===typeof e[t])e[t]=n[t]},validateOptions:function(n,t,o,r){for(var i in o){var s=o[i].call(null,t[i]);if(s instanceof Error)return s.message='"'+i+'"'+" option error: "+s.message,e.resolve("ILogger").error(s,"\nIn component "+n.prototype._moduleName+"\nParent name "+r),false}return true},resolveOptions:function(e,t,o){var r=e.getDefaultOptions&&e.getDefaultOptions(),i=e.getOptionTypes&&e.getOptionTypes();return n.resolveDefaultOptions(t,r),n.validateOptions(e,t,i,o)}};return n});
define("View/Runner/expressions/rights",["Core/RightsManager","Core/helpers/Object/isPlainObject","Core/IoC"],function(e,t,i){var n={object:{getMinAccessLevel:function(e,t){var n;if("undefined"!==typeof e["data-access-min-level"])n=e["data-access-min-level"];else if("undefined"!==typeof e["dataAccessMinLevel"])i.resolve("ILogger").info("entityHelpers","Для задания минимального уровня доступа для опции, используйте data-access-min-level вместо dataAccessMinLevel."),n=e["dataAccessMinLevel"];if("string"===typeof n)n=parseInt(n,10);if("number"!==typeof n||isNaN(n))n=t;return n},isAccessible:function(t,n){var s,r;if("undefined"===typeof n)n=1;if(r=n,"undefined"!==typeof t["data-access"])s=t["data-access"];else if("undefined"!==typeof t["dataAccess"])i.resolve("ILogger").info("entityHelpers","Для задания зоны доступа для опции, используйте data-access вместо dataAccess."),s=t["dataAccess"];if("string"===typeof s)r=e.checkAccessRights(s.split(","));return r>=n},iterate:function(e,t){for(var i in e)if(e.hasOwnProperty(i))t(e[i],i,e);return e},remove:function(e,t){delete e[t]}},array:{getMinAccessLevel:function(e,t){return t},isAccessible:function(){return true},iterate:function(e,t){for(var i=e.length-1;i>=0;i--)t(e[i],i,e);return e},remove:function(e,t){e.splice(t,1)}}},s=function e(i,s){var r;if(Array.isArray(i))r=n.array;else if(t(i))r=n.object;else return i;if(s=r.getMinAccessLevel(i,s),!r.isAccessible(i,s))return;return i=r.iterate(i,function(i,n,a){if(i&&i["__isRightsChecked"])return;if(t(i))Object.defineProperty(i,"__isRightsChecked",{enumerable:false,value:true});if(a[n]=e(i,s),void 0===a[n])r.remove(a,n)}),i},r=function e(t){var i=false,n=[],s,r,a,c;if(t&&t.bindings&&t.bindings.length){for(var f=0,l=(r=t.bindings).length;f<l;f++){if(i=false,s=t,a=r[f],a.propPath&&a.propPath.length)c=a.propName.split("/");else c=[];if(c.length)for(var o=0,u=c.length;o<u;o++)if(s.hasOwnProperty(c[o])){if(s=s[c[o]],o+2===u)i=true}else break;else i=true;if(i)n.push(r[f])}t.bindings=n}};return{applyRights:function t(i,n){var a=i&&i["data-access"],c=e.rightsNeeded();if(a&&c)switch(e.checkAccessRights(a.split(","))){case 0:return false;case 1:if(n["display"])n["readOnly"]=true,n["enabled"]=true,n["allowChangeEnable"]=false;else n["enabled"]=false,n["allowChangeEnable"]=false;return true}return s(n,1),r(n),true},applyRightsToEntity:s}});
define("View/Runner/Vdom/markupGenerator",["Core/helpers/Array/flatten","View/Runner/markupGenerator","View/Runner/Vdom/third-party/dom","View/Runner/common","View/Runner/expressions/attr","View/Runner/Vdom/utils/optionsResolver","Core/vdom/Utils/FocusHelper","Core/vdom/Synchronizer/resources/Hooks","View/Runner/expressions/scope","View/Runner/expressions/rights","View/Runner/expressions/attr"],function(e,r,t,n,i,o,a,s,l,u,c){"use strict";var f=Object.create(r);function p(e){if("string"===typeof e)return""!==e.trim();return true}function d(e,r){if(r&&void 0===s.namedNodeHook.restrictedTags[e])return!(r["data-component"]&&r["config"])&&r.name}function m(e,r){var t=r||{};if(e&&e.name)t.name=e.name;else if(r&&r.name)e.name=r.name;return t}var v=[],y="";function g(){var e=y;return v.forEach(function r(t){e+=t+"_"}),e}function b(e){return v.push(0),e=e.filter(function(e){return!!e}),e.forEach(function(e){if(v[v.length-1]=v[v.length-1]+1,"object"===typeof e){if(!e.key)e.key=g(e.key);if(Array.isArray(e.children))b(e.children)}}),v.pop(),e}function h(e){if(void 0===e||null===e)return"";else return e+""}function k(e,r){return f.joinAttrs(e,r)}function w(e){var r,t,n,i,o;if(e&&e.split)if(n=e.split(";"),o=n.length,o)for(i=0;i!==o;i++)if(t=n[i].split(":"),2===t.length){if(!r)r={};r[t[0].trim()]=t[1].trim()}return r}function A(e,r){if(e.className)r.class=r.class||"",r.class+=" "+e.className;return r}return f.createWsControl=function e(r,t,s,c,p){var d,v=true;if("function"===typeof r)d=r;else{if("ws:partial"===r)r=n.splitJs(r);else if("string"===typeof r){var y=n.splitWs(r);if(y)r=y}d=p&&p["js!"+r]||global.requirejs.defined("js!"+r)?global.requirejs("js!"+r):global.requirejs(r)}var g=l.calculateScope(t.user,n.plainMerge)||{};if(s=m(g,s),i.checkAttr(s))s=i.finalizeAttr(s);a.prepareAttrsForFocus(s,g);var b=!(d&&d.prototype&&d.createControl);if(v||u.applyRights(s,g))if(o.resolveOptions(d,g,t.internal.logicParent?t.internal.logicParent._moduleName:""))return{compound:b,invisible:!b&&!(d&&d.prototype._template),controlClass:d,controlProperties:g,controlInternalProperties:t.internal,controlAttributes:s,key:g.__key,controlNodeIdx:-1,context:t.templateContext};else return f.createText("")},f.createTemplate=function e(r,t,i,o,s){var u;if(n.isString(r)){if(u=s&&s[r]||global.requirejs(r),u&&n.isOptionalString(r))return this.createWsControl(r.split("js!")[1],t,i,o,s)}else u=r;a.prepareAttrsForFocus(i,t.user);var c=l.calculateScope(t.user,n.plainMerge);if(c&&void 0===c.enabled)c.enabled=t.internal.parentEnabled;var f=t.internal&&t.internal.parent;return null===u?"":f?u.call(f,c,i,o,true):u(c,i,o,true)},f.createController=function e(r,t,n,i,o){return f.createWsControl.apply(this,arguments)},f.resolver=function e(r,t,i,o,s,u){var c=l.calculateScope(t.user,n.plainMerge),p="string"===typeof r,d=p?u[r]||s&&s[r]||global.requirejs.defined(r)&&global.requirejs(r):void 0,m=!(p&&n.isStringModules(r));if(!d)if("function"===typeof r)d=r;else if(n.isArray(r))d=r;if(a.prepareAttrsForFocus(i,c),c&&void 0===c.enabled)c.enabled=t.internal.parentEnabled;if(n.isControlClass(d))return f.createWsControl(d,{user:c,internal:t.internal},i,o,s);else{var v=t.internal&&t.internal.parent;if("function"===typeof d)return v?d.call(v,c,i,o,true,void 0):d(c,i,o,true,void 0);else if(n.isArray(d))return(t&&t.internal.parent?d.reduce(function(e,r){if("function"===typeof r)return e.concat(r.call(t.internal.parent,c,i,o,true,void 0));return e.concat(r)},[]):d.reduce(function(e,r){if("function"===typeof r)return e.concat(r(c,i,o,true,void 0));return e.concat(r)},[]))[0];else if(m)return f.createText(r)}},f.joinElements=function e(r,t){if(Array.isArray(r))return v=[],y=t||"",r=b(r),r;else throw new Error("joinElements: elements is not array")},f.createTag=function r(n,o,a,l,u,f){function m(e){var r={},t;if(e)for(var n in e)if(e.hasOwnProperty(n))if(c.isEvent(n)&&e[n])r[n]=e[n],e[n].events=true;else if(e[n]=h(e[n]),t=e[n],p(t))if("style"===n)r.style=w(t);else{if(!r.attributes)r.attributes={};r.attributes[n]=t}return r}if(i.checkAttr(o))o=i.finalizeAttr(o),l=i.finalizeAttr(l);var v=m(o=o?k(o,l):""),y=v.attributes&&v.attributes.key&&v.attributes.key;if(a=a.filter(function(e){return!!e}),a=e(a),d(n,v&&v.attributes))v[s.namedNodeHook.hookName]=new s.namedNodeHook(v.attributes[s.namedNodeHook.attributeName],f);return new t.VNode(n,v,a,y)},f.createText=function e(r){return new t.VText(r)},f.createDirective=function e(r){throw new Error("vdomMarkupGenerator createDirective not realized")},f});
define("View/Runner/expressions/subscriber",[],function n(){"use strict";var e={getBindFunc:function(n,e){return function(){var t=[],i;for(i=0;i<arguments.length;i++)t.push(arguments[i]);for(i=0;i<e.length;i++)t.push(e[i]);n.apply(void 0,t)}},getEventsListFromOptions:function(n){var e={};for(var t in n)if(n.hasOwnProperty(t))if(0===t.indexOf("event:"))e[t]=n[t];return e},forEventObjects:function(n,e){for(var t in n)if(n.hasOwnProperty(t))for(var i=n[t],r=0;r<i.length;r++)e(t,i[r])},subscribeEvents:function(n,t,i){e.forEventObjects(i,function(t,i){if(i.fn)i.bindedFunc=e.getBindFunc(i.fn,i.args),n.subscribe(t.split(":")[1],i.bindedFunc)})},unsubscribeEvents:function(n,t,i){e.forEventObjects(i,function(e,t){if(t.bindedFunc)n.unsubscribe(e.split(":")[1],t.bindedFunc)})},applyEvents:function(n,t,i){e.subscribeEvents(n,t,i),n.once("onDestroy",function(){e.unsubscribeEvents(n,t,i)})}};return e});
define("View/Runner/expressions/decorate",function(){return{createRootDecoratorObject:function e(n,r,o,t){var a={config:n,hasMarkup:r,"data-component":o};for(var i in t)if(t.hasOwnProperty(i))if("config"===i)a[i]=t[i]+","+a[i];else a[i]=t[i];return a}}});
define("View/Runner/expressions/compatible",["Core/helpers/Function/shallowClone"],function(e){return{createCombinedOptions:function(o,t){var n,i=e(o);for(n in t)if(t.hasOwnProperty(n)&&-1===n.toString().indexOf("__dirtyCheckingVars_"))i[n]=t[n];return i},combineOptionsIfCompatible:function(e,o,t){var n;if(e.$constructor)n=this.createCombinedOptions(o,t);else if(t&&t.logicParent)(n=o)._logicParent=t.logicParent,n._isSeparatedOptions=true;else n=this.createCombinedOptions(o,{_isSeparatedOptions:true});return n},createInstanceCompatible:function(e,o,t){var n=this.combineOptionsIfCompatible(e.prototype,o,t),i=new e(n),s;if(t.logicParent&&t.logicParent._children&&o.name)t.logicParent._children[o.name]=i;if(i.isCompatibleLayout&&!i.isCompatibleLayout()&&false!==i.iWantVDOM)if(s=i._options,i._savedOptions)i._options=i._savedOptions;else i._options=n;else if(!i._options)i._options=n;if(i._setInternalOptions(t),i.isCompatibleLayout&&!i.isCompatibleLayout()&&false!==i.iWantVDOM)i._savedOptions=i._options,i._options=s;else if(i._dotTplFn||false===i.iWantVDOM)n=i._options;return{instance:i,resolvedOptions:n}},createCompoundControlNode:function(e,o,t,n,i,s,r,a,p){var l={},c=e.prototype&&e.prototype._moduleName,d;return n.__vdomOptions={controlNode:a},l[c]=e,d=p.createWsControl("ws:"+c,{user:n,internal:i},{},void 0,l),{control:e,controlClass:o,options:this.createCombinedOptions(n,i),id:e.getHash&&e.getHash(),parent:r,key:s,element:void 0,markup:d,fullMarkup:d,childrenNodes:t,compound:true}}}});
define("View/Runner/expressions/contextResolver",["Core/IoC","Core/DataContext"],function(e,o){return{wrapContext:function t(n,r){if(n&&n._getChildContext){r=Object.create(r);var i=n._getChildContext();for(var f in i)if(i.hasOwnProperty(f)){if(!(i[f]instanceof o))e.resolve("ILogger").error(null,"Context field"+f+"should be instance of Core/DataContext");r[f]=i[f]}}return r},resolveContext:function(o,t){if("undefined"===typeof t)return{};var n=o.contextTypes?o.contextTypes():{},r={};if(!n)e.resolve("ILogger").error(null,"Context types are not defined");else for(var i in n)if(!(t[i]instanceof n[i]))e.resolve("ILogger").error(null,"Wrong context field: "+i+" should be type of "+n[i].prototype._moduleName+"\nIn component "+o.prototype._moduleName);else r[i]=t[i];return r}}});
define("View/Runner/Text/utils/class",function(){"use strict";var n=function n(r){for(var e=0;e<r.length;++e)for(var t=e+1;t<r.length;++t)if(r[e]===r[t])r.splice(t--,1);return r};return{removeClassDuplicates:function(r){var e=r.split(/\s+/);return e=e.filter(function(n){return""!=n}),e=n(e),r=e.join(" "),r}}});
define("View/Runner/Text/markupGenerator",["View/Runner/markupGenerator","View/Runner/common","View/Runner/expressions/attr","Core/helpers/random-helpers","Core/Context","Core/helpers/markup-helpers","Core/markup/ParserUtilities","Core/core-extend-initializer","Core/ContextBinder","View/Runner/expressions/subscriber","Core/IoC","Core/constants","Core/helpers/Function/shallowClone","View/Runner/expressions/scope","View/Runner/expressions/rights","View/Runner/expressions/decorate","Core/ParallelDeferred","Core/Deferred","Core/Serializer","View/Runner/expressions/compatible","View/Runner/expressions/contextResolver","Core/vdom/Utils/FocusHelper","View/Runner/Text/utils/class"],function(e,n,t,r,i,o,a,l,s,c,f,u,p,d,g,m,v,C,b,_,x,y,w){"use strict";var h=Object.create(e),k=["area","base","br","col","hr","img","input"],j=[{toFind:/\\/g,toReplace:"\\\\"},{toFind:/<\/(script)>/gi,toReplace:"<\\/$1>"},{toFind:/'/g,toReplace:"\\u0027"},{toFind:/\n/g,toReplace:"\\u000a"},{toFind:/\r/g,toReplace:"\\u000d"}],P=666,O={},F=function e(n){return n instanceof C},N=function e(n,t,r){return t&&t[n]||r&&r[n]||(global.requirejs.defined("js!"+n)?global.requirejs("js!"+n):global.requirejs.defined(n)&&global.requirejs(n))};function R(e,n){var t=n||{};if(e&&e.name)t.name=e.name;else if(n&&n.name)e.name=n.name;return t}function E(e,n){if(false===n)e+=" ws-hidden";return e}function I(e,n){if(n)e+=" ws-enabled";else e+=" ws-disabled";return e}function S(e,n){if(n)if(e&&(e.bindings&&e.bindings.length||"false"===e["hasMarkup"]))return"false";return"true"}function M(e,n,t){var r=(e["class"]?e["class"]+" ":"")+(n["className"]?n["className"]+" ":"")+(n["cssClassName"]?n["cssClassName"]+" ":"")+(t&&t["class"]?t["class"]:""),i={visible:E,enabled:I};r=w.removeClassDuplicates(r),e.class=r.trim();for(var o in i)if(i.hasOwnProperty(o))e.class=i[o](e.class,n[o]);if(e.class=e.class.trim(),!e.class)delete e.class;return e}function V(e,n,t){var r=e.user.__$config;if(u.compat&&("undefined"===typeof process||!process.domain||!process.domain.req||false!==process.domain.req.compatible)){var i=o.getConfigStorage()[r];if(!i){var a={};if(a[r]=e.user,"undefined"!==typeof window||!(e.internal&&e.internal.logicParent&&e.internal.logicParent._template))o.mergeConfigStorage(a)}else e.user=i}return e}function A(e){return e.prototype.$constructor&&!e.prototype._template||e.prototype._dotTplFn||e.prototype._isCoreCompound}function D(e){return!A(e)}function T(e){return new a.Node({nodeType:1,nodeName:"component",startTag:"<component>",closeTag:"</component>",attributes:e,sequence:void 0,childNodes:[],parentNode:void 0})}function q(e,n,t,r){var o,a=r&&r._options||{},l=D(t)||"buildMarkupWithContext"in n?n.buildMarkupWithContext:a.buildMarkupWithContext;if(e&&e instanceof i&&false!==l)n=(o=s.initBinderForControlConfig(n)).getConstructorOptions(e,t,n);else if(n.context&&n.context instanceof i&&false!==l)n=(o=s.initBinderForControlConfig(n)).getConstructorOptions(n.context,t,n);return n}function W(e,t,r){var i=e.user,o,a;if(i["class"]=r["class"],!window||!i.element||0===i.element.length)if(!e.internal||!e.internal.logicParent)i.element=T(r);else i.__$fixDecOptions=r;var l=c.getEventsListFromOptions(i);for(var s in l)if(l.hasOwnProperty(s))delete i[s];var p=i.doNotSetParent;i.doNotSetParent=true,i=q(i.linkedContext,i,t);var d=_.createInstanceCompatible(t,i,e.internal),g=d.instance,m=d.resolvedOptions;if(m.doNotSetParent=p,"undefined"!==typeof window)c.subscribeEvents(g,e.internal.logicParent,l),h.saveContext(i,g);if(g._template){if(g.saveOptions)g.saveOptions(m);else g._options=m;if("undefined"!==typeof window)h.saveContext(i,g);if(o=g._beforeMount&&g._beforeMount(m,e.templateContext),g._contextObj=x.resolveContext(t,e.templateContext),g.saveFullContext(x.wrapContext(g,e.templateContext)),o&&F(o)){var v=new C;return o.addCallbacks(function(t){var r;if(g=n.plainMerge(g,t),i.__$receivedState=t,r=g._template?g.render():"",r.callback)r.addCallback(function(e){v.callback({result:h.makeInlineConfigs(e,g.getDataId?g.getDataId():i.__$config,t),receivedState:t})});else{if(u.compat||!e.internal||!e.internal.logicParent)h.saveConfig(i.__$config,g);r=h.makeInlineConfigs(r,g.getDataId?g.getDataId():i.__$config,t),v.callback({result:r,receivedState:t})}},function(e){f.resolve("ILogger").error("Async render error",e.stack)}),v}}if(a=g._template?g.render(void 0,r):"",u.compat||!e.internal||!e.internal.logicParent)h.saveConfig(i.__$config,g);return a}function L(e,n,t,r,o){var a;if(a=n.prototype._modifyOptions.call(n.prototype,e.user,o,r),window&&e.internal.parent&&e.internal.parent._template&&a.element.length>0){var l=_.createInstanceCompatible(n,a,e.internal).instance;return O[e.internal.parent._options.__$config]+=ee(l),""}else{r=M(r,a,o);var s;if(a.context&&a.context instanceof i)s=a.context;else if(a.linkedContext&&a.linkedContext instanceof i)s=a.linkedContext;return t.call(e.internal.parent,a,r,s)}}function z(e,n,t,r,i){if(e.internal&&e.internal.parent&&e.internal.parent._template&&window&&e.user.element.length>0){var o,l;return l=q(t,e.user,n),_.createInstanceCompatible(n,l,e.internal),""}else{var s={enabled:e.internal.parentEnabled,visible:e.internal.parentVisible};return i["hasMarkup"]="true",a.buildMarkupForClass(n,e.user,t,r,s,void 0,i)}}function B(e,n){if(n)e.linkedContext=n;else if(e.parent&&e.parent.getLinkedContext)e.linkedContext=e.parent.getLinkedContext()}function U(e,n){if(false===e.allowChangeEnable||"false"===e.allowChangeEnable)return false;if(void 0===e.enabled&&!n.parent)return e.enabled=n.parentEnabled,true}function G(e,n,t,r,i){var o=X(e),a,s;if(D(e)||o.stable)if(!n.internal||!n.internal.logicParent||!n.internal.logicParent._template||!D(e))n=V(n,e,D(e));var c;if(!n.internal||!n.internal.logicParent||!n.internal.logicParent._template||!D(e))c=l.call(e),(s=q(t,n.user,e,c)).element=window?$('[config="'+i["config"]+'"]'):[],B(s,t);else(s=n.user).element=[];if(D(e)||o.stable){var f=U(s,n.internal),u=c?l.getInstanceOptionsByDefaults(e,s,c):s;if(i=R(u,i),D(e))a=W({user:u,internal:n.internal,templateContext:n.templateContext},e,i);else a=L({user:u,internal:n.internal},e,o,i,s);if(f)delete s.enabled;if(e.prototype._modifyOptionsAfter)e.prototype._modifyOptionsAfter(u);return a}else i=R(s,i),a=z({user:s,internal:n.internal},e,t,r,i);return a}function J(e){var n=e.bindings;n&&n.forEach(function(n){var t=e;if(n.bindNonExistent){var r=n.propName.split("/");if(r.length)r.forEach(function(e){if(t.hasOwnProperty(e))t=t[e];else f.resolve("ILogger").error("fillNonExistentValues","nonexistent value "+n.propName+" can't fill")}),n.nonExistentValue=t;else f.resolve("ILogger").error("fillNonExistentValues","nonexistent value "+n.propName+" can't fill")}})}function H(e){var t=n.splitWs(e);if(t)return t;return e}function K(e,n){return e&&e["js!"+n]||global.requirejs.defined("js!"+n)?global.requirejs("js!"+n):global.requirejs(n)}function Q(e){if(e&&e._options&&e._options.__$config)return e._options.__$config;else if(e&&e._parent)return Q(e._parent);else return""}function X(e){return e.prototype._dotTplFn||e.prototype._template}function Y(e){return r.randomId("cfg-")}function Z(e,t,r,i){var o=i&&i.resolvers?n.findResolverInConfig(e,i.resolvers):void 0;if(o)return o(e);else return N(e,t,r)}h.createWsControl=function e(n,t,r,i,o){var a="function"===typeof n,l=a?n.prototype._moduleName:n;if(!a)l=H(l);var s,c=null,f=a?n:K(o,l),v=X(f),C;if(f&&!v&&!D(f))return h.createController(f,t,r,i,o);var b=d.calculateScope(t.user,d.controlPropMerge)||{};if(!b["data-component"])b["data-component"]=l;if(!t.internal||!t.internal.logicParent||!t.internal.logicParent._template||!D(f))b=p(b);y.prepareAttrsForFocus(r,b);for(var _=0;b.hasOwnProperty("__dirtyCheckingVars_"+_);_++)delete b["__dirtyCheckingVars_"+_];if(b&&b.bindings)for(var x=0;x<b.bindings.length;x++)if(b.bindings[x].propName&&b.bindings[x].propName.indexOf("__dirtyCheckingVars_")>-1)b.bindings.splice(x,1),x--;if(J(b),t.internal=t.internal||{},u.compat||!D(f)||!t.internal.logicParent||!t.internal.logicParent._template||false===t.internal.logicParent.iWantVDOM||false===f.prototype.iWantVDOM)s=Y(t.internal.parent);else s="cfg-123";if(D(f)&&t.internal.logicParent&&t.internal.logicParent._template||g.applyRights(r,b)){if(v)C=m.createRootDecoratorObject(s,S(b,!v.stable),r["data-component"]||l,r);return b["__$config"]=s,G(f,{user:b,internal:t.internal,templateContext:t.templateContext},i,c,C)}else return""};function ee(e){for(var n=0,t=0;t<e._childControls.length;t++){var r=e._childControls[t];if(n++,r._template||r._dotTplFn.stable)n+=ee(r)}return n}h.createController=function e(t,i,o,l,s){var c="function"===typeof t,f=c?"ws:"+t.prototype._moduleName:t;if("ws:partial"===f)f=n.splitJs(f);else f=n.splitWs(f);var u=r.randomId("cfg-"),p=c?t:s&&s["js!"+f]||global.requirejs("js!"+f),v=null,C,b=n.plainMergeAttrs({},d.calculateScope(i.user,d.controlPropMerge));if(!b["data-component"])b["data-component"]=f;if(y.prepareAttrsForFocus(o,b),J(b),o=R(b,o),g.applyRights(o,b))return C=m.createRootDecoratorObject(u,"false",f,o),a.buildMarkupForClass(p,b,l,v,void 0,void 0,C);else return""},h.createTemplate=function e(t,r,i,o,a,l){var s,c=n.hasResolver(t,l&&l.resolvers);if(n.isString(t)){if(c)s=l.resolvers[c](t);else if(s=a&&a[t]||global.requirejs(t),s&&n.isOptionalString(t))return this.createWsControl(t.split("js!")[1],r,i,o,a)}else s=t;y.prepareAttrsForFocus(i,r.user);var f=d.calculateScope(r.user,n.plainMerge);if(f&&void 0===f.enabled)f.enabled=r.internal.parentEnabled;return null===s?"":s(f,i,o)};function ne(e,n){function t(e){if(void 0===e||null===e)return"";else return e}return function(e){var n="";for(var r in e)if(e.hasOwnProperty(r))n+=""!==t(e[r])?" "+r+'="'+e[r]+'"':"";return n}(h.joinAttrs(e,n))}return h.resolver=function e(t,r,i,o,l,s,c,u){var p="string"===typeof t,g=p?Z(t,s,l,c):t,m=!(p&&n.isStringModules(t)),v;if(n.isControlClass(g)){if(p&&-1!==t.indexOf("js!")&&!global.requirejs.defined(g.prototype._moduleName))g.prototype._moduleName=t.split("js!")[1];if(g.prototype._dotTplFn||g.prototype._template)return h.createWsControl(g,r,i,o,l);else return h.createController(g,r,i,o,l)}else{if(v=d.calculateScope(r.user,n.plainMerge),y.prepareAttrsForFocus(i,v),v&&void 0===v.enabled)v.enabled=r.internal.parentEnabled;var C;if("function"===typeof g)C=r&&r.internal.parent?g.call(r.internal.parent,v,i,o,false,void 0):g(v,i,o,false,void 0);else if(n.isArray(g))C=r&&r.internal.parent?g.map(function(e){if("function"===typeof e)return e.call(r.internal.parent,v,i,o,false,void 0);return e}):g.map(function(e){if("function"===typeof e)return e(v,i,o,false,void 0);return e}),C=h.joinElements(C,void 0,u);else if(m)if("undefined"===typeof doT)return a.buildInnerComponents(""+t,v,o);else{if(void 0===t)return f.resolve("ILogger").error("Undefined component error",{message:"Попытка использовать компонент/шаблон, "+"но вместо компонента в шаблоне был передан undefined! "+"Если верстка строится неправильно, нужно поставить точку останова и исследовать стек вызовов. "+"По стеку будет понятно, в каком шаблоне и в какую опцию передается undefined"}),"";return t=t&&t.indexOf&&t.indexOf("{{")>-1?doT.template(t)(v):t.toString(),a.buildInnerComponents(t,v,o)}return C}},h.joinElements=function e(n,t,i){if(Array.isArray(n)){var o="";return n.forEach(function e(n){var t;if(Array.isArray(n))n=h.joinElements(n,void 0,i);if(n&&F(n)){if(t=r.randomId("def-"),!i.def)i.def=new v;i.def.push(n),i.id.push(t),n="["+t+"]"}o+=n||""}),o}else throw new Error("joinElements: elements is not array")},h.createTag=function e(n,r,i,o,a){if(t.checkAttr(r))r=t.finalizeAttr(r),o=t.finalizeAttr(o);if(r=r?ne(r,o):"",~k.indexOf(n))return"<"+n+r+" />";return"<"+n+r+">"+h.joinElements(i,void 0,a)+"</"+n+">"},h.createText=function e(n){return n},h.createDirective=function e(n){return"<"+n+">"},h.createComment=function e(n){return"\x3c!--"+n+"--\x3e"},h.makeInlineConfigs=function e(n,t,r){var i=new b,o=JSON.stringify(r,i.serialize);return j.forEach(function(e){o=o.replace(e.toFind,e.toReplace)}),n+'<script type="text/javascript">window.inline'+t.replace("cfg-","")+"='"+o+"';<\/script>"},h.saveConfig=function e(n,t){if("undefined"!==typeof window){var r={};r[n]=t,o.mergeConfigStorage(r)}},h.saveContext=function e(n,t){var r=n.context||n.linkedContext;if(r&&r instanceof i)s.initBinderForControlConfig(n).bindControl(t,r,"syncControl")},h.calculateScope=function e(n){return d.calculateScope(n,d.controlPropMerge)},h.buildMarkupForClass=G,h});
define("View/Runner/tclosure",["View/config","Core/vdom/Utils/FocusHelper","View/Runner/common","Core/Serializer","Core/IoC","View/Runner/Vdom/markupGenerator","View/Runner/Text/markupGenerator","View/Runner/config/resolver","View/Runner/expressions/scope"],function(e,t,r,n,o,i,a,u,c){var f;function l(){if(f)return f;else return f=global.requirejs("View/decorators"),f}function s(){return this.join("")}var p=function e(t,r){if(t&&"object"===typeof t)t.__lastGetterPath=r;for(var n=0;n<r.length;n++){var o=r[n];if(t)if(t.has&&t.get&&t.has(o))t=t.get(o);else t=t[o];else return}return t},g=function e(t,r,n){var o=r.pop(),i=p(t,r);if(i)if(i.set)i.set(o,n);else i[o]=n},_=["_parent"],d=function e(t){return-1===_.indexOf(t)},b=function e(t,r,n,o){if(o.key)r[o.key]=n;return r[o.value]=t,r},h=function e(t){if(t&&t.getRawData){var r={};return t.each(function(e,t){r[e]=t}),Object.create(r)}return Object.create(t||null)},m=function e(t){return"[object Function]"===Object.prototype.toString.call(t)},v=function e(t){return"[object Object]"===Object.prototype.toString.call(t)},y=function e(t){if(t&&t.prototype&&"undefined"!==typeof t.prototype)return t.prototype.$constructor;return false},S=function e(t){if(void 0===t||null===t)return"";else{if(F(t))return $[t._moduleName](t);return t}},w=function e(t){var n=global.requirejs("Core/Sanitize"),o=l()._sanitizeOpts();return n(r.escapeParenthesis(t),o)},O=function e(t,r){var n=function e(n){var o;if("object"===typeof t){o=Object.create(t||{});for(var i in t)if(t.hasOwnProperty(i))o[i]=t[i];if(!o["__$$__originObject"])o["__$$__originObject"]=t}else o=t;return n(o,r)};return n.__$unite=true,n},j=function(e,t){var r=n.getFuncFromDeclaration(e?e.trim():e);if("function"===typeof r&&Object.keys(t).length)r=r.bind(void 0,t);return r},$={"WS.Data/Type/Enum":function e(t){return String(t)}},k=function(e,t,r){r.call(this,t)},F=function e(t){return t&&t._moduleName&&$.hasOwnProperty(t._moduleName)},G=function e(t,r,n){if(n.__lastGetterPath&&r.message.indexOf("apply")>-1)o.resolve("ILogger").error("Template "+t+" failed to generate html.",new Error("Field "+n.__lastGetterPath.toString().replace(/,/g,".")+" is not a function!"));o.resolve("ILogger").error("Template "+t+" failed to generate html.",r,r)},x=function e(){try{if("undefined"!==typeof window)throw new Error("Использование функции в качестве строковой переменной! Необходимо обернуть в тег ws:partial. ")}catch(e){}},C=function(e){if(!e&&!this.textMarkupGenerator)this.textMarkupGenerator=a;return e?i:this.textMarkupGenerator},P=function e(t,r){var n=t.toString();return t=t.bind(r),t.toJSON=function(){return n},t.toStringOrigin=t.toString,t.toString=function(){if(n.indexOf("createControl")>-1)x();return t(this)}.bind(r),t};return{createDataArray:function e(t){return t.toString=s,t},isolateScope:function(e,t,r){if(!e["___$patched$"+r]){var n=e[r];if(void 0!==n){if(v(t))t=Object.create(t);t[r]=n}else e["___$wasundef$"+r]=true;e[r]=t,e["___$patched$"+r]=true}else{if(!e["___$wasundef$"+r]){if(v(t))t=Object.create(t);t[r]=e[r][r]}e[r]=t}return e},configResolver:u,calcParent:u.calcParent,wrapUndef:S,iterators:e.iterators,templateError:G,partialError:x,makeFunctionSerializable:P,isControlClass:y,isFunction:m,createScope:h,presetScope:b,getter:p,setter:g,IoC:o,getDecorators:l,config:e,Sanitize:w,utils:r,uniteScope:O,plainMerge:r.plainMerge,calculateScope:c.calculateScope,getTypeFunc:j,getMarkupGenerator:C,vdomMarkupGenerator:i,textMarkupGenerator:null,bindProxy:k,isObject:v,prepareAttrsForFocus:t.prepareAttrsForFocus}});
define("View/Runner",["View/Runner/tclosure"],function(e){"use strict";return{Run:e}});
if(typeof window === "undefined" || window && window.location.href.indexOf("withoutLayout")===-1){define("View/Runner/Text/markupGenerator",["View/Runner/markupGenerator","View/Runner/common","View/Runner/expressions/attr","Core/helpers/random-helpers","Core/Context","Core/helpers/markup-helpers","Core/markup/ParserUtilities","Core/core-extend-initializer","Core/ContextBinder","View/Runner/expressions/subscriber","Core/IoC","Core/constants","Core/helpers/Function/shallowClone","View/Runner/expressions/scope","View/Runner/expressions/rights","View/Runner/expressions/decorate","Core/ParallelDeferred","Core/Deferred","Core/Serializer","View/Runner/expressions/compatible","View/Runner/expressions/contextResolver","Core/vdom/Utils/FocusHelper","View/Runner/Text/utils/class"],function(e,n,t,r,i,o,a,l,s,c,f,u,p,d,g,m,v,C,b,_,x,y,w){"use strict";var h=Object.create(e),k=["area","base","br","col","hr","img","input"],j=[{toFind:/\\/g,toReplace:"\\\\"},{toFind:/<\/(script)>/gi,toReplace:"<\\/$1>"},{toFind:/'/g,toReplace:"\\u0027"},{toFind:/\n/g,toReplace:"\\u000a"},{toFind:/\r/g,toReplace:"\\u000d"}],P=666,O={},F=function e(n){return n instanceof C},N=function e(n,t,r){return t&&t[n]||r&&r[n]||(global.requirejs.defined("js!"+n)?global.requirejs("js!"+n):global.requirejs.defined(n)&&global.requirejs(n))};function R(e,n){var t=n||{};if(e&&e.name)t.name=e.name;else if(n&&n.name)e.name=n.name;return t}function E(e,n){if(false===n)e+=" ws-hidden";return e}function I(e,n){if(n)e+=" ws-enabled";else e+=" ws-disabled";return e}function S(e,n){if(n)if(e&&(e.bindings&&e.bindings.length||"false"===e["hasMarkup"]))return"false";return"true"}function M(e,n,t){var r=(e["class"]?e["class"]+" ":"")+(n["className"]?n["className"]+" ":"")+(n["cssClassName"]?n["cssClassName"]+" ":"")+(t&&t["class"]?t["class"]:""),i={visible:E,enabled:I};r=w.removeClassDuplicates(r),e.class=r.trim();for(var o in i)if(i.hasOwnProperty(o))e.class=i[o](e.class,n[o]);if(e.class=e.class.trim(),!e.class)delete e.class;return e}function V(e,n,t){var r=e.user.__$config;if(u.compat&&("undefined"===typeof process||!process.domain||!process.domain.req||false!==process.domain.req.compatible)){var i=o.getConfigStorage()[r];if(!i){var a={};if(a[r]=e.user,"undefined"!==typeof window||!(e.internal&&e.internal.logicParent&&e.internal.logicParent._template))o.mergeConfigStorage(a)}else e.user=i}return e}function A(e){return e.prototype.$constructor&&!e.prototype._template||e.prototype._dotTplFn||e.prototype._isCoreCompound}function D(e){return!A(e)}function T(e){return new a.Node({nodeType:1,nodeName:"component",startTag:"<component>",closeTag:"</component>",attributes:e,sequence:void 0,childNodes:[],parentNode:void 0})}function q(e,n,t,r){var o,a=r&&r._options||{},l=D(t)||"buildMarkupWithContext"in n?n.buildMarkupWithContext:a.buildMarkupWithContext;if(e&&e instanceof i&&false!==l)n=(o=s.initBinderForControlConfig(n)).getConstructorOptions(e,t,n);else if(n.context&&n.context instanceof i&&false!==l)n=(o=s.initBinderForControlConfig(n)).getConstructorOptions(n.context,t,n);return n}function W(e,t,r){var i=e.user,o,a;if(i["class"]=r["class"],!window||!i.element||0===i.element.length)if(!e.internal||!e.internal.logicParent)i.element=T(r);else i.__$fixDecOptions=r;var l=c.getEventsListFromOptions(i);for(var s in l)if(l.hasOwnProperty(s))delete i[s];var p=i.doNotSetParent;i.doNotSetParent=true,i=q(i.linkedContext,i,t);var d=_.createInstanceCompatible(t,i,e.internal),g=d.instance,m=d.resolvedOptions;if(m.doNotSetParent=p,"undefined"!==typeof window)c.subscribeEvents(g,e.internal.logicParent,l),h.saveContext(i,g);if(g._template){if(g.saveOptions)g.saveOptions(m);else g._options=m;if("undefined"!==typeof window)h.saveContext(i,g);if(o=g._beforeMount&&g._beforeMount(m,e.templateContext),g._contextObj=x.resolveContext(t,e.templateContext),g.saveFullContext(x.wrapContext(g,e.templateContext)),o&&F(o)){var v=new C;return o.addCallbacks(function(t){var r;if(g=n.plainMerge(g,t),i.__$receivedState=t,r=g._template?g.render():"",r.callback)r.addCallback(function(e){v.callback({result:h.makeInlineConfigs(e,g.getDataId?g.getDataId():i.__$config,t),receivedState:t})});else{if(u.compat||!e.internal||!e.internal.logicParent)h.saveConfig(i.__$config,g);r=h.makeInlineConfigs(r,g.getDataId?g.getDataId():i.__$config,t),v.callback({result:r,receivedState:t})}},function(e){f.resolve("ILogger").error("Async render error",e.stack)}),v}}if(a=g._template?g.render(void 0,r):"",u.compat||!e.internal||!e.internal.logicParent)h.saveConfig(i.__$config,g);return a}function L(e,n,t,r,o){var a;if(a=n.prototype._modifyOptions.call(n.prototype,e.user,o,r),window&&e.internal.parent&&e.internal.parent._template&&a.element.length>0){var l=_.createInstanceCompatible(n,a,e.internal).instance;return O[e.internal.parent._options.__$config]+=ee(l),""}else{r=M(r,a,o);var s;if(a.context&&a.context instanceof i)s=a.context;else if(a.linkedContext&&a.linkedContext instanceof i)s=a.linkedContext;return t.call(e.internal.parent,a,r,s)}}function z(e,n,t,r,i){if(e.internal&&e.internal.parent&&e.internal.parent._template&&window&&e.user.element.length>0){var o,l;return l=q(t,e.user,n),_.createInstanceCompatible(n,l,e.internal),""}else{var s={enabled:e.internal.parentEnabled,visible:e.internal.parentVisible};return i["hasMarkup"]="true",a.buildMarkupForClass(n,e.user,t,r,s,void 0,i)}}function B(e,n){if(n)e.linkedContext=n;else if(e.parent&&e.parent.getLinkedContext)e.linkedContext=e.parent.getLinkedContext()}function U(e,n){if(false===e.allowChangeEnable||"false"===e.allowChangeEnable)return false;if(void 0===e.enabled&&!n.parent)return e.enabled=n.parentEnabled,true}function G(e,n,t,r,i){var o=X(e),a,s;if(D(e)||o.stable)if(!n.internal||!n.internal.logicParent||!n.internal.logicParent._template||!D(e))n=V(n,e,D(e));var c;if(!n.internal||!n.internal.logicParent||!n.internal.logicParent._template||!D(e))c=l.call(e),(s=q(t,n.user,e,c)).element=window?$('[config="'+i["config"]+'"]'):[],B(s,t);else(s=n.user).element=[];if(D(e)||o.stable){var f=U(s,n.internal),u=c?l.getInstanceOptionsByDefaults(e,s,c):s;if(i=R(u,i),D(e))a=W({user:u,internal:n.internal,templateContext:n.templateContext},e,i);else a=L({user:u,internal:n.internal},e,o,i,s);if(f)delete s.enabled;if(e.prototype._modifyOptionsAfter)e.prototype._modifyOptionsAfter(u);return a}else i=R(s,i),a=z({user:s,internal:n.internal},e,t,r,i);return a}function J(e){var n=e.bindings;n&&n.forEach(function(n){var t=e;if(n.bindNonExistent){var r=n.propName.split("/");if(r.length)r.forEach(function(e){if(t.hasOwnProperty(e))t=t[e];else f.resolve("ILogger").error("fillNonExistentValues","nonexistent value "+n.propName+" can't fill")}),n.nonExistentValue=t;else f.resolve("ILogger").error("fillNonExistentValues","nonexistent value "+n.propName+" can't fill")}})}function H(e){var t=n.splitWs(e);if(t)return t;return e}function K(e,n){return e&&e["js!"+n]||global.requirejs.defined("js!"+n)?global.requirejs("js!"+n):global.requirejs(n)}function Q(e){if(e&&e._options&&e._options.__$config)return e._options.__$config;else if(e&&e._parent)return Q(e._parent);else return""}function X(e){return e.prototype._dotTplFn||e.prototype._template}function Y(e){return r.randomId("cfg-")}function Z(e,t,r,i){var o=i&&i.resolvers?n.findResolverInConfig(e,i.resolvers):void 0;if(o)return o(e);else return N(e,t,r)}h.createWsControl=function e(n,t,r,i,o){var a="function"===typeof n,l=a?n.prototype._moduleName:n;if(!a)l=H(l);var s,c=null,f=a?n:K(o,l),v=X(f),C;if(f&&!v&&!D(f))return h.createController(f,t,r,i,o);var b=d.calculateScope(t.user,d.controlPropMerge)||{};if(!b["data-component"])b["data-component"]=l;if(!t.internal||!t.internal.logicParent||!t.internal.logicParent._template||!D(f))b=p(b);y.prepareAttrsForFocus(r,b);for(var _=0;b.hasOwnProperty("__dirtyCheckingVars_"+_);_++)delete b["__dirtyCheckingVars_"+_];if(b&&b.bindings)for(var x=0;x<b.bindings.length;x++)if(b.bindings[x].propName&&b.bindings[x].propName.indexOf("__dirtyCheckingVars_")>-1)b.bindings.splice(x,1),x--;if(J(b),t.internal=t.internal||{},u.compat||!D(f)||!t.internal.logicParent||!t.internal.logicParent._template||false===t.internal.logicParent.iWantVDOM||false===f.prototype.iWantVDOM)s=Y(t.internal.parent);else s="cfg-123";if(D(f)&&t.internal.logicParent&&t.internal.logicParent._template||g.applyRights(r,b)){if(v)C=m.createRootDecoratorObject(s,S(b,!v.stable),r["data-component"]||l,r);return b["__$config"]=s,G(f,{user:b,internal:t.internal,templateContext:t.templateContext},i,c,C)}else return""};function ee(e){for(var n=0,t=0;t<e._childControls.length;t++){var r=e._childControls[t];if(n++,r._template||r._dotTplFn.stable)n+=ee(r)}return n}h.createController=function e(t,i,o,l,s){var c="function"===typeof t,f=c?"ws:"+t.prototype._moduleName:t;if("ws:partial"===f)f=n.splitJs(f);else f=n.splitWs(f);var u=r.randomId("cfg-"),p=c?t:s&&s["js!"+f]||global.requirejs("js!"+f),v=null,C,b=n.plainMergeAttrs({},d.calculateScope(i.user,d.controlPropMerge));if(!b["data-component"])b["data-component"]=f;if(y.prepareAttrsForFocus(o,b),J(b),o=R(b,o),g.applyRights(o,b))return C=m.createRootDecoratorObject(u,"false",f,o),a.buildMarkupForClass(p,b,l,v,void 0,void 0,C);else return""},h.createTemplate=function e(t,r,i,o,a,l){var s,c=n.hasResolver(t,l&&l.resolvers);if(n.isString(t)){if(c)s=l.resolvers[c](t);else if(s=a&&a[t]||global.requirejs(t),s&&n.isOptionalString(t))return this.createWsControl(t.split("js!")[1],r,i,o,a)}else s=t;y.prepareAttrsForFocus(i,r.user);var f=d.calculateScope(r.user,n.plainMerge);if(f&&void 0===f.enabled)f.enabled=r.internal.parentEnabled;return null===s?"":s(f,i,o)};function ne(e,n){function t(e){if(void 0===e||null===e)return"";else return e}return function(e){var n="";for(var r in e)if(e.hasOwnProperty(r))n+=""!==t(e[r])?" "+r+'="'+e[r]+'"':"";return n}(h.joinAttrs(e,n))}return h.resolver=function e(t,r,i,o,l,s,c,u){var p="string"===typeof t,g=p?Z(t,s,l,c):t,m=!(p&&n.isStringModules(t)),v;if(n.isControlClass(g)){if(p&&-1!==t.indexOf("js!")&&!global.requirejs.defined(g.prototype._moduleName))g.prototype._moduleName=t.split("js!")[1];if(g.prototype._dotTplFn||g.prototype._template)return h.createWsControl(g,r,i,o,l);else return h.createController(g,r,i,o,l)}else{if(v=d.calculateScope(r.user,n.plainMerge),y.prepareAttrsForFocus(i,v),v&&void 0===v.enabled)v.enabled=r.internal.parentEnabled;var C;if("function"===typeof g)C=r&&r.internal.parent?g.call(r.internal.parent,v,i,o,false,void 0):g(v,i,o,false,void 0);else if(n.isArray(g))C=r&&r.internal.parent?g.map(function(e){if("function"===typeof e)return e.call(r.internal.parent,v,i,o,false,void 0);return e}):g.map(function(e){if("function"===typeof e)return e(v,i,o,false,void 0);return e}),C=h.joinElements(C,void 0,u);else if(m)if("undefined"===typeof doT)return a.buildInnerComponents(""+t,v,o);else{if(void 0===t)return f.resolve("ILogger").error("Undefined component error",{message:"Попытка использовать компонент/шаблон, "+"но вместо компонента в шаблоне был передан undefined! "+"Если верстка строится неправильно, нужно поставить точку останова и исследовать стек вызовов. "+"По стеку будет понятно, в каком шаблоне и в какую опцию передается undefined"}),"";return t=t&&t.indexOf&&t.indexOf("{{")>-1?doT.template(t)(v):t.toString(),a.buildInnerComponents(t,v,o)}return C}},h.joinElements=function e(n,t,i){if(Array.isArray(n)){var o="";return n.forEach(function e(n){var t;if(Array.isArray(n))n=h.joinElements(n,void 0,i);if(n&&F(n)){if(t=r.randomId("def-"),!i.def)i.def=new v;i.def.push(n),i.id.push(t),n="["+t+"]"}o+=n||""}),o}else throw new Error("joinElements: elements is not array")},h.createTag=function e(n,r,i,o,a){if(t.checkAttr(r))r=t.finalizeAttr(r),o=t.finalizeAttr(o);if(r=r?ne(r,o):"",~k.indexOf(n))return"<"+n+r+" />";return"<"+n+r+">"+h.joinElements(i,void 0,a)+"</"+n+">"},h.createText=function e(n){return n},h.createDirective=function e(n){return"<"+n+">"},h.createComment=function e(n){return"\x3c!--"+n+"--\x3e"},h.makeInlineConfigs=function e(n,t,r){var i=new b,o=JSON.stringify(r,i.serialize);return j.forEach(function(e){o=o.replace(e.toFind,e.toReplace)}),n+'<script type="text/javascript">window.inline'+t.replace("cfg-","")+"='"+o+"';<\/script>"},h.saveConfig=function e(n,t){if("undefined"!==typeof window){var r={};r[n]=t,o.mergeConfigStorage(r)}},h.saveContext=function e(n,t){var r=n.context||n.linkedContext;if(r&&r instanceof i)s.initBinderForControlConfig(n).bindControl(t,r,"syncControl")},h.calculateScope=function e(n){return d.calculateScope(n,d.controlPropMerge)},h.buildMarkupForClass=G,h});}