define("js!SBIS3.Staff.StaffFunction",["Core/Deferred","Core/core-instance","Deprecated/BLObject","Core/helpers/string-helpers","Core/UserInfo","WS.Data/Source/SbisService","js!SBIS3.Staff.StaffConst"],function(e,n,t,o,r,a,i){var p;return p={prepareShowInfoByDivision:function(e,t,o){var r=o||{},a={},i=function(e,n){var t=$("");if(e instanceof Array){for(var o in e)if(e.hasOwnProperty(o))t=t.add($(e[o],n))}else t=$(e,n);return t.length?t:n}(r.hover||t,t);if(!e||!t)return;if(this&&n.instanceOfModule(this,"Deprecated/Controls/TableView/TableView"))a=this.getQuery();require(["js!SBIS3.Staff.DepartmentMiniCard"],function(n){var t=n.initCard(e,{showByHover:!r.onlyClick,showByClick:r.onlyClick,offset:r.offset,browQuery:a});i.attr("MiniCardId",t)})},getCompanyType:function(e){if(e==i.ourCompanyType.innerCompany)return i.ourCompanyType.innerCompany;if(e==i.ourCompanyType.other)return i.ourCompanyType.other;return i.ourCompanyType.legalCompany},getCompanyIdByDepartmentType:function(e){if(e===i.departmentType.innerCompany)return i.innerCompany;return i.allLegalCompany},isInnerCompany:function(e){return p.getCompanyType(e)==i.ourCompanyType.innerCompany},isOtherCompany:function(e){return p.getCompanyType(e)==i.ourCompanyType.other},isDefinedCompany:function(e){return e!=i.ourCompanyType.innerCompany&&e!=i.ourCompanyType.legalCompany&&e!=i.ourCompanyType.other},getFaceName:function(e){return new t("Лицо").call("НазваниеЛица",{"Лицо":e},"asis")},generateCardUrl:function(e){if(!e)return false;var t=e.getContext().getRecord(),a="",i="",p=r.get("ИдентификаторКлиента");if("function"===typeof e.getCurrentTemplateName&&"js!SBIS3.Staff.CardDepartment"===e.getCurrentTemplateName())a=t.getKey(),i="Department";else if("function"===typeof e.getCurrentTemplateName&&"js!SBIS3.StaffSelection.VacancyDocument"===e.getCurrentTemplateName())a=t.getKey(),i="Vacancy";else if("function"===typeof e.getCurrentTemplateName&&"js!SBIS3.StaffSelection.Candidates.Card"===e.getCurrentTemplateName()||n.instanceOfModule(e,"SBIS3.StaffSelection.Candidates.Card"))return a=e._record.getId(),a=o.parseComplexKey(a).objKey,[window.location.protocol,"",window.location.host,"candidate",a].join("/");else i=(a=(t=e.getRecord()).hasColumn("Сотрудник.@Сотрудник")&&t.get("Сотрудник.@Сотрудник"))?"Employee":"Face",a=a?a:t.hasColumn("@СвязиПользователя")&&t.get("@СвязиПользователя");if(a=o.parseComplexKey(a).objKey,!a)return false;return[window.location.protocol,"",window.location.host,"obj",i,p,a,""].join("/")},getEmployeeUrlByRecord:function(n){var t=new e,o=n.get("ИдСервисаПрофилей"),r=n.get("Лицо"),i=function(e){t.callback(e?[window.location.protocol,"",window.location.host,"person",e].join("/"):null)};if(o)return i(o),t;if(r)return new a({endpoint:"СервисПрофилей"}).call("ИдентификаторЛицаСинхронно",{"Лицо":r}).addCallbacks(function(e){i(e.getScalar())},function(){i(null)}),t;return i(null),t},showUrlDialog:function(e){if(!e||"string"!==typeof e)return false;require(["js!SBIS3.Engine.Clipboard"],function(n){(new n).setText(e)})}}});
//# sourceMappingURL=StaffFunction.module.js.map