(function(){
var global = (function(){ return this || (0, eval)('this'); }());
var require = global.requirejs;
var exports = {};
var deps = ['WS.Data/Entity/Abstract', 'WS.Data/Entity/OptionsMixin', 'WS.Data/Entity/ObservableMixin', 'WS.Data/Di', 'WS.Data/Collection/IBind', 'WS.Data/Collection/IEnumerator', 'WS.Data/Collection/IndexedEnumeratorMixin', 'WS.Data/Entity/SerializableMixin', 'WS.Data/Entity/IInstantiable', 'WS.Data/Entity/InstantiableMixin', 'WS.Data/Collection/IEnumerable', 'WS.Data/Collection/IList', 'WS.Data/Collection/EventRaisingMixin', 'WS.Data/Functor/Compute', 'WS.Data/Shim/Set', 'WS.Data/Utils', 'WS.Data/Collection/List', 'WS.Data/Shim/Map', 'WS.Data/Entity/IObject', 'Core/core-extend', 'WS.Data/Query/IQueryable', 'WS.Data/Collection/ISourceLoadable'];

Object.defineProperty(exports,'WS.Data/Display/Display',{configurable:true,get:function(){delete exports['WS.Data/Display/Display'];return exports['WS.Data/Display/Display']=function(s,e,t,a){'use strict';var l=s.extend([e,t],{_moduleName:'WS.Data/Display/Display',constructor:function s(a){s.superclass.constructor.call(this,a),e.constructor.call(this,a),t.constructor.call(this,a);},destroy:function(){t.destroy.call(this),l.superclass.destroy.call(this);}}),i={displaysToCollections:[],displaysToInstances:[],displaysCounter:[]};return l.getDefaultDisplay=function(s,e,t){if(2===arguments.length&&'object'!==typeof e)t=e,e={};var l=t?i.displaysToCollections.indexOf(s):-1;if(-1===l){(e=e||{}).collection=s;var n;if(s&&s._wsDataTypeIEnum)n=a.create('display.enum',e);else if(s&&s._wsDataTypeIFlags)n=a.create('display.flags',e);else if(s&&s._wsDataCollectionIEnumerable)n=a.create('display.collection',e);else if(s instanceof Array)n=a.create('display.collection',e);else throw new TypeError('Argument "collection" should implement WS.Data/Collection/IEnumerable or be an instance of Array, but "'+s+'" given.');if(t)i.displaysToCollections.push(s),i.displaysToInstances.push(n),i.displaysCounter.push(1);return n;}else return i.displaysCounter[l]++,i.displaysToInstances[l];},l.releaseDefaultDisplay=function(s){var e=i.displaysToInstances.indexOf(s);if(-1===e)return false;if(i.displaysCounter[e]--,0===i.displaysCounter[e])i.displaysToInstances[e].destroy(),i.displaysCounter.splice(e,1),i.displaysToInstances.splice(e,1),i.displaysToCollections.splice(e,1);return true;},l;}(require(deps[0]),require(deps[1]),require(deps[2]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/CollectionItem',{configurable:true,get:function(){delete exports['WS.Data/Display/CollectionItem'];return exports['WS.Data/Display/CollectionItem']=function(t,e,n,i,o,s){'use strict';var c=t.extend([e,i,o,n],{_moduleName:'WS.Data/Display/CollectionItem',_$owner:null,_$contents:null,_$selected:false,_instancePrefix:'collection-item-',_contentsIndex:void 0,constructor:function t(n){t.superclass.constructor.call(this,n),e.constructor.call(this,n);},_getSerializableState:function(t){if(t=n._getSerializableState.call(this,t),t.$options.owner){var e=t.$options.owner.getCollection(),i=e._wsDataCollectionIList?e.getIndex(t.$options.contents):-1;if(i>-1)t.ci=i,delete t.$options.contents;}return delete t.$options.owner,t.iid=this.getInstanceId(),t;},_setSerializableState:function(t){var e=n._setSerializableState(t);return function(){if(e.call(this),t.hasOwnProperty('ci'))this._contentsIndex=t.ci;this._instanceId=t.iid;};},getOwner:function(){return this._$owner;},setOwner:function(t){this._$owner=t;},getContents:function(){if(void 0!==this._contentsIndex)this._$contents=this.getOwner().getCollection().at(this._contentsIndex),this._contentsIndex=void 0;return this._$contents;},setContents:function(t,e){if(this._$contents===t)return;if(this._$contents=t,!e)this._notifyItemChangeToOwner('contents');},isSelected:function(){return this._$selected;},setSelected:function(t,e){if(this._$selected===t)return;if(this._$selected=t,!e)this._notifyItemChangeToOwner('selected');},_getSourceCollection:function(){return this.getOwner().getCollection();},_notifyItemChangeToOwner:function(t){if(this._$owner)this._$owner.notifyItemChange(this,t);}});return s.register('display.collection-item',c),c;}(require(deps[0]),require(deps[1]),require(deps[7]),require(deps[8]),require(deps[9]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/Abstract',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/Abstract'];return exports['WS.Data/Display/ItemsStrategy/Abstract']=function(t,e){'use strict';return t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/Abstract',_display:null,_collection:null,_items:null,_options:'',constructor:function t(e,n){this._display=e,this._collection=e.getCollection(),this._options=n||{},this._items=[],this._initItems();},getOptions:function(){return this._options;},at:function(t){throw new Error('Method must be implemented');},getCount:function(){throw new Error('Method must be implemented');},getItems:function(){return this._items;},setItems:function(t){this._items=t;},getItemIndex:function(t){return t;},getCollectionIndex:function(t){return t;},splice:function(t,e,n){throw new Error('Method must be implemented');},reset:function(){this._items.length=0,this._initItems();},addSorters:function(t){},convertToItem:function(t,n){return n=n||{},n.contents=t,n.owner=this._display,e.resolve(this.getItemModule(),n);},getItemModule:function(){return this._options.itemModule;},_initItems:function(){}});}(require(deps[0]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/CollectionEnumerator',{configurable:true,get:function(){delete exports['WS.Data/Display/CollectionEnumerator'];return exports['WS.Data/Display/CollectionEnumerator']=function(t,i,n,e){'use strict';var o=t.extend([i,n,e],{_moduleName:'WS.Data/Display/CollectionEnumerator',_$items:null,_$filterMap:null,_$sortMap:null,_position:-1,_current:void 0,_internalToSource:null,_sourceToInternal:null,get items(){return this._$items instanceof Function?this._$items():this._$items;},constructor:function t(n){if(this._$items=[],this._$filterMap=[],this._$sortMap=[],this._sourceToInternal=[],t.superclass.constructor.call(this,n),i.constructor.call(this,n),e.constructor.call(this),!(this._$items instanceof Array)&&!(this._$items instanceof Function))throw new TypeError(this._moduleName+'::constructor(): items should be instance of an Array or Function');if(!(this._$filterMap instanceof Array))throw new TypeError(this._moduleName+'::constructor(): filter map should be instance of an Array');if(!(this._$sortMap instanceof Array))throw new TypeError(this._moduleName+'::constructor(): sort map should be instance of an Array');},getCurrent:function(){return this._current;},getCurrentIndex:function(){return this._position;},reset:function(){this._position=-1,this._setCurrentByPosition();},reIndex:function(t,i,n){if(e.reIndex.call(this,t,i,n),this._internalToSource=null,this._sourceToInternal=[],this._position=-1,this._current)this._setPositionByCurrent();},_createIndex:function(t){var i=this._position,n=this._current;e._createIndex.call(this,t),this._position=i,this._current=n;},at:function(t){return void 0===t?void 0:this.items[this.getSourceByInternal(t)];},getCount:function(){return this._initInternalMap(),this._internalToSource.length;},setCurrent:function(t){this._position=this.getInternalBySource(this.items.indexOf(t)),this._setCurrentByPosition();},getPosition:function(){return this._position;},setPosition:function(t){this._checkPosition(t),this._position=t,this._setCurrentByPosition();},isValidPosition:function(t){return t>=-1&&t<this.getCount();},movePrevious:function(){if(this._position<1)return false;return this._position--,this._setCurrentByPosition(),true;},moveNext:function(){if(this._position>=this.getCount()-1)return false;return this._position++,this._setCurrentByPosition(),true;},getInternalBySource:function(t){if(void 0===t||null===t||-1===t)return t;if(this._initInternalMap(),void 0===this._sourceToInternal[t])this._sourceToInternal[t]=this._internalToSource.indexOf(t);return this._sourceToInternal[t];},getSourceByInternal:function(t){if(void 0===t||null===t||-1===t)return t;return this._initInternalMap(),this._internalToSource[t];},_initInternalMap:function(){if(null===this._internalToSource)this._internalToSource=o.getAssociativeMap(this._$sortMap,this._$filterMap);},_checkPosition:function(t){if(!this.isValidPosition(t))throw new Error(this._moduleName+': position is out of bounds');},_setCurrentByPosition:function(){this._current=this._position>-1?this.items[this.getSourceByInternal(this._position)]:void 0;},_setPositionByCurrent:function(){this._position=-1;var t=this._current?this.items.indexOf(this._current):-1;if(t>-1&&this._$filterMap[t])this._position=this.getInternalBySource(t);else this._current=void 0;}});return o.getAssociativeMap=function(t,i){var n=[],e,o;for(e=0;e<t.length;e++)if(o=t[e],i[o])n.push(o);return n;},o;}(require(deps[0]),require(deps[1]),require(deps[5]),require(deps[6]));}});
Object.defineProperty(exports,'WS.Data/Display/IBindCollection',{configurable:true,get:function(){delete exports['WS.Data/Display/IBindCollection'];return exports['WS.Data/Display/IBindCollection']=function(A){'use strict';var C={};return C.ACTION_ADD=A.ACTION_ADD,C.ACTION_REMOVE=A.ACTION_REMOVE,C.ACTION_CHANGE=A.ACTION_CHANGE,C.ACTION_REPLACE=A.ACTION_REPLACE,C.ACTION_MOVE=A.ACTION_MOVE,C.ACTION_RESET=A.ACTION_RESET,C;}(require(deps[4]));}});
Object.defineProperty(exports,'WS.Data/Display/Breadcrumbs',{configurable:true,get:function(){delete exports['WS.Data/Display/Breadcrumbs'];return exports['WS.Data/Display/Breadcrumbs']=function(t,e){'use strict';return e(Array,[t],{_moduleName:'WS.Data/Display/Breadcrumbs',constructor:function t(){t.superclass.constructor.apply(this,arguments);},get last(){return this[this.length-1];},finalize:function(){var t=this.last;if(t instanceof Object)Object.getOwnPropertyNames(t).forEach(function(e){Object.defineProperty(this,e,Object.getOwnPropertyDescriptor(t,e));},this);},get:function(t){return this.last&&this.last.get&&this.last.get(t);},set:function(){throw new Error('Object wrapper is read only');},has:function(t){return this.last&&this.last.has?this.last.has(t):false;}});}(require(deps[18]),require(deps[19]));}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/Root',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/Root'];return exports['WS.Data/Display/ItemsStrategy/Root']=function(t){'use strict';return t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/Root',_source:null,_root:null,get source(){return this._source;},constructor:function t(e,r){this._source=e,this._root=r;},getOptions:function(){return this._source.getOptions();},at:function(t){if(0===t)return this._root();else return this._source.at(t-1);},getCount:function(){return this._source.getCount()+1;},getItems:function(){return[this._root()].concat(this._source.getItems());},setItems:function(t){return this._source.setItems(t.slice(1));},getItemIndex:function(t){if(isNaN(parseInt(t,10)))return-1;return t=this._source.getItemIndex(t),-1===t?t:1+t;},getCollectionIndex:function(t){return this._source.getCollectionIndex(t-1);},splice:function(t,e,r){return this._source.splice(Math.max(t-1,0),e,r);},reset:function(){return this._source.reset();},addSorters:function(t){return this._source.addSorters(t);},convertToItem:function(t,e){return this._source.convertToItem(t,e);},getItemModule:function(){return this._source.getItemModule();}});}(require(deps[0]));}});
Object.defineProperty(exports,'WS.Data/Display/TreeItem',{configurable:true,get:function(){delete exports['WS.Data/Display/TreeItem'];return exports['WS.Data/Display/TreeItem']=function(e,t){'use strict';var n=e.extend({_moduleName:'WS.Data/Display/TreeItem',_$parent:void 0,_$node:false,_$expanded:false,_$loaded:false,_$childrenProperty:'',_instancePrefix:'tree-item-',constructor:function e(t){e.superclass.constructor.call(this,t),this._$node=!!this._$node,this._$expanded=!!this._$expanded,this._$loaded=!!this._$loaded;},_getSerializableState:function(e){return e=n.superclass._getSerializableState.call(this,e),delete e.$options.parent,e;},getParent:function(){return this._$parent;},setParent:function(e,t){if(this._$parent===e)return;if(this._$parent=e,!t)this._notifyItemChangeToOwner('parent');},getRoot:function(){if(this._$parent===this)return;return this._$parent?this._$parent.getRoot():this;},isRoot:function(){return!this._$parent;},getLevel:function(){if(this._$parent)return this._$parent.getLevel()+1;var e=this.getOwner();return e&&e.isRootEnumerable()?1:0;},isNode:function(){return this._$node;},setNode:function(e){this._$node=e;},isExpanded:function(){return this._$expanded;},setExpanded:function(e,t){if(this._$expanded===e)return;if(this._$expanded=e,!t)this._notifyItemChangeToOwner('expanded');},toggleExpanded:function(){this.setExpanded(!this.isExpanded());},isLoaded:function(){return this._$loaded;},setLoaded:function(e){this._$loaded=!!e;},getChildrenProperty:function(){return this._$childrenProperty;},_notifyItemChangeToOwner:function(e){n.superclass._notifyItemChangeToOwner.call(this,e);var t=this.getRoot(),i=t?t.getOwner():void 0;if(i&&i!==this._$owner)i.notifyItemChange(this,e);}});return t.register('display.tree-item',n),n;}(exports['WS.Data/Display/CollectionItem'],require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/FlagsItem',{configurable:true,get:function(){delete exports['WS.Data/Display/FlagsItem'];return exports['WS.Data/Display/FlagsItem']=function(t,e){'use strict';var i=t.extend({_moduleName:'WS.Data/Display/FlagsItem',isSelected:function(){return this._$owner.getCollection().get(this._$contents);},setSelected:function(t,e){if(this.isSelected()===t)return;this._$owner.getCollection().set(this._$contents,t);}});return e.register('display.flags-item',i),i;}(exports['WS.Data/Display/CollectionItem'],require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/Direct',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/Direct'];return exports['WS.Data/Display/ItemsStrategy/Direct']=function(t,e){'use strict';return t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/Direct',_collectionEnumerator:null,constructor:function t(e,i){t.superclass.constructor.call(this,e,i);},at:function(t){if(this._items[t])return this._items[t];var e;if(this._collection._wsDataCollectionIList)e=this._collection.at(t);else{var i=this._getCollectionEnumerator(),n=0;i.reset();while(i.moveNext()){if(n===t){e=i.getCurrent();break;}n++;}}if(void 0===e)throw new ReferenceError('Collection index '+t+' is out of bounds.');return this._items[t]=this.convertToItem(e);},getCount:function(){return this._items.length;},getItems:function(){var t=this._items.length,e;for(e=0;e<t;e++)this.at(e);return this._items;},splice:function(t,i,n){return n=n||[],Array.prototype.splice.apply(this._items,[t,i].concat(n.map(function(t){if(t instanceof e)return t;return this.convertToItem(t);}.bind(this))));},_initItems:function(){this._items.length=this._display.getCollectionCount();},_getCollectionEnumerator:function(){if(!this._collectionEnumerator)this._collectionEnumerator=this._collection.getEnumerator(this._options.localize);return this._collectionEnumerator;}});}(exports['WS.Data/Display/ItemsStrategy/Abstract'],exports['WS.Data/Display/CollectionItem']);}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/MaterializedPath',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/MaterializedPath'];return exports['WS.Data/Display/ItemsStrategy/MaterializedPath']=function(t,e,i){'use strict';var r=t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/MaterializedPath',_indexToPath:null,constructor:function t(e,i){this._indexToPath=[],t.superclass.constructor.call(this,e,i);},at:function(t){if(!this._items[t]){var e=this._getPathTo(this._collection,t),i;if(e)i=this._getItemByPath(this._collection,e);if(i){this._items[t]=this.convertToItem(i);var r=this._getParent(t,e);if(r)this._items[t].setParent(r);}}return this._items[t];},getCount:function(){var t=0;while(void 0!==this.at(t))t++;return t;},getItems:function(){var t=0;while(void 0!==this.at(t))t++;return this._items;},splice:function(t){this._items.length=t,this._indexToPath.length=t;},addSorters:function(t){r.superclass.addSorters.call(this,t),t.push({name:'tree',enabled:true,method:r.sortItems,options:function(){return{indexToPath:this._indexToPath};}.bind(this)});},convertToItem:function(t,r){var n=this._options.loadedProperty,o=false,a;if('string'===typeof n&&'!'===n[0])n=n.substr(1),o=true;if(a=e.getItemPropertyValue(t,n),r=r||{},r.contents=t,r.owner=this._display,r.loaded=o?!a:a,!('node'in r))r.node=e.getItemPropertyValue(t,this._options.nodeProperty);return i.resolve(this.getItemModule(),r);},_getPathTo:function(t,i){if(this._indexToPath[i])return this._indexToPath[i];var r=this._options.childrenProperty,n,o,a;if(o=function(t,i,a){var s=i instanceof Array,l=i._wsDataCollectionIList,h=i._wsDataCollectionIEnumerable,u,c,f,d,m,_;for(_=0;;){if(s){if(c=i.length<=_,!c)f=i[_];}else if(l){if(c=i.getCount()<=_,!c)f=i.at(_);}else if(h){if(!u)u=i.getEnumerator();c=void 0===(f=u.moveNext()?u.getCurrent():void 0);}else throw new TypeError('Unsupported object type: only Array, WS.Data/Collection/IList or WS.Data/Collection/IEnumerable are supported.');if(c)break;if(t===n)return a.concat(_);if(n++,d=e.getItemPropertyValue(f,r),d instanceof Object)if(m=o(t,d,a.concat(_)),m)return m;_++;}},n=0,a=o(i,t,[]),a)this._indexToPath[i]=a;return a;},_getItemByPath:function(t,i){var r=this._options.childrenProperty,n=t,o;for(o=0;o<i.length;)if(n=this._getItemAt(t,i[o]),o++,o<i.length)t=e.getItemPropertyValue(n,r);return n;},_getParent:function(t,e){var i=e.slice(0,e.length-1);if(i.length){var r=this._getItemByPath(this._collection,i);if(r)for(var n=t-1;n>=0;n--)if(this._items[n]&&this._items[n].getContents()===r)return this._items[n];}else return'function'===typeof this._options.root?this._options.root():this._options.root;},_getItemAt:function(t,e){var i=t instanceof Array,r=t._wsDataCollectionIList,n=t._wsDataCollectionIEnumerable,o;if(i)o=t[e];else if(r)o=t.at(e);else if(n){var a=t.getEnumerator(),s,l=0;while(a.moveNext()){if(s=a.getCurrent(),l===e){o=s;break;}l++;}}else throw new TypeError('Unsupported object type: only Array, WS.Data/Collection/IList or WS.Data/Collection/IEnumerable are supported.');if(void 0===o)throw new ReferenceError('Item at '+e+' is out of range.');return o;}});return r.sortItems=function(t,e,i){var r=function(t){return t.join('.');},n=function(t){return s[r(t)];},o=function(t,i){var r=n(t),o=n(i);return e.indexOf(r)-e.indexOf(o);},a=i.indexToPath,s={};return a.map(r).forEach(function(t,e){s[t]=e;}),e.slice().sort(function(t,e){var i=a[t],r=a[e],n=i.length,s=r.length,l=Math.min(n,s),h=0,u;for(u=0;u<l;u++){if(i[u]===r[u])continue;if(h=o(i.slice(0,1+u),r.slice(0,1+u)),0!==h)break;}if(0===h&&n!==s)h=n-s;return h;});},r;}(exports['WS.Data/Display/ItemsStrategy/Abstract'],require(deps[15]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/GroupItem',{configurable:true,get:function(){delete exports['WS.Data/Display/GroupItem'];return exports['WS.Data/Display/GroupItem']=function(e,t){'use strict';var n=e.extend({_moduleName:'WS.Data/Display/GroupItem',_$expanded:true,_instancePrefix:'group-item-',constructor:function e(t){e.superclass.constructor.call(this,t),this._$expanded=!!this._$expanded;},isExpanded:function(){return this._$expanded;},setExpanded:function(e,t){if(this._$expanded===e)return;if(this._$expanded=e,!t)this._notifyItemChangeToOwner('expanded');},toggleExpanded:function(){this.setExpanded(!this.isExpanded());}});return t.register('display.group-item',n),n;}(exports['WS.Data/Display/CollectionItem'],require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/Search',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/Search'];return exports['WS.Data/Display/ItemsStrategy/Search']=function(t,e){'use strict';var n=t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/Search',_source:null,get source(){return this._source;},constructor:function t(e){this._source=e;},getOptions:function(){return this._source.getOptions();},at:function(t){return this._source.at(t);},getCount:function(){return this._source.getCount();},getItems:function(){return this._source.getItems();},getItemIndex:function(t){return this._source.getItemIndex(t);},getCollectionIndex:function(t){return this._source.getCollectionIndex(t);},splice:function(t,e,n){return this._source.splice(t,e,n);},reset:function(){return this._source.reset();},addSorters:function(t){this._source.addSorters(t),t.push({name:'tree',enabled:true,method:n.sortItems,options:this._options});},convertToItem:function(t,e){return this._source.convertToItem(t,e);},getItemModule:function(){return this._source.getItemModule();}});return n.sortItems=function(t,n){var r,s,o,u,i,c;return n.filter(function(n,a){if(r=t[a],o=t[a+1],s=r&&r.isNode?r.isNode():false,u=o&&o.isNode?o.isNode():false,c=true,s){i=i||new e();var f=r.getContents();if(i.push(f instanceof e?f.last:f),u)c=r.getLevel()>=o.getLevel();}if(c&&i)i.finalize(),r.setContents(i),i=void 0;return c;});},n;}(require(deps[0]),exports['WS.Data/Display/Breadcrumbs']);}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/Group',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/Group'];return exports['WS.Data/Display/ItemsStrategy/Group']=function(t,e){'use strict';return t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/Group',_source:null,_groups:null,_items:null,get source(){return this._source;},get groups(){return this._groups;},constructor:function t(e){this._source=e,this._groups=[];},addGroup:function(t,e){if(this._items=null,void 0===e)this._groups.push(t);else this._groups.splice(e,0,t);},removeGroup:function(t){this._items=null;var e=this._groups.indexOf(t);return-1===e?void 0:this._groups.splice(e,1)[0];},getOptions:function(){return this._source.getOptions();},at:function(t){if(this._isGroup(t))return this._groups[t];else return this._source.at(t-this._groups.length);},getCount:function(){return this._groups.length+this._source.getCount();},getItems:function(){if(!this._items)this._items=this._groups.concat(this._source.getItems());return this._items;},setItems:function(t){this._items=null,this._groups=t.filter(function(t){return t instanceof e;}),this._source.setItems(t.filter(function(t){return!(t instanceof e);}));},getItemIndex:function(t){if(isNaN(parseInt(t,10)))return-1;return t=this._source.getItemIndex(t),-1===t?t:this._groups.length+t;},getCollectionIndex:function(t){return this._source.getCollectionIndex(t-this._groups.length);},splice:function(t,e,s){return this._items=null,this._source.splice(Math.max(t-this._groups.length,0),e,s);},reset:function(){return this._groups=[],this._items=null,this._source.reset();},addSorters:function(t){return this._source.addSorters(t);},convertToItem:function(t,e){return this._source.convertToItem(t,e);},getItemModule:function(){return this._source.getItemModule();},_isGroup:function(t){return t<this._groups.length;}});}(require(deps[0]),exports['WS.Data/Display/GroupItem']);}});
Object.defineProperty(exports,'WS.Data/Display/LoadableTreeItem',{configurable:true,get:function(){delete exports['WS.Data/Display/LoadableTreeItem'];return exports['WS.Data/Display/LoadableTreeItem']=function(e,t,r,o,i){'use strict';var n=e.extend([t,r],{_moduleName:'WS.Data/Display/LoadableTreeItem',_loaded:false,_query:void 0,_queryChanged:false,getQuery:function(){return this._query||(this._query=this._getSourceCollection().getQuery().clone());},setQuery:function(e){this._query=e;},fetch:function(){return this._getSourceCollection().fetch();},getSource:function(){return this._getSourceCollection().getSource();},setSource:function(){throw new Error('Source is read only for display');},isLoaded:function(){if(this._loaded)return true;return this.getOwner().getChildren(this).getCount()>0;},isQueryChanged:function(){return this._queryChanged;},getQueryTotal:function(){return this._getSourceCollection().getQueryTotal();},hasMore:function(){return this._getSourceCollection().hasMore();},load:function(e){this._queryChanged=false,this._loaded=true;var t=this.getOwner().getParentProperty(),o=this.getOwner().getIdProperty();if(t){var n=o&&i.getItemPropertyValue(this.getContents(),o);if(void 0!==n){var u=this._getSourceCollection().getQuery(),a=u.getWhere();a[t]=n,u.where(a),this._getSourceCollection().load(r.MODE_APPEND);}}}});return o.register('display.loadable-tree-item',n),n;}(exports['WS.Data/Display/TreeItem'],require(deps[20]),require(deps[21]),require(deps[3]),require(deps[15]));}});
Object.defineProperty(exports,'WS.Data/Display/TreeChildren',{configurable:true,get:function(){delete exports['WS.Data/Display/TreeChildren'];return exports['WS.Data/Display/TreeChildren']=function(e,r,n){'use strict';var t=e.extend({_moduleName:'WS.Data/Display/TreeChildren',_$owner:null,constructor:function e(n){if(e.superclass.constructor.call(this,n),!(this._$owner instanceof Object))throw new TypeError('Tree children owner should be an object');if(!(this._$owner instanceof r))throw new TypeError('Tree children owner should be an instance of WS.Data/Display/TreeItem');},getOwner:function(){return this._$owner;}});return n.register('display.tree-children',t),t;}(require(deps[16]),exports['WS.Data/Display/TreeItem'],require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/ItemsStrategy/AdjacencyList',{configurable:true,get:function(){delete exports['WS.Data/Display/ItemsStrategy/AdjacencyList'];return exports['WS.Data/Display/ItemsStrategy/AdjacencyList']=function(t,e,r,o,n,i){'use strict';var s=t.extend({_moduleName:'WS.Data/Display/ItemsStrategy/AdjacencyList',constructor:function t(e,r){if(r=r||{},t.superclass.constructor.call(this,e,r),!r.idProperty)n.logger.info(this._moduleName+'::constructor(): option "idProperty" is not defined - only root elements will be fetched');},addSorters:function(t){s.superclass.addSorters.call(this,t),t.push({name:'tree',enabled:true,method:s.sortItems,options:this._options});},convertToItem:function(t,e){var r=this._options.loadedProperty,o=false,s;if('string'===typeof r&&'!'===r[0])r=r.substr(1),o=true;if(s=n.getItemPropertyValue(t,r),e=e||{},e.contents=t,e.owner=this._display,e.loaded=o?!s:s,!('node'in e))e.node=n.getItemPropertyValue(t,this._options.nodeProperty);return i.resolve(this.getItemModule(),e);}});return s.sortItems=function(t,i,a){var l=Array.prototype.push,u='function'===typeof a.root?a.root():a.root,p=a.idProperty,f=a.parentProperty,c=new o(),d=new o(),y=new r(),h,g,m=function(e){var r=[],o=e.getContents(),i,a=e.isRoot(),u,g,S,D,v,I;if(a&&o instanceof Object)o=o.valueOf();if(i=o instanceof Object?n.getItemPropertyValue(o,p):o,'number'===typeof i)i=String(i);if(S=c.has(i)?c.get(i):[],D=S.length,0===D&&null===i&&a)D=(S=c.has(void 0)?c.get(void 0):[]).length;if(y.has(i))n.logger.error(s.prototype._moduleName+': recursive traversal detected: parent with id "'+i+'" is already in progress.');else for(I=0;I<D;I++){if(v=S[I],g=t[v],g)g.setParent(e,true);if(d.has(v))h=d.get(v),r.push(h);if(r.push(v),g&&p&&f)if(u=h,y.add(i),l.apply(r,m(g)),y.delete(i),u!==h&&I<D-1)h=u,r.push(h);}return r;};if(function(){var r,o,s,a,l=-1,p,y;for(r=0,o=i.length;r<o;r++){if(a=i[r],s=t[a],s instanceof e){l=a;continue;}if(l>-1)d.set(a,l),l=-1;if(s===u)continue;if(y=n.getItemPropertyValue(s.getContents(),f),'number'===typeof y)y=String(y);if(c.has(y))p=c.get(y);else p=[];p.push(a),c.set(y,p);}}(),g=m(u),t[0]===u)g.unshift(0);return c.clear(),d.clear(),g;},s;}(exports['WS.Data/Display/ItemsStrategy/Direct'],exports['WS.Data/Display/GroupItem'],require(deps[14]),require(deps[17]),require(deps[15]),require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/Collection',{configurable:true,get:function(){delete exports['WS.Data/Display/Collection'];return exports['WS.Data/Display/Collection']=function(t,e,i,r,n,s,o,u,h,a,l,f,c,_,g){'use strict';var p=o.extend([t,e,n,r,i],{_moduleName:'WS.Data/Display/Collection',_sessionItemContentsGetter:'getContents',_localize:true,_$collection:null,_$filter:null,_$group:null,_$sort:null,_$idProperty:'',_$unique:false,_$importantItemProperties:null,_itemModule:'display.collection-item',_itemsStrategy:null,_itemsGroupStrategy:null,_sourceCollectionSynchronized:true,_sourceCollectionDelayedCallbacks:null,_filterMap:null,_groupMap:null,_sorters:null,_sortMap:null,_cursorEnumerator:null,_utilityEnumerator:null,_onSourceCollectionChange:null,_onSourceCollectionItemChange:null,_onSourceCollectionEventRaisingChange:null,constructor:function t(e){if(this._$importantItemProperties=[],this._$filter=[],this._$sort=[],this._filterMap=[],this._sortMap=[],this._groupMap=[],t.superclass.constructor.call(this,e),i.constructor.call(this,e),!this._$collection)throw new Error(this._moduleName+': source collection is empty');if(this._$collection instanceof Array)this._$collection=_.create('collection.list',{items:this._$collection});if(!this._$collection._wsDataCollectionIEnumerable)throw new TypeError(this._moduleName+': source collection should implement WS.Data/Collection/IEnumerable');if('function'===typeof this._$sort)this._$sort=[this._$sort];if(this._$sort=this._$sort instanceof Array?this._$sort.filter(function(t){return'function'===typeof t;}):[],'function'===typeof this._$filter)this._$filter=[this._$filter];if(this._$filter=this._$filter instanceof Array?this._$filter.filter(function(t){return'function'===typeof t;}):[],this._$idProperty)this._setImportantProperty(this._$idProperty);if(this._publish('onCurrentChange','onCollectionChange','onBeforeCollectionChange','onAfterCollectionChange'),this._initSorters(),this._switchSortersByUserSort(),this._switchSorterInner('group',this._isGrouped()),this._reBuild(),this._bindHandlers(),this._$collection._wsDataCollectionIBind)this._$collection.subscribe('onCollectionChange',this._onSourceCollectionChange),this._$collection.subscribe('onCollectionItemChange',this._onSourceCollectionItemChange);if(this._$collection._wsDataCollectionEventRaisingMixin)this._$collection.subscribe('onEventRaisingChange',this._onSourceCollectionEventRaisingChange);},destroy:function(){if(!this._$collection.isDestroyed()){if(this._$collection._wsDataCollectionIBind)this._$collection.unsubscribe('onCollectionChange',this._onSourceCollectionChange),this._$collection.unsubscribe('onCollectionItemChange',this._onSourceCollectionItemChange);if(this._$collection._wsDataCollectionEventRaisingMixin)this._$collection.unsubscribe('onEventRaisingChange',this._onSourceCollectionEventRaisingChange);}this._unbindHandlers(),this._itemsStrategy=null,this._itemsGroupStrategy=null,this._filterMap=[],this._sortMap=[],this._groupMap=[],this._cursorEnumerator=null,this._utilityEnumerator=null,p.superclass.destroy.call(this);},getByInstanceId:function(t){return this.at(this._getUtilityEnumerator().getIndexByValue('instanceId',t));},getIndexByInstanceId:function(t){return this._getUtilityEnumerator().getIndexByValue('instanceId',t);},getEnumerator:function(){return this._getEnumerator();},each:function(t,e){var i=this.getEnumerator(),r;while(i.moveNext())r=i.getCurrentIndex(),t.call(e,i.getCurrent(),r);},assign:function(){throw new Error(m);},append:function(){throw new Error(m);},prepend:function(){throw new Error(m);},clear:function(){throw new Error(m);},add:function(){throw new Error(m);},at:function(t){return this._getUtilityEnumerator().at(t);},remove:function(){throw new Error(m);},removeAt:function(){throw new Error(m);},replace:function(){throw new Error(m);},move:function(){throw new Error(m);},getIndex:function(t){if(!(t instanceof u))return-1;return this.getIndexByInstanceId(t.getInstanceId());},getCount:function(t){var e=0;if(t&&this._isGrouped())this.each(function(t){if(!(t instanceof h))e++;});else e=this._getUtilityEnumerator().getCount();return e;},_getSerializableState:function(t){return t=r._getSerializableState.call(this,t),t.items=this._getItems(),t;},_setSerializableState:function(t){var e=r._setSerializableState(t);return function(){e.call(this);var i=t.items;this._getItemsStrategy().setItems(i);for(var r=0,n=i.length;r<n;r++)i[r].setOwner(this);this._reIndex(),this._reAnalize();};},getCollection:function(){return this._$collection;},getCollectionCount:function(){var t=this.getCollection();if(t._wsDataCollectionIList)return t.getCount();var e=t.getEnumerator(),i=0;e.reset();while(e.moveNext())i++;return i;},getItems:function(){return this._getItems().slice();},getCurrent:function(){return this._getCursorEnumerator().getCurrent();},setCurrent:function(t,e){var i=this.getCurrent();if(i!==t){var r=this._getCursorEnumerator(),n=this.getCurrentPosition();if(r.setCurrent(t),!e)this._notifyCurrentChange(this.getCurrent(),i,r.getPosition(),n);}},getCurrentPosition:function(){return this._getCursorEnumerator().getPosition();},setCurrentPosition:function(t,e){var i=this.getCurrentPosition();if(t!==i){var r=this.getCurrent();if(this._getCursorEnumerator().setPosition(t),!e)this._notifyCurrentChange(this.getCurrent(),r,t,i);}},getFirst:function(){var t=this._getUtilityEnumerator(),e;if(t.setPosition(0),e=t.getCurrent(),e instanceof h)return this._getNearbyItem(t,e,true,true);return e;},getLast:function(){var t=this._getUtilityEnumerator(),e=t.getCount()-1,i;if(t.setPosition(e),i=t.getCurrent(),i instanceof h)return this._getNearbyItem(t,void 0,false,true);return i;},getNext:function(t){return this._getNearbyItem(this._getUtilityEnumerator(),t,true,true);},getPrevious:function(t,e){return this._getNearbyItem(this._getUtilityEnumerator(),t,false,true);},moveToNext:function(){var t=this.getCurrent(),e=this.getCurrentPosition(),i=this._getCursorEnumerator().moveNext();if(i)this._notifyCurrentChange(this.getCurrent(),t,this.getCurrentPosition(),e);return i;},moveToPrevious:function(){var t=this.getCurrent(),e=this.getCurrentPosition(),i=this._getCursorEnumerator().movePrevious();if(i)this._notifyCurrentChange(this.getCurrent(),t,this.getCurrentPosition(),e);return i;},moveToFirst:function(){if(0===this.getCurrentPosition())return false;return this.setCurrentPosition(0),0===this._getCursorEnumerator().getPosition();},moveToLast:function(){var t=this.getCount()-1;if(this.getCurrentPosition()===t)return false;return this.setCurrentPosition(t),this.getCurrentPosition()===t;},getSourceIndexByIndex:function(t){var e=this._getUtilityEnumerator().getSourceByInternal(t);return e=void 0===e||null===e?-1:e,this._getSourceIndex(e);},getSourceIndexByItem:function(t){var e=this.getIndex(t);return-1===e?-1:this.getSourceIndexByIndex(e);},getIndexBySourceIndex:function(t){t=this._getItemIndex(t);var e=this._getUtilityEnumerator().getInternalBySource(t);return void 0===e||null===e?-1:e;},getIndexBySourceItem:function(t){var e=this.getCollection(),i=-1;if(e&&e._wsDataCollectionIList)i=e.getIndex(t);else e.each(function(e,r){if(-1===i&&e===t)i=r;},this,this._localize);return-1===i?-1:this.getIndexBySourceIndex(i);},getItemBySourceIndex:function(t){return t=this.getIndexBySourceIndex(t),-1===t?void 0:this.at(t);},getItemBySourceItem:function(t){var e=this.getIndexBySourceItem(t);return-1===e?void 0:this.at(e);},getFilter:function(){return this._$filter.slice();},setFilter:function(){var t;if(arguments[0]instanceof Array)t=arguments[0];else t=Array.prototype.slice.call(arguments);if(this._$filter.length===t.length){for(var e=false,i=0;i<t.length;i++)if(this._$filter[i]!==t[i]){e=true;break;}if(!e)return;}this._$filter=t.filter(function(t){return'function'===typeof t;});var r=this._startUpdateSession();this._reFilter(),this._removeEmptyGroups(),this._finishUpdateSession(r);},addFilter:function(t,e){if(this._$filter.indexOf(t)>-1)return;if(void 0===e)this._$filter.push(t);else this._$filter.splice(e,0,t);var i=this._startUpdateSession();this._reFilter(),this._removeEmptyGroups(),this._finishUpdateSession(i);},removeFilter:function(t){var e=this._$filter.indexOf(t);if(-1===e)return false;this._$filter.splice(e,1);var i=this._startUpdateSession();return this._reFilter(),this._removeEmptyGroups(),this._finishUpdateSession(i),true;},getGroup:function(){return this._$group;},setGroup:function(t){if(this._$group===t)return;var e=this._startUpdateSession();if(this._$group=t,this._switchSorterInner('group',this._isGrouped()),this._resetGroups(),this._isGrouped())this._reGroup();if(this._reSort(),this._isFiltered())this._reFilter();this._removeEmptyGroups(),this._finishUpdateSession(e);},getGroupItems:function(t){var e=this._filterMap,i=this._sortMap,r=this._groupMap,n=this._itemsGroupStrategy.groups.reduce(function(e,i,r){return-1===e?i.getContents()===t?r:-1:e;},-1),s=[],o=this._getItems(),u,a;if(n>-1){for(u=0;u<r.length;u++)if(r[u]===n&&e[u])if(a=i.indexOf(u),a>-1&&!(o[u]instanceof h))s.push(a);s.sort(function(t,e){return t-e;});}return s.map(function(t){return o[i[t]];});},getGroupByIndex:function(t){var e=this._getGroupIndexByIndex(t);return this._getGroupIdByIndex(e);},getSort:function(){return this._$sort.slice();},setSort:function(){var t;if(arguments[0]instanceof Array)t=arguments[0];else t=Array.prototype.slice.call(arguments);if(this._$sort.length===t.length){for(var e=false,i=0;i<t.length;i++)if(this._$sort[i]!==t[i]){e=true;break;}if(!e)return;}this._$sort=t.filter(function(t){return'function'===typeof t;});var r=this._startUpdateSession();if(this._switchSortersByUserSort(),this._reSort(),this._isFiltered())this._reFilter(),this._removeEmptyGroups();this._finishUpdateSession(r);},addSort:function(t,e){if(this._$sort.indexOf(t)>-1)return;if(void 0===e)this._$sort.push(t);else this._$sort.splice(e,0,t);var i=this._startUpdateSession();if(this._switchSortersByUserSort(),this._reSort(),this._isFiltered())this._reFilter(),this._removeEmptyGroups();this._finishUpdateSession(i);},removeSort:function(t){var e=this._$sort.indexOf(t);if(-1===e)return false;this._$sort.splice(e,1);var i=this._startUpdateSession();if(this._switchSortersByUserSort(),this._reSort(),this._isFiltered())this._reFilter(),this._removeEmptyGroups();return this._finishUpdateSession(i),true;},switchSorter:function(t,e){if(this._switchSorterInner(t,e))this._reSort();},isSorterEnabled:function(t){for(var e=0;e<this._sorters.length;e++)if(this._sorters[e].name===t)return this._sorters[e].enabled;},getIdProperty:function(){return this._$idProperty;},isUnique:function(){return this._$unique;},setUnique:function(t){if(this._$unique===t)return;this._$unique=t;var e=this._startUpdateSession();this._reSort(),this._finishUpdateSession(e);},notifyItemChange:function(t,e){var i=this._isFiltered(),r=this._isGrouped();if(i||r){var s;if(s=this._startUpdateSession(),r)this._reGroup(),this._reSort();if(i)this._reFilter();this._removeEmptyGroups(),this._finishUpdateSession(s);}if(!this.isEventRaising())return;var o=this.getIndex(t),u=[t];u.properties=e,this._notifyBeforeCollectionChange(),this._notifyCollectionChange(n.ACTION_CHANGE,u,o,u,o),this._notifyAfterCollectionChange();},_analizeUpdateSession:function(t){if(t)this._notifyBeforeCollectionChange();if(i._analizeUpdateSession.call(this,t),t)this._notifyAfterCollectionChange();},_notifyCollectionChange:function(t,e,r,s,o,u){if(!this._isNeedNotifyCollectionChange())return;if(!u||t===n.ACTION_RESET||!this._isGrouped())return void i._notifyCollectionChange.call(this,t,e,r,s,o);var a=function(i,n){if(i<n)this._notify('onCollectionChange',t,e.slice(i,n),e.length?r+i:0,s.slice(i,n),s.length?o+i:0);}.bind(this),l=t===n.ACTION_REMOVE,f=l?s.length:e.length,c=0,_,g;for(g=0;g<f;g++){if(_=l?s[g]:e[g],_ instanceof h)a(c,g),c=g;if(g===f-1)a(c,g+1);}},getSelectedItems:function(){for(var t=this._getItems(),e=[],i=t.length-1;i>=0;i--)if(t[i].isSelected())e.push(t[i]);return e;},setSelectedItems:function(t,e){for(var i=[],r=0,n=t.length;r<n;r++)i.push(this.getItemBySourceItem(t[r]));this._setSelectedItems(i,e);},setSelectedItemsAll:function(t){this._setSelectedItems(this._getItems(),t);},invertSelectedItemsAll:function(){var t=this._getItems(),e;for(e=t.length-1;e>=0;e--)t[e].setSelected(!t[e].isSelected(),true);this._notifyCollectionChange(n.ACTION_RESET,t,0,t,0);},_setSelectedItems:function(t,e){var i=[];e=!!e;for(var r=t.length-1;r>=0;r--)if(t[r].isSelected()!==e)t[r].setSelected(e,true),i.push(t[r]);if(i.length>0){var s=this.getIndex(i[0]);this._notifyCollectionChange(n.ACTION_REPLACE,i,s,i,s);}},_setImportantProperty:function(t){if(-1===this._$importantItemProperties.indexOf(t))this._$importantItemProperties.push(t);},_unsetImportantProperty:function(t){var e=this._$importantItemProperties.indexOf(t);if(-1!==e)this._$importantItemProperties.splice(e,1);},_bindHandlers:function(){this._onSourceCollectionChange=C.bind(this),this._onSourceCollectionItemChange=y.bind(this),this._onSourceCollectionEventRaisingChange=I.bind(this);},_unbindHandlers:function(){this._onSourceCollectionChange=null,this._onSourceCollectionItemChange=null,this._onSourceCollectionEventRaisingChange=null;},_getItems:function(){return this._getItemsStrategy().getItems();},_getItemsStrategy:function(){if(this._itemsStrategy)return this._itemsStrategy;return this._itemsStrategy=this._createItemsStrategy(),this._wrapItemsStrategy(),this._itemsStrategy;},_createItemsStrategy:function(){return new a(this,{itemModule:this._itemModule,localize:this._localize});},_wrapItemsStrategy:function(){if(this._itemsStrategy){if(!this._itemsGroupStrategy)this._itemsGroupStrategy=new l(this._itemsStrategy);if(!(this._itemsStrategy instanceof l))this._itemsStrategy=this._itemsGroupStrategy;}},_getEnumerator:function(t){return this._buildEnumerator(t?this._getItems().slice():this._getItems.bind(this),t?this._filterMap.slice():this._filterMap,t?this._sortMap.slice():this._sortMap);},_buildEnumerator:function(t,e,i){return new s({items:t,filterMap:e,sortMap:i});},_getCursorEnumerator:function(){return this._cursorEnumerator||(this._cursorEnumerator=this._getEnumerator());},_getUtilityEnumerator:function(){return this._utilityEnumerator||(this._utilityEnumerator=this._getEnumerator());},_getNearbyItem:function(t,e,i,r){var n=i?'moveNext':'movePrevious',s;t.setCurrent(e);while(t[n]()){if(s=t.getCurrent(),r&&s instanceof h){s=void 0;continue;}break;}return s;},_getItemIndex:function(t){return this._getItemsStrategy().getItemIndex(t);},_getSourceIndex:function(t){return this._getItemsStrategy().getCollectionIndex(t);},_reBuild:function(t){this._groupMap.length=0,this._filterMap.length=0,this._reIndex();var e=this._getItemsStrategy(),i,r;if(t)e.reset();for(i=e.getCount(),r=0;r<i;r++)this._filterMap.push(true);if(this._isGrouped())this._reGroup();if(this._reSort(),this._isFiltered())this._reFilter();this._removeEmptyGroups();},_reAnalize:function(t,e){t=t||0,e=e||this._getItemsStrategy().getCount()-t;var i=this._startUpdateSession();if(this._isGrouped())t=this._reGroup(t,e);if(this._reSort(),this._isFilteredByIndex())this._reFilter();else this._reFilter(t,e);this._removeEmptyGroups(),this._finishUpdateSession(i);},_reIndex:function(){this._getCursorEnumerator().reIndex(),this._getUtilityEnumerator().reIndex();},_reFilter:function(t,e){t=t||0,e=e||this._getItemsStrategy().getCount()-t;var i=function(t,e,i,r){var o=true,u,h;for(h=0;h<s;h++)if(u=n[h],o=u(t.getContents(),e,t,i,r),!o)break;return o;},r=function(t,e){var i=l[e];if(t===i)return false;if(t)return l[e]=t,true;else if(void 0!==i)return l[e]=t,true;return false;},n=this._$filter,s=n.length,o=this._getItems(),u=this._sortMap,a=u.length,l=this._filterMap,f=new c(),_=t+e,g=false,p,m,d,C,y=-1,I=-1,S=false,v;for(m=0;m<a;m++){if(d=u[m],void 0===d||d<t||d>=_)continue;if(f.add(d),p=o[d],v=true,p instanceof h){if(C)g=r(v=i(C,y,I,S),y)||g;C=p,y=d,I=m,S=false;}else if(v=i(p,d,m),g=r(v,d)||g,v)S=true;}for(d=t;d<_;d++)if(!f.has(d))l[d]=void 0;if(C)g=r(v=i(C,y,I,S),y)||g;if(g)this._reIndex();},_reSort:function(){this._sortMap.length=0,Array.prototype.push.apply(this._sortMap,this._buildSortMap()),this._reIndex();},_initSorters:function(){this._sorters=[{name:'natural',enabled:true,method:p.sorters.natural,options:function(){return{idProperty:this._$idProperty,unique:this._$unique};}},{name:'user',enabled:false,method:p.sorters.user,options:function(){return{userSort:this._$sort};}},{name:'group',enabled:false,method:p.sorters.group,options:function(){return{groupMap:this._groupMap};}}],this._getItemsStrategy().addSorters(this._sorters);},_switchSortersByUserSort:function(){var t=this._isUserSorted();return this._switchSorterInner('user',t);},_switchSorterInner:function(t,e){var i=function(t){var e,i,r,n;for(r=0;r<this._$sort.length;r++)if(e=this._$sort[r],f.isFunctor(e))for(i=e.properties,n=0;n<i.length;n++)if(t)this._setImportantProperty(i[n]);else this._unsetImportantProperty(i[n]);}.bind(this),r=false,n,s;for(s=0;s<this._sorters.length;s++)if(n=this._sorters[s],n.name===t&&n.enabled!==e)if(n.enabled=e,r=true,'user'===t)i(e);return r;},_buildSortMap:function(){var t,e,i=this._getItems(),r=[];for(t=0;t<this._sorters.length;t++)if(e=this._sorters[t],e.enabled)r=e.method.call(null,i,r,('function'===typeof e.options?e.options.call(this):e.options)||{});return r;},_reGroup:function(t,e){t=t||0,e=e||this._getItemsStrategy().getCount()-t;var i=function(t){return function(e){return e>=t?1+e:e;};},r=0,n=this._itemsGroupStrategy,s=this._getItems().slice(),o=t+e,u=this._filterMap,a=this._sortMap,l=this._groupMap,f=this._$group,c,_,g,p,m,d,C,y;for(_=n.groups.map(function(t){return t.getContents();}),C=l.slice(0,t).reduce(function(t,e,i){return s[i]instanceof h?t:Math.max(t,e);},-1),d=t;d<o;d++){if(m=s[d],m instanceof h)g=m.getContents(),p=_.indexOf(g),l[d]=p;else{if(g=f?f(m.getContents(),d,m):void 0,p=_.indexOf(g),-1===p){if(p=1+C,c=new h({owner:this,contents:g}),n.addGroup(c,p),l=l.map(i(p)),s.splice(p,0,c),_.splice(p,0,g),u.splice(p,0,true),a.splice(p,0,p),l.splice(p,0,p),d>=p)d++,r++;o++;}if(l[d]!==p)y=true;l[d]=p;}C=Math.max(C,p);}if(this._groupMap=l,y)this._reIndex();return t+r;},_removeEmptyGroups:function(){if(this._isFiltered())return;var t=this._getItems().slice(),e=this._filterMap,i=this._sortMap,r=this._$group,n=[],s,o,u,a;if(u=-1,a=false,r){if(i.forEach(function(i,r){if(s=t[i],s instanceof h){if(u>-1){if(!a)n.unshift(u);if(o.getContents()===s.getContents())n.unshift(r);}o=s,u=r,a=false;}else if(e[i])a=true;}),u>-1&&!a)n.unshift(u);}else i.forEach(function(t,e){if(s instanceof h)n.unshift(e);});if(n.length)n.forEach(function(t){i.splice(t,1);}),this._reIndex();},_resetGroups:function(){this._groupMap.length=0;var t=this._itemsGroupStrategy;t.groups.slice().forEach(function(e){t.removeGroup(e);});},_isFiltered:function(){return this._$filter.length>0;},_isFilteredByIndex:function(){return this._$filter.some(function(t){return this._isFilterUseIndex(t);}.bind(this));},_isFilterUseIndex:function(t){return t.length>3;},_isUserSorted:function(){return this._$sort.length>0;},_isGrouped:function(){return!!this._$group;},_getGroupIdByIndex:function(t){var e=this._itemsGroupStrategy.groups[t];return e&&e.getContents();},_getGroupIndexByIndex:function(t){var e=this._getUtilityEnumerator().getSourceByInternal(t),i=this._groupMap[e];return void 0===i?-1:i;},_addItems:function(t,e){var i=this._isFiltered(),r=Array.prototype.splice,n=this._getItemsStrategy(),s=[],o=[],u=[];if(e.forEach(function(e,r){s.push(!i),o.push(t+r),u.push(void 0);}),n.splice(t,0,e),r.apply(this._filterMap,[t,0].concat(s)),r.apply(this._sortMap,[t,0].concat(o)),this._isGrouped())r.apply(this._groupMap,[t,0].concat(u));},_removeItems:function(t,e){var i=this._getItemsStrategy(),r;if(t=t||0,e=void 0===e?i.getCount()-t:e,r=i.splice(t,e),this._filterMap.splice(t,e),this._removeFromSortMap(t,e),this._isGrouped())this._groupMap.splice(t,e);return r;},_replaceItems:function(t,e){return this._getItemsStrategy().splice(t,e.length,e);},_moveItems:function(t,e,i){var r=i.length,n=this._getItemsStrategy(),s;s=n.splice(e,r),n.splice(t,0,s);},_removeFromSortMap:function(t,e){var i=(t=t||0)+(e=e||0),r,n,s=[],o={};for(r=t;r<i;r++)if(n=this._sortMap.indexOf(r),n>-1)s.push(n),o[n]=this._sortMap[n];for(s.sort(function(t,e){return t-e;}),r=s.length-1;r>=0;r--)this._sortMap.splice(s[r],1);for(r=0;r<this._sortMap.length;r++)if(this._sortMap[r]>=t)this._sortMap[r]-=e;return this._reIndex(),o;},_getItemState:function(t){return{item:t,selected:t.isSelected()};},_getItemsState:function(t){return t.map(this._getItemState);},_getItemsDiff:function(t,e){var i;return e.filter(function(e,r){return i=t[r],Object.keys(e).some(function(t){return e[t]!==i[t];});}).map(function(t){return t.item;});},_checkItemsDiff:function(t,e,r,s){var o=r?this._getItemsDiff(r,this._getItemsState(e)):[];if(s)s(o,e);if(o.length)this._notifyBeforeCollectionChange(),i._extractPacksByList(this,o,function(e,i){this._notifyCollectionChange(n.ACTION_CHANGE,e,i,e,i,t);}.bind(this)),this._notifyAfterCollectionChange();},_notifyCurrentChange:function(t,e,i,r){if(!this.isEventRaising())return;this._removeFromQueue('onCurrentChange'),this._notify('onCurrentChange',t,e,i,r);},_notifyCollectionItemsChange:function(t,e,r){var s=this._getItems(),o=e+t.length,u=[],h;for(h=e;h<o;h++)u.push(s[this._getItemIndex(h)]);i._extractPacksByList(this,u,function(t,e){this._notifyCollectionChange(n.ACTION_CHANGE,t,e,t,e,r);}.bind(this));},_notifySourceCollectionItemChange:function(t,e,i,r){var n=this._getItems(),s=this._getItemIndex(i),o=n[s],u=this._getUtilityEnumerator(),h=u.getInternalBySource(s),a=this.isEventRaising(),l=this._startUpdateSession(),f;for(var c in r)if(r.hasOwnProperty(c))if(this._$importantItemProperties.indexOf(c)>-1){if(a)f=this._getItemsState(n);this._reAnalize(s,1);break;}if(!a)return;this._finishUpdateSession(l,false),this._checkItemsDiff(l,n,f,function(t){var e=u.getInternalBySource(s),i=h!==e,r=t.indexOf(o);if(i){if(r>-1&&h>e)t.splice(r,1);else if(-1===r&&h<e)t.push(o);}else if(!i&&-1===r)t.push(o);});},_notifyBeforeCollectionChange:function(){if(!this.isEventRaising())return;this._notify('onBeforeCollectionChange');},_notifyAfterCollectionChange:function(){if(!this.isEventRaising())return;this._notify('onAfterCollectionChange');}}),m='The Display is read only. You should modify the source collection instead.',d=function(t){var e=[];return t.each(function(t){e.push(t);}),e;},C=function(t,e,i,r,s,o){var u=this._getItemIndex(r),h=this._getItemIndex(o),a;switch(e){case n.ACTION_RESET:var l=d(this),f;return this._reBuild(true),f=d(this),this._notifyBeforeCollectionChange(),this._notifyCollectionChange(e,f,0,l,0),void this._notifyAfterCollectionChange();case n.ACTION_CHANGE:if(a=this._startUpdateSession(),this._isGrouped())u=this._reGroup(u,i.length);if(this._reSort(),this._isFiltered())this._reFilter(u,i.length);if(this._isGrouped())this._removeEmptyGroups();return this._notifyBeforeCollectionChange(),this._finishUpdateSession(a,false),this._notifyCollectionItemsChange(i,r,a),void this._notifyAfterCollectionChange();}switch(a=this._startUpdateSession(),e){case n.ACTION_ADD:if(this._addItems(u,i),this._isGrouped())u=this._reGroup(u,i.length);if(this._reSort(),this._isFiltered())if(this._isFilteredByIndex())this._reFilter();else this._reFilter(u,i.length);if(this._isGrouped())this._removeEmptyGroups();break;case n.ACTION_REMOVE:if(this._removeItems(h,s.length),this._reSort(),this._isFiltered()&&this._isFilteredByIndex())this._reFilter();if(this._isGrouped())this._removeEmptyGroups();break;case n.ACTION_REPLACE:if(this._replaceItems(u,i),this._isGrouped())u=this._reGroup(u,i.length);if(this._reSort(),this._isFiltered())this._reFilter(u,i.length);if(this._isGrouped())this._removeEmptyGroups();break;case n.ACTION_MOVE:if(this._moveItems(u,h,i),this._reSort(),this._isFiltered())this._reFilter();if(this._isGrouped())this._removeEmptyGroups();}this._finishUpdateSession(a);},y=function(t,e,i,r){if(!this.isEventRaising())return;if(this._sourceCollectionSynchronized)this._notifySourceCollectionItemChange(t,e,i,r);else this._sourceCollectionDelayedCallbacks=this._sourceCollectionDelayedCallbacks||[],this._sourceCollectionDelayedCallbacks.push([this._notifySourceCollectionItemChange,arguments]);},I=function(t,e,i){if(!i&&e)this._reBuild(true);this._sourceCollectionSynchronized=e;var r=this._sourceCollectionDelayedCallbacks,n;if(this._sourceCollectionSynchronized&&r)while(r.length>0)(n=r[0])[0].apply(this,n[1]),r.shift();};return p.sorters={natural:function(t,e,i){var r=i.unique,n=i.idProperty,s=t.map(function(t,e){return e;});if(r&&n){var o=new c(),u,a;s=s.filter(function(e){if(u=t[e],u instanceof h)return true;if(a=g.getItemPropertyValue(u.getContents(),n),o.has(a))return false;return o.add(a),true;});}return s;},user:function(t,e,i){var r=[],n=[],s=i.userSort,o,u,a,l;for(a=0,l=e.length;a<l;a++)if(o=e[a],u=t[o],u instanceof h)r.push(o);else n.push({item:u,collectionItem:u.getContents(),index:o,collectionIndex:o});for(a=s.length-1;a>=0;a--)n.sort(s[a]);for(o=0,l=n.length;o<l;o++)r.push(n[o].collectionIndex);return r;},group:function(t,e,i){var r=i.groupMap,n=[],s=0,o=0,u,a,l,f;for(l=0;l<e.length;l++){if(a=e[l],u=t[a],f=r[a],u instanceof h){o++;continue;}if(void 0===n[f])n[f]=s++;}for(f=0;f<o;f++)if(void 0===n[f])n[f]=s++;return e.map(function(t,e){return[t,e];}).sort(function(t,e){return n[r[t[0]]]-n[r[e[0]]]||t[1]-e[1];}).map(function(t){return t[0];});}},p.prototype.getByHash=p.prototype.getByInstanceId,p.prototype.getIndexByHash=p.prototype.getIndexByInstanceId,_.register('display.collection',p),p;}(require(deps[10]),require(deps[11]),require(deps[12]),require(deps[7]),exports['WS.Data/Display/IBindCollection'],exports['WS.Data/Display/CollectionEnumerator'],exports['WS.Data/Display/Display'],exports['WS.Data/Display/CollectionItem'],exports['WS.Data/Display/GroupItem'],exports['WS.Data/Display/ItemsStrategy/Direct'],exports['WS.Data/Display/ItemsStrategy/Group'],require(deps[13]),require(deps[14]),require(deps[3]),require(deps[15]));}});
Object.defineProperty(exports,'WS.Data/Display/Ladder',{configurable:true,get:function(){delete exports['WS.Data/Display/Ladder'];return exports['WS.Data/Display/Ladder']=function(t,e,n,i,o,s){'use strict';var l=n.extend([i],{_moduleName:'WS.Data/Display/Ladder',_collection:null,_offset:0,_converters:null,_columnNames:null,_column2primaryId:null,_onCollectionChangeHandler:null,constructor:function t(e){if(t.superclass.constructor.call(this),this._columnNames=[],this._onCollectionChangeHandler=this._onCollectionChange.bind(this),e)this.setCollection(e);else this.reset();},destroy:function(){this.setCollection(null),l.superclass.destroy.call(this);},_getSerializableState:function(t){if(t=i._getSerializableState.call(this,t),this._collection)t.$options=this._collection;else delete t.$options;if(this._offset)t._offset=this._offset;if(this._columnNames.length)t._columnNames=this._columnNames;return t;},_setSerializableState:function(t){var e=i._setSerializableState(t);return function(){if(e.call(this),t._offset)this._offset=t._offset;if(t._columnNames)if(this._columnNames=t._columnNames,this._collection)this._checkRange(0,this._collection.getCount());};},getCollection:function(){return this._collection;},setCollection:function(t){if(null!==t&&!(t instanceof e))throw new TypeError('Argument "collection" should be an instance of WS.Data/Display/Collection');var n=t!==this._collection;if(this._collection&&!this._collection.isDestroyed())this._collection.unsubscribe('onCollectionChange',this._onCollectionChangeHandler);if(t&&!t.isDestroyed())t.subscribe('onCollectionChange',this._onCollectionChangeHandler);if(this._collection=t,n)this._columnNames=[],this.reset();},setOffset:function(t){t=parseInt(t,10);var e=this._offset;this._offset=t;var n=this._checkRange(this._offset,2);if(this._notifyPrimaryChanges(n),Math.abs(e-t)>1)n=this._checkRange(e,1),this._notifyPrimaryChanges(n);},reset:function(){this._column2primaryId=new o();},setConverter:function(t,e){this._converters=this._converters||{},this._converters[t]=e;},get:function(t,e){return this.isPrimary(t,e)?s.getItemPropertyValue(t,e):'';},isPrimary:function(t,e){if(!this._collection)return true;this._applyColumn(e);var n=this._getItemId(t),i=this._getColumnData(e),o;if(!i.has(n))o=this._collection.getIndexBySourceItem(t),this._checkRange(o,1);return i.has(n)?!!i.get(n):true;},isLadderColumn:function(t){return this._column2primaryId.has(t);},_applyColumn:function(t){var e=this._columnNames;if(e.indexOf(t)>-1)return;e.push(t);},_getColumnData:function(t){var e=this._column2primaryId;if(e.has(t))return e.get(t);var n=new o();return e.set(t,n),n;},_onCollectionChange:function(e,n,i,o,s,l){var a=Array.prototype.push,r=[],c=function(t){if(t.length){var e=this._columnNames,n,i,o,s;for(n=0;n<e.length;n++)for(i=this._getColumnData(e[n]),o=0;o<t.length;++o)s=this._getCollectionItemId(t[o]),i.delete(s);}}.bind(this),h=function(t,e,n){return e>0?this._checkRange(n-1,t.length+2):[];}.bind(this);switch(n){case t.ACTION_ADD:a.apply(r,h(i,i.length,o));break;case t.ACTION_REMOVE:c(s),a.apply(r,h([],s.length,l));break;case t.ACTION_CHANGE:r=this._checkRange(o-1,3);break;case t.ACTION_MOVE:var u=o-l>0?l:l+i.length;a.apply(r,h([],s.length,u)),a.apply(r,h(i,i.length,o));break;default:c(s),a.apply(r,h(i,i.length,o));}this._notifyPrimaryChanges(r);},_notifyPrimaryChanges:function(t){var e=this._collection,n,i,o,s;s=t.reduce(function(t,s){if(null!==s)n=s[0],i=s[1],o=e.at(n),t[n]=t[n]||{},t[n][i]=this.get(o.getContents(),i);return t;}.bind(this),{});for(n in s)if(s.hasOwnProperty(n))e.notifyItemChange(e.at(n),{contents:s[n]});},_checkRange:function(t,e){var n=[],i=this._columnNames,o,s,l,a;for(s=Math.min(t+e,this._collection.getCount()),t=Math.max(0,t),o=0;o<i.length;o++)for(l=t;l<s;++l)if(a=this._adjustPrimary(l,this._collection.at(l),i[o]),null!==a)n.push(a);return n;},_adjustPrimary:function(t,e,n){if(!e)return null;var i=this._getCollectionItemId(e),o,s,l;if(void 0!==i)if(o=this._getColumnData(n),s=this._isPrimaryIndex(t,n),l=o.get(i),s!==l)return o.set(i,s),[t,n];return null;},_isPrimaryIndex:function(t,e){if(0===t||t===this._offset)return true;var n=this._collection.at(t-1).getContents(),i=this._collection.at(t).getContents(),o=s.getItemPropertyValue(n,e),l=s.getItemPropertyValue(i,e);if(this._converters&&this._converters.hasOwnProperty(e))o=this._converters[e](o,n),l=this._converters[e](l,i);if(o instanceof Object&&l instanceof Object)o=o.valueOf(),l=l.valueOf();return o!==l;},_getCollectionItemId:function(t){return this._getItemId(t.getContents());},_getItemId:function(t){if(t.getInstanceId instanceof Function)return t.getInstanceId();else if(t.getId instanceof Function)return t.getId();else if(t.get instanceof Function)return t.get('id');return t&&t.id;}});return l;}(require(deps[4]),exports['WS.Data/Display/Collection'],require(deps[0]),require(deps[7]),require(deps[17]),require(deps[15]));}});
Object.defineProperty(exports,'WS.Data/Display/Tree',{configurable:true,get:function(){delete exports['WS.Data/Display/Tree'];return exports['WS.Data/Display/Tree']=function(t,e,r,i,n,s,o,a,h){'use strict';var l=t.extend({_moduleName:'WS.Data/Display/Tree',_itemModule:'display.tree-item',_$parentProperty:'',_$nodeProperty:'',_$childrenProperty:'',_$loadedProperty:'',_$root:void 0,_$rootEnumerable:false,_root:null,_childrenMap:{},constructor:function t(e){if(this._childrenMap={},t.superclass.constructor.call(this,e),this._$parentProperty)this._setImportantProperty(this._$parentProperty);if(this._$childrenProperty)this._setImportantProperty(this._$childrenProperty);},destroy:function(){this._childrenMap={},l.superclass.destroy.call(this);},_getSerializableState:function(t){return t=l.superclass._getSerializableState.call(this,t),t._root=this._root,t;},_setSerializableState:function(t){var e=l.superclass._setSerializableState(t);return function(){this._root=t._root,e.call(this);};},moveToNext:function(){return this._moveTo(true);},moveToPrevious:function(){return this._moveTo(false);},getParentProperty:function(){return this._$parentProperty;},setParentProperty:function(t){this._unsetImportantProperty(this._$parentProperty),this._$parentProperty=t,this._getItemsStrategy().getOptions().parentProperty=t,this._setImportantProperty(t),this._reIndex(),this._reAnalize();},getNodeProperty:function(){return this._$nodeProperty;},getChildrenProperty:function(){return this._$childrenProperty;},getLoadedProperty:function(){return this._$loadedProperty;},getRoot:function(){if(null===this._root)if(this._root=this._$root,!(this._root instanceof i))this._root=new i({contents:this._root,owner:this,node:true,expanded:true,loaded:true});return this._root;},setRoot:function(t){this._$root=t,this._root=null,this._reIndex(),this._reAnalize();},isRootEnumerable:function(){return this._$rootEnumerable;},setRootEnumerable:function(t){if(this._$rootEnumerable===t)return;this._$rootEnumerable=t;var e=this._startUpdateSession();if(t)this._wrapRootStrategy();else this._unwrapRootStrategy();this._reSort(),this._reFilter(),this._finishUpdateSession(e);},getChildren:function(t,e){return new n({owner:t,items:this._getChildrenArray(t,e)});},moveToAbove:function(){var t=this.getCurrent();if(!t)return false;var e=t.getParent();if(!e||e.isRoot())return false;return this.setCurrent(e),true;},moveToBelow:function(){var t=this.getCurrent();if(!t||!t.isNode())return false;var e=this._getChildrenArray(t);if(0===e.length)return false;return this.setCurrent(e[0]),true;},_createItemsStrategy:function(){if(this._$childrenProperty)return new o(this,{itemModule:this._itemModule,childrenProperty:this._$childrenProperty,nodeProperty:this._$nodeProperty,loadedProperty:this._$loadedProperty,root:this.getRoot.bind(this)});else return new s(this,{itemModule:this._itemModule,idProperty:this._$idProperty,parentProperty:this._$parentProperty,nodeProperty:this._$nodeProperty,loadedProperty:this._$loadedProperty,root:this.getRoot.bind(this)});},_wrapItemsStrategy:function(){l.superclass._wrapItemsStrategy.call(this),this._wrapRootStrategy();},_wrapRootStrategy:function(){if(this._itemsStrategy&&this._$rootEnumerable&&!(this._itemsStrategy instanceof a))this._itemsStrategy=new a(this._itemsStrategy,this.getRoot.bind(this));},_unwrapRootStrategy:function(){if(this._itemsStrategy&&!this._$rootEnumerable&&this._itemsStrategy instanceof a)this._itemsStrategy=this._itemsStrategy.source;},_reIndex:function(){l.superclass._reIndex.call(this),this._childrenMap={};},_bindHandlers:function(){l.superclass._bindHandlers.call(this),this._onSourceCollectionChange=u.bind({instance:this,prev:this._onSourceCollectionChange}),this._onSourceCollectionItemChange=_.bind({instance:this,prev:this._onSourceCollectionItemChange});},_replaceItems:function(t,e){var r=l.superclass._replaceItems.call(this,t,e),i=this._getItemsStrategy();return r.forEach(function(e,r){i.at(t+r).setExpanded(e.isExpanded(),true);}),r;},_getItemState:function(t){var e=l.superclass._getItemState.call(this,t);if(t instanceof i)e.parent=t.getParent(),e.childrenCount=t.getOwner()._getChildrenArray(t,false).length,e.level=t.getLevel(),e.node=t.isNode(),e.expanded=t.isExpanded();return e;},_checkItem:function(t){if(!t||!(t instanceof r))throw new Error(this._moduleName+'::_checkItem(): item should be in instance of WS.Data/Display/CollectionItem');},_getChildrenArray:function(t,e){this._checkItem(t),e=void 0===e?true:!!e;var r=t.getInstanceId()+'|'+e;if(!(r in this._childrenMap)){var n=[],s;if(e)s=this.getEnumerator();else s=this._buildEnumerator(this._getItems.bind(this),this._filterMap.map(function(){return true;}),this._sortMap);if(s.setCurrent(t),s.getCurrent()===t||t.isRoot()){var o;while(s.moveNext()){if(o=s.getCurrent(),!(o instanceof i))continue;if(o.getParent()===t)n.push(o);else if(o.getLevel()===t.getLevel())break;}}this._childrenMap[r]=n;}return this._childrenMap[r];},_getNearbyItem:function(t,r,i,n){var s=i?'moveNext':'movePrevious',o=r&&r.getParent&&r.getParent()||this.getRoot(),a=true,h=t.getCurrent(),l=false,u,_;t.setCurrent(r);while(a&&!l){if(a=t[s](),_=t.getCurrent(),n&&_ instanceof e){_=void 0;continue;}l=_?_.getParent()===o:false,u=a&&l?_:void 0;}return t.setCurrent(h),u;},_moveTo:function(t){var e=this._getCursorEnumerator(),r=this.getCurrent(),i=this._getNearbyItem(e,r,t,true),n=!!i;if(n)this.setCurrent(i);else e.setCurrent(r);return n;},_notifyItemsParent:function(t,e,r){if(r.hasOwnProperty(this.getParentProperty()))this._notifyItemsParentByItem(t.getParent()),this._notifyItemsParentByItem(e);},_notifyItemsParentByItem:function(t){while(t!==this.getRoot())this.notifyItemChange(t,{children:[]}),t=t.getParent();}}),u=function(t,e,r,i,n,s){var o=this.instance._getItems().filter(function(t){return t.isNode&&t.isNode();}),a=this.instance._getItemsState(o),h=this.instance._startUpdateSession();this.instance._reIndex(),this.prev(t,e,r,i,n,s),this.instance._finishUpdateSession(h,false),this.instance._checkItemsDiff(h,o,a);},_=function(t,e,r,i){this.instance._reIndex(),this.prev(t,e,r,i);};return h.register('display.tree',l),l;}(exports['WS.Data/Display/Collection'],exports['WS.Data/Display/GroupItem'],exports['WS.Data/Display/CollectionItem'],exports['WS.Data/Display/TreeItem'],exports['WS.Data/Display/TreeChildren'],exports['WS.Data/Display/ItemsStrategy/AdjacencyList'],exports['WS.Data/Display/ItemsStrategy/MaterializedPath'],exports['WS.Data/Display/ItemsStrategy/Root'],require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/Flags',{configurable:true,get:function(){delete exports['WS.Data/Display/Flags'];return exports['WS.Data/Display/Flags']=function(e,t){'use strict';var s=e.extend([],{_moduleName:'WS.Data/Display/Flags',_itemModule:'display.flags-item',constructor:function e(t){if(e.superclass.constructor.call(this,t),!this._$collection._wsDataTypeIFlags)throw new TypeError(this._moduleName+': source collection should implement WS.Data/Type/IFlags');if(this._$collection._wsDataEntityObservableMixin)this._$collection.subscribe('onChange',this._onSourceChange);},destroy:function(){if(this._$collection._wsDataEntityObservableMixin&&!this._$collection.isDestroyed())this._$collection.unsubscribe('onChange',this._onSourceChange);s.superclass.destroy.call(this);},_bindHandlers:function(){s.superclass._bindHandlers.call(this),this._onSourceChange=i.onSourceChange.bind(this);}}),i={onSourceChange:function(e,t,s){var i=this.at(this.getIndexBySourceIndex(s));this.notifyItemChange(i,'selected');}};return t.register('display.flags',s),s;}(exports['WS.Data/Display/Collection'],require(deps[3]),exports['WS.Data/Display/FlagsItem']);}});
Object.defineProperty(exports,'WS.Data/Display/Enum',{configurable:true,get:function(){delete exports['WS.Data/Display/Enum'];return exports['WS.Data/Display/Enum']=function(e,t){'use strict';var n=e.extend([],{_moduleName:'WS.Data/Display/Enum',_onSourceChange:null,constructor:function e(t){if(e.superclass.constructor.call(this,t),!this._$collection._wsDataTypeIEnum)throw new TypeError(this._moduleName+': source collection should implement WS.Data/Type/IEnum');if(this._getCursorEnumerator().setPosition(this.getIndexBySourceIndex(this._$collection.get())),this._$collection._wsDataEntityObservableMixin)this._$collection.subscribe('onChange',this._onSourceChange);},destroy:function(){if(this._$collection._wsDataEntityObservableMixin&&!this._$collection.isDestroyed())this._$collection.unsubscribe('onChange',this._onSourceChange);n.superclass.destroy.call(this);},_bindHandlers:function(){n.superclass._bindHandlers.call(this),this._onSourceChange=i.onSourceChange.bind(this);},_notifyCurrentChange:function(e,t,i,o){var s=null;if(i>-1)s=this.getSourceIndexByIndex(i);this._$collection.set(s),n.superclass._notifyCurrentChange.apply(this,arguments);},_getSourceIndex:function(e){var t=this._$collection.getEnumerator(),n=0;if(e>-1)while(t.moveNext()){if(n===e)return t.getCurrentIndex();n++;}return-1;},_getItemIndex:function(e){var t=this._$collection.getEnumerator(),n=0;while(t.moveNext()){if(t.getCurrentIndex()==e)return n;n++;}return-1;}}),i={onSourceChange:function(e,t){this.setCurrentPosition(this.getIndexBySourceIndex(t));}};return t.register('display.enum',n),n;}(exports['WS.Data/Display/Collection'],require(deps[3]));}});
Object.defineProperty(exports,'WS.Data/Display/Search',{configurable:true,get:function(){delete exports['WS.Data/Display/Search'];return exports['WS.Data/Display/Search']=function(t,a,e){'use strict';var s=t.extend({_moduleName:'WS.Data/Display/Search',constructor:function t(a){t.superclass.constructor.call(this,a);},_wrapItemsStrategy:function(){if(s.superclass._wrapItemsStrategy.call(this),this._itemsStrategy&&!(this._itemsStrategy instanceof a))this._itemsStrategy=new a(this._itemsStrategy);}});return e.register('display.search',s),s;}(exports['WS.Data/Display/Tree'],exports['WS.Data/Display/ItemsStrategy/Search'],require(deps[3]));}});
define('WS.Data/Display/Display', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/ObservableMixin','WS.Data/Di'], function() {return exports['WS.Data/Display/Display'];});
define('WS.Data/Display/CollectionItem', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di'], function() {return exports['WS.Data/Display/CollectionItem'];});
define('WS.Data/Display/ItemsStrategy/Abstract', ['WS.Data/Entity/Abstract','WS.Data/Di'], function() {return exports['WS.Data/Display/ItemsStrategy/Abstract'];});
define('WS.Data/Display/CollectionEnumerator', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin'], function() {return exports['WS.Data/Display/CollectionEnumerator'];});
define('WS.Data/Display/IBindCollection', ['WS.Data/Collection/IBind'], function() {return exports['WS.Data/Display/IBindCollection'];});
define('WS.Data/Display/Breadcrumbs', ['WS.Data/Entity/IObject','Core/core-extend'], function() {return exports['WS.Data/Display/Breadcrumbs'];});
define('WS.Data/Display/ItemsStrategy/Root', ['WS.Data/Entity/Abstract'], function() {return exports['WS.Data/Display/ItemsStrategy/Root'];});
define('WS.Data/Display/TreeItem', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di','WS.Data/Display/CollectionItem'], function() {return exports['WS.Data/Display/TreeItem'];});
define('WS.Data/Display/FlagsItem', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di','WS.Data/Display/CollectionItem'], function() {return exports['WS.Data/Display/FlagsItem'];});
define('WS.Data/Display/ItemsStrategy/Direct', ['WS.Data/Entity/Abstract','WS.Data/Di','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem'], function() {return exports['WS.Data/Display/ItemsStrategy/Direct'];});
define('WS.Data/Display/ItemsStrategy/MaterializedPath', ['WS.Data/Entity/Abstract','WS.Data/Di','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Utils'], function() {return exports['WS.Data/Display/ItemsStrategy/MaterializedPath'];});
define('WS.Data/Display/GroupItem', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di','WS.Data/Display/CollectionItem'], function() {return exports['WS.Data/Display/GroupItem'];});
define('WS.Data/Display/ItemsStrategy/Search', ['WS.Data/Entity/Abstract','WS.Data/Entity/IObject','Core/core-extend','WS.Data/Display/Breadcrumbs'], function() {return exports['WS.Data/Display/ItemsStrategy/Search'];});
define('WS.Data/Display/ItemsStrategy/Group', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem'], function() {return exports['WS.Data/Display/ItemsStrategy/Group'];});
define('WS.Data/Display/LoadableTreeItem', ['WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di','WS.Data/Display/CollectionItem','WS.Data/Display/TreeItem','WS.Data/Query/IQueryable','WS.Data/Collection/ISourceLoadable','WS.Data/Utils'], function() {return exports['WS.Data/Display/LoadableTreeItem'];});
define('WS.Data/Display/TreeChildren', ['WS.Data/Collection/List','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Di','WS.Data/Display/CollectionItem','WS.Data/Display/TreeItem'], function() {return exports['WS.Data/Display/TreeChildren'];});
define('WS.Data/Display/ItemsStrategy/AdjacencyList', ['WS.Data/Entity/Abstract','WS.Data/Di','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Entity/SerializableMixin','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/GroupItem','WS.Data/Shim/Set','WS.Data/Shim/Map','WS.Data/Utils'], function() {return exports['WS.Data/Display/ItemsStrategy/AdjacencyList'];});
define('WS.Data/Display/Collection', ['WS.Data/Collection/IEnumerable','WS.Data/Collection/IList','WS.Data/Collection/EventRaisingMixin','WS.Data/Entity/SerializableMixin','WS.Data/Collection/IBind','WS.Data/Display/IBindCollection','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin','WS.Data/Display/CollectionEnumerator','WS.Data/Entity/ObservableMixin','WS.Data/Di','WS.Data/Display/Display','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/ItemsStrategy/Group','WS.Data/Functor/Compute','WS.Data/Shim/Set','WS.Data/Utils'], function() {return exports['WS.Data/Display/Collection'];});
define('WS.Data/Display/Ladder', ['WS.Data/Collection/IBind','WS.Data/Collection/IEnumerable','WS.Data/Collection/IList','WS.Data/Collection/EventRaisingMixin','WS.Data/Entity/SerializableMixin','WS.Data/Display/IBindCollection','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin','WS.Data/Display/CollectionEnumerator','WS.Data/Entity/ObservableMixin','WS.Data/Di','WS.Data/Display/Display','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/ItemsStrategy/Group','WS.Data/Functor/Compute','WS.Data/Shim/Set','WS.Data/Utils','WS.Data/Display/Collection','WS.Data/Shim/Map'], function() {return exports['WS.Data/Display/Ladder'];});
define('WS.Data/Display/Tree', ['WS.Data/Collection/IEnumerable','WS.Data/Collection/IList','WS.Data/Collection/EventRaisingMixin','WS.Data/Entity/SerializableMixin','WS.Data/Collection/IBind','WS.Data/Display/IBindCollection','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin','WS.Data/Display/CollectionEnumerator','WS.Data/Entity/ObservableMixin','WS.Data/Di','WS.Data/Display/Display','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/ItemsStrategy/Group','WS.Data/Functor/Compute','WS.Data/Shim/Set','WS.Data/Utils','WS.Data/Display/Collection','WS.Data/Display/TreeItem','WS.Data/Collection/List','WS.Data/Display/TreeChildren','WS.Data/Shim/Map','WS.Data/Display/ItemsStrategy/AdjacencyList','WS.Data/Display/ItemsStrategy/MaterializedPath','WS.Data/Display/ItemsStrategy/Root'], function() {return exports['WS.Data/Display/Tree'];});
define('WS.Data/Display/Flags', ['WS.Data/Collection/IEnumerable','WS.Data/Collection/IList','WS.Data/Collection/EventRaisingMixin','WS.Data/Entity/SerializableMixin','WS.Data/Collection/IBind','WS.Data/Display/IBindCollection','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin','WS.Data/Display/CollectionEnumerator','WS.Data/Entity/ObservableMixin','WS.Data/Di','WS.Data/Display/Display','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/ItemsStrategy/Group','WS.Data/Functor/Compute','WS.Data/Shim/Set','WS.Data/Utils','WS.Data/Display/Collection','WS.Data/Display/FlagsItem'], function() {return exports['WS.Data/Display/Flags'];});
define('WS.Data/Display/Enum', ['WS.Data/Collection/IEnumerable','WS.Data/Collection/IList','WS.Data/Collection/EventRaisingMixin','WS.Data/Entity/SerializableMixin','WS.Data/Collection/IBind','WS.Data/Display/IBindCollection','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin','WS.Data/Display/CollectionEnumerator','WS.Data/Entity/ObservableMixin','WS.Data/Di','WS.Data/Display/Display','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/ItemsStrategy/Group','WS.Data/Functor/Compute','WS.Data/Shim/Set','WS.Data/Utils','WS.Data/Display/Collection'], function() {return exports['WS.Data/Display/Enum'];});
define('WS.Data/Display/Search', ['WS.Data/Collection/IEnumerable','WS.Data/Collection/IList','WS.Data/Collection/EventRaisingMixin','WS.Data/Entity/SerializableMixin','WS.Data/Collection/IBind','WS.Data/Display/IBindCollection','WS.Data/Entity/Abstract','WS.Data/Entity/OptionsMixin','WS.Data/Collection/IEnumerator','WS.Data/Collection/IndexedEnumeratorMixin','WS.Data/Display/CollectionEnumerator','WS.Data/Entity/ObservableMixin','WS.Data/Di','WS.Data/Display/Display','WS.Data/Entity/IInstantiable','WS.Data/Entity/InstantiableMixin','WS.Data/Display/CollectionItem','WS.Data/Display/GroupItem','WS.Data/Display/ItemsStrategy/Abstract','WS.Data/Display/ItemsStrategy/Direct','WS.Data/Display/ItemsStrategy/Group','WS.Data/Functor/Compute','WS.Data/Shim/Set','WS.Data/Utils','WS.Data/Display/Collection','WS.Data/Display/TreeItem','WS.Data/Collection/List','WS.Data/Display/TreeChildren','WS.Data/Shim/Map','WS.Data/Display/ItemsStrategy/AdjacencyList','WS.Data/Display/ItemsStrategy/MaterializedPath','WS.Data/Display/ItemsStrategy/Root','WS.Data/Display/Tree','WS.Data/Entity/IObject','Core/core-extend','WS.Data/Display/Breadcrumbs','WS.Data/Display/ItemsStrategy/Search'], function() {return exports['WS.Data/Display/Search'];});
})()