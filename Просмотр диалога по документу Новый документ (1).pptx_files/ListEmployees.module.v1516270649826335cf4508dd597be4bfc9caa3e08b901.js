define("js!SBIS3.Employee.ListEmployees",["Core/core-instance","Deprecated/BLObject","Deprecated/SerializatorSBIS","Deprecated/Record","Core/constants","Deprecated/helpers/transport-helpers","Core/helpers/string-helpers","Deprecated/helpers/fast-control-helpers","Deprecated/helpers/collection-helpers","Core/UserConfig","Core/moduleStubs","Core/Context","Core/IoC","Core/ParallelDeferred","Core/Deferred","optional!js!SBIS3.EDO.Photo","js!SBIS3.Employee.Util","js!SBIS3.Staff.StaffBrowser.RenderHelper","js!SBIS3.Staff.Employee","html!SBIS3.Employee.ListEmployees/rowTemplate","html!SBIS3.Employee.ListEmployees/departmentTemplate","js!SBIS3.Staff.StaffFunction","js!SBIS3.ENGINE.RecordsMarkPlugin","js!SBIS3.Staff.StaffBrowser.PositioningMixin","SBIS.VideoCall/Utils","i18n!SBIS3.Employee.ListEmployees","css!Resources/Sotrudniki/Sotrudniki/Employee","css!SBIS3.Employee.ListEmployees"],function(e,t,n,o,r,i,s,l,a,u,f,c,d,g,h,p,m,C,y,S,v,E,R,k,I){var w,b=rk("Нет названия"),B=function(){return r.modules.hasOwnProperty("Зарплата и Кадры")};function P(e,r,i,s){if(null===s||~s.indexOf("СтруктураПредприятия")||~s.indexOf("ОфисПродаж")){var a=null,u=new g,f=null;if(null!==s&&void 0!==s)a=parseInt(s,10);for(var c in i)if(i.hasOwnProperty(c))if(-1===String(i[c].getKey()).indexOf("СтруктураПредприятия")){var d=e.getQuery()["Контрагент"],h,p=new o;if(d=d?parseInt(d,10):d,-2===d||!d)h=new t("СвязиПользователя"),p.addColumn("@СвязиПользователя",o.FIELD_TYPE_INTEGER),p.addColumn("РабочаяГруппа",o.FIELD_TYPE_INTEGER),p.set("РабочаяГруппа",a),p.set("@СвязиПользователя",i[c].getKey());else h=new t("ДолжностьСотрудника"),p.addColumn("@ДолжностьСотрудника",o.FIELD_TYPE_INTEGER),p.addColumn("РабочаяГруппа",o.FIELD_TYPE_INTEGER),p.set("РабочаяГруппа",a),p.set("@ДолжностьСотрудника",i[c].getKey());u.push(h.call("Записать",{"Запись":n.serialize(p)},t.RETURN_TYPE_ASIS))}else{var m=new o;m.addColumn("@Лицо",o.FIELD_TYPE_INTEGER),m.set("@Лицо",parseInt(i[c].getKey(),10)),m.addColumn("Раздел",o.FIELD_TYPE_HIERARCHY),m.set("Раздел",a),m.set("Раздел@",true),u.push(new t("СтруктураПредприятия").call("Записать",{"Запись":n.serialize(m)},t.RETURN_TYPE_ASIS))}u.done(),u.getResult().addCallback(function(){if(s){var t=e.getContainer().find('tr[rowkey="'+s+'"]');e.setActiveElement(t,true)}e.reload();var n=function(){this.unsubscribe("onAfterRender",n),this.removeSelection()};e.subscribe("onAfterRender",n)}).addErrback(function(t){l.message(rk("Во время перемещения записей произошли ошибки:")+" "+t.message,{opener:e})})}}function D(e){var t=e.getSelection(),n=true;return $.each(t,function(e,t){var o=t.hasColumn("Раздел@")&&t.get("Раздел@")?true:false;if(!o&&t.hasColumn("ДолжностьСотрудника")&&null!==t.get("ДолжностьСотрудника")||o)n=false}),n}function O(e,t,n){if(0!==e.length){var o=e.attr("recKey"),r=e.attr("face"),i=n.getLinkedContext();if(!e.hasClass("noNeedPopUp"))var s={nameControl:n.getId()+"_"+String(o).replace(",","")+"_"+String(r),delay:1e3},l={facePk:r,needSendMessage:i.getValue("НеОтправлятьСообщения")?false:void 0}}}function L(e,t){return v(C.prepareCfgRenderDepartment(e,t))}return w={setResetOnOpen:function(){this.setUseKbLayoutRevert(true),this.setResetOnOpen(true)},HIERARCHY_VIEW_TYPE_FILTER_PARAM:"Hierarchy",LIST_VIEW_TYPE_FILTER_PARAM:"List",initFieldConvertToSuggest:function(){this.getSuggest().setUseKbLayoutRevert(true)},initUsersList:function(){var e=this.getTopParent().getContext().getValue("РежимОкнаСотрудников"),t=this;if("Список"!==e)this.toggleColumn("МобильныйТелефон",false),this.toggleColumn("Поощрения",false),this.toggleColumn("Взыскания",false);if(!B())this.toggleColumn("Поощрения",false),this.toggleColumn("Взыскания",false);else if("Список"===e&&B())w.onInitCadresBrowWithBenFine.apply(t)},renderPhotoNew:function(e){a.forEach(e.getContainer().find("img[photo]"),function(t){O($(t),32,e)})},renderPhoto:function(e,t,n,o){var r=this.getLinkedContext(),i=this,s=i.getContainer().hasClass("photo24")?24:32,l=function(e){O($(e).find("img[photo]"),s,i)};if(o)a.forEach(o,l);else a.forEach(this.getContainer().find("[rowkey]"),l);i.recalcBrowserOnDOMChange()},renderRowInfoEmployeeInSuggest:function(e,t){var n=t.find(".ws-browser-cell-container"),o=function e(t,n){if(!n||!n.length)return;for(var o=0;o<n.length;o++)if(t.hasColumn(n[o]))return s.escapeHtml(t.get(n[o]));return},r=o(e,["ПодразделениеПолныйПуть","РП.ПодразделениеПолныйПуть"]);return r=""===r?rk("Подразделение без названия"):r,r=void 0===r||null===r?"":r,n.empty(),n.append(w.createBlockInfoEmployee(this,{"ИдО":e.getKey(),"Должность":o(e,["Должность","Должность.Название"]),"ИдФото":e.get("ФотоБольшое"),"Лицо":o(e,["Лицо","@Лицо","ЧастноеЛицо","ЧастноеЛицо.@Лицо"]),"ФИО":o(e,["РП.ФИО","Название"]),"Руководитель":null,Online:e.hasColumn("Online")?e.get("Online"):null,atWorkplace:e.hasColumn("atWorkplace")?e.get("atWorkplace"):null,ActivityData:e.hasColumn("ActivityData")?e.get("ActivityData"):null,"Активность":e.hasColumn("Активность")?e.get("Активность"):null,"Подразделение":r,"ДатаРождения":e.hasColumn("ДатаРождения")?e.get("ДатаРождения"):false,"Метка":e.hasColumn("Метка")?e.get("Метка"):false,"РасшифровкаМетки":e.hasColumn("РасшифровкаМетки")?e.get("РасшифровкаМетки"):false,"Работает":e.hasColumn("Работает")?e.get("Работает"):null,"ДолжностьСотрудника":e.hasColumn("ДолжностьСотрудника")?e.get("ДолжностьСотрудника"):true},{"ОтобразитьПодразделение":true,"БезФото":false,"ТекущаяЗадача":"Suggest"})),t},onBeforeShow:function(){this.getContainer().addClass("listEmpl-float-or-general")},onBeforeLoadBrowsEmpl:function(){},onUserListPrepareFilterMove:function(e,t){if("СтрокаПоиска"in t)delete t["СтрокаПоиска"]},createDivPhoto:function(e,t,n,o,r,i){return $(p.createPhotoFace(e,!r?{Id:n}:{Id:r,service:"СервисПрофилей"},o||void 0===o?true:false,i?"employee_photoBig_wrap":"employee_photo_wrap"))},createBlockInfoEmployeeHelpers:function(e,t,n){if(!n)n={};var o=t.get("РП.Сотрудник.Название");switch(n["ModeName"]){case"ShortName":o=t.get("РП.Сотрудник.НазваниеКраткое");break;case"FirstLastName":o=t.get("РП.Сотрудник.ФамилияИмя")}return o=n["ФИОКраткое"]?t.get("РП.Сотрудник.НазваниеКраткое"):o,this.createBlockInfoEmployee(e,{"ИдО":t.getKey(),"Должность":false!==n["ОтобразитьДолжность"]?t.get("РП.Сотрудник.Должность"):null,"ИдФото":t.get("РП.Сотрудник.ФотоБольшое"),"Лицо":t.get("РП.Сотрудник.Лицо"),"ФИО":o,"Руководитель":null,"Активность":t.get("РП.Сотрудник.Активность"),"Подразделение":t.get("РП.Сотрудник.Подразделение")},n)},createBlockInfoEmployee:function(e,t,n,o){return $(S(C.prepareCfgEmployeeRender(e,t,n,o)))},renderColumnEmployeeStaffChoice:function(e,t){if(!e||!t)return;var n=this.getQuery(),r;if(e.get("Раздел@"))r=w.renderColumnDepartment.apply(this,[e,t,{"ОтобразитьОпцииСтроки":true}]);else{var i=e.cloneRecord(false),s="FloatStaff";r=w.renderColumnEmployee.apply(this,[i,t,s,n["Контрагент"],{"ОтобразитьОпцииСтроки":true}])}if(e.hasColumn("ColorMarkCode")&&e.get("ColorMarkCode")||0===e.get("ColorMarkCode")){var l=new o;l.addColumn("Code",o.FIELD_TYPE_STRING),l.set("Code",e.get("ColorMarkCode")),R.colorizeElement(l,r.find(".listEmpl-fio"))}return r},renderPhoneColumnEmployeeStaffChoice:function(e){var t="";if(e.get("РабочийТелефон"))t='<div class="listEmpl-phone-text" style="display: inline-block; margin-top: -2px;">'+e.get("РабочийТелефон")+"</div>";return t},renderColumnEmployee:function(e,t,n,o,r){var i=s.escapeHtml(e.get("Название")),l=this.getQuery(),a=m.coalesceFunc(l["СтрокаПоиска"],l["КлючевоеСлово"]),u,r=r||{};return u=w.createBlockInfoEmployee(this,{"ИдО":e.getKey(),"Должность":s.escapeHtml(e.get("Должность")),"ИдФото":e.get("ФотоБольшое"),"Лицо":e.get("Лицо"),"ФИО":i,"Руководитель":e.get("Руководитель"),"Активность":e.get("Активность"),Online:e.hasColumn("Online")?e.get("Online"):null,atWorkplace:e.hasColumn("atWorkplace")?e.get("atWorkplace"):null,ActivityData:e.hasColumn("ActivityData")?e.get("ActivityData"):null,"Подразделение":e.get("ПодразделениеПолныйПуть"),"ДатаРождения":e.hasColumn("ДатаРождения")?e.get("ДатаРождения"):false,"Метка":e.hasColumn("Метка")?e.get("Метка"):false,"РасшифровкаМетки":e.hasColumn("РасшифровкаМетки")?e.get("РасшифровкаМетки"):false,"МеткаДатаКонца":e.hasColumn("МеткаДатаКонца")?e.get("МеткаДатаКонца"):null,"МеткаТипСостояния":e.hasColumn("МеткаТипСостояния")?e.get("МеткаТипСостояния"):null,"Работает":e.hasColumn("Работает")?e.get("Работает"):null,"Заблокирован":e.hasColumn("Заблокирован")?e.get("Заблокирован"):false,"ДолжностьСотрудника":e.hasColumn("ДолжностьСотрудника")?e.get("ДолжностьСотрудника"):true,"Контрагент":o,"Пользователь":e.hasColumn("Пользователь")?e.get("Пользователь"):null,"Телефон":e.hasColumn("РабочийТелефон")?e.get("РабочийТелефон"):null,"СтрокаПоиска":a,"ДатаУвольнения":e.hasColumn("ДатаУвольнения")?e.get("ДатаУвольнения"):null,"ДатаПринятия":e.hasColumn("ДатаПринятия")?e.get("ДатаПринятия"):null,"Пол":e.hasColumn("Пол")?e.get("Пол"):"Муж"},{"ОтобразитьПодразделение":this.isTree()||this.isHierarchy()?false:true,"ТекущаяЗадача":n,"ОтобразитьОпцииСтроки":"Персонал"==n||r["ОтобразитьОпцииСтроки"]?true:false,"ОтобразитьТелефон":"mainSearch"===n?true:false,PhotoSize:40}),u},renderNameDepartment:function(e,t){return m.coalesceFunc(s.escapeHtml(e.get("Название")),b)},renderColumnDepartment:function(e,t,n){var o=this.getQuery()["СтрокаПоиска"]||null;return w.createBlockInfoDepartment(e,{searchString:o})},createBlockInfoDepartment:L,onRenderStringFilter:function(e,t){var n=t["ФильтрРаботающие"]?t["ФильтрРаботающие"]:"",o="";if("true"==e["Доступ"])o=rk("Доступ разрешен");if("false"==e["Доступ"])o=rk("Без доступа");if(o)n+=n?", "+o:o;if(e["ФильтрДатаПериодПИВ"]&&"month"!=e["ФильтрДатаПериодПИВ"]){var r=t["ФильтрДатаПериодПИВ"];if("period"==e["ФильтрДатаПериодПИВ"]&&(e["ФильтрДатаПИВС"]||e["ФильтрДатаПИВП"])){var i=[];if(e["ФильтрДатаПИВС"])i.push(new Date(e["ФильтрДатаПИВС"]).strftime("с %d.%m.%Y"));if(e["ФильтрДатаПИВП"])i.push(new Date(e["ФильтрДатаПИВП"]).strftime("по %d.%m.%Y"));r=i.join(" ")}n+=(n?", ":"")+rk("Поощрения и взыскания")+" "+r}if(false===e["ПоказыватьРабочиеГруппы"])n+=n?", "+rk("Без разбиения по рабочим группам"):rk("Без разбиения по рабочим группам");if(true===e["ФлагФильтрацииПоЗпПроекту"])n+=n?", "+rk("Без учета банка/кассы"):rk("Без учета банка/кассы");return n},changeFilterInListEmployee:function(e,t,n){w._setParamFilterInUserConfig(t,this.getName())},_setParamFilterInUserConfig:function(e,t){var n=c.global,o=u,r,i={},s={};if("Фильтр сотрудников в моем кабинете"==t)i={"ФильтрРаботающие":"МойКабинет.ФильтрСотрудникРаботает","Доступ":"МойКабинет.ФильтрСотрудниковДоступ"};if("Фильтр сотрудников в конфигурации"==t)i={"ФильтрРаботающие":"Сотрудники.ФильтрРаботающие","Доступ":"Сотрудники.ФильтрДоступ"};for(r in i)if(i.hasOwnProperty(r))s[i[r]]=e[r]?e[r]instanceof Date?e[r].toSQL(null):String(e[r]):null;for(r in s){if(!s.hasOwnProperty(r))continue;if(n.getValue(r)!=s[r])if(null===s[r])n.removeValue(r),o.removeParam(r);else n.setValue(r,s[r]),o.setParam(r,s[r])}},loadUsers:function(){var e=this.getLinkedContext(),t=this;if(!e.getValueSelf("wasLoaded")){if(e.setValueSelf("wasLoaded",true,true),e.getValue("КореньСправочникаСотрудников"))return void t.setRootNode([e.getValue("КореньСправочникаСотрудников")+",СтруктураПредприятия"]);t.reload()}},OnReadyUserBrowser:function(){var t=this;this.subscribe("onBeforeRead",function(e,t){if(t.indexOf&&-1!==t.indexOf("СтруктураПредприятия"))return;this.getParent().getLinkedContext().setValue("currentUserId",parseInt(t,10))});var n=this,o=n.getTopParent(),r=e.instanceOfModule(o,"Deprecated/Controls/DialogSelector/FloatAreaSelector")||e.instanceOfModule(o,"Deprecated/Controls/DialogSelector/DialogSelector");n.addRowOption({title:rk("Отправить сообщение"),icon:"sprite:icon-16 icon-EmptyMessage icon-primary",callback:function(e,n){if(e&&e.hasColumn("Раздел@")&&!e.get("Раздел@"))y.sendMsg(e.get("ИдСервисаПрофилей"),t);else sendMsgDivision(t,e)},name:"sendMsg",before:"delete",isMainOption:true}),I.needRenderVideoCallButton()&&n.addRowOption({title:rk("Видеозвонок"),icon:"sprite:icon-16 icon-VideoCall icon-primary",callback:function(e){I.initCall(e.get("Пользователь"),e.get("НазваниеКраткое"))},name:"call",isMainOption:true});var i=this.findParent(function(t){return e.instanceOfModule(t,"SBIS3.Employee.StaffChoice.List")});if(r&&i&&!e.instanceOfModule(i.getParent(),"SBIS3.Contragents.DialogEmployeesTab"))n.addRowOption({title:rk("выбрать"),name:"chooseUser",linkText:rk("выбрать"),callback:function(e,t){var o=$(t).attr("rowkey"),r=n.getRecordSet().getRecordByPrimaryKey(o);n.confirmSelection([r])},before:"sendMsg",icon:"",isMainOption:true})},onRowUserOptions:function(t,n,o,r){var i=[],s=n&&n.hasColumn("Раздел@")&&n.get("Раздел@")?true:false,l=D(this),a=s&&(!n.get("Контрагент")||-1===n.get("Контрагент").indexOf("НашаОрганизация")&&-1===n.get("Контрагент").indexOf("ГруппаФилиалов")),u=this.getTopParent(),f=e.instanceOfModule(u,"Deprecated/Controls/DialogSelector/FloatAreaSelector")||e.instanceOfModule(u,"Deprecated/Controls/DialogSelector/DialogSelector");if(t.getResult())i=t.getResult();if(s||this.getLinkedContext().getValue("НеОтправлятьСообщения")||!n.get("Пользователь")||n.get("Заблокирован"))i.push("sendMsg","call");if(!s||f)i.push("showDept");if(!s&&r["chooseUser"])i.push("chooseUser");if(s&&"leaf"===this._options.selectionType)i.push("chooseUser");if(!l)i.push("move");if(!a||!n.get("ДатаУвольнения"))i.push("recover");if(f||this.getLinkedContext().getValueSelf("ПраваСпискаСотрудников")&&false===this.getLinkedContext().getValueSelf("ПраваСпискаСотрудников")["Наша компания"]&&-1===this.getQuery()["Контрагент"])i.push("showDept");if(i.push("edit"),!this.isHierarchy())i.push("addFolder","addItem");t.setResult(i)},onInitStrFound:function(){this.setValue(null)},onBeforeMove:function(e){if(-2!==parseInt(this.getQuery()["Контрагент"],10))e.setResult(false)},onSimpleMove:function(e,t,n){e.setResult(false),P(this,e,t,n instanceof o?n.getKey():n)},setRootNode:function(e,t,n){var o=this.getRecordSet().getResults(),r,i=this.getQuery();if(!o||!o.hasColumn("Корень"))return;if(i["СтрокаПоиска"]&&"Без разворота"==i["Разворот"])return;if(r=this.getRecordSet().getResults().get("Корень"),r&&!n)r+=",СтруктураПредприятия";if(!this.getCurrentRootNode()&&(this.getRootNode()!=r||r))this.setRootNode(r,true)},setRootNodeForDepts:function(e,t){w.setRootNode.apply(this,[e,t,true])},onBeforeCreateDeparment:function(e,t,n){var o=t;if(o instanceof Array)o=o[0];var r=o?parseInt(o,10):void 0,s,l=n["Контрагент"]>0?n["Контрагент"]:void 0,a=this;i.newRecordSet("СтруктураПредприятия","СписокДляКарточки",{},"ReaderUnifiedSBIS",false,void 0,void 0).addCallback(function(e){function t(e){a.getLinkedContext().setValueSelf("creating_struct",true),e.set("Раздел",o),e.setKey(e.getKey()+",СтруктураПредприятия"),e.commit("Раздел"),s.callback(e)}e.createRecord({"Контрагент":l,"Раздел":{hierarchy:[[r],true]},"ВызовИзБраузера":true,"Тип":n["Тип"]},"БазовоеРасширение").addCallback(t).addErrback(function(e){s.errback(e)})}),s=new h,e.setResult(s)},addButtonSelect:function(){var e=this;e.addRowOption({title:rk("выбрать"),name:"chooseEmployee",linkText:rk("выбрать"),callback:function(t,n){var o=$(n).attr("rowkey"),r=e.getRecordSet().getRecordByPrimaryKey(o);e.confirmSelection([r])},icon:"",isMainOption:true})},onSetFilterStrSearch:function(){this.subscribe("onBeforeApplyFilter",function(e,t){if(this.getLinkedBrowser().isTree())this.getLinkedBrowser().applyTurnTree(true,true);e.setResult(true)}),this.subscribe("onChange",function(e,t){if(!t&&this.getLinkedBrowser().isTree())this.getLinkedBrowser().applyTurnTree(false,true)})},onInitChooseEmplForPosition:function(){this.getLinkedContext().setValueSelf("ВыборСотрудника.КлючСотрудник",true,true)},isPosition:function(){var e=this;c.global.setValue("Персонал.ПозицияУстановлена",false);var t=function(){var t=e,n=t.getRecordSet().getResults(),o,r=t.getQuery(),i=c.global.getValue("Персонал.ПозицияУстановлена");if(n&&n.hasColumn("Позиционирование"))o=n.get("Позиционирование");if(o){if(true===i&&null===r["Раздел"])o="-1";k.savePosition(o)}};this.unsubscribe("onFolderOpen",t),this.subscribe("onFolderOpen",t);var n=function(e,t){var n=this.getQuery();if(null===t)n["Раздел"]=null,n["Позиционирование"]="-1",e.setResult(n)};this.unsubscribe("onFolderEnter",n),this.subscribe("onFolderEnter",n)},getPosition:function(){var t=k.getPosition(),n=c.global.getValue("Персонал.ПозицияУстановлена");if(void 0!==t&&true===n)t="-1";if(void 0===t&&false===n)t=null;if(e.instanceOfModule(this,"Deprecated/Controls/TableView/TableView"))if(this.isTree())return this.getQuery()["Позиционирование"]="-1","-1";return t},openFolder:function(){var e=this,t=e.getRecordSet().getResults(),n,o=e.getQuery(),r=c.global.getValue("Персонал.ПозицияУстановлена");if(t&&t.hasColumn("Позиционирование"))n=t.get("Позиционирование");if(n){if(true===r&&null===o["Раздел"])n="-1";k.savePosition(n)}},openBranch:function(){var e=this,t=e.getRecordSet().getResults(),n,o=e.getQuery(),r=c.global.getValue("Персонал.ПозицияУстановлена");if(t&&t.hasColumn("Позиционирование"))n=t.get("Позиционирование");if(r)k.savePosition(n),c.global.setValue("Персонал.ПозицияУстановлена",true);else if(n){c.global.setValue("Персонал.ПозицияУстановлена",true),k.savePosition(n);var i=e.getQuery();if("-1"!==n)e.showBranch(n,false,true),i["Раздел"]=n;i["Позиционирование"]="-1",e.setQuery(i,void 0,void 0,void 0,true)}},showApplyVisible:function(){var e=this,t=e.getRecordSet().getResults(),n=false;if(null!==t&&t.get("Есть ограничение"))n=t.get("Есть ограничение");if(n)if(0===$("#isSetConstrainByVisible").length)e.getContainer().find("tfoot").append("<tr><td id = 'isSetConstrainByVisible' align='left' style='padding-left: 8px;'> Доступ к части подразделений запрещен правами </td></tr>")},initDepartmentHints:function(){var e=this,t;e.getContainer().find("tbody tr[rowkey]").each(function(){try{t=e.getRecordSet().getRecordByPrimaryKey($(this).attr("rowkey"))}catch(e){return}if(t.hasColumn("Лицо")&&t.get("Лицо")&&t.get("Раздел@")&&!e.isTree()){var n="user"+parseInt(t.getKey(),10);if($(this).attr("id")!=n)$(this).attr("id",n),E.prepareShowInfoByDivision.apply(e,[t.get("Лицо"),$(this),{hover:["span.icon-Folder","span.icon-OpenedFolder"]}])}})},onReadyOperationsPanel:function(){var e=this;e.subscribe("onBeforeShow",function(){if(e.getCurrentView().getLinkedContext().getValueSelf("isAllowMerge"))e.getChildControlByName("MyMergeDummy").setEnabled(false);else e.getChildControlByName("MyMerge").hide(),e.getChildControlByName("MyMergeDummy").hide();if(e.getCurrentView().isReadOnly())e.getChildControlByName("addColorMark").hide()})},initRowOptions:function(){var e=this,t=function(t,n){var o=e.getActiveRecord();switch(t.stopPropagation(),t.preventDefault(),n){case"sendMsg":y.sendMsg(o.get("ИдСервисаПрофилей"),e);break;case"call":y.call(o.get("Пользователь"),o.get("Название"));break;case"edit":e.sendCommand("edit");break;default:d.resolve("ILogger").log("SBIS3.Employee.ListEmployees",rk("Неверная команда для записи сотрудника или подразделения."))}};e.delegateUserEvent(".ws-browser-table-row","mouseenter",function(){$(this).find(".listEmpl-row-options-container").removeClass("ws-hidden")}),e.delegateUserEvent(".ws-browser-table-row","mouseleave",function(){var e=$(this).find(".listEmpl-row-options-container");if(!e.hasClass())e.addClass("ws-hidden")}),e.delegateUserEvent(".listEmpl-sendMsg","click",function(e){t(e,"sendMsg")}),e.delegateUserEvent(".listEmpl-call","click",function(e){t(e,"call")}),e.delegateUserEvent(".listEmpl-editDpt","click",function(e){t(e,"edit")})},onInitCadresBrowWithBenFine:function(){var e=this,t;f.requireModule("SBIS3.Staff.PivCardHandlers"),this.delegateUserEvent(".ben_fine","click",function(){if(t=e.getActiveRecord(),t)SBIS3.Staff.PivCardHandlers.openListPivEmployees(t,e,$(this).hasClass("benefit")?"Поощрение":"Взыскание");return false})},disableCtrlV:function(){this.subscribe("onKeyPressed",function(e,t){if((t.which==r.key.v||t.which==r.key.b)&&t.ctrlKey)e.setResult(false)})}}});
//# sourceMappingURL=ListEmployees.module.js.map